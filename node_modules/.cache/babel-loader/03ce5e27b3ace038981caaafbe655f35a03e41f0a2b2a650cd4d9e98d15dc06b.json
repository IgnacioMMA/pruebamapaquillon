{"ast":null,"code":"// src/components/Login.js - DISE√ëO OFICIAL MUNICIPALIDAD DE QUILL√ìN\nimport React,{useState}from'react';import PasswordRecovery from'./PasswordRecovery';import{signInWithEmailAndPassword,updatePassword,EmailAuthProvider,reauthenticateWithCredential,createUserWithEmailAndPassword,signOut}from'firebase/auth';import{auth,firestore}from'../config/firebase';import{doc,getDoc,updateDoc,query,where,collection,getDocs,setDoc}from'firebase/firestore';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Login=_ref=>{let{onLogin}=_ref;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[successMessage,setSuccessMessage]=useState('');const[showPassword,setShowPassword]=useState(false);// Estados para cambio de contrase√±a obligatorio\nconst[showChangePassword,setShowChangePassword]=useState(false);const[currentUser,setCurrentUser]=useState(null);const[newPassword,setNewPassword]=useState('');const[confirmPassword,setConfirmPassword]=useState('');const[oldPassword,setOldPassword]=useState('');const[showPasswordRecovery,setShowPasswordRecovery]=useState(false);const[showNewPassword,setShowNewPassword]=useState(false);const[showConfirmPassword,setShowConfirmPassword]=useState(false);// Paleta de colores oficial de Quill√≥n\nconst colors={primaryGreen:'#1B5E20',// Verde oscuro (escudo)\nsecondaryGreen:'#2E8B57',// Verde medio\nlightGreen:'#4CAF50',// Verde claro para hovers\ngold:'#FFD700',// Dorado principal\nlightGold:'#FFB74D',// Dorado claro para enlaces\ndarkGold:'#FFA000',// Dorado oscuro para hover\nwhite:'#FFFFFF',text:'#1B5E20',// Texto en verde oscuro\ntextLight:'#FFFFFF',// Texto claro\nerror:'#D32F2F',// Rojo error\nsuccess:'#388E3C',// Verde √©xito\nborder:'rgba(27, 94, 32, 0.2)',// Bordes verdes suaves\nbackground:'#F5F5F5'// Fondo gris muy claro\n};const handleLogin=async e=>{e.preventDefault();setLoading(true);setError('');setSuccessMessage('');const normalizedEmail=email.toLowerCase().trim();try{// PRIMERO: Verificar si existe una contrase√±a temporal en Firestore\nconst usersRef=collection(firestore,'users');const q=query(usersRef,where('email','==',normalizedEmail));const querySnapshot=await getDocs(q);if(!querySnapshot.empty){const userDoc=querySnapshot.docs[0];const userFirestoreData=userDoc.data();const userDocId=userDoc.id;// Verificar si hay contrase√±a temporal\nif(userFirestoreData.tempPassword){try{const tempPasswordDecoded=atob(userFirestoreData.tempPassword);if(password===tempPasswordDecoded){// Login exitoso con contrase√±a temporal\nawait updateDoc(doc(firestore,'users',userDocId),{lastLogin:new Date().toISOString()});if(userFirestoreData.requirePasswordChange===true){setCurrentUser({uid:userDocId,email:userFirestoreData.email,role:userFirestoreData.role,name:userFirestoreData.name,...userFirestoreData,isTempPasswordLogin:true});setOldPassword(password);setShowChangePassword(true);setLoading(false);return;}else{onLogin({uid:userDocId,email:userFirestoreData.email,role:userFirestoreData.role,name:userFirestoreData.name,...userFirestoreData});setLoading(false);return;}}}catch(e){// Error decodificando contrase√±a temporal\n}}}// SEGUNDO: Intentar login normal con Firebase Auth\ntry{const userCredential=await signInWithEmailAndPassword(auth,normalizedEmail,password);const user=userCredential.user;const userDoc=await getDoc(doc(firestore,'users',user.uid));if(userDoc.exists()){const userData=userDoc.data();if(userData.requirePasswordChange||userData.firstLogin!==false){if(userData.tempPassword){await updateDoc(doc(firestore,'users',user.uid),{tempPassword:null,lastTempPassword:userData.tempPassword});}setCurrentUser({uid:user.uid,email:user.email,role:userData.role,name:userData.name,...userData});setOldPassword(password);setShowChangePassword(true);}else{await updateDoc(doc(firestore,'users',user.uid),{lastLogin:new Date().toISOString()});onLogin({uid:user.uid,email:user.email,role:userData.role,name:userData.name,...userData});}}else{setError('No se encontraron datos del usuario');}}catch(authError){// Manejo de errores de autenticaci√≥n con fallback\nif(authError.code==='auth/invalid-credential'||authError.code==='auth/wrong-password'){const usersRef=collection(firestore,'users');const q=query(usersRef,where('email','==',normalizedEmail));const querySnapshot=await getDocs(q);if(!querySnapshot.empty){const userDoc=querySnapshot.docs[0];const userFirestoreData=userDoc.data();const userDocId=userDoc.id;if(userFirestoreData.tempPassword){try{const storedPassword=atob(userFirestoreData.tempPassword);if(password===storedPassword){if(userFirestoreData.needsAuthSync===true){try{await createUserWithEmailAndPassword(auth,normalizedEmail,password);const firebaseUser=auth.currentUser;if(firebaseUser&&firebaseUser.uid!==userDocId){await setDoc(doc(firestore,'users',firebaseUser.uid),{...userFirestoreData,tempPassword:null,needsAuthSync:false,authPasswordSynced:true,requirePasswordChange:false,lastLogin:new Date().toISOString()});await signOut(auth);onLogin({uid:firebaseUser.uid,email:userFirestoreData.email,role:userFirestoreData.role,name:userFirestoreData.name,...userFirestoreData,requirePasswordChange:false});}else{await updateDoc(doc(firestore,'users',userDocId),{tempPassword:null,needsAuthSync:false,authPasswordSynced:true,requirePasswordChange:false,lastLogin:new Date().toISOString()});if(auth.currentUser){await signOut(auth);}onLogin({uid:userDocId,email:userFirestoreData.email,role:userFirestoreData.role,name:userFirestoreData.name,...userFirestoreData,requirePasswordChange:false});}}catch(syncError){await updateDoc(doc(firestore,'users',userDocId),{lastLogin:new Date().toISOString()});onLogin({uid:userDocId,email:userFirestoreData.email,role:userFirestoreData.role,name:userFirestoreData.name,...userFirestoreData,requirePasswordChange:false});}}else{await updateDoc(doc(firestore,'users',userDocId),{lastLogin:new Date().toISOString()});onLogin({uid:userDocId,email:userFirestoreData.email,role:userFirestoreData.role,name:userFirestoreData.name,...userFirestoreData,requirePasswordChange:false});}setLoading(false);return;}}catch(e){// Error verificando contrase√±a de fallback\n}}}}throw authError;}}catch(error){switch(error.code){case'auth/user-not-found':setError('Usuario no encontrado. Verifica tu email');break;case'auth/wrong-password':setError('Contrase√±a incorrecta');break;case'auth/invalid-email':setError('Email inv√°lido');break;case'auth/too-many-requests':setError('Demasiados intentos. Intenta m√°s tarde');break;case'auth/invalid-credential':setError('Credenciales inv√°lidas. Verifica tu email y contrase√±a');break;case'auth/network-request-failed':setError('Error de conexi√≥n. Verifica tu internet');break;default:setError('Error al iniciar sesi√≥n. Intenta nuevamente');}}finally{setLoading(false);}};const handleChangePassword=async e=>{e.preventDefault();if(newPassword.length<6){setError('La contrase√±a debe tener al menos 6 caracteres');return;}if(newPassword!==confirmPassword){setError('Las contrase√±as no coinciden');return;}if(newPassword===oldPassword){setError('La nueva contrase√±a debe ser diferente a la anterior');return;}const hasNumber=/\\d/.test(newPassword);const hasLetter=/[a-zA-Z]/.test(newPassword);if(!hasNumber||!hasLetter){setError('La contrase√±a debe contener al menos una letra y un n√∫mero');return;}setLoading(true);setError('');try{if(currentUser.isTempPasswordLogin){let authUpdated=false;try{await createUserWithEmailAndPassword(auth,currentUser.email,newPassword);authUpdated=true;const firebaseUser=auth.currentUser;if(firebaseUser){if(currentUser.uid!==firebaseUser.uid){const oldUserDoc=await getDoc(doc(firestore,'users',currentUser.uid));const oldUserData=oldUserDoc.exists()?oldUserDoc.data():{};await setDoc(doc(firestore,'users',firebaseUser.uid),{...oldUserData,email:currentUser.email,requirePasswordChange:false,firstLogin:false,passwordChangedAt:new Date().toISOString(),tempPassword:null,lastTempPassword:null,resetMethod:null,authPasswordSynced:true});currentUser.uid=firebaseUser.uid;}else{await updateDoc(doc(firestore,'users',currentUser.uid),{requirePasswordChange:false,firstLogin:false,passwordChangedAt:new Date().toISOString(),tempPassword:null,lastTempPassword:null,resetMethod:null,authPasswordSynced:true});}await signOut(auth);}}catch(createError){if(createError.code==='auth/email-already-in-use'){if(currentUser.lastTempPassword){try{const lastTemp=atob(currentUser.lastTempPassword);await signInWithEmailAndPassword(auth,currentUser.email,lastTemp);await updatePassword(auth.currentUser,newPassword);authUpdated=true;await signOut(auth);}catch(e){// No funcion√≥ con √∫ltima temporal\n}}if(!authUpdated){try{await signInWithEmailAndPassword(auth,currentUser.email,oldPassword);await updatePassword(auth.currentUser,newPassword);authUpdated=true;await signOut(auth);}catch(e){// No funcion√≥ con temporal actual\n}}if(!authUpdated){await updateDoc(doc(firestore,'users',currentUser.uid),{tempPassword:btoa(newPassword),requirePasswordChange:false,firstLogin:false,passwordChangedAt:new Date().toISOString(),lastTempPassword:btoa(oldPassword),resetMethod:'FALLBACK_FIRESTORE',authPasswordSynced:false,needsAuthSync:true});setSuccessMessage('‚úÖ Contrase√±a actualizada correctamente. Redirigiendo...');setTimeout(()=>{window.location.reload();},3000);return;}}else{throw createError;}}if(authUpdated){const userDocRef=doc(firestore,'users',currentUser.uid);const userDocSnap=await getDoc(userDocRef);if(userDocSnap.exists()){await updateDoc(userDocRef,{requirePasswordChange:false,firstLogin:false,passwordChangedAt:new Date().toISOString(),tempPassword:null,lastTempPassword:null,resetMethod:null,authPasswordSynced:true,needsAuthSync:false});}else{await setDoc(userDocRef,{email:currentUser.email,role:currentUser.role||'worker',name:currentUser.name||'',requirePasswordChange:false,firstLogin:false,passwordChangedAt:new Date().toISOString(),tempPassword:null,lastTempPassword:null,resetMethod:null,authPasswordSynced:true,needsAuthSync:false});}setSuccessMessage('‚úÖ Contrase√±a actualizada exitosamente');setTimeout(async()=>{try{if(auth.currentUser){await signOut(auth);await new Promise(resolve=>setTimeout(resolve,500));}const userCredential=await signInWithEmailAndPassword(auth,currentUser.email,newPassword);const user=userCredential.user;const userDocRef=doc(firestore,'users',user.uid);const userDocSnap=await getDoc(userDocRef);if(userDocSnap.exists()){const userData=userDocSnap.data();onLogin({uid:user.uid,email:user.email,role:userData.role,name:userData.name,...userData,requirePasswordChange:false,firstLogin:false,isTempPasswordLogin:false});}else{onLogin({...currentUser,uid:user.uid,requirePasswordChange:false,firstLogin:false,isTempPasswordLogin:false});}}catch(error){onLogin({...currentUser,requirePasswordChange:false,firstLogin:false,isTempPasswordLogin:false});}},2000);}}else{const user=auth.currentUser;if(user){await updatePassword(user,newPassword);await updateDoc(doc(firestore,'users',user.uid),{requirePasswordChange:false,firstLogin:false,passwordChangedAt:new Date().toISOString(),tempPassword:null,lastTempPassword:null,resetMethod:null});setSuccessMessage('‚úÖ Contrase√±a actualizada exitosamente');setTimeout(()=>{onLogin({...currentUser,requirePasswordChange:false,firstLogin:false});},2000);}else{setError('Error de autenticaci√≥n. Por favor, vuelve a iniciar sesi√≥n');}}}catch(error){switch(error.code){case'auth/weak-password':setError('La contrase√±a es muy d√©bil. Usa al menos 6 caracteres con letras y n√∫meros');break;case'auth/requires-recent-login':setError('Por seguridad, vuelve a iniciar sesi√≥n');break;case'auth/network-request-failed':setError('Error de conexi√≥n. Verifica tu internet');break;default:setError('Error al cambiar la contrase√±a. Intenta nuevamente');}}finally{setLoading(false);}};// Formulario de cambio de contrase√±a obligatorio\nif(showChangePassword){return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',height:'100vh',display:'flex',justifyContent:'center',alignItems:'center',background:`linear-gradient(135deg, ${colors.primaryGreen} 0%, ${colors.secondaryGreen} 100%)`,fontFamily:'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:colors.white,padding:'48px',borderRadius:'16px',boxShadow:'0 20px 40px rgba(0,0,0,0.15)',maxWidth:'420px',width:'90%'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:'32px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'64px',height:'64px',backgroundColor:colors.gold,borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',margin:'0 auto 20px',fontSize:'28px'},children:\"\\uD83D\\uDD10\"}),/*#__PURE__*/_jsx(\"h2\",{style:{color:colors.text,margin:'0 0 8px 0',fontSize:'24px',fontWeight:'600'},children:\"Actualiza tu contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:colors.text,opacity:0.7,margin:0,fontSize:'14px'},children:\"Por tu seguridad, crea una nueva contrase\\xF1a\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleChangePassword,children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'8px',color:colors.text,fontSize:'14px',fontWeight:'500'},children:\"Nueva Contrase\\xF1a\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:showNewPassword?'text':'password',value:newPassword,onChange:e=>setNewPassword(e.target.value),required:true,placeholder:\"M\\xEDnimo 6 caracteres\",style:{width:'100%',padding:'12px',paddingRight:'40px',border:`2px solid ${colors.border}`,borderRadius:'10px',fontSize:'14px',outline:'none',transition:'all 0.2s',backgroundColor:colors.white},onFocus:e=>e.target.style.borderColor=colors.primaryGreen,onBlur:e=>e.target.style.borderColor=colors.border}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowNewPassword(!showNewPassword),style:{position:'absolute',right:'12px',top:'50%',transform:'translateY(-50%)',background:'none',border:'none',cursor:'pointer',color:colors.primaryGreen,fontSize:'18px'},children:showNewPassword?'üëÅÔ∏è':'üëÅÔ∏è‚Äçüó®Ô∏è'})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'24px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'8px',color:colors.text,fontSize:'14px',fontWeight:'500'},children:\"Confirmar Contrase\\xF1a\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:showConfirmPassword?'text':'password',value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),required:true,placeholder:\"Repite la contrase\\xF1a\",style:{width:'100%',padding:'12px',paddingRight:'40px',border:`2px solid ${colors.border}`,borderRadius:'10px',fontSize:'14px',outline:'none',transition:'all 0.2s',backgroundColor:colors.white},onFocus:e=>e.target.style.borderColor=colors.primaryGreen,onBlur:e=>e.target.style.borderColor=colors.border}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowConfirmPassword(!showConfirmPassword),style:{position:'absolute',right:'12px',top:'50%',transform:'translateY(-50%)',background:'none',border:'none',cursor:'pointer',color:colors.primaryGreen,fontSize:'18px'},children:showConfirmPassword?'üëÅÔ∏è':'üëÅÔ∏è‚Äçüó®Ô∏è'})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px',padding:'12px',backgroundColor:'rgba(27, 94, 32, 0.05)',borderRadius:'10px',fontSize:'12px',color:colors.text},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',marginBottom:'4px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:'8px',color:colors.success},children:\"\\u2713\"}),\" M\\xEDnimo 6 caracteres\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',marginBottom:'4px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:'8px',color:colors.success},children:\"\\u2713\"}),\" Al menos una letra\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',marginBottom:'4px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:'8px',color:colors.success},children:\"\\u2713\"}),\" Al menos un n\\xFAmero\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:'8px',color:colors.success},children:\"\\u2713\"}),\" Diferente a la anterior\"]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#FFEBEE',border:`1px solid #FFCDD2`,color:colors.error,padding:'12px',borderRadius:'10px',marginBottom:'20px',fontSize:'14px',display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:'8px'},children:\"\\u26A0\\uFE0F\"}),error]}),successMessage&&/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#E8F5E9',border:`1px solid #A5D6A7`,color:colors.success,padding:'12px',borderRadius:'10px',marginBottom:'20px',fontSize:'14px',display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:'8px'},children:\"\\u2705\"}),successMessage]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:{width:'100%',padding:'14px',backgroundColor:loading?'#BDBDBD':colors.gold,color:colors.text,border:'none',borderRadius:'10px',fontSize:'16px',fontWeight:'600',cursor:loading?'not-allowed':'pointer',transition:'all 0.2s',display:'flex',alignItems:'center',justifyContent:'center',gap:'8px'},onMouseOver:e=>!loading&&(e.currentTarget.style.backgroundColor=colors.darkGold),onMouseOut:e=>!loading&&(e.currentTarget.style.backgroundColor=colors.gold),children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner\"}),\"Actualizando...\"]}):'Cambiar Contrase√±a'})]})]}),/*#__PURE__*/_jsx(\"style\",{children:`\n          .spinner {\n            width: 16px;\n            height: 16px;\n            border: 2px solid ${colors.text};\n            border-top-color: transparent;\n            border-radius: 50%;\n            animation: spin 0.6s linear infinite;\n          }\n          \n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        `})]});}// Formulario de login principal\nreturn/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',height:'100vh',display:'flex',justifyContent:'center',alignItems:'center',background:`linear-gradient(135deg, ${colors.primaryGreen} 0%, ${colors.secondaryGreen} 100%)`,fontFamily:'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',position:'relative',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'-200px',right:'-200px',width:'400px',height:'400px',borderRadius:'50%',background:'rgba(255, 215, 0, 0.1)'}}),/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',bottom:'-150px',left:'-150px',width:'300px',height:'300px',borderRadius:'50%',background:'rgba(255, 215, 0, 0.08)'}}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:colors.white,padding:'48px',borderRadius:'20px',boxShadow:'0 25px 50px rgba(0,0,0,0.2)',maxWidth:'440px',width:'90%',position:'relative',zIndex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:'36px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'120px',height:'140px',margin:'0 auto 20px',display:'flex',alignItems:'center',justifyContent:'center',backgroundColor:colors.white,borderRadius:'10px',padding:'10px',boxShadow:'0 4px 12px rgba(0,0,0,0.1)'},children:/*#__PURE__*/_jsx(\"img\",{src:\"/escudo-quillon.png\",alt:\"Escudo de Quill\\xF3n\",style:{width:'80px',height:'80px',objectFit:'contain'}})}),/*#__PURE__*/_jsx(\"h1\",{style:{color:colors.text,margin:'0 0 8px 0',fontSize:'32px',fontWeight:'700'},children:\"MapaQuill\\xF3n\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:colors.text,opacity:0.7,margin:0,fontSize:'14px'},children:\"Sistema de Control de Flota GPS\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'8px',color:colors.text,fontSize:'14px',fontWeight:'500'},children:\"Correo Electr\\xF3nico\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true,placeholder:\"ejemplo@gmail.com\",style:{width:'100%',padding:'12px',border:`2px solid ${colors.border}`,borderRadius:'10px',fontSize:'14px',outline:'none',transition:'all 0.2s',backgroundColor:colors.white},onFocus:e=>e.target.style.borderColor=colors.primaryGreen,onBlur:e=>e.target.style.borderColor=colors.border})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'24px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'8px',color:colors.text,fontSize:'14px',fontWeight:'500'},children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?'text':'password',value:password,onChange:e=>setPassword(e.target.value),required:true,placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",style:{width:'100%',padding:'12px',paddingRight:'40px',border:`2px solid ${colors.border}`,borderRadius:'10px',fontSize:'14px',outline:'none',transition:'all 0.2s',backgroundColor:colors.white},onFocus:e=>e.target.style.borderColor=colors.primaryGreen,onBlur:e=>e.target.style.borderColor=colors.border}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowPassword(!showPassword),style:{position:'absolute',right:'12px',top:'50%',transform:'translateY(-50%)',background:'none',border:'none',cursor:'pointer',color:colors.primaryGreen,fontSize:'18px'},children:showPassword?'üëÅÔ∏è':'üëÅÔ∏è‚Äçüó®Ô∏è'})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#FFEBEE',border:`1px solid #FFCDD2`,color:colors.error,padding:'12px',borderRadius:'10px',marginBottom:'20px',fontSize:'14px',display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:'8px'},children:\"\\u26A0\\uFE0F\"}),error]}),successMessage&&/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#E8F5E9',border:`1px solid #A5D6A7`,color:colors.success,padding:'12px',borderRadius:'10px',marginBottom:'20px',fontSize:'14px',display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:'8px'},children:\"\\u2705\"}),successMessage]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:{width:'100%',padding:'14px',backgroundColor:loading?'#BDBDBD':colors.gold,color:colors.text,border:'none',borderRadius:'10px',fontSize:'16px',fontWeight:'600',cursor:loading?'not-allowed':'pointer',transition:'all 0.2s',display:'flex',alignItems:'center',justifyContent:'center',gap:'8px',boxShadow:'0 4px 12px rgba(255, 215, 0, 0.3)'},onMouseOver:e=>!loading&&(e.currentTarget.style.backgroundColor=colors.darkGold),onMouseOut:e=>!loading&&(e.currentTarget.style.backgroundColor=colors.gold),children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner\"}),\"Iniciando sesi\\xF3n...\"]}):'Iniciar Sesi√≥n'}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:'20px'},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowPasswordRecovery(true),style:{background:'none',border:'none',color:colors.lightGold,fontSize:'14px',cursor:'pointer',textDecoration:'underline',transition:'color 0.2s'},onMouseOver:e=>e.currentTarget.style.color=colors.darkGold,onMouseOut:e=>e.currentTarget.style.color=colors.lightGold,children:\"\\xBFOlvidaste tu contrase\\xF1a?\"})}),showPasswordRecovery&&/*#__PURE__*/_jsx(PasswordRecovery,{onClose:()=>setShowPasswordRecovery(false),onSuccess:()=>{setShowPasswordRecovery(false);setSuccessMessage('‚úÖ Ya puedes iniciar sesi√≥n con tu contrase√±a temporal');setTimeout(()=>setSuccessMessage(''),5000);}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'32px',padding:'16px',backgroundColor:'rgba(27, 94, 32, 0.05)',borderRadius:'10px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"p\",{style:{color:colors.text,fontSize:'12px',margin:'0 0 8px 0',opacity:0.7},children:\"\\xBFNecesitas ayuda?\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:colors.text,fontSize:'14px',fontWeight:'500',margin:0},children:[\"Contacta al administrador\",/*#__PURE__*/_jsx(\"br\",{}),\"\\uD83D\\uDCDE +56 9 1234 5678\"]})]})]}),/*#__PURE__*/_jsx(\"style\",{children:`\n        .spinner {\n          width: 16px;\n          height: 16px;\n          border: 2px solid ${colors.text};\n          border-top-color: transparent;\n          border-radius: 50%;\n          animation: spin 0.6s linear infinite;\n          display: inline-block;\n        }\n        \n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        \n        @media (max-width: 480px) {\n          .login-container {\n            padding: 32px !important;\n          }\n        }\n      `})]});};export default Login;","map":{"version":3,"names":["React","useState","PasswordRecovery","signInWithEmailAndPassword","updatePassword","EmailAuthProvider","reauthenticateWithCredential","createUserWithEmailAndPassword","signOut","auth","firestore","doc","getDoc","updateDoc","query","where","collection","getDocs","setDoc","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","_ref","onLogin","email","setEmail","password","setPassword","loading","setLoading","error","setError","successMessage","setSuccessMessage","showPassword","setShowPassword","showChangePassword","setShowChangePassword","currentUser","setCurrentUser","newPassword","setNewPassword","confirmPassword","setConfirmPassword","oldPassword","setOldPassword","showPasswordRecovery","setShowPasswordRecovery","showNewPassword","setShowNewPassword","showConfirmPassword","setShowConfirmPassword","colors","primaryGreen","secondaryGreen","lightGreen","gold","lightGold","darkGold","white","text","textLight","success","border","background","handleLogin","e","preventDefault","normalizedEmail","toLowerCase","trim","usersRef","q","querySnapshot","empty","userDoc","docs","userFirestoreData","data","userDocId","id","tempPassword","tempPasswordDecoded","atob","lastLogin","Date","toISOString","requirePasswordChange","uid","role","name","isTempPasswordLogin","userCredential","user","exists","userData","firstLogin","lastTempPassword","authError","code","storedPassword","needsAuthSync","firebaseUser","authPasswordSynced","syncError","handleChangePassword","length","hasNumber","test","hasLetter","authUpdated","oldUserDoc","oldUserData","passwordChangedAt","resetMethod","createError","lastTemp","btoa","setTimeout","window","location","reload","userDocRef","userDocSnap","Promise","resolve","style","width","height","display","justifyContent","alignItems","fontFamily","children","backgroundColor","padding","borderRadius","boxShadow","maxWidth","textAlign","marginBottom","margin","fontSize","color","fontWeight","opacity","onSubmit","position","type","value","onChange","target","required","placeholder","paddingRight","outline","transition","onFocus","borderColor","onBlur","onClick","right","top","transform","cursor","marginRight","disabled","gap","onMouseOver","currentTarget","onMouseOut","className","overflow","bottom","left","zIndex","src","alt","objectFit","marginTop","textDecoration","onClose","onSuccess"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/Login.js"],"sourcesContent":["// src/components/Login.js - DISE√ëO OFICIAL MUNICIPALIDAD DE QUILL√ìN\r\nimport React, { useState } from 'react';\r\nimport PasswordRecovery from './PasswordRecovery';\r\nimport {\r\n  signInWithEmailAndPassword,\r\n  updatePassword,\r\n  EmailAuthProvider,\r\n  reauthenticateWithCredential,\r\n  createUserWithEmailAndPassword,\r\n  signOut\r\n} from 'firebase/auth';\r\nimport { auth, firestore } from '../config/firebase';\r\nimport { doc, getDoc, updateDoc, query, where, collection, getDocs, setDoc } from 'firebase/firestore';\r\n\r\nconst Login = ({ onLogin }) => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  // Estados para cambio de contrase√±a obligatorio\r\n  const [showChangePassword, setShowChangePassword] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [oldPassword, setOldPassword] = useState('');\r\n  const [showPasswordRecovery, setShowPasswordRecovery] = useState(false);\r\n  const [showNewPassword, setShowNewPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n\r\n  // Paleta de colores oficial de Quill√≥n\r\n  const colors = {\r\n    primaryGreen: '#1B5E20',      // Verde oscuro (escudo)\r\n    secondaryGreen: '#2E8B57',    // Verde medio\r\n    lightGreen: '#4CAF50',        // Verde claro para hovers\r\n    gold: '#FFD700',               // Dorado principal\r\n    lightGold: '#FFB74D',         // Dorado claro para enlaces\r\n    darkGold: '#FFA000',          // Dorado oscuro para hover\r\n    white: '#FFFFFF',\r\n    text: '#1B5E20',              // Texto en verde oscuro\r\n    textLight: '#FFFFFF',         // Texto claro\r\n    error: '#D32F2F',             // Rojo error\r\n    success: '#388E3C',           // Verde √©xito\r\n    border: 'rgba(27, 94, 32, 0.2)', // Bordes verdes suaves\r\n    background: '#F5F5F5'         // Fondo gris muy claro\r\n  };\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n    setSuccessMessage('');\r\n\r\n    const normalizedEmail = email.toLowerCase().trim();\r\n\r\n    try {\r\n      // PRIMERO: Verificar si existe una contrase√±a temporal en Firestore\r\n      const usersRef = collection(firestore, 'users');\r\n      const q = query(usersRef, where('email', '==', normalizedEmail));\r\n      const querySnapshot = await getDocs(q);\r\n\r\n      if (!querySnapshot.empty) {\r\n        const userDoc = querySnapshot.docs[0];\r\n        const userFirestoreData = userDoc.data();\r\n        const userDocId = userDoc.id;\r\n\r\n        // Verificar si hay contrase√±a temporal\r\n        if (userFirestoreData.tempPassword) {\r\n          try {\r\n            const tempPasswordDecoded = atob(userFirestoreData.tempPassword);\r\n\r\n            if (password === tempPasswordDecoded) {\r\n              // Login exitoso con contrase√±a temporal\r\n              await updateDoc(doc(firestore, 'users', userDocId), {\r\n                lastLogin: new Date().toISOString()\r\n              });\r\n\r\n              if (userFirestoreData.requirePasswordChange === true) {\r\n                setCurrentUser({\r\n                  uid: userDocId,\r\n                  email: userFirestoreData.email,\r\n                  role: userFirestoreData.role,\r\n                  name: userFirestoreData.name,\r\n                  ...userFirestoreData,\r\n                  isTempPasswordLogin: true\r\n                });\r\n                setOldPassword(password);\r\n                setShowChangePassword(true);\r\n                setLoading(false);\r\n                return;\r\n              } else {\r\n                onLogin({\r\n                  uid: userDocId,\r\n                  email: userFirestoreData.email,\r\n                  role: userFirestoreData.role,\r\n                  name: userFirestoreData.name,\r\n                  ...userFirestoreData\r\n                });\r\n                setLoading(false);\r\n                return;\r\n              }\r\n            }\r\n          } catch (e) {\r\n            // Error decodificando contrase√±a temporal\r\n          }\r\n        }\r\n      }\r\n\r\n      // SEGUNDO: Intentar login normal con Firebase Auth\r\n      try {\r\n        const userCredential = await signInWithEmailAndPassword(auth, normalizedEmail, password);\r\n        const user = userCredential.user;\r\n\r\n        const userDoc = await getDoc(doc(firestore, 'users', user.uid));\r\n\r\n        if (userDoc.exists()) {\r\n          const userData = userDoc.data();\r\n\r\n          if (userData.requirePasswordChange || userData.firstLogin !== false) {\r\n            if (userData.tempPassword) {\r\n              await updateDoc(doc(firestore, 'users', user.uid), {\r\n                tempPassword: null,\r\n                lastTempPassword: userData.tempPassword\r\n              });\r\n            }\r\n\r\n            setCurrentUser({\r\n              uid: user.uid,\r\n              email: user.email,\r\n              role: userData.role,\r\n              name: userData.name,\r\n              ...userData\r\n            });\r\n            setOldPassword(password);\r\n            setShowChangePassword(true);\r\n          } else {\r\n            await updateDoc(doc(firestore, 'users', user.uid), {\r\n              lastLogin: new Date().toISOString()\r\n            });\r\n\r\n            onLogin({\r\n              uid: user.uid,\r\n              email: user.email,\r\n              role: userData.role,\r\n              name: userData.name,\r\n              ...userData\r\n            });\r\n          }\r\n        } else {\r\n          setError('No se encontraron datos del usuario');\r\n        }\r\n      } catch (authError) {\r\n        // Manejo de errores de autenticaci√≥n con fallback\r\n        if (authError.code === 'auth/invalid-credential' || authError.code === 'auth/wrong-password') {\r\n          const usersRef = collection(firestore, 'users');\r\n          const q = query(usersRef, where('email', '==', normalizedEmail));\r\n          const querySnapshot = await getDocs(q);\r\n\r\n          if (!querySnapshot.empty) {\r\n            const userDoc = querySnapshot.docs[0];\r\n            const userFirestoreData = userDoc.data();\r\n            const userDocId = userDoc.id;\r\n\r\n            if (userFirestoreData.tempPassword) {\r\n              try {\r\n                const storedPassword = atob(userFirestoreData.tempPassword);\r\n\r\n                if (password === storedPassword) {\r\n                  if (userFirestoreData.needsAuthSync === true) {\r\n                    try {\r\n                      await createUserWithEmailAndPassword(auth, normalizedEmail, password);\r\n                      const firebaseUser = auth.currentUser;\r\n\r\n                      if (firebaseUser && firebaseUser.uid !== userDocId) {\r\n                        await setDoc(doc(firestore, 'users', firebaseUser.uid), {\r\n                          ...userFirestoreData,\r\n                          tempPassword: null,\r\n                          needsAuthSync: false,\r\n                          authPasswordSynced: true,\r\n                          requirePasswordChange: false,\r\n                          lastLogin: new Date().toISOString()\r\n                        });\r\n\r\n                        await signOut(auth);\r\n\r\n                        onLogin({\r\n                          uid: firebaseUser.uid,\r\n                          email: userFirestoreData.email,\r\n                          role: userFirestoreData.role,\r\n                          name: userFirestoreData.name,\r\n                          ...userFirestoreData,\r\n                          requirePasswordChange: false\r\n                        });\r\n                      } else {\r\n                        await updateDoc(doc(firestore, 'users', userDocId), {\r\n                          tempPassword: null,\r\n                          needsAuthSync: false,\r\n                          authPasswordSynced: true,\r\n                          requirePasswordChange: false,\r\n                          lastLogin: new Date().toISOString()\r\n                        });\r\n\r\n                        if (auth.currentUser) {\r\n                          await signOut(auth);\r\n                        }\r\n\r\n                        onLogin({\r\n                          uid: userDocId,\r\n                          email: userFirestoreData.email,\r\n                          role: userFirestoreData.role,\r\n                          name: userFirestoreData.name,\r\n                          ...userFirestoreData,\r\n                          requirePasswordChange: false\r\n                        });\r\n                      }\r\n                    } catch (syncError) {\r\n                      await updateDoc(doc(firestore, 'users', userDocId), {\r\n                        lastLogin: new Date().toISOString()\r\n                      });\r\n\r\n                      onLogin({\r\n                        uid: userDocId,\r\n                        email: userFirestoreData.email,\r\n                        role: userFirestoreData.role,\r\n                        name: userFirestoreData.name,\r\n                        ...userFirestoreData,\r\n                        requirePasswordChange: false\r\n                      });\r\n                    }\r\n                  } else {\r\n                    await updateDoc(doc(firestore, 'users', userDocId), {\r\n                      lastLogin: new Date().toISOString()\r\n                    });\r\n\r\n                    onLogin({\r\n                      uid: userDocId,\r\n                      email: userFirestoreData.email,\r\n                      role: userFirestoreData.role,\r\n                      name: userFirestoreData.name,\r\n                      ...userFirestoreData,\r\n                      requirePasswordChange: false\r\n                    });\r\n                  }\r\n\r\n                  setLoading(false);\r\n                  return;\r\n                }\r\n              } catch (e) {\r\n                // Error verificando contrase√±a de fallback\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        throw authError;\r\n      }\r\n    } catch (error) {\r\n      switch (error.code) {\r\n        case 'auth/user-not-found':\r\n          setError('Usuario no encontrado. Verifica tu email');\r\n          break;\r\n        case 'auth/wrong-password':\r\n          setError('Contrase√±a incorrecta');\r\n          break;\r\n        case 'auth/invalid-email':\r\n          setError('Email inv√°lido');\r\n          break;\r\n        case 'auth/too-many-requests':\r\n          setError('Demasiados intentos. Intenta m√°s tarde');\r\n          break;\r\n        case 'auth/invalid-credential':\r\n          setError('Credenciales inv√°lidas. Verifica tu email y contrase√±a');\r\n          break;\r\n        case 'auth/network-request-failed':\r\n          setError('Error de conexi√≥n. Verifica tu internet');\r\n          break;\r\n        default:\r\n          setError('Error al iniciar sesi√≥n. Intenta nuevamente');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChangePassword = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (newPassword.length < 6) {\r\n      setError('La contrase√±a debe tener al menos 6 caracteres');\r\n      return;\r\n    }\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      setError('Las contrase√±as no coinciden');\r\n      return;\r\n    }\r\n\r\n    if (newPassword === oldPassword) {\r\n      setError('La nueva contrase√±a debe ser diferente a la anterior');\r\n      return;\r\n    }\r\n\r\n    const hasNumber = /\\d/.test(newPassword);\r\n    const hasLetter = /[a-zA-Z]/.test(newPassword);\r\n\r\n    if (!hasNumber || !hasLetter) {\r\n      setError('La contrase√±a debe contener al menos una letra y un n√∫mero');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      if (currentUser.isTempPasswordLogin) {\r\n        let authUpdated = false;\r\n\r\n        try {\r\n          await createUserWithEmailAndPassword(auth, currentUser.email, newPassword);\r\n          authUpdated = true;\r\n\r\n          const firebaseUser = auth.currentUser;\r\n          if (firebaseUser) {\r\n            if (currentUser.uid !== firebaseUser.uid) {\r\n              const oldUserDoc = await getDoc(doc(firestore, 'users', currentUser.uid));\r\n              const oldUserData = oldUserDoc.exists() ? oldUserDoc.data() : {};\r\n\r\n              await setDoc(doc(firestore, 'users', firebaseUser.uid), {\r\n                ...oldUserData,\r\n                email: currentUser.email,\r\n                requirePasswordChange: false,\r\n                firstLogin: false,\r\n                passwordChangedAt: new Date().toISOString(),\r\n                tempPassword: null,\r\n                lastTempPassword: null,\r\n                resetMethod: null,\r\n                authPasswordSynced: true\r\n              });\r\n\r\n              currentUser.uid = firebaseUser.uid;\r\n            } else {\r\n              await updateDoc(doc(firestore, 'users', currentUser.uid), {\r\n                requirePasswordChange: false,\r\n                firstLogin: false,\r\n                passwordChangedAt: new Date().toISOString(),\r\n                tempPassword: null,\r\n                lastTempPassword: null,\r\n                resetMethod: null,\r\n                authPasswordSynced: true\r\n              });\r\n            }\r\n\r\n            await signOut(auth);\r\n          }\r\n        } catch (createError) {\r\n          if (createError.code === 'auth/email-already-in-use') {\r\n            if (currentUser.lastTempPassword) {\r\n              try {\r\n                const lastTemp = atob(currentUser.lastTempPassword);\r\n                await signInWithEmailAndPassword(auth, currentUser.email, lastTemp);\r\n                await updatePassword(auth.currentUser, newPassword);\r\n                authUpdated = true;\r\n                await signOut(auth);\r\n              } catch (e) {\r\n                // No funcion√≥ con √∫ltima temporal\r\n              }\r\n            }\r\n\r\n            if (!authUpdated) {\r\n              try {\r\n                await signInWithEmailAndPassword(auth, currentUser.email, oldPassword);\r\n                await updatePassword(auth.currentUser, newPassword);\r\n                authUpdated = true;\r\n                await signOut(auth);\r\n              } catch (e) {\r\n                // No funcion√≥ con temporal actual\r\n              }\r\n            }\r\n\r\n            if (!authUpdated) {\r\n              await updateDoc(doc(firestore, 'users', currentUser.uid), {\r\n                tempPassword: btoa(newPassword),\r\n                requirePasswordChange: false,\r\n                firstLogin: false,\r\n                passwordChangedAt: new Date().toISOString(),\r\n                lastTempPassword: btoa(oldPassword),\r\n                resetMethod: 'FALLBACK_FIRESTORE',\r\n                authPasswordSynced: false,\r\n                needsAuthSync: true\r\n              });\r\n\r\n              setSuccessMessage('‚úÖ Contrase√±a actualizada correctamente. Redirigiendo...');\r\n\r\n              setTimeout(() => {\r\n                window.location.reload();\r\n              }, 3000);\r\n\r\n              return;\r\n            }\r\n          } else {\r\n            throw createError;\r\n          }\r\n        }\r\n\r\n        if (authUpdated) {\r\n          const userDocRef = doc(firestore, 'users', currentUser.uid);\r\n          const userDocSnap = await getDoc(userDocRef);\r\n\r\n          if (userDocSnap.exists()) {\r\n            await updateDoc(userDocRef, {\r\n              requirePasswordChange: false,\r\n              firstLogin: false,\r\n              passwordChangedAt: new Date().toISOString(),\r\n              tempPassword: null,\r\n              lastTempPassword: null,\r\n              resetMethod: null,\r\n              authPasswordSynced: true,\r\n              needsAuthSync: false\r\n            });\r\n          } else {\r\n            await setDoc(userDocRef, {\r\n              email: currentUser.email,\r\n              role: currentUser.role || 'worker',\r\n              name: currentUser.name || '',\r\n              requirePasswordChange: false,\r\n              firstLogin: false,\r\n              passwordChangedAt: new Date().toISOString(),\r\n              tempPassword: null,\r\n              lastTempPassword: null,\r\n              resetMethod: null,\r\n              authPasswordSynced: true,\r\n              needsAuthSync: false\r\n            });\r\n          }\r\n\r\n          setSuccessMessage('‚úÖ Contrase√±a actualizada exitosamente');\r\n\r\n          setTimeout(async () => {\r\n            try {\r\n              if (auth.currentUser) {\r\n                await signOut(auth);\r\n                await new Promise(resolve => setTimeout(resolve, 500));\r\n              }\r\n\r\n              const userCredential = await signInWithEmailAndPassword(auth, currentUser.email, newPassword);\r\n              const user = userCredential.user;\r\n\r\n              const userDocRef = doc(firestore, 'users', user.uid);\r\n              const userDocSnap = await getDoc(userDocRef);\r\n\r\n              if (userDocSnap.exists()) {\r\n                const userData = userDocSnap.data();\r\n                onLogin({\r\n                  uid: user.uid,\r\n                  email: user.email,\r\n                  role: userData.role,\r\n                  name: userData.name,\r\n                  ...userData,\r\n                  requirePasswordChange: false,\r\n                  firstLogin: false,\r\n                  isTempPasswordLogin: false\r\n                });\r\n              } else {\r\n                onLogin({\r\n                  ...currentUser,\r\n                  uid: user.uid,\r\n                  requirePasswordChange: false,\r\n                  firstLogin: false,\r\n                  isTempPasswordLogin: false\r\n                });\r\n              }\r\n            } catch (error) {\r\n              onLogin({\r\n                ...currentUser,\r\n                requirePasswordChange: false,\r\n                firstLogin: false,\r\n                isTempPasswordLogin: false\r\n              });\r\n            }\r\n          }, 2000);\r\n        }\r\n      } else {\r\n        const user = auth.currentUser;\r\n\r\n        if (user) {\r\n          await updatePassword(user, newPassword);\r\n\r\n          await updateDoc(doc(firestore, 'users', user.uid), {\r\n            requirePasswordChange: false,\r\n            firstLogin: false,\r\n            passwordChangedAt: new Date().toISOString(),\r\n            tempPassword: null,\r\n            lastTempPassword: null,\r\n            resetMethod: null\r\n          });\r\n\r\n          setSuccessMessage('‚úÖ Contrase√±a actualizada exitosamente');\r\n\r\n          setTimeout(() => {\r\n            onLogin({\r\n              ...currentUser,\r\n              requirePasswordChange: false,\r\n              firstLogin: false\r\n            });\r\n          }, 2000);\r\n        } else {\r\n          setError('Error de autenticaci√≥n. Por favor, vuelve a iniciar sesi√≥n');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      switch (error.code) {\r\n        case 'auth/weak-password':\r\n          setError('La contrase√±a es muy d√©bil. Usa al menos 6 caracteres con letras y n√∫meros');\r\n          break;\r\n        case 'auth/requires-recent-login':\r\n          setError('Por seguridad, vuelve a iniciar sesi√≥n');\r\n          break;\r\n        case 'auth/network-request-failed':\r\n          setError('Error de conexi√≥n. Verifica tu internet');\r\n          break;\r\n        default:\r\n          setError('Error al cambiar la contrase√±a. Intenta nuevamente');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Formulario de cambio de contrase√±a obligatorio\r\n  if (showChangePassword) {\r\n    return (\r\n      <div style={{\r\n        width: '100%',\r\n        height: '100vh',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        background: `linear-gradient(135deg, ${colors.primaryGreen} 0%, ${colors.secondaryGreen} 100%)`,\r\n        fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif'\r\n      }}>\r\n        <div style={{\r\n          backgroundColor: colors.white,\r\n          padding: '48px',\r\n          borderRadius: '16px',\r\n          boxShadow: '0 20px 40px rgba(0,0,0,0.15)',\r\n          maxWidth: '420px',\r\n          width: '90%'\r\n        }}>\r\n          <div style={{ textAlign: 'center', marginBottom: '32px' }}>\r\n            <div style={{\r\n              width: '64px',\r\n              height: '64px',\r\n              backgroundColor: colors.gold,\r\n              borderRadius: '50%',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              margin: '0 auto 20px',\r\n              fontSize: '28px'\r\n            }}>\r\n              üîê\r\n            </div>\r\n            <h2 style={{\r\n              color: colors.text,\r\n              margin: '0 0 8px 0',\r\n              fontSize: '24px',\r\n              fontWeight: '600'\r\n            }}>\r\n              Actualiza tu contrase√±a\r\n            </h2>\r\n            <p style={{\r\n              color: colors.text,\r\n              opacity: 0.7,\r\n              margin: 0,\r\n              fontSize: '14px'\r\n            }}>\r\n              Por tu seguridad, crea una nueva contrase√±a\r\n            </p>\r\n          </div>\r\n\r\n          <form onSubmit={handleChangePassword}>\r\n            <div style={{ marginBottom: '20px' }}>\r\n              <label style={{\r\n                display: 'block',\r\n                marginBottom: '8px',\r\n                color: colors.text,\r\n                fontSize: '14px',\r\n                fontWeight: '500'\r\n              }}>\r\n                Nueva Contrase√±a\r\n              </label>\r\n              <div style={{ position: 'relative' }}>\r\n                <input\r\n                  type={showNewPassword ? 'text' : 'password'}\r\n                  value={newPassword}\r\n                  onChange={(e) => setNewPassword(e.target.value)}\r\n                  required\r\n                  placeholder=\"M√≠nimo 6 caracteres\"\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    paddingRight: '40px',\r\n                    border: `2px solid ${colors.border}`,\r\n                    borderRadius: '10px',\r\n                    fontSize: '14px',\r\n                    outline: 'none',\r\n                    transition: 'all 0.2s',\r\n                    backgroundColor: colors.white\r\n                  }}\r\n                  onFocus={(e) => e.target.style.borderColor = colors.primaryGreen}\r\n                  onBlur={(e) => e.target.style.borderColor = colors.border}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowNewPassword(!showNewPassword)}\r\n                  style={{\r\n                    position: 'absolute',\r\n                    right: '12px',\r\n                    top: '50%',\r\n                    transform: 'translateY(-50%)',\r\n                    background: 'none',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    color: colors.primaryGreen,\r\n                    fontSize: '18px'\r\n                  }}\r\n                >\r\n                  {showNewPassword ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{ marginBottom: '24px' }}>\r\n              <label style={{\r\n                display: 'block',\r\n                marginBottom: '8px',\r\n                color: colors.text,\r\n                fontSize: '14px',\r\n                fontWeight: '500'\r\n              }}>\r\n                Confirmar Contrase√±a\r\n              </label>\r\n              <div style={{ position: 'relative' }}>\r\n                <input\r\n                  type={showConfirmPassword ? 'text' : 'password'}\r\n                  value={confirmPassword}\r\n                  onChange={(e) => setConfirmPassword(e.target.value)}\r\n                  required\r\n                  placeholder=\"Repite la contrase√±a\"\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    paddingRight: '40px',\r\n                    border: `2px solid ${colors.border}`,\r\n                    borderRadius: '10px',\r\n                    fontSize: '14px',\r\n                    outline: 'none',\r\n                    transition: 'all 0.2s',\r\n                    backgroundColor: colors.white\r\n                  }}\r\n                  onFocus={(e) => e.target.style.borderColor = colors.primaryGreen}\r\n                  onBlur={(e) => e.target.style.borderColor = colors.border}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n                  style={{\r\n                    position: 'absolute',\r\n                    right: '12px',\r\n                    top: '50%',\r\n                    transform: 'translateY(-50%)',\r\n                    background: 'none',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    color: colors.primaryGreen,\r\n                    fontSize: '18px'\r\n                  }}\r\n                >\r\n                  {showConfirmPassword ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{\r\n              marginBottom: '20px',\r\n              padding: '12px',\r\n              backgroundColor: 'rgba(27, 94, 32, 0.05)',\r\n              borderRadius: '10px',\r\n              fontSize: '12px',\r\n              color: colors.text\r\n            }}>\r\n              <div style={{ display: 'flex', alignItems: 'center', marginBottom: '4px' }}>\r\n                <span style={{ marginRight: '8px', color: colors.success }}>‚úì</span> M√≠nimo 6 caracteres\r\n              </div>\r\n              <div style={{ display: 'flex', alignItems: 'center', marginBottom: '4px' }}>\r\n                <span style={{ marginRight: '8px', color: colors.success }}>‚úì</span> Al menos una letra\r\n              </div>\r\n              <div style={{ display: 'flex', alignItems: 'center', marginBottom: '4px' }}>\r\n                <span style={{ marginRight: '8px', color: colors.success }}>‚úì</span> Al menos un n√∫mero\r\n              </div>\r\n              <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                <span style={{ marginRight: '8px', color: colors.success }}>‚úì</span> Diferente a la anterior\r\n              </div>\r\n            </div>\r\n\r\n            {error && (\r\n              <div style={{\r\n                backgroundColor: '#FFEBEE',\r\n                border: `1px solid #FFCDD2`,\r\n                color: colors.error,\r\n                padding: '12px',\r\n                borderRadius: '10px',\r\n                marginBottom: '20px',\r\n                fontSize: '14px',\r\n                display: 'flex',\r\n                alignItems: 'center'\r\n              }}>\r\n                <span style={{ marginRight: '8px' }}>‚ö†Ô∏è</span>\r\n                {error}\r\n              </div>\r\n            )}\r\n\r\n            {successMessage && (\r\n              <div style={{\r\n                backgroundColor: '#E8F5E9',\r\n                border: `1px solid #A5D6A7`,\r\n                color: colors.success,\r\n                padding: '12px',\r\n                borderRadius: '10px',\r\n                marginBottom: '20px',\r\n                fontSize: '14px',\r\n                display: 'flex',\r\n                alignItems: 'center'\r\n              }}>\r\n                <span style={{ marginRight: '8px' }}>‚úÖ</span>\r\n                {successMessage}\r\n              </div>\r\n            )}\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              style={{\r\n                width: '100%',\r\n                padding: '14px',\r\n                backgroundColor: loading ? '#BDBDBD' : colors.gold,\r\n                color: colors.text,\r\n                border: 'none',\r\n                borderRadius: '10px',\r\n                fontSize: '16px',\r\n                fontWeight: '600',\r\n                cursor: loading ? 'not-allowed' : 'pointer',\r\n                transition: 'all 0.2s',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                gap: '8px'\r\n              }}\r\n              onMouseOver={(e) => !loading && (e.currentTarget.style.backgroundColor = colors.darkGold)}\r\n              onMouseOut={(e) => !loading && (e.currentTarget.style.backgroundColor = colors.gold)}\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <span className=\"spinner\"></span>\r\n                  Actualizando...\r\n                </>\r\n              ) : (\r\n                'Cambiar Contrase√±a'\r\n              )}\r\n            </button>\r\n          </form>\r\n        </div>\r\n\r\n        <style>{`\r\n          .spinner {\r\n            width: 16px;\r\n            height: 16px;\r\n            border: 2px solid ${colors.text};\r\n            border-top-color: transparent;\r\n            border-radius: 50%;\r\n            animation: spin 0.6s linear infinite;\r\n          }\r\n          \r\n          @keyframes spin {\r\n            0% { transform: rotate(0deg); }\r\n            100% { transform: rotate(360deg); }\r\n          }\r\n        `}</style>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Formulario de login principal\r\n  return (\r\n    <div style={{\r\n      width: '100%',\r\n      height: '100vh',\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      background: `linear-gradient(135deg, ${colors.primaryGreen} 0%, ${colors.secondaryGreen} 100%)`,\r\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',\r\n      position: 'relative',\r\n      overflow: 'hidden'\r\n    }}>\r\n      {/* Elementos decorativos de fondo */}\r\n      <div style={{\r\n        position: 'absolute',\r\n        top: '-200px',\r\n        right: '-200px',\r\n        width: '400px',\r\n        height: '400px',\r\n        borderRadius: '50%',\r\n        background: 'rgba(255, 215, 0, 0.1)'\r\n      }}></div>\r\n      <div style={{\r\n        position: 'absolute',\r\n        bottom: '-150px',\r\n        left: '-150px',\r\n        width: '300px',\r\n        height: '300px',\r\n        borderRadius: '50%',\r\n        background: 'rgba(255, 215, 0, 0.08)'\r\n      }}></div>\r\n\r\n      {/* Contenedor principal del formulario */}\r\n      <div style={{\r\n        backgroundColor: colors.white,\r\n        padding: '48px',\r\n        borderRadius: '20px',\r\n        boxShadow: '0 25px 50px rgba(0,0,0,0.2)',\r\n        maxWidth: '440px',\r\n        width: '90%',\r\n        position: 'relative',\r\n        zIndex: 1\r\n      }}>\r\n        {/* Logo y t√≠tulo */}\r\n        <div style={{ textAlign: 'center', marginBottom: '36px' }}>\r\n          {/* Espacio para el logo oficial */}\r\n          <div style={{\r\n            width: '120px',\r\n            height: '140px',\r\n            margin: '0 auto 20px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            backgroundColor: colors.white,\r\n            borderRadius: '10px',\r\n            padding: '10px',\r\n            boxShadow: '0 4px 12px rgba(0,0,0,0.1)'\r\n          }}>\r\n            {/* Aqu√≠ va el logo oficial - reemplazar con <img src=\"/logo-quillon.png\" /> */}\r\n            <img\r\n              src=\"/escudo-quillon.png\"\r\n              alt=\"Escudo de Quill√≥n\"\r\n              style={{\r\n                width: '80px',\r\n                height: '80px',\r\n                objectFit: 'contain'\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          <h1 style={{\r\n            color: colors.text,\r\n            margin: '0 0 8px 0',\r\n            fontSize: '32px',\r\n            fontWeight: '700'\r\n          }}>\r\n            MapaQuill√≥n\r\n          </h1>\r\n          <p style={{\r\n            color: colors.text,\r\n            opacity: 0.7,\r\n            margin: 0,\r\n            fontSize: '14px'\r\n          }}>\r\n            Sistema de Control de Flota GPS\r\n          </p>\r\n        </div>\r\n\r\n        {/* Formulario */}\r\n        <form onSubmit={handleLogin}>\r\n          <div style={{ marginBottom: '20px' }}>\r\n            <label style={{\r\n              display: 'block',\r\n              marginBottom: '8px',\r\n              color: colors.text,\r\n              fontSize: '14px',\r\n              fontWeight: '500'\r\n            }}>\r\n              Correo Electr√≥nico\r\n            </label>\r\n            <input\r\n              type=\"email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n              placeholder=\"ejemplo@gmail.com\"\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                border: `2px solid ${colors.border}`,\r\n                borderRadius: '10px',\r\n                fontSize: '14px',\r\n                outline: 'none',\r\n                transition: 'all 0.2s',\r\n                backgroundColor: colors.white\r\n              }}\r\n              onFocus={(e) => e.target.style.borderColor = colors.primaryGreen}\r\n              onBlur={(e) => e.target.style.borderColor = colors.border}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ marginBottom: '24px' }}>\r\n            <label style={{\r\n              display: 'block',\r\n              marginBottom: '8px',\r\n              color: colors.text,\r\n              fontSize: '14px',\r\n              fontWeight: '500'\r\n            }}>\r\n              Contrase√±a\r\n            </label>\r\n            <div style={{ position: 'relative' }}>\r\n              <input\r\n                type={showPassword ? 'text' : 'password'}\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                required\r\n                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '12px',\r\n                  paddingRight: '40px',\r\n                  border: `2px solid ${colors.border}`,\r\n                  borderRadius: '10px',\r\n                  fontSize: '14px',\r\n                  outline: 'none',\r\n                  transition: 'all 0.2s',\r\n                  backgroundColor: colors.white\r\n                }}\r\n                onFocus={(e) => e.target.style.borderColor = colors.primaryGreen}\r\n                onBlur={(e) => e.target.style.borderColor = colors.border}\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowPassword(!showPassword)}\r\n                style={{\r\n                  position: 'absolute',\r\n                  right: '12px',\r\n                  top: '50%',\r\n                  transform: 'translateY(-50%)',\r\n                  background: 'none',\r\n                  border: 'none',\r\n                  cursor: 'pointer',\r\n                  color: colors.primaryGreen,\r\n                  fontSize: '18px'\r\n                }}\r\n              >\r\n                {showPassword ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Mensajes de error y √©xito */}\r\n          {error && (\r\n            <div style={{\r\n              backgroundColor: '#FFEBEE',\r\n              border: `1px solid #FFCDD2`,\r\n              color: colors.error,\r\n              padding: '12px',\r\n              borderRadius: '10px',\r\n              marginBottom: '20px',\r\n              fontSize: '14px',\r\n              display: 'flex',\r\n              alignItems: 'center'\r\n            }}>\r\n              <span style={{ marginRight: '8px' }}>‚ö†Ô∏è</span>\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          {successMessage && (\r\n            <div style={{\r\n              backgroundColor: '#E8F5E9',\r\n              border: `1px solid #A5D6A7`,\r\n              color: colors.success,\r\n              padding: '12px',\r\n              borderRadius: '10px',\r\n              marginBottom: '20px',\r\n              fontSize: '14px',\r\n              display: 'flex',\r\n              alignItems: 'center'\r\n            }}>\r\n              <span style={{ marginRight: '8px' }}>‚úÖ</span>\r\n              {successMessage}\r\n            </div>\r\n          )}\r\n\r\n          {/* Bot√≥n de inicio de sesi√≥n */}\r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            style={{\r\n              width: '100%',\r\n              padding: '14px',\r\n              backgroundColor: loading ? '#BDBDBD' : colors.gold,\r\n              color: colors.text,\r\n              border: 'none',\r\n              borderRadius: '10px',\r\n              fontSize: '16px',\r\n              fontWeight: '600',\r\n              cursor: loading ? 'not-allowed' : 'pointer',\r\n              transition: 'all 0.2s',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              gap: '8px',\r\n              boxShadow: '0 4px 12px rgba(255, 215, 0, 0.3)'\r\n            }}\r\n            onMouseOver={(e) => !loading && (e.currentTarget.style.backgroundColor = colors.darkGold)}\r\n            onMouseOut={(e) => !loading && (e.currentTarget.style.backgroundColor = colors.gold)}\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <span className=\"spinner\"></span>\r\n                Iniciando sesi√≥n...\r\n              </>\r\n            ) : (\r\n              'Iniciar Sesi√≥n'\r\n            )}\r\n          </button>\r\n\r\n          {/* Enlace de recuperaci√≥n de contrase√±a */}\r\n          <div style={{ textAlign: 'center', marginTop: '20px' }}>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowPasswordRecovery(true)}\r\n              style={{\r\n                background: 'none',\r\n                border: 'none',\r\n                color: colors.lightGold,\r\n                fontSize: '14px',\r\n                cursor: 'pointer',\r\n                textDecoration: 'underline',\r\n                transition: 'color 0.2s'\r\n              }}\r\n              onMouseOver={(e) => e.currentTarget.style.color = colors.darkGold}\r\n              onMouseOut={(e) => e.currentTarget.style.color = colors.lightGold}\r\n            >\r\n              ¬øOlvidaste tu contrase√±a?\r\n            </button>\r\n          </div>\r\n\r\n          {/* Modal de recuperaci√≥n de contrase√±a */}\r\n          {showPasswordRecovery && (\r\n            <PasswordRecovery\r\n              onClose={() => setShowPasswordRecovery(false)}\r\n              onSuccess={() => {\r\n                setShowPasswordRecovery(false);\r\n                setSuccessMessage('‚úÖ Ya puedes iniciar sesi√≥n con tu contrase√±a temporal');\r\n                setTimeout(() => setSuccessMessage(''), 5000);\r\n              }}\r\n            />\r\n          )}\r\n        </form>\r\n\r\n        {/* Informaci√≥n de contacto */}\r\n        <div style={{\r\n          marginTop: '32px',\r\n          padding: '16px',\r\n          backgroundColor: 'rgba(27, 94, 32, 0.05)',\r\n          borderRadius: '10px',\r\n          textAlign: 'center'\r\n        }}>\r\n          <p style={{\r\n            color: colors.text,\r\n            fontSize: '12px',\r\n            margin: '0 0 8px 0',\r\n            opacity: 0.7\r\n          }}>\r\n            ¬øNecesitas ayuda?\r\n          </p>\r\n          <p style={{\r\n            color: colors.text,\r\n            fontSize: '14px',\r\n            fontWeight: '500',\r\n            margin: 0\r\n          }}>\r\n            Contacta al administrador<br />\r\n            üìû +56 9 1234 5678\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <style>{`\r\n        .spinner {\r\n          width: 16px;\r\n          height: 16px;\r\n          border: 2px solid ${colors.text};\r\n          border-top-color: transparent;\r\n          border-radius: 50%;\r\n          animation: spin 0.6s linear infinite;\r\n          display: inline-block;\r\n        }\r\n        \r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n        \r\n        @media (max-width: 480px) {\r\n          .login-container {\r\n            padding: 32px !important;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
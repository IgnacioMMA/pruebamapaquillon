{"ast":null,"code":"// src/components/PreventiveMaintenanceModule.js\nimport React,{useState,useEffect,useCallback}from'react';import{ref as databaseRef,set as databaseSet,push,update,remove,onValue,off}from'firebase/database';import ServiceCatalogManager from'./ServiceCatalogManager';import{database}from'../config/firebase';import{pdfExportService}from'../services/pdfExportService';import{jsPDF}from'jspdf';import autoTable from'jspdf-autotable';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PreventiveMaintenanceModule=_ref=>{let{vehiculos,currentUser,isMobile}=_ref;// Estados principales\nconst[maintenanceRecords,setMaintenanceRecords]=useState([]);const[showMaintenanceForm,setShowMaintenanceForm]=useState(false);const[selectedVehicle,setSelectedVehicle]=useState('');const[editingMaintenance,setEditingMaintenance]=useState(null);const[loading,setLoading]=useState(false);const[message,setMessage]=useState({type:'',text:''});const[showServiceCatalogManager,setShowServiceCatalogManager]=useState(false);// Estado para el paso actual del formulario\nconst[currentStep,setCurrentStep]=useState(1);// Estado para vista activa\nconst[activeView,setActiveView]=useState('dashboard');// Estado para bÃºsqueda y filtros\nconst[searchTerm,setSearchTerm]=useState('');const[filterStatus,setFilterStatus]=useState('todos');const[filterDateFrom,setFilterDateFrom]=useState('');const[filterDateTo,setFilterDateTo]=useState('');// Estado para tipo de repuesto\nconst[tipoRepuesto,setTipoRepuesto]=useState('original');// Estados para fecha y hora de la solicitud\nconst[fechaSolicitud,setFechaSolicitud]=useState(new Date().toISOString().split('T')[0]);const[horaSolicitud,setHoraSolicitud]=useState(new Date().toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit',hour12:false}));// Estado para servicios preventivos\nconst[serviciosPreventivos,setServiciosPreventivos]=useState([]);const[catalogoServicios,setCatalogoServicios]=useState([]);const[catalogSearchTerm,setCatalogSearchTerm]=useState('');const[montoIVA,setMontoIVA]=useState(0);const calcularTotales=useCallback(()=>{const subtotalManoObra=serviciosPreventivos.reduce((sum,s)=>sum+(parseFloat(s.manoObra)||0),0);const subtotalRepuestos=serviciosPreventivos.reduce((sum,s)=>sum+(parseFloat(s.costoRepuesto)||0)*(parseInt(s.cantidadRepuesto)||1),0);const repuestosConIVA=Math.round(subtotalRepuestos*1.19);// Repuestos Ã— 1.19\nconst iva=Math.round(subtotalRepuestos*0.19);// IVA de repuestos\nconst total=subtotalManoObra+repuestosConIVA;// Mano de obra + Repuestos con IVA\nreturn{subtotalManoObra,subtotalRepuestos,valorNeto:subtotalManoObra+subtotalRepuestos,iva,total};},[serviciosPreventivos]);// Add this function to your PreventiveMaintenanceModule component\n// Place it near the other calculation functions\nconst calcularTotalesServicioCatalogo=useCallback(servicio=>{var _servicio$repuestos;const manoObra=parseFloat(servicio.manoObra)||0;const totalRepuestos=((_servicio$repuestos=servicio.repuestos)===null||_servicio$repuestos===void 0?void 0:_servicio$repuestos.reduce((sum,repuesto)=>{return sum+repuesto.cantidad*repuesto.costoUnitario;},0))||0;const iva=Math.round(totalRepuestos*0.19);const total=manoObra+totalRepuestos+iva;return{manoObra,totalRepuestos,iva,total};},[]);// Cargar registros de mantenimiento\nuseEffect(()=>{const maintenanceRef=databaseRef(database,'mantenimientos');const unsubscribe=onValue(maintenanceRef,snapshot=>{const data=snapshot.val();if(data){const maintenanceArray=Object.entries(data).map(_ref2=>{let[id,maintenance]=_ref2;return{id,...maintenance};});setMaintenanceRecords(maintenanceArray);}else{setMaintenanceRecords([]);}});return()=>off(maintenanceRef);},[]);useEffect(()=>{const catalogoRef=databaseRef(database,'catalogo_servicios');onValue(catalogoRef,snapshot=>{const data=snapshot.val();if(data){const serviciosArray=Object.entries(data).map(_ref3=>{let[id,servicio]=_ref3;return{id,...servicio};});setCatalogoServicios(serviciosArray);}});},[]);// Filtrar servicios del catÃ¡logo\nconst getFilteredCatalogServices=()=>{if(!catalogSearchTerm)return catalogoServicios;const searchLower=catalogSearchTerm.toLowerCase();return catalogoServicios.filter(servicio=>servicio.codigo.toLowerCase().includes(searchLower)||servicio.descripcion.toLowerCase().includes(searchLower));};// Agregar servicio del catÃ¡logo\nconst agregarServicioDeCatalogo=servicio=>{var _servicio$repuestos2;const cantidadInput=document.getElementById(`cantidad-${servicio.id}`);const cantidad=parseInt(cantidadInput===null||cantidadInput===void 0?void 0:cantidadInput.value)||1;const totalRepuestos=(((_servicio$repuestos2=servicio.repuestos)===null||_servicio$repuestos2===void 0?void 0:_servicio$repuestos2.reduce((sum,rep)=>sum+rep.cantidad*rep.costoUnitario,0))||0)*cantidad;const iva=Math.round(totalRepuestos*0.19);const totalServicio=(servicio.manoObra||0)*cantidad+totalRepuestos+iva;const nuevoServicio={id:Date.now(),catalogoId:servicio.id,codigo:servicio.codigo,descripcion:servicio.descripcion,manoObra:servicio.manoObra||0,repuestos:servicio.repuestos||[],cantidadServicio:cantidad,totalRepuestos,iva,totalServicio};setServiciosPreventivos([...serviciosPreventivos,nuevoServicio]);};// Funciones auxiliares\nconst agregarServicio=()=>{const ultimoServicio=serviciosPreventivos[serviciosPreventivos.length-1];// Si el Ãºltimo servicio no tiene datos significativos, no agregar otro\nif(ultimoServicio&&!ultimoServicio.servicio&&!ultimoServicio.detalle&&ultimoServicio.manoObra===0&&ultimoServicio.costoRepuesto===0){setMessage({type:'warning',text:'âš ï¸ Complete el servicio actual antes de agregar otro'});return;}const nuevoNumero=serviciosPreventivos.length+1;setServiciosPreventivos([...serviciosPreventivos,{id:Date.now(),numero:nuevoNumero,servicio:'',codigo:'',detalle:'',manoObra:0,costoRepuesto:0,cantidadRepuesto:1,repuestoDescripcion:'',iva:0}]);};const actualizarServicio=(id,campo,valor)=>{setServiciosPreventivos(serviciosPreventivos.map(s=>s.id===id?{...s,[campo]:valor}:s));};const eliminarServicio=id=>{if(serviciosPreventivos.length>1){const nuevosServicios=serviciosPreventivos.filter(s=>s.id!==id);const serviciosRenumerados=nuevosServicios.map((s,index)=>({...s,numero:index+1}));setServiciosPreventivos(serviciosRenumerados);}};// Dentro del componente PreventiveMaintenanceModule, esta es la funciÃ³n completa:\nconst handleExportPDF=record=>{try{var _vehiculo$aÃ±o,_record$kilometrajeAc;const doc=new jsPDF();const pageWidth=doc.internal.pageSize.width;const pageHeight=doc.internal.pageSize.height;// Fecha actual\nconst now=new Date();const fechaGeneracion=now.toLocaleDateString('es-CL',{year:'numeric',month:'long',day:'numeric'});// Filtrar servicios vÃ¡lidos\nconst serviciosValidos=record.serviciosPreventivos.filter(servicio=>servicio.servicio||servicio.detalle||servicio.manoObra>0||servicio.costoRepuesto>0);if(serviciosValidos.length===0){setMessage({type:'error',text:'âŒ No hay servicios vÃ¡lidos para exportar'});return;}// Header con color\ndoc.setFillColor(102,126,234);doc.rect(0,0,pageWidth,45,'F');// TÃ­tulo principal\ndoc.setTextColor(255,255,255);doc.setFontSize(22);doc.setFont(undefined,'bold');doc.text('PRESUPUESTO DE MANTENIMIENTO',pageWidth/2,20,{align:'center'});// SubtÃ­tulo\ndoc.setFontSize(14);doc.setFont(undefined,'normal');doc.text('Sistema MapaQuillÃ³n',pageWidth/2,32,{align:'center'});// NÃºmero de presupuesto\ndoc.setFontSize(11);doc.text(`Presupuesto #${record.id.substring(0,8).toUpperCase()}`,pageWidth/2,40,{align:'center'});// InformaciÃ³n de la solicitud\nlet yPos=60;doc.setTextColor(31,41,55);doc.setFontSize(14);doc.setFont(undefined,'bold');doc.text('INFORMACIÃ“N DE LA SOLICITUD',20,yPos);yPos+=10;doc.setFontSize(11);doc.setFont(undefined,'normal');// Cuadro de informaciÃ³n\nconst infoSolicitud=[['Fecha de Solicitud:',new Date(record.fechaSolicitud||record.fechaMantenimiento).toLocaleDateString('es-CL',{weekday:'long',year:'numeric',month:'long',day:'numeric'})],['Hora de Solicitud:',`${record.horaSolicitud||'No especificada'} hrs`],['Solicitado por:',currentUser.name||currentUser.email||'Usuario del sistema'],['Estado:','PRESUPUESTO']];autoTable(doc,{startY:yPos,head:[],body:infoSolicitud,theme:'plain',styles:{fontSize:10,cellPadding:2},columnStyles:{0:{fontStyle:'bold',cellWidth:45},1:{cellWidth:140}}});yPos=doc.lastAutoTable.finalY+15;// InformaciÃ³n del vehÃ­culo\ndoc.setFontSize(14);doc.setFont(undefined,'bold');doc.text('INFORMACIÃ“N DEL VEHÃCULO',20,yPos);yPos+=10;const vehiculo=vehiculos.find(v=>v.id===record.vehiculoId);const infoVehiculo=[['VehÃ­culo:',record.vehiculoNombre||'No especificado'],['Patente:',record.vehiculoPatente||'No especificada'],['Marca/Modelo:',vehiculo?`${vehiculo.marca} ${vehiculo.modelo}`:'No especificado'],['AÃ±o:',(vehiculo===null||vehiculo===void 0?void 0:(_vehiculo$aÃ±o=vehiculo.aÃ±o)===null||_vehiculo$aÃ±o===void 0?void 0:_vehiculo$aÃ±o.toString())||'No especificado'],['Kilometraje Actual:',`${((_record$kilometrajeAc=record.kilometrajeActual)===null||_record$kilometrajeAc===void 0?void 0:_record$kilometrajeAc.toLocaleString('es-CL'))||0} km`],['Tipo de Repuestos:',record.tipoRepuesto==='original'?'ORIGINALES (GarantÃ­a oficial)':'ALTERNATIVOS (Menor costo)']];autoTable(doc,{startY:yPos,head:[],body:infoVehiculo,theme:'plain',styles:{fontSize:10,cellPadding:2},columnStyles:{0:{fontStyle:'bold',cellWidth:45},1:{cellWidth:140}}});yPos=doc.lastAutoTable.finalY+15;// Detalle de servicios\ndoc.setFontSize(14);doc.setFont(undefined,'bold');doc.text('DETALLE DE SERVICIOS PRESUPUESTADOS',20,yPos);yPos+=10;// Modificar la preparaciÃ³n de datos para la tabla\nconst serviciosData=serviciosValidos.map((servicio,index)=>{var _servicio$cantidadRep;const subtotalSinIva=(parseFloat(servicio.manoObra)||0)+(parseFloat(servicio.costoRepuesto)||0)*(parseInt(servicio.cantidadRepuesto)||1);const iva=parseFloat(servicio.iva)||0;const totalConIva=subtotalSinIva+iva;return[(index+1).toString(),servicio.servicio||'Servicio general',servicio.detalle||'Sin descripciÃ³n',servicio.repuestoDescripcion||'N/A',((_servicio$cantidadRep=servicio.cantidadRepuesto)===null||_servicio$cantidadRep===void 0?void 0:_servicio$cantidadRep.toString())||'1',`$${(parseFloat(servicio.manoObra)||0).toLocaleString('es-CL')}`,`$${(parseFloat(servicio.costoRepuesto)||0).toLocaleString('es-CL')}`,`$${iva.toLocaleString('es-CL')}`,// Agregar columna IVA\n`$${totalConIva.toLocaleString('es-CL')}`];});// Actualizar los headers de la tabla\nautoTable(doc,{startY:yPos,head:[['#','Servicio','DescripciÃ³n','Repuesto','Cant.','Mano Obra','Costo Unit.','IVA','Total']],body:serviciosData,theme:'striped',headStyles:{fillColor:[102,126,234],textColor:255,fontSize:9,fontStyle:'bold'},bodyStyles:{fontSize:8},columnStyles:{0:{cellWidth:8,halign:'center'},1:{cellWidth:25},2:{cellWidth:35},3:{cellWidth:25},4:{cellWidth:10,halign:'center'},5:{cellWidth:20,halign:'right'},6:{cellWidth:20,halign:'right'},7:{cellWidth:18,halign:'right'},// IVA\n8:{cellWidth:22,halign:'right',fontStyle:'bold'}// Total\n}});yPos=doc.lastAutoTable.finalY+15;// Verificar si necesitamos nueva pÃ¡gina\nif(yPos>pageHeight-80){doc.addPage();yPos=30;}// Resumen de costos\ndoc.setFillColor(240,253,244);doc.rect(pageWidth-100,yPos-5,85,70,'F');doc.setTextColor(31,41,55);doc.setFontSize(10);doc.setFont(undefined,'normal');const startX=pageWidth-95;doc.text('Subtotal Mano de Obra:',startX,yPos+5);doc.text(`$${record.totales.subtotalManoObra.toLocaleString('es-CL')}`,pageWidth-20,yPos+5,{align:'right'});doc.text('Subtotal Repuestos:',startX,yPos+15);doc.text(`$${record.totales.subtotalRepuestos.toLocaleString('es-CL')}`,pageWidth-20,yPos+15,{align:'right'});doc.setDrawColor(200,200,200);doc.line(startX,yPos+20,pageWidth-20,yPos+20);doc.setFont(undefined,'bold');doc.text('VALOR NETO:',startX,yPos+30);doc.text(`$${record.totales.valorNeto.toLocaleString('es-CL')}`,pageWidth-20,yPos+30,{align:'right'});doc.setFont(undefined,'normal');doc.text('IVA:',startX,yPos+40);doc.text(`$${record.totales.iva.toLocaleString('es-CL')}`,pageWidth-20,yPos+40,{align:'right'});doc.setDrawColor(34,197,94);doc.setLineWidth(1);doc.line(startX,yPos+45,pageWidth-20,yPos+45);doc.setFontSize(14);doc.setFont(undefined,'bold');doc.setTextColor(22,163,74);doc.text('TOTAL:',startX,yPos+58);doc.text(`$${record.totales.total.toLocaleString('es-CL')}`,pageWidth-20,yPos+58,{align:'right'});// Condiciones y validez\nyPos+=80;if(yPos<pageHeight-60){doc.setTextColor(107,114,128);doc.setFontSize(9);doc.setFont(undefined,'italic');doc.text('CONDICIONES:',20,yPos);yPos+=6;doc.setFont(undefined,'normal');doc.text('â€¢ Este presupuesto tiene una validez de 30 dÃ­as desde la fecha de emisiÃ³n',25,yPos);yPos+=5;doc.text('â€¢ Los precios incluyen IVA',25,yPos);yPos+=5;doc.text(`â€¢ Tipo de repuestos: ${record.tipoRepuesto==='original'?'Originales con garantÃ­a de fÃ¡brica':'Alternativos con garantÃ­a limitada'}`,25,yPos);yPos+=5;doc.text('â€¢ Sujeto a disponibilidad de repuestos',25,yPos);}// Footer\ndoc.setDrawColor(200,200,200);doc.line(20,pageHeight-30,pageWidth-20,pageHeight-30);doc.setTextColor(107,114,128);doc.setFontSize(8);doc.setFont(undefined,'italic');doc.text(`Documento generado el ${fechaGeneracion}`,20,pageHeight-20);doc.text(`Por: ${currentUser.name||currentUser.email}`,20,pageHeight-15);doc.text('Sistema MapaQuillÃ³n - Municipalidad de QuillÃ³n',pageWidth-20,pageHeight-20,{align:'right'});doc.text('Este es un documento de presupuesto - No vÃ¡lido como factura',pageWidth-20,pageHeight-15,{align:'right'});// Guardar el PDF\nconst fileName=`presupuesto_${record.vehiculoPatente}_${record.fechaSolicitud||new Date().toISOString().split('T')[0]}_${Date.now()}.pdf`;doc.save(fileName);setMessage({type:'success',text:'âœ… Presupuesto exportado correctamente como PDF'});}catch(error){console.error('Error al exportar PDF:',error);setMessage({type:'error',text:'âŒ Error al exportar el presupuesto'});}};// Guardar mantenimiento\nconst handleSaveMaintenance=async e=>{e.preventDefault();if(!selectedVehicle){setMessage({type:'error',text:'âŒ Debe seleccionar un vehÃ­culo'});return;}if(!fechaSolicitud||!horaSolicitud){setMessage({type:'error',text:'âŒ Debe especificar fecha y hora de la solicitud'});return;}setLoading(true);try{const totales=calcularTotales();const vehiculo=vehiculos.find(v=>v.id===selectedVehicle);const maintenanceData={vehiculoId:selectedVehicle,vehiculoNombre:(vehiculo===null||vehiculo===void 0?void 0:vehiculo.nombre)||'',vehiculoPatente:(vehiculo===null||vehiculo===void 0?void 0:vehiculo.patente)||'',tipoRepuesto,montoIVA:parseFloat(montoIVA)||0,serviciosPreventivos,totales,fechaSolicitud,horaSolicitud,fechaMantenimiento:new Date().toISOString(),kilometrajeActual:(vehiculo===null||vehiculo===void 0?void 0:vehiculo.kilometraje)||0,createdBy:currentUser.uid,createdAt:new Date().toISOString()};if(editingMaintenance){const maintenanceRef=databaseRef(database,`mantenimientos/${editingMaintenance.id}`);await update(maintenanceRef,{...maintenanceData,updatedAt:new Date().toISOString(),updatedBy:currentUser.uid});setMessage({type:'success',text:'âœ… Presupuesto actualizado exitosamente'});}else{const maintenanceRef=databaseRef(database,'mantenimientos');const newMaintenanceRef=push(maintenanceRef);await databaseSet(newMaintenanceRef,maintenanceData);const vehicleRef=databaseRef(database,`vehiculos/${selectedVehicle}`);await update(vehicleRef,{ultimoMantenimiento:new Date().toISOString().split('T')[0],kilometrajeUltimoMantenimiento:(vehiculo===null||vehiculo===void 0?void 0:vehiculo.kilometraje)||0});setMessage({type:'success',text:'âœ… Presupuesto registrado exitosamente'});}resetForm();}catch(error){console.error('Error al guardar mantenimiento:',error);setMessage({type:'error',text:'âŒ Error al guardar presupuesto'});}finally{setLoading(false);}};const handleEditMaintenance=maintenance=>{var _maintenance$totales;setEditingMaintenance(maintenance);setSelectedVehicle(maintenance.vehiculoId);setTipoRepuesto(maintenance.tipoRepuesto);setMontoIVA(maintenance.montoIVA||((_maintenance$totales=maintenance.totales)===null||_maintenance$totales===void 0?void 0:_maintenance$totales.iva)||0);setServiciosPreventivos(maintenance.serviciosPreventivos);setFechaSolicitud(maintenance.fechaSolicitud||new Date().toISOString().split('T')[0]);setHoraSolicitud(maintenance.horaSolicitud||'00:00');setShowMaintenanceForm(true);setCurrentStep(1);};const handleDeleteMaintenance=async maintenanceId=>{if(window.confirm('Â¿EstÃ¡ seguro de eliminar este registro de mantenimiento?')){try{const maintenanceRef=databaseRef(database,`mantenimientos/${maintenanceId}`);await remove(maintenanceRef);setMessage({type:'success',text:'âœ… Presupuesto eliminado'});}catch(error){setMessage({type:'error',text:'âŒ Error al eliminar presupuesto'});}}};const resetForm=()=>{setShowMaintenanceForm(false);setEditingMaintenance(null);setSelectedVehicle('');setTipoRepuesto('original');setMontoIVA(0);setCurrentStep(1);setFechaSolicitud(new Date().toISOString().split('T')[0]);setHoraSolicitud(new Date().toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit',hour12:false}));setServiciosPreventivos([]);};const totales=calcularTotales();// Filtrar registros con validaciÃ³n de datos y filtro por fechas\nconst filteredRecords=maintenanceRecords.filter(record=>{if(!record)return false;const vehiculoNombre=record.vehiculoNombre||'';const vehiculoPatente=record.vehiculoPatente||'';const searchTermLower=searchTerm.toLowerCase();const matchesSearch=searchTermLower===''||vehiculoNombre.toLowerCase().includes(searchTermLower)||vehiculoPatente.toLowerCase().includes(searchTermLower);const matchesFilter=filterStatus==='todos'||record.tipoRepuesto===filterStatus;// Filtro por fechas\nlet matchesDateRange=true;if(filterDateFrom||filterDateTo){const recordDate=new Date(record.fechaSolicitud||record.fechaMantenimiento).toISOString().split('T')[0];if(filterDateFrom&&filterDateTo){matchesDateRange=recordDate>=filterDateFrom&&recordDate<=filterDateTo;}else if(filterDateFrom){matchesDateRange=recordDate>=filterDateFrom;}else if(filterDateTo){matchesDateRange=recordDate<=filterDateTo;}}return matchesSearch&&matchesFilter&&matchesDateRange;});// EstadÃ­sticas mejoradas\nconst getStats=()=>{const hoy=new Date();const inicioMes=new Date(hoy.getFullYear(),hoy.getMonth(),1);return{total:maintenanceRecords.length,esteMes:maintenanceRecords.filter(m=>new Date(m.fechaMantenimiento)>=inicioMes).length,costoTotal:maintenanceRecords.reduce((sum,m)=>{var _m$totales;return sum+(((_m$totales=m.totales)===null||_m$totales===void 0?void 0:_m$totales.total)||0);},0),promedioMensual:Math.round(maintenanceRecords.reduce((sum,m)=>{var _m$totales2;return sum+(((_m$totales2=m.totales)===null||_m$totales2===void 0?void 0:_m$totales2.total)||0);},0)/12)};};const stats=getStats();return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'1400px',margin:'0 auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',borderRadius:'20px',padding:'30px',marginBottom:'30px',color:'white',boxShadow:'0 10px 30px rgba(102, 126, 234, 0.2)'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{margin:0,fontSize:'32px',fontWeight:'700'},children:\"\\u26FD Centro de Suministros\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'10px 0 0 0',opacity:0.9,fontSize:'16px'},children:\"Registra presupuestos de servicios y consumibles de tu flota\"})]}),message.text&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'16px',borderRadius:'12px',marginBottom:'20px',background:message.type==='success'?'#dcfce7':'#fee2e2',border:`2px solid ${message.type==='success'?'#86efac':'#fecaca'}`,color:message.type==='success'?'#166534':'#991b1b',fontWeight:'500',animation:'slideIn 0.3s ease'},children:message.text}),/*#__PURE__*/_jsx(ServiceCatalogManager,{show:showServiceCatalogManager,onClose:()=>setShowServiceCatalogManager(false),isMobile:isMobile,currentUser:currentUser}),!showMaintenanceForm&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:`repeat(auto-fit, minmax(${isMobile?'150px':'250px'}, 1fr))`,gap:'20px',marginBottom:'30px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{background:'white',padding:'25px',borderRadius:'16px',boxShadow:'0 4px 20px rgba(0,0,0,0.08)',borderTop:'4px solid #3b82f6',transition:'transform 0.3s ease',cursor:'pointer'},onMouseEnter:e=>e.currentTarget.style.transform='translateY(-5px)',onMouseLeave:e=>e.currentTarget.style.transform='translateY(0)',children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'14px',fontWeight:'500'},children:\"Total Presupuestos\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'36px',fontWeight:'bold',color:'#1f2937'},children:stats.total})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'40px',opacity:0.2},children:\"\\uD83D\\uDCCA\"})]})}),/*#__PURE__*/_jsx(\"div\",{style:{background:'white',padding:'25px',borderRadius:'16px',boxShadow:'0 4px 20px rgba(0,0,0,0.08)',borderTop:'4px solid #22c55e',transition:'transform 0.3s ease',cursor:'pointer'},onMouseEnter:e=>e.currentTarget.style.transform='translateY(-5px)',onMouseLeave:e=>e.currentTarget.style.transform='translateY(0)',children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'14px',fontWeight:'500'},children:\"Este Mes\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'36px',fontWeight:'bold',color:'#1f2937'},children:stats.esteMes})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'40px',opacity:0.2},children:\"\\uD83D\\uDCC5\"})]})}),/*#__PURE__*/_jsx(\"div\",{style:{background:'white',padding:'25px',borderRadius:'16px',boxShadow:'0 4px 20px rgba(0,0,0,0.08)',borderTop:'4px solid #f59e0b',transition:'transform 0.3s ease',cursor:'pointer'},onMouseEnter:e=>e.currentTarget.style.transform='translateY(-5px)',onMouseLeave:e=>e.currentTarget.style.transform='translateY(0)',children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'14px',fontWeight:'500'},children:\"Inversi\\xF3n Total\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'24px',fontWeight:'bold',color:'#1f2937'},children:[\"$\",stats.costoTotal.toLocaleString('es-CL')]})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'40px',opacity:0.2},children:\"\\uD83D\\uDCB0\"})]})}),/*#__PURE__*/_jsx(\"div\",{style:{background:'white',padding:'25px',borderRadius:'16px',boxShadow:'0 4px 20px rgba(0,0,0,0.08)',borderTop:'4px solid #8b5cf6',transition:'transform 0.3s ease',cursor:'pointer'},onMouseEnter:e=>e.currentTarget.style.transform='translateY(-5px)',onMouseLeave:e=>e.currentTarget.style.transform='translateY(0)',children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'14px',fontWeight:'500'},children:\"Promedio Mensual\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'24px',fontWeight:'bold',color:'#1f2937'},children:[\"$\",stats.promedioMensual.toLocaleString('es-CL')]})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'40px',opacity:0.2},children:\"\\uD83D\\uDCC8\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'20px',borderRadius:'16px',marginBottom:'30px',boxShadow:'0 4px 20px rgba(0,0,0,0.08)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'30px',display:'flex',justifyContent:'space-between',alignItems:'center',flexWrap:'wrap',gap:'15px'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{margin:0,color:'#1e293b',fontSize:isMobile?'24px':'28px',fontWeight:'600'},children:\"\\u26FD Centro de Suministros y Mantenimiento Preventivo\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowServiceCatalogManager(true),style:{padding:'10px 20px',background:'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',color:'white',border:'none',borderRadius:'8px',fontSize:'14px',cursor:'pointer',boxShadow:'0 2px 4px rgba(0,0,0,0.1)',display:'flex',alignItems:'center',gap:'6px'},children:\"\\uD83D\\uDCE6 Gestionar Cat\\xE1logo\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowMaintenanceForm(true);setCurrentStep(1);},style:{padding:'12px 24px',background:'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',color:'white',border:'none',borderRadius:'12px',fontSize:'16px',fontWeight:'600',cursor:'pointer',display:'flex',alignItems:'center',gap:'8px',boxShadow:'0 4px 15px rgba(34, 197, 94, 0.3)',transition:'all 0.3s ease'},onMouseEnter:e=>{e.currentTarget.style.transform='translateY(-2px)';e.currentTarget.style.boxShadow='0 6px 20px rgba(34, 197, 94, 0.4)';},onMouseLeave:e=>{e.currentTarget.style.transform='translateY(0)';e.currentTarget.style.boxShadow='0 4px 15px rgba(34, 197, 94, 0.3)';},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'20px'},children:\"\\u2795\"}),\"Nuevo Presupuesto\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uD83D\\uDD0D Buscar veh\\xEDculo...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{padding:'10px 15px',border:'2px solid #e5e7eb',borderRadius:'10px',fontSize:'14px',width:'200px',transition:'border-color 0.3s ease',outline:'none'},onFocus:e=>e.currentTarget.style.borderColor='#3b82f6',onBlur:e=>e.currentTarget.style.borderColor='#e5e7eb'}),/*#__PURE__*/_jsxs(\"select\",{value:filterStatus,onChange:e=>setFilterStatus(e.target.value),style:{padding:'10px 15px',border:'2px solid #e5e7eb',borderRadius:'10px',fontSize:'14px',cursor:'pointer',transition:'border-color 0.3s ease',outline:'none'},onFocus:e=>e.currentTarget.style.borderColor='#3b82f6',onBlur:e=>e.currentTarget.style.borderColor='#e5e7eb',children:[/*#__PURE__*/_jsx(\"option\",{value:\"todos\",children:\"Todos\"}),/*#__PURE__*/_jsx(\"option\",{value:\"original\",children:\"Originales\"}),/*#__PURE__*/_jsx(\"option\",{value:\"alternativo\",children:\"Alternativos\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',alignItems:'center',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'14px',color:'#6b7280',fontWeight:'500'},children:\"Filtrar por fecha:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:filterDateFrom,onChange:e=>setFilterDateFrom(e.target.value),placeholder:\"Desde\",style:{padding:'8px 12px',border:'2px solid #e5e7eb',borderRadius:'8px',fontSize:'14px',outline:'none',transition:'border-color 0.3s ease'},onFocus:e=>e.currentTarget.style.borderColor='#3b82f6',onBlur:e=>e.currentTarget.style.borderColor='#e5e7eb'}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#9ca3af'},children:\"hasta\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:filterDateTo,onChange:e=>setFilterDateTo(e.target.value),placeholder:\"Hasta\",style:{padding:'8px 12px',border:'2px solid #e5e7eb',borderRadius:'8px',fontSize:'14px',outline:'none',transition:'border-color 0.3s ease'},onFocus:e=>e.currentTarget.style.borderColor='#3b82f6',onBlur:e=>e.currentTarget.style.borderColor='#e5e7eb'}),(filterDateFrom||filterDateTo)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setFilterDateFrom('');setFilterDateTo('');},style:{padding:'8px 12px',background:'#ef4444',color:'white',border:'none',borderRadius:'8px',fontSize:'13px',cursor:'pointer',fontWeight:'500'},children:\"Limpiar fechas\"})]})]})]}),showMaintenanceForm&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'20px',boxShadow:'0 10px 40px rgba(0,0,0,0.1)',overflow:'hidden'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',padding:'30px',borderBottom:'2px solid #e5e7eb'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:'24px',fontWeight:'600',color:'#1f2937'},children:editingMaintenance?'âœï¸ Editar Presupuesto':'âž• Nuevo Presupuesto'}),/*#__PURE__*/_jsx(\"button\",{onClick:resetForm,style:{padding:'8px 16px',background:'#ef4444',color:'white',border:'none',borderRadius:'8px',fontSize:'14px',cursor:'pointer'},children:\"\\u2716 Cancelar\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'space-between',maxWidth:'600px',margin:'0 auto'},children:[{num:1,label:'VehÃ­culo',icon:'ðŸš›'},{num:2,label:'Servicios',icon:'ðŸ”§'},{num:3,label:'Resumen',icon:'ðŸ’°'}].map((step,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'50px',height:'50px',borderRadius:'50%',background:currentStep>=step.num?'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)':'#e5e7eb',color:currentStep>=step.num?'white':'#6b7280',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'20px',fontWeight:'bold',boxShadow:currentStep===step.num?'0 4px 15px rgba(59, 130, 246, 0.3)':'none',transition:'all 0.3s ease',cursor:currentStep>=step.num?'pointer':'default'},onClick:()=>currentStep>=step.num&&setCurrentStep(step.num),children:step.icon}),/*#__PURE__*/_jsx(\"span\",{style:{marginTop:'8px',fontSize:'13px',fontWeight:'500',color:currentStep>=step.num?'#1f2937':'#9ca3af'},children:step.label})]}),index<2&&/*#__PURE__*/_jsx(\"div\",{style:{height:'2px',background:currentStep>step.num?'#3b82f6':'#e5e7eb',flex:1,margin:'0 10px',transition:'background 0.3s ease'}})]},step.num))})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSaveMaintenance,style:{padding:'30px'},children:[currentStep===1&&/*#__PURE__*/_jsxs(\"div\",{style:{animation:'fadeIn 0.3s ease'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'30px',padding:'20px',background:'#f0f9ff',borderRadius:'12px',border:'2px solid #0ea5e9'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0,marginBottom:'20px',color:'#0c4a6e',fontSize:'18px'},children:\"\\uD83D\\uDCC5 Fecha y hora de la solicitud del presupuesto\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'8px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Fecha de solicitud\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:fechaSolicitud,onChange:e=>setFechaSolicitud(e.target.value),required:true,style:{width:'100%',padding:'10px',border:'2px solid #cbd5e1',borderRadius:'8px',fontSize:'14px',outline:'none'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'8px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Hora de solicitud\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:horaSolicitud,onChange:e=>setHoraSolicitud(e.target.value),required:true,style:{width:'100%',padding:'10px',border:'2px solid #cbd5e1',borderRadius:'8px',fontSize:'14px',outline:'none'}})]})]})]}),/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:'20px',color:'#1f2937',fontSize:'20px'},children:\"Selecciona el veh\\xEDculo\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(300px, 1fr))',gap:'15px'},children:vehiculos.map(v=>{var _v$kilometraje;return/*#__PURE__*/_jsx(\"div\",{onClick:()=>setSelectedVehicle(v.id),style:{padding:'20px',border:`3px solid ${selectedVehicle===v.id?'#3b82f6':'#e5e7eb'}`,borderRadius:'12px',cursor:'pointer',background:selectedVehicle===v.id?'#eff6ff':'white',transition:'all 0.3s ease'},onMouseEnter:e=>{if(selectedVehicle!==v.id){e.currentTarget.style.borderColor='#93c5fd';e.currentTarget.style.background='#f0f9ff';}},onMouseLeave:e=>{if(selectedVehicle!==v.id){e.currentTarget.style.borderColor='#e5e7eb';e.currentTarget.style.background='white';}},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 5px 0',fontSize:'18px',color:'#1f2937'},children:v.nombre}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'0',fontSize:'14px',color:'#6b7280'},children:[v.marca,\" \",v.modelo,\" \\u2022 Patente: \",v.patente]}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'5px 0 0 0',fontSize:'13px',color:'#9ca3af'},children:[\"Kilometraje: \",((_v$kilometraje=v.kilometraje)===null||_v$kilometraje===void 0?void 0:_v$kilometraje.toLocaleString('es-CL'))||0,\" km\"]})]}),selectedVehicle===v.id&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'30px',color:'#3b82f6'},children:\"\\u2713\"})]})},v.id);})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'30px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:'15px',color:'#1f2937',fontSize:'18px'},children:\"Tipo de repuestos a utilizar\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{flex:1,padding:'20px',border:`3px solid ${tipoRepuesto==='original'?'#22c55e':'#e5e7eb'}`,borderRadius:'12px',cursor:'pointer',background:tipoRepuesto==='original'?'#f0fdf4':'white',transition:'all 0.3s ease',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"tipoRepuesto\",value:\"original\",checked:tipoRepuesto==='original',onChange:e=>setTipoRepuesto(e.target.value),style:{display:'none'}}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'30px',marginBottom:'10px'},children:\"\\u2705\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'16px',fontWeight:'600',color:'#15803d'},children:\"Repuestos Originales\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'13px',color:'#6b7280',marginTop:'5px'},children:\"Garant\\xEDa oficial del fabricante\"})]}),/*#__PURE__*/_jsxs(\"label\",{style:{flex:1,padding:'20px',border:`3px solid ${tipoRepuesto==='alternativo'?'#f59e0b':'#e5e7eb'}`,borderRadius:'12px',cursor:'pointer',background:tipoRepuesto==='alternativo'?'#fef3c7':'white',transition:'all 0.3s ease',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"tipoRepuesto\",value:\"alternativo\",checked:tipoRepuesto==='alternativo',onChange:e=>setTipoRepuesto(e.target.value),style:{display:'none'}}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'30px',marginBottom:'10px'},children:\"\\uD83D\\uDD04\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'16px',fontWeight:'600',color:'#92400e'},children:\"Repuestos Alternativos\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'13px',color:'#6b7280',marginTop:'5px'},children:\"Menor costo, garant\\xEDa limitada\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'30px',display:'flex',justifyContent:'flex-end'},children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setCurrentStep(2),disabled:!selectedVehicle,style:{padding:'12px 30px',background:selectedVehicle?'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)':'#e5e7eb',color:selectedVehicle?'white':'#9ca3af',border:'none',borderRadius:'10px',fontSize:'16px',fontWeight:'600',cursor:selectedVehicle?'pointer':'not-allowed',display:'flex',alignItems:'center',gap:'8px'},children:[\"Continuar\",/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'18px'},children:\"\\u2192\"})]})})]}),currentStep===2&&/*#__PURE__*/_jsxs(\"div\",{style:{animation:'fadeIn 0.3s ease'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:'20px',color:'#1f2937',fontSize:'20px'},children:\"Seleccionar servicios del cat\\xE1logo\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px',padding:'20px',background:'#f0f9ff',borderRadius:'12px',border:'2px solid #0ea5e9'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 15px 0',color:'#0c4a6e',fontSize:'16px'},children:\"\\uD83D\\uDCE6 Buscar en el Cat\\xE1logo de Servicios\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'15px'},children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uD83D\\uDD0D Buscar por c\\xF3digo o nombre del servicio...\",value:catalogSearchTerm,onChange:e=>setCatalogSearchTerm(e.target.value),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'8px',fontSize:'14px'}})}),/*#__PURE__*/_jsxs(\"div\",{style:{maxHeight:'300px',overflowY:'auto',border:'1px solid #e5e7eb',borderRadius:'8px',background:'white'},children:[getFilteredCatalogServices().map(servicio=>{var _servicio$manoObra,_servicio$repuestos3;const yaAgregado=serviciosPreventivos.some(s=>s.catalogoId===servicio.id);const totales=calcularTotalesServicioCatalogo(servicio);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'12px',borderBottom:'1px solid #f3f4f6',display:'flex',justifyContent:'space-between',alignItems:'center',background:yaAgregado?'#f0fdf4':'white',transition:'background 0.2s'},onMouseEnter:e=>!yaAgregado&&(e.currentTarget.style.background='#f9fafb'),onMouseLeave:e=>!yaAgregado&&(e.currentTarget.style.background='white'),children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px',marginBottom:'4px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{padding:'2px 8px',background:'#dbeafe',color:'#1e40af',borderRadius:'4px',fontSize:'12px',fontWeight:'600'},children:servicio.codigo}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'14px',fontWeight:'500'},children:servicio.descripcion})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'13px',color:'#6b7280'},children:[\"Mano de obra: $\",((_servicio$manoObra=servicio.manoObra)===null||_servicio$manoObra===void 0?void 0:_servicio$manoObra.toLocaleString())||0,\" \\u2022\",((_servicio$repuestos3=servicio.repuestos)===null||_servicio$repuestos3===void 0?void 0:_servicio$repuestos3.length)||0,\" repuesto(s) \\u2022 Total: $\",totales.total.toLocaleString()]})]}),!yaAgregado?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",defaultValue:\"1\",id:`cantidad-${servicio.id}`,style:{width:'60px',padding:'6px',border:'1px solid #d1d5db',borderRadius:'4px',fontSize:'14px'}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>agregarServicioDeCatalogo(servicio),style:{padding:'6px 16px',background:'#22c55e',color:'white',border:'none',borderRadius:'6px',fontSize:'13px',fontWeight:'500',cursor:'pointer'},children:\"Agregar\"})]}):/*#__PURE__*/_jsx(\"span\",{style:{padding:'6px 12px',background:'#dcfce7',color:'#15803d',borderRadius:'6px',fontSize:'13px',fontWeight:'500'},children:\"\\u2713 Agregado\"})]},servicio.id);}),getFilteredCatalogServices().length===0&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'40px',textAlign:'center',color:'#9ca3af'},children:catalogSearchTerm?'No se encontraron servicios con ese criterio':catalogoServicios.length===0?'No hay servicios en el catÃ¡logo. Crea servicios usando el botÃ³n \"ðŸ“¦ Gestionar CatÃ¡logo\"':'Ingresa un cÃ³digo o nombre para buscar'})]})]}),serviciosPreventivos.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px'},children:[/*#__PURE__*/_jsxs(\"h4\",{style:{marginBottom:'15px',fontSize:'16px',color:'#374151'},children:[\"Servicios seleccionados para el presupuesto (\",serviciosPreventivos.length,\")\"]}),serviciosPreventivos.map((servicio,index)=>{var _servicio$totalRepues,_servicio$iva,_servicio$totalServic;return/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'15px',padding:'15px',background:'#f9fafb',borderRadius:'8px',border:'1px solid #e5e7eb'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'start'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{padding:'2px 8px',background:'#dbeafe',color:'#1e40af',borderRadius:'4px',fontSize:'12px',fontWeight:'600',marginRight:'10px'},children:servicio.codigo}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'15px',fontWeight:'500'},children:servicio.descripcion||servicio.servicio}),/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'10px',padding:'2px 8px',background:'#fef3c7',color:'#92400e',borderRadius:'4px',fontSize:'12px'},children:[\"Cantidad: \",servicio.cantidadServicio||servicio.cantidadRepuesto||1]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(150px, 1fr))',gap:'10px',fontSize:'13px',color:'#6b7280',marginBottom:'10px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#9ca3af'},children:\"Mano de obra:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'500'},children:[\"$\",((servicio.manoObra||0)*(servicio.cantidadServicio||1)).toLocaleString()]})]}),servicio.repuestos&&servicio.repuestos.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#9ca3af'},children:\"Repuestos neto:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'500'},children:[\"$\",((_servicio$totalRepues=servicio.totalRepuestos)===null||_servicio$totalRepues===void 0?void 0:_servicio$totalRepues.toLocaleString())||0]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#9ca3af'},children:\"IVA (19%):\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'500'},children:[\"$\",((_servicio$iva=servicio.iva)===null||_servicio$iva===void 0?void 0:_servicio$iva.toLocaleString())||0]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#9ca3af'},children:\"Total:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'600',color:'#059669'},children:[\"$\",((_servicio$totalServic=servicio.totalServicio)===null||_servicio$totalServic===void 0?void 0:_servicio$totalServic.toLocaleString())||0]})]})]}),servicio.repuestos&&servicio.repuestos.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px',background:'white',borderRadius:'4px',fontSize:'11px',color:'#6b7280'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Repuestos incluidos:\"}),/*#__PURE__*/_jsx(\"ul\",{style:{margin:'4px 0 0 16px',padding:0},children:servicio.repuestos.map((rep,idx)=>/*#__PURE__*/_jsxs(\"li\",{children:[rep.cantidad*(servicio.cantidadServicio||1),\"x \",rep.nombre,\" - $\",(rep.costoUnitario*rep.cantidad*(servicio.cantidadServicio||1)).toLocaleString()]},idx))})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>eliminarServicio(servicio.id),style:{padding:'6px 10px',background:'#ef4444',color:'white',border:'none',borderRadius:'6px',fontSize:'12px',cursor:'pointer'},children:\"\\uD83D\\uDDD1\\uFE0F Quitar\"})]})},servicio.id);}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'20px',padding:'15px',background:'#f0fdf4',borderRadius:'8px',border:'1px solid #86efac'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',fontSize:'18px',fontWeight:'600',color:'#059669'},children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCB0 Total del Presupuesto:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",calcularTotales().total.toLocaleString()]})]})})]}),serviciosPreventivos.length===0&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'40px',background:'#f9fafb',borderRadius:'12px',textAlign:'center',color:'#6b7280'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'10px'},children:\"\\uD83D\\uDCE6\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'16px',fontWeight:'500'},children:\"No hay servicios seleccionados\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'14px'},children:\"Busca y agrega servicios del cat\\xE1logo para crear tu presupuesto\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'30px',display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setCurrentStep(1),style:{padding:'12px 30px',background:'white',color:'#6b7280',border:'2px solid #e5e7eb',borderRadius:'10px',fontSize:'16px',fontWeight:'600',cursor:'pointer',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'18px'},children:\"\\u2190\"}),\"Anterior\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setCurrentStep(3),disabled:serviciosPreventivos.length===0,style:{padding:'12px 30px',background:serviciosPreventivos.length>0?'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)':'#e5e7eb',color:serviciosPreventivos.length>0?'white':'#9ca3af',border:'none',borderRadius:'10px',fontSize:'16px',fontWeight:'600',cursor:serviciosPreventivos.length>0?'pointer':'not-allowed',display:'flex',alignItems:'center',gap:'8px'},children:[\"Continuar\",/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'18px'},children:\"\\u2192\"})]})]})]}),currentStep===3&&/*#__PURE__*/_jsxs(\"div\",{style:{animation:'fadeIn 0.3s ease'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:'20px',color:'#1f2937',fontSize:'20px'},children:\"Resumen del presupuesto\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px',padding:'20px',background:'#fef3c7',borderRadius:'12px',border:'2px solid #fbbf24'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 10px 0',color:'#78350f',fontSize:'16px'},children:\"\\uD83D\\uDCC5 Informaci\\xF3n de la Solicitud\"}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'5px 0',fontSize:'15px',color:'#92400e'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Fecha:\"}),\" \",new Date(fechaSolicitud).toLocaleDateString('es-CL',{weekday:'long',year:'numeric',month:'long',day:'numeric'})]}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'5px 0',fontSize:'15px',color:'#92400e'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Hora:\"}),\" \",horaSolicitud,\" hrs\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px',padding:'20px',background:'#f0f9ff',borderRadius:'12px',border:'2px solid #0284c7'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 10px 0',color:'#0c4a6e',fontSize:'16px'},children:\"\\uD83D\\uDE9B Veh\\xEDculo\"}),vehiculos.filter(v=>v.id===selectedVehicle).map(v=>{var _v$kilometraje2;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{style:{margin:'5px 0',fontSize:'15px',color:'#334155'},children:[/*#__PURE__*/_jsx(\"strong\",{children:v.nombre}),\" - \",v.marca,\" \",v.modelo]}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'5px 0',fontSize:'14px',color:'#64748b'},children:[\"Patente: \",v.patente,\" | Kilometraje: \",((_v$kilometraje2=v.kilometraje)===null||_v$kilometraje2===void 0?void 0:_v$kilometraje2.toLocaleString('es-CL'))||0,\" km\"]})]},v.id);})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px',padding:'20px',background:'#f3f4f6',borderRadius:'12px',border:'2px solid #9ca3af'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 15px 0',color:'#374151',fontSize:'16px'},children:\"\\uD83D\\uDD27 Servicios presupuestados\"}),serviciosPreventivos.map((s,i)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px',marginBottom:'10px',background:'white',borderRadius:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"strong\",{style:{fontSize:'14px'},children:[\"#\",i+1,\" \",s.servicio||'Sin nombre']}),/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:'600',color:'#059669'},children:[\"$\",((parseFloat(s.manoObra)||0)+(parseFloat(s.costoRepuesto)||0)*(parseInt(s.cantidadRepuesto)||1)).toLocaleString('es-CL')]})]}),s.detalle&&/*#__PURE__*/_jsx(\"p\",{style:{margin:'5px 0 0 0',fontSize:'13px',color:'#6b7280'},children:s.detalle})]},s.id))]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'25px',background:tipoRepuesto==='original'?'#f0fdf4':'#fef3c7',borderRadius:'12px',border:`3px solid ${tipoRepuesto==='original'?'#22c55e':'#f59e0b'}`},children:[/*#__PURE__*/_jsxs(\"h4\",{style:{margin:'0 0 20px 0',color:tipoRepuesto==='original'?'#166534':'#78350f',fontSize:'18px',textAlign:'center'},children:[\"\\uD83D\\uDCB0 Presupuesto con repuestos \",tipoRepuesto==='original'?'ORIGINALES':'ALTERNATIVOS']}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'2fr 1fr',gap:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'15px',color:'#6b7280'},children:\"Subtotal Mano de Obra:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right',fontSize:'15px',fontWeight:'500'},children:[\"$\",totales.subtotalManoObra.toLocaleString('es-CL')]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'15px',color:'#6b7280'},children:\"Subtotal Repuestos:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right',fontSize:'15px',fontWeight:'500'},children:[\"$\",totales.subtotalRepuestos.toLocaleString('es-CL')]}),/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:'10px',borderTop:'1px solid #e5e7eb',fontWeight:'600',fontSize:'16px'},children:\"VALOR NETO:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:'10px',borderTop:'1px solid #e5e7eb',textAlign:'right',fontWeight:'600',fontSize:'16px'},children:[\"$\",totales.valorNeto.toLocaleString('es-CL')]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'15px',color:'#6b7280'},children:\"IVA:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right',fontSize:'15px'},children:[\"$\",totales.iva.toLocaleString('es-CL')]}),/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:'15px',borderTop:'2px solid',borderColor:tipoRepuesto==='original'?'#22c55e':'#f59e0b',fontSize:'22px',fontWeight:'bold',color:tipoRepuesto==='original'?'#166534':'#78350f'},children:\"TOTAL:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:'15px',borderTop:'2px solid',borderColor:tipoRepuesto==='original'?'#22c55e':'#f59e0b',textAlign:'right',fontSize:'22px',fontWeight:'bold',color:tipoRepuesto==='original'?'#166534':'#78350f'},children:[\"$\",totales.total.toLocaleString('es-CL')]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'30px',display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setCurrentStep(2),style:{padding:'12px 30px',background:'white',color:'#6b7280',border:'2px solid #e5e7eb',borderRadius:'10px',fontSize:'16px',fontWeight:'600',cursor:'pointer',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'18px'},children:\"\\u2190\"}),\"Anterior\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:{padding:'12px 40px',background:loading?'#9ca3af':'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',color:'white',border:'none',borderRadius:'10px',fontSize:'16px',fontWeight:'600',cursor:loading?'not-allowed':'pointer',display:'flex',alignItems:'center',gap:'8px',boxShadow:'0 4px 15px rgba(34, 197, 94, 0.3)'},children:loading?'â³ Guardando...':editingMaintenance?'âœ… Actualizar Presupuesto':'âœ… Guardar Presupuesto'})]})]})]}),/*#__PURE__*/_jsx(\"style\",{children:`\n            @keyframes fadeIn {\n              from { opacity: 0; transform: translateY(10px); }\n              to { opacity: 1; transform: translateY(0); }\n            }\n            @keyframes slideIn {\n              from { transform: translateX(-20px); opacity: 0; }\n              to { transform: translateX(0); opacity: 1; }\n            }\n          `})]}),!showMaintenanceForm&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'20px',boxShadow:'0 10px 40px rgba(0,0,0,0.1)',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'25px',borderBottom:'2px solid #e5e7eb',background:'linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%)'},children:/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,color:'#1f2937',fontSize:'22px',fontWeight:'600'},children:\"\\uD83D\\uDCCB Historial de Presupuestos\"})}),filteredRecords.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{padding:'60px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'60px',marginBottom:'20px',opacity:0.2},children:\"\\uD83D\\uDD27\"}),/*#__PURE__*/_jsx(\"h3\",{style:{color:'#9ca3af',fontSize:'20px',margin:'0 0 10px 0'},children:\"No hay presupuestos registrados\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#d1d5db',fontSize:'16px'},children:filterDateFrom||filterDateTo?'No se encontraron presupuestos en el rango de fechas seleccionado':'Comienza agregando tu primer presupuesto de mantenimiento'}),(filterDateFrom||filterDateTo)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setFilterDateFrom('');setFilterDateTo('');},style:{marginTop:'20px',padding:'10px 20px',background:'#3b82f6',color:'white',border:'none',borderRadius:'8px',fontSize:'14px',cursor:'pointer'},children:\"Ver todos los presupuestos\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px'},children:filteredRecords.map(record=>{var _record$serviciosPrev,_record$kilometrajeAc2,_record$totales,_record$totales$total;return/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'15px',padding:'20px',background:'#f9fafb',borderRadius:'12px',border:'2px solid #e5e7eb',transition:'all 0.3s ease'},onMouseEnter:e=>{e.currentTarget.style.borderColor='#3b82f6';e.currentTarget.style.transform='translateX(5px)';},onMouseLeave:e=>{e.currentTarget.style.borderColor='#e5e7eb';e.currentTarget.style.transform='translateX(0)';},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'start'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'15px',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,fontSize:'18px',color:'#1f2937'},children:record.vehiculoNombre}),/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 10px',borderRadius:'6px',fontSize:'12px',fontWeight:'600',background:record.tipoRepuesto==='original'?'#dcfce7':'#fef3c7',color:record.tipoRepuesto==='original'?'#166534':'#78350f'},children:record.tipoRepuesto==='original'?'âœ… Original':'ðŸ”„ Alternativo'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'20px',fontSize:'14px',color:'#6b7280',flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDCC5 Solicitud: \",record.fechaSolicitud||new Date(record.fechaMantenimiento).toLocaleDateString('es-CL')]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDD50 \",record.horaSolicitud||'Sin hora']}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDE97 \",record.vehiculoPatente]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDD27 \",((_record$serviciosPrev=record.serviciosPreventivos)===null||_record$serviciosPrev===void 0?void 0:_record$serviciosPrev.length)||0,\" servicios\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDCCD \",((_record$kilometrajeAc2=record.kilometrajeActual)===null||_record$kilometrajeAc2===void 0?void 0:_record$kilometrajeAc2.toLocaleString('es-CL'))||0,\" km\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#9ca3af'},children:\"Total\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'22px',fontWeight:'bold',color:'#059669'},children:[\"$\",((_record$totales=record.totales)===null||_record$totales===void 0?void 0:(_record$totales$total=_record$totales.total)===null||_record$totales$total===void 0?void 0:_record$totales$total.toLocaleString('es-CL'))||0]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleExportPDF(record),style:{padding:'8px',background:'#10b981',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',width:'36px',height:'36px',transition:'background 0.3s ease'},onMouseEnter:e=>e.currentTarget.style.background='#059669',onMouseLeave:e=>e.currentTarget.style.background='#10b981',title:\"Exportar a PDF\",children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditMaintenance(record),style:{padding:'8px',background:'#3b82f6',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',width:'36px',height:'36px'},title:\"Editar\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteMaintenance(record.id),style:{padding:'8px',background:'#ef4444',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',width:'36px',height:'36px'},title:\"Eliminar\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]})]})]})},record.id);})})]})]});};export default PreventiveMaintenanceModule;","map":{"version":3,"names":["React","useState","useEffect","useCallback","ref","databaseRef","set","databaseSet","push","update","remove","onValue","off","ServiceCatalogManager","database","pdfExportService","jsPDF","autoTable","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PreventiveMaintenanceModule","_ref","vehiculos","currentUser","isMobile","maintenanceRecords","setMaintenanceRecords","showMaintenanceForm","setShowMaintenanceForm","selectedVehicle","setSelectedVehicle","editingMaintenance","setEditingMaintenance","loading","setLoading","message","setMessage","type","text","showServiceCatalogManager","setShowServiceCatalogManager","currentStep","setCurrentStep","activeView","setActiveView","searchTerm","setSearchTerm","filterStatus","setFilterStatus","filterDateFrom","setFilterDateFrom","filterDateTo","setFilterDateTo","tipoRepuesto","setTipoRepuesto","fechaSolicitud","setFechaSolicitud","Date","toISOString","split","horaSolicitud","setHoraSolicitud","toLocaleTimeString","hour","minute","hour12","serviciosPreventivos","setServiciosPreventivos","catalogoServicios","setCatalogoServicios","catalogSearchTerm","setCatalogSearchTerm","montoIVA","setMontoIVA","calcularTotales","subtotalManoObra","reduce","sum","s","parseFloat","manoObra","subtotalRepuestos","costoRepuesto","parseInt","cantidadRepuesto","repuestosConIVA","Math","round","iva","total","valorNeto","calcularTotalesServicioCatalogo","servicio","_servicio$repuestos","totalRepuestos","repuestos","repuesto","cantidad","costoUnitario","maintenanceRef","unsubscribe","snapshot","data","val","maintenanceArray","Object","entries","map","_ref2","id","maintenance","catalogoRef","serviciosArray","_ref3","getFilteredCatalogServices","searchLower","toLowerCase","filter","codigo","includes","descripcion","agregarServicioDeCatalogo","_servicio$repuestos2","cantidadInput","document","getElementById","value","rep","totalServicio","nuevoServicio","now","catalogoId","cantidadServicio","agregarServicio","ultimoServicio","length","detalle","nuevoNumero","numero","repuestoDescripcion","actualizarServicio","campo","valor","eliminarServicio","nuevosServicios","serviciosRenumerados","index","handleExportPDF","record","_vehiculo$aÃ±o","_record$kilometrajeAc","doc","pageWidth","internal","pageSize","width","pageHeight","height","fechaGeneracion","toLocaleDateString","year","month","day","serviciosValidos","setFillColor","rect","setTextColor","setFontSize","setFont","undefined","align","substring","toUpperCase","yPos","infoSolicitud","fechaMantenimiento","weekday","name","email","startY","head","body","theme","styles","fontSize","cellPadding","columnStyles","fontStyle","cellWidth","lastAutoTable","finalY","vehiculo","find","v","vehiculoId","infoVehiculo","vehiculoNombre","vehiculoPatente","marca","modelo","aÃ±o","toString","kilometrajeActual","toLocaleString","serviciosData","_servicio$cantidadRep","subtotalSinIva","totalConIva","headStyles","fillColor","textColor","bodyStyles","halign","addPage","startX","totales","setDrawColor","line","setLineWidth","fileName","save","error","console","handleSaveMaintenance","e","preventDefault","maintenanceData","nombre","patente","kilometraje","createdBy","uid","createdAt","updatedAt","updatedBy","newMaintenanceRef","vehicleRef","ultimoMantenimiento","kilometrajeUltimoMantenimiento","resetForm","handleEditMaintenance","_maintenance$totales","handleDeleteMaintenance","maintenanceId","window","confirm","filteredRecords","searchTermLower","matchesSearch","matchesFilter","matchesDateRange","recordDate","getStats","hoy","inicioMes","getFullYear","getMonth","esteMes","m","costoTotal","_m$totales","promedioMensual","_m$totales2","stats","style","maxWidth","margin","children","background","borderRadius","padding","marginBottom","color","boxShadow","fontWeight","opacity","border","animation","show","onClose","display","gridTemplateColumns","gap","borderTop","transition","cursor","onMouseEnter","currentTarget","transform","onMouseLeave","justifyContent","alignItems","flexWrap","onClick","placeholder","onChange","target","outline","onFocus","borderColor","onBlur","overflow","borderBottom","num","label","icon","step","flex","flexDirection","marginTop","onSubmit","required","_v$kilometraje","textAlign","checked","disabled","maxHeight","overflowY","_servicio$manoObra","_servicio$repuestos3","yaAgregado","some","min","defaultValue","_servicio$totalRepues","_servicio$iva","_servicio$totalServic","marginRight","marginLeft","idx","_v$kilometraje2","i","paddingTop","_record$serviciosPrev","_record$kilometrajeAc2","_record$totales","_record$totales$total","title"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/PreventiveMaintenanceModule.js"],"sourcesContent":["// src/components/PreventiveMaintenanceModule.js\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport {\r\n  ref as databaseRef,\r\n  set as databaseSet,\r\n  push,\r\n  update,\r\n  remove,\r\n  onValue,\r\n  off\r\n} from 'firebase/database';\r\nimport ServiceCatalogManager from './ServiceCatalogManager';\r\nimport { database } from '../config/firebase';\r\nimport { pdfExportService } from '../services/pdfExportService';\r\nimport { jsPDF } from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\n\r\nconst PreventiveMaintenanceModule = ({ vehiculos, currentUser, isMobile }) => {\r\n  // Estados principales\r\n  const [maintenanceRecords, setMaintenanceRecords] = useState([]);\r\n  const [showMaintenanceForm, setShowMaintenanceForm] = useState(false);\r\n  const [selectedVehicle, setSelectedVehicle] = useState('');\r\n  const [editingMaintenance, setEditingMaintenance] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n  const [showServiceCatalogManager, setShowServiceCatalogManager] = useState(false);\r\n\r\n\r\n  // Estado para el paso actual del formulario\r\n  const [currentStep, setCurrentStep] = useState(1);\r\n\r\n  // Estado para vista activa\r\n  const [activeView, setActiveView] = useState('dashboard');\r\n\r\n  // Estado para bÃºsqueda y filtros\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState('todos');\r\n  const [filterDateFrom, setFilterDateFrom] = useState('');\r\n  const [filterDateTo, setFilterDateTo] = useState('');\r\n\r\n  // Estado para tipo de repuesto\r\n  const [tipoRepuesto, setTipoRepuesto] = useState('original');\r\n\r\n  // Estados para fecha y hora de la solicitud\r\n  const [fechaSolicitud, setFechaSolicitud] = useState(new Date().toISOString().split('T')[0]);\r\n  const [horaSolicitud, setHoraSolicitud] = useState(new Date().toLocaleTimeString('es-CL', { hour: '2-digit', minute: '2-digit', hour12: false }));\r\n\r\n  // Estado para servicios preventivos\r\n  const [serviciosPreventivos, setServiciosPreventivos] = useState([]);\r\n  const [catalogoServicios, setCatalogoServicios] = useState([]);\r\n  const [catalogSearchTerm, setCatalogSearchTerm] = useState('');\r\n\r\n  const [montoIVA, setMontoIVA] = useState(0);\r\n  const calcularTotales = useCallback(() => {\r\n    const subtotalManoObra = serviciosPreventivos.reduce((sum, s) => sum + (parseFloat(s.manoObra) || 0), 0);\r\n    const subtotalRepuestos = serviciosPreventivos.reduce((sum, s) => sum + ((parseFloat(s.costoRepuesto) || 0) * (parseInt(s.cantidadRepuesto) || 1)), 0);\r\n    const repuestosConIVA = Math.round(subtotalRepuestos * 1.19); // Repuestos Ã— 1.19\r\n    const iva = Math.round(subtotalRepuestos * 0.19); // IVA de repuestos\r\n    const total = subtotalManoObra + repuestosConIVA; // Mano de obra + Repuestos con IVA\r\n\r\n    return {\r\n      subtotalManoObra,\r\n      subtotalRepuestos,\r\n      valorNeto: subtotalManoObra + subtotalRepuestos,\r\n      iva,\r\n      total\r\n    };\r\n  }, [serviciosPreventivos]);\r\n  // Add this function to your PreventiveMaintenanceModule component\r\n  // Place it near the other calculation functions\r\n\r\n  const calcularTotalesServicioCatalogo = useCallback((servicio) => {\r\n    const manoObra = parseFloat(servicio.manoObra) || 0;\r\n    const totalRepuestos = servicio.repuestos?.reduce((sum, repuesto) => {\r\n      return sum + (repuesto.cantidad * repuesto.costoUnitario);\r\n    }, 0) || 0;\r\n    const iva = Math.round(totalRepuestos * 0.19);\r\n    const total = manoObra + totalRepuestos + iva;\r\n\r\n    return {\r\n      manoObra,\r\n      totalRepuestos,\r\n      iva,\r\n      total\r\n    };\r\n  }, []);\r\n\r\n  // Cargar registros de mantenimiento\r\n  useEffect(() => {\r\n    const maintenanceRef = databaseRef(database, 'mantenimientos');\r\n    const unsubscribe = onValue(maintenanceRef, (snapshot) => {\r\n      const data = snapshot.val();\r\n      if (data) {\r\n        const maintenanceArray = Object.entries(data).map(([id, maintenance]) => ({\r\n          id,\r\n          ...maintenance\r\n        }));\r\n        setMaintenanceRecords(maintenanceArray);\r\n      } else {\r\n        setMaintenanceRecords([]);\r\n      }\r\n    });\r\n\r\n    return () => off(maintenanceRef);\r\n  }, []);\r\n  useEffect(() => {\r\n    const catalogoRef = databaseRef(database, 'catalogo_servicios');\r\n    onValue(catalogoRef, (snapshot) => {\r\n      const data = snapshot.val();\r\n      if (data) {\r\n        const serviciosArray = Object.entries(data).map(([id, servicio]) => ({\r\n          id,\r\n          ...servicio\r\n        }));\r\n        setCatalogoServicios(serviciosArray);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  // Filtrar servicios del catÃ¡logo\r\n  const getFilteredCatalogServices = () => {\r\n    if (!catalogSearchTerm) return catalogoServicios;\r\n\r\n    const searchLower = catalogSearchTerm.toLowerCase();\r\n    return catalogoServicios.filter(servicio =>\r\n      servicio.codigo.toLowerCase().includes(searchLower) ||\r\n      servicio.descripcion.toLowerCase().includes(searchLower)\r\n    );\r\n  };\r\n\r\n  // Agregar servicio del catÃ¡logo\r\n  const agregarServicioDeCatalogo = (servicio) => {\r\n    const cantidadInput = document.getElementById(`cantidad-${servicio.id}`);\r\n    const cantidad = parseInt(cantidadInput?.value) || 1;\r\n\r\n    const totalRepuestos = (servicio.repuestos?.reduce((sum, rep) =>\r\n      sum + (rep.cantidad * rep.costoUnitario), 0) || 0) * cantidad;\r\n    const iva = Math.round(totalRepuestos * 0.19);\r\n    const totalServicio = (servicio.manoObra || 0) * cantidad + totalRepuestos + iva;\r\n\r\n    const nuevoServicio = {\r\n      id: Date.now(),\r\n      catalogoId: servicio.id,\r\n      codigo: servicio.codigo,\r\n      descripcion: servicio.descripcion,\r\n      manoObra: servicio.manoObra || 0,\r\n      repuestos: servicio.repuestos || [],\r\n      cantidadServicio: cantidad,\r\n      totalRepuestos,\r\n      iva,\r\n      totalServicio\r\n    };\r\n\r\n    setServiciosPreventivos([...serviciosPreventivos, nuevoServicio]);\r\n  };\r\n\r\n  // Funciones auxiliares\r\n  const agregarServicio = () => {\r\n    const ultimoServicio = serviciosPreventivos[serviciosPreventivos.length - 1];\r\n    // Si el Ãºltimo servicio no tiene datos significativos, no agregar otro\r\n    if (ultimoServicio &&\r\n      !ultimoServicio.servicio &&\r\n      !ultimoServicio.detalle &&\r\n      ultimoServicio.manoObra === 0 &&\r\n      ultimoServicio.costoRepuesto === 0) {\r\n      setMessage({ type: 'warning', text: 'âš ï¸ Complete el servicio actual antes de agregar otro' });\r\n      return;\r\n    }\r\n    const nuevoNumero = serviciosPreventivos.length + 1;\r\n    setServiciosPreventivos([...serviciosPreventivos, {\r\n      id: Date.now(),\r\n      numero: nuevoNumero,\r\n      servicio: '',\r\n      codigo: '',\r\n      detalle: '',\r\n      manoObra: 0,\r\n      costoRepuesto: 0,\r\n      cantidadRepuesto: 1,\r\n      repuestoDescripcion: '',\r\n      iva: 0\r\n\r\n    }]);\r\n  };\r\n\r\n  const actualizarServicio = (id, campo, valor) => {\r\n    setServiciosPreventivos(serviciosPreventivos.map(s =>\r\n      s.id === id ? { ...s, [campo]: valor } : s\r\n    ));\r\n  };\r\n\r\n  const eliminarServicio = (id) => {\r\n    if (serviciosPreventivos.length > 1) {\r\n      const nuevosServicios = serviciosPreventivos.filter(s => s.id !== id);\r\n      const serviciosRenumerados = nuevosServicios.map((s, index) => ({\r\n        ...s,\r\n        numero: index + 1\r\n      }));\r\n      setServiciosPreventivos(serviciosRenumerados);\r\n    }\r\n  };\r\n  // Dentro del componente PreventiveMaintenanceModule, esta es la funciÃ³n completa:\r\n\r\n  const handleExportPDF = (record) => {\r\n    try {\r\n      const doc = new jsPDF();\r\n      const pageWidth = doc.internal.pageSize.width;\r\n      const pageHeight = doc.internal.pageSize.height;\r\n\r\n      // Fecha actual\r\n      const now = new Date();\r\n      const fechaGeneracion = now.toLocaleDateString('es-CL', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric'\r\n      });\r\n\r\n      // Filtrar servicios vÃ¡lidos\r\n      const serviciosValidos = record.serviciosPreventivos.filter(servicio =>\r\n        servicio.servicio ||\r\n        servicio.detalle ||\r\n        servicio.manoObra > 0 ||\r\n        servicio.costoRepuesto > 0\r\n      );\r\n\r\n      if (serviciosValidos.length === 0) {\r\n        setMessage({ type: 'error', text: 'âŒ No hay servicios vÃ¡lidos para exportar' });\r\n        return;\r\n      }\r\n\r\n      // Header con color\r\n      doc.setFillColor(102, 126, 234);\r\n      doc.rect(0, 0, pageWidth, 45, 'F');\r\n\r\n      // TÃ­tulo principal\r\n      doc.setTextColor(255, 255, 255);\r\n      doc.setFontSize(22);\r\n      doc.setFont(undefined, 'bold');\r\n      doc.text('PRESUPUESTO DE MANTENIMIENTO', pageWidth / 2, 20, { align: 'center' });\r\n\r\n      // SubtÃ­tulo\r\n      doc.setFontSize(14);\r\n      doc.setFont(undefined, 'normal');\r\n      doc.text('Sistema MapaQuillÃ³n', pageWidth / 2, 32, { align: 'center' });\r\n\r\n      // NÃºmero de presupuesto\r\n      doc.setFontSize(11);\r\n      doc.text(`Presupuesto #${record.id.substring(0, 8).toUpperCase()}`, pageWidth / 2, 40, { align: 'center' });\r\n\r\n      // InformaciÃ³n de la solicitud\r\n      let yPos = 60;\r\n      doc.setTextColor(31, 41, 55);\r\n      doc.setFontSize(14);\r\n      doc.setFont(undefined, 'bold');\r\n      doc.text('INFORMACIÃ“N DE LA SOLICITUD', 20, yPos);\r\n\r\n      yPos += 10;\r\n      doc.setFontSize(11);\r\n      doc.setFont(undefined, 'normal');\r\n\r\n      // Cuadro de informaciÃ³n\r\n      const infoSolicitud = [\r\n        ['Fecha de Solicitud:', new Date(record.fechaSolicitud || record.fechaMantenimiento).toLocaleDateString('es-CL', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })],\r\n        ['Hora de Solicitud:', `${record.horaSolicitud || 'No especificada'} hrs`],\r\n        ['Solicitado por:', currentUser.name || currentUser.email || 'Usuario del sistema'],\r\n        ['Estado:', 'PRESUPUESTO']\r\n      ];\r\n\r\n      autoTable(doc, {\r\n        startY: yPos,\r\n        head: [],\r\n        body: infoSolicitud,\r\n        theme: 'plain',\r\n        styles: {\r\n          fontSize: 10,\r\n          cellPadding: 2\r\n        },\r\n        columnStyles: {\r\n          0: { fontStyle: 'bold', cellWidth: 45 },\r\n          1: { cellWidth: 140 }\r\n        }\r\n      });\r\n\r\n      yPos = doc.lastAutoTable.finalY + 15;\r\n\r\n      // InformaciÃ³n del vehÃ­culo\r\n      doc.setFontSize(14);\r\n      doc.setFont(undefined, 'bold');\r\n      doc.text('INFORMACIÃ“N DEL VEHÃCULO', 20, yPos);\r\n\r\n      yPos += 10;\r\n\r\n      const vehiculo = vehiculos.find(v => v.id === record.vehiculoId);\r\n      const infoVehiculo = [\r\n        ['VehÃ­culo:', record.vehiculoNombre || 'No especificado'],\r\n        ['Patente:', record.vehiculoPatente || 'No especificada'],\r\n        ['Marca/Modelo:', vehiculo ? `${vehiculo.marca} ${vehiculo.modelo}` : 'No especificado'],\r\n        ['AÃ±o:', vehiculo?.aÃ±o?.toString() || 'No especificado'],\r\n        ['Kilometraje Actual:', `${record.kilometrajeActual?.toLocaleString('es-CL') || 0} km`],\r\n        ['Tipo de Repuestos:', record.tipoRepuesto === 'original' ? 'ORIGINALES (GarantÃ­a oficial)' : 'ALTERNATIVOS (Menor costo)']\r\n      ];\r\n\r\n      autoTable(doc, {\r\n        startY: yPos,\r\n        head: [],\r\n        body: infoVehiculo,\r\n        theme: 'plain',\r\n        styles: {\r\n          fontSize: 10,\r\n          cellPadding: 2\r\n        },\r\n        columnStyles: {\r\n          0: { fontStyle: 'bold', cellWidth: 45 },\r\n          1: { cellWidth: 140 }\r\n        }\r\n      });\r\n\r\n      yPos = doc.lastAutoTable.finalY + 15;\r\n\r\n      // Detalle de servicios\r\n      doc.setFontSize(14);\r\n      doc.setFont(undefined, 'bold');\r\n      doc.text('DETALLE DE SERVICIOS PRESUPUESTADOS', 20, yPos);\r\n\r\n      yPos += 10;\r\n\r\n      // Modificar la preparaciÃ³n de datos para la tabla\r\n      const serviciosData = serviciosValidos.map((servicio, index) => {\r\n        const subtotalSinIva = (parseFloat(servicio.manoObra) || 0) +\r\n          ((parseFloat(servicio.costoRepuesto) || 0) * (parseInt(servicio.cantidadRepuesto) || 1));\r\n        const iva = parseFloat(servicio.iva) || 0;\r\n        const totalConIva = subtotalSinIva + iva;\r\n\r\n        return [\r\n          (index + 1).toString(),\r\n          servicio.servicio || 'Servicio general',\r\n          servicio.detalle || 'Sin descripciÃ³n',\r\n          servicio.repuestoDescripcion || 'N/A',\r\n          servicio.cantidadRepuesto?.toString() || '1',\r\n          `$${(parseFloat(servicio.manoObra) || 0).toLocaleString('es-CL')}`,\r\n          `$${(parseFloat(servicio.costoRepuesto) || 0).toLocaleString('es-CL')}`,\r\n          `$${iva.toLocaleString('es-CL')}`, // Agregar columna IVA\r\n          `$${totalConIva.toLocaleString('es-CL')}`\r\n        ];\r\n      });\r\n\r\n      // Actualizar los headers de la tabla\r\n      autoTable(doc, {\r\n        startY: yPos,\r\n        head: [['#', 'Servicio', 'DescripciÃ³n', 'Repuesto', 'Cant.', 'Mano Obra', 'Costo Unit.', 'IVA', 'Total']],\r\n        body: serviciosData,\r\n        theme: 'striped',\r\n        headStyles: {\r\n          fillColor: [102, 126, 234],\r\n          textColor: 255,\r\n          fontSize: 9,\r\n          fontStyle: 'bold'\r\n        },\r\n        bodyStyles: {\r\n          fontSize: 8\r\n        },\r\n        columnStyles: {\r\n          0: { cellWidth: 8, halign: 'center' },\r\n          1: { cellWidth: 25 },\r\n          2: { cellWidth: 35 },\r\n          3: { cellWidth: 25 },\r\n          4: { cellWidth: 10, halign: 'center' },\r\n          5: { cellWidth: 20, halign: 'right' },\r\n          6: { cellWidth: 20, halign: 'right' },\r\n          7: { cellWidth: 18, halign: 'right' }, // IVA\r\n          8: { cellWidth: 22, halign: 'right', fontStyle: 'bold' } // Total\r\n        }\r\n      });\r\n\r\n      yPos = doc.lastAutoTable.finalY + 15;\r\n\r\n      // Verificar si necesitamos nueva pÃ¡gina\r\n      if (yPos > pageHeight - 80) {\r\n        doc.addPage();\r\n        yPos = 30;\r\n      }\r\n\r\n      // Resumen de costos\r\n      doc.setFillColor(240, 253, 244);\r\n      doc.rect(pageWidth - 100, yPos - 5, 85, 70, 'F');\r\n\r\n      doc.setTextColor(31, 41, 55);\r\n      doc.setFontSize(10);\r\n      doc.setFont(undefined, 'normal');\r\n\r\n      const startX = pageWidth - 95;\r\n      doc.text('Subtotal Mano de Obra:', startX, yPos + 5);\r\n      doc.text(`$${record.totales.subtotalManoObra.toLocaleString('es-CL')}`, pageWidth - 20, yPos + 5, { align: 'right' });\r\n\r\n      doc.text('Subtotal Repuestos:', startX, yPos + 15);\r\n      doc.text(`$${record.totales.subtotalRepuestos.toLocaleString('es-CL')}`, pageWidth - 20, yPos + 15, { align: 'right' });\r\n\r\n      doc.setDrawColor(200, 200, 200);\r\n      doc.line(startX, yPos + 20, pageWidth - 20, yPos + 20);\r\n\r\n      doc.setFont(undefined, 'bold');\r\n      doc.text('VALOR NETO:', startX, yPos + 30);\r\n      doc.text(`$${record.totales.valorNeto.toLocaleString('es-CL')}`, pageWidth - 20, yPos + 30, { align: 'right' });\r\n\r\n      doc.setFont(undefined, 'normal');\r\n      doc.text('IVA:', startX, yPos + 40);\r\n      doc.text(`$${record.totales.iva.toLocaleString('es-CL')}`, pageWidth - 20, yPos + 40, { align: 'right' });\r\n\r\n      doc.setDrawColor(34, 197, 94);\r\n      doc.setLineWidth(1);\r\n      doc.line(startX, yPos + 45, pageWidth - 20, yPos + 45);\r\n\r\n      doc.setFontSize(14);\r\n      doc.setFont(undefined, 'bold');\r\n      doc.setTextColor(22, 163, 74);\r\n      doc.text('TOTAL:', startX, yPos + 58);\r\n      doc.text(`$${record.totales.total.toLocaleString('es-CL')}`, pageWidth - 20, yPos + 58, { align: 'right' });\r\n\r\n      // Condiciones y validez\r\n      yPos += 80;\r\n\r\n      if (yPos < pageHeight - 60) {\r\n        doc.setTextColor(107, 114, 128);\r\n        doc.setFontSize(9);\r\n        doc.setFont(undefined, 'italic');\r\n        doc.text('CONDICIONES:', 20, yPos);\r\n        yPos += 6;\r\n        doc.setFont(undefined, 'normal');\r\n        doc.text('â€¢ Este presupuesto tiene una validez de 30 dÃ­as desde la fecha de emisiÃ³n', 25, yPos);\r\n        yPos += 5;\r\n        doc.text('â€¢ Los precios incluyen IVA', 25, yPos);\r\n        yPos += 5;\r\n        doc.text(`â€¢ Tipo de repuestos: ${record.tipoRepuesto === 'original' ? 'Originales con garantÃ­a de fÃ¡brica' : 'Alternativos con garantÃ­a limitada'}`, 25, yPos);\r\n        yPos += 5;\r\n        doc.text('â€¢ Sujeto a disponibilidad de repuestos', 25, yPos);\r\n      }\r\n\r\n      // Footer\r\n      doc.setDrawColor(200, 200, 200);\r\n      doc.line(20, pageHeight - 30, pageWidth - 20, pageHeight - 30);\r\n\r\n      doc.setTextColor(107, 114, 128);\r\n      doc.setFontSize(8);\r\n      doc.setFont(undefined, 'italic');\r\n      doc.text(`Documento generado el ${fechaGeneracion}`, 20, pageHeight - 20);\r\n      doc.text(`Por: ${currentUser.name || currentUser.email}`, 20, pageHeight - 15);\r\n      doc.text('Sistema MapaQuillÃ³n - Municipalidad de QuillÃ³n', pageWidth - 20, pageHeight - 20, { align: 'right' });\r\n      doc.text('Este es un documento de presupuesto - No vÃ¡lido como factura', pageWidth - 20, pageHeight - 15, { align: 'right' });\r\n\r\n      // Guardar el PDF\r\n      const fileName = `presupuesto_${record.vehiculoPatente}_${record.fechaSolicitud || new Date().toISOString().split('T')[0]}_${Date.now()}.pdf`;\r\n      doc.save(fileName);\r\n\r\n      setMessage({ type: 'success', text: 'âœ… Presupuesto exportado correctamente como PDF' });\r\n    } catch (error) {\r\n      console.error('Error al exportar PDF:', error);\r\n      setMessage({ type: 'error', text: 'âŒ Error al exportar el presupuesto' });\r\n    }\r\n  };\r\n\r\n  // Guardar mantenimiento\r\n  const handleSaveMaintenance = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!selectedVehicle) {\r\n      setMessage({ type: 'error', text: 'âŒ Debe seleccionar un vehÃ­culo' });\r\n      return;\r\n    }\r\n\r\n    if (!fechaSolicitud || !horaSolicitud) {\r\n      setMessage({ type: 'error', text: 'âŒ Debe especificar fecha y hora de la solicitud' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const totales = calcularTotales();\r\n      const vehiculo = vehiculos.find(v => v.id === selectedVehicle);\r\n\r\n      const maintenanceData = {\r\n        vehiculoId: selectedVehicle,\r\n        vehiculoNombre: vehiculo?.nombre || '',\r\n        vehiculoPatente: vehiculo?.patente || '',\r\n        tipoRepuesto,\r\n        montoIVA: parseFloat(montoIVA) || 0,\r\n        serviciosPreventivos,\r\n        totales,\r\n        fechaSolicitud,\r\n        horaSolicitud,\r\n        fechaMantenimiento: new Date().toISOString(),\r\n        kilometrajeActual: vehiculo?.kilometraje || 0,\r\n        createdBy: currentUser.uid,\r\n        createdAt: new Date().toISOString()\r\n      };\r\n\r\n      if (editingMaintenance) {\r\n        const maintenanceRef = databaseRef(database, `mantenimientos/${editingMaintenance.id}`);\r\n        await update(maintenanceRef, {\r\n          ...maintenanceData,\r\n          updatedAt: new Date().toISOString(),\r\n          updatedBy: currentUser.uid\r\n        });\r\n\r\n        setMessage({ type: 'success', text: 'âœ… Presupuesto actualizado exitosamente' });\r\n      } else {\r\n        const maintenanceRef = databaseRef(database, 'mantenimientos');\r\n        const newMaintenanceRef = push(maintenanceRef);\r\n        await databaseSet(newMaintenanceRef, maintenanceData);\r\n\r\n        const vehicleRef = databaseRef(database, `vehiculos/${selectedVehicle}`);\r\n        await update(vehicleRef, {\r\n          ultimoMantenimiento: new Date().toISOString().split('T')[0],\r\n          kilometrajeUltimoMantenimiento: vehiculo?.kilometraje || 0\r\n        });\r\n\r\n        setMessage({ type: 'success', text: 'âœ… Presupuesto registrado exitosamente' });\r\n      }\r\n\r\n      resetForm();\r\n\r\n    } catch (error) {\r\n      console.error('Error al guardar mantenimiento:', error);\r\n      setMessage({ type: 'error', text: 'âŒ Error al guardar presupuesto' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEditMaintenance = (maintenance) => {\r\n    setEditingMaintenance(maintenance);\r\n    setSelectedVehicle(maintenance.vehiculoId);\r\n    setTipoRepuesto(maintenance.tipoRepuesto);\r\n    setMontoIVA(maintenance.montoIVA || maintenance.totales?.iva || 0);\r\n    setServiciosPreventivos(maintenance.serviciosPreventivos);\r\n    setFechaSolicitud(maintenance.fechaSolicitud || new Date().toISOString().split('T')[0]);\r\n    setHoraSolicitud(maintenance.horaSolicitud || '00:00');\r\n    setShowMaintenanceForm(true);\r\n    setCurrentStep(1);\r\n  };\r\n\r\n  const handleDeleteMaintenance = async (maintenanceId) => {\r\n    if (window.confirm('Â¿EstÃ¡ seguro de eliminar este registro de mantenimiento?')) {\r\n      try {\r\n        const maintenanceRef = databaseRef(database, `mantenimientos/${maintenanceId}`);\r\n        await remove(maintenanceRef);\r\n        setMessage({ type: 'success', text: 'âœ… Presupuesto eliminado' });\r\n      } catch (error) {\r\n        setMessage({ type: 'error', text: 'âŒ Error al eliminar presupuesto' });\r\n      }\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setShowMaintenanceForm(false);\r\n    setEditingMaintenance(null);\r\n    setSelectedVehicle('');\r\n    setTipoRepuesto('original');\r\n    setMontoIVA(0);\r\n    setCurrentStep(1);\r\n    setFechaSolicitud(new Date().toISOString().split('T')[0]);\r\n    setHoraSolicitud(new Date().toLocaleTimeString('es-CL', { hour: '2-digit', minute: '2-digit', hour12: false }));\r\n    setServiciosPreventivos([]);\r\n\r\n  };\r\n\r\n  const totales = calcularTotales();\r\n\r\n  // Filtrar registros con validaciÃ³n de datos y filtro por fechas\r\n  const filteredRecords = maintenanceRecords.filter(record => {\r\n    if (!record) return false;\r\n\r\n    const vehiculoNombre = record.vehiculoNombre || '';\r\n    const vehiculoPatente = record.vehiculoPatente || '';\r\n    const searchTermLower = searchTerm.toLowerCase();\r\n\r\n    const matchesSearch = searchTermLower === '' ||\r\n      vehiculoNombre.toLowerCase().includes(searchTermLower) ||\r\n      vehiculoPatente.toLowerCase().includes(searchTermLower);\r\n\r\n    const matchesFilter = filterStatus === 'todos' ||\r\n      record.tipoRepuesto === filterStatus;\r\n\r\n    // Filtro por fechas\r\n    let matchesDateRange = true;\r\n    if (filterDateFrom || filterDateTo) {\r\n      const recordDate = new Date(record.fechaSolicitud || record.fechaMantenimiento).toISOString().split('T')[0];\r\n\r\n      if (filterDateFrom && filterDateTo) {\r\n        matchesDateRange = recordDate >= filterDateFrom && recordDate <= filterDateTo;\r\n      } else if (filterDateFrom) {\r\n        matchesDateRange = recordDate >= filterDateFrom;\r\n      } else if (filterDateTo) {\r\n        matchesDateRange = recordDate <= filterDateTo;\r\n      }\r\n    }\r\n\r\n    return matchesSearch && matchesFilter && matchesDateRange;\r\n  });\r\n\r\n  // EstadÃ­sticas mejoradas\r\n  const getStats = () => {\r\n    const hoy = new Date();\r\n    const inicioMes = new Date(hoy.getFullYear(), hoy.getMonth(), 1);\r\n\r\n    return {\r\n      total: maintenanceRecords.length,\r\n      esteMes: maintenanceRecords.filter(m => new Date(m.fechaMantenimiento) >= inicioMes).length,\r\n      costoTotal: maintenanceRecords.reduce((sum, m) => sum + (m.totales?.total || 0), 0),\r\n      promedioMensual: Math.round(maintenanceRecords.reduce((sum, m) => sum + (m.totales?.total || 0), 0) / 12)\r\n    };\r\n  };\r\n\r\n  const stats = getStats();\r\n\r\n  return (\r\n    <div style={{ maxWidth: '1400px', margin: '0 auto' }}>\r\n      {/* Header mejorado */}\r\n      <div style={{\r\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n        borderRadius: '20px',\r\n        padding: '30px',\r\n        marginBottom: '30px',\r\n        color: 'white',\r\n        boxShadow: '0 10px 30px rgba(102, 126, 234, 0.2)'\r\n      }}>\r\n        <h1 style={{ margin: 0, fontSize: '32px', fontWeight: '700' }}>\r\n          â›½ Centro de Suministros\r\n        </h1>\r\n        <p style={{ margin: '10px 0 0 0', opacity: 0.9, fontSize: '16px' }}>\r\n          Registra presupuestos de servicios y consumibles de tu flota\r\n        </p>\r\n      </div>\r\n\r\n      {/* Mensajes */}\r\n      {message.text && (\r\n        <div style={{\r\n          padding: '16px',\r\n          borderRadius: '12px',\r\n          marginBottom: '20px',\r\n          background: message.type === 'success' ? '#dcfce7' : '#fee2e2',\r\n          border: `2px solid ${message.type === 'success' ? '#86efac' : '#fecaca'}`,\r\n          color: message.type === 'success' ? '#166534' : '#991b1b',\r\n          fontWeight: '500',\r\n          animation: 'slideIn 0.3s ease'\r\n        }}>\r\n          {message.text}\r\n        </div>\r\n      )}\r\n      <ServiceCatalogManager\r\n        show={showServiceCatalogManager}\r\n        onClose={() => setShowServiceCatalogManager(false)}\r\n        isMobile={isMobile}\r\n        currentUser={currentUser}\r\n      />\r\n\r\n      {/* Dashboard de estadÃ­sticas */}\r\n      {!showMaintenanceForm && (\r\n        <>\r\n          <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: `repeat(auto-fit, minmax(${isMobile ? '150px' : '250px'}, 1fr))`,\r\n            gap: '20px',\r\n            marginBottom: '30px'\r\n          }}>\r\n            <div style={{\r\n              background: 'white',\r\n              padding: '25px',\r\n              borderRadius: '16px',\r\n              boxShadow: '0 4px 20px rgba(0,0,0,0.08)',\r\n              borderTop: '4px solid #3b82f6',\r\n              transition: 'transform 0.3s ease',\r\n              cursor: 'pointer'\r\n            }}\r\n              onMouseEnter={(e) => e.currentTarget.style.transform = 'translateY(-5px)'}\r\n              onMouseLeave={(e) => e.currentTarget.style.transform = 'translateY(0)'}>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div>\r\n                  <div style={{ color: '#6b7280', fontSize: '14px', fontWeight: '500' }}>Total Presupuestos</div>\r\n                  <div style={{ fontSize: '36px', fontWeight: 'bold', color: '#1f2937' }}>{stats.total}</div>\r\n                </div>\r\n                <div style={{ fontSize: '40px', opacity: 0.2 }}>ðŸ“Š</div>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{\r\n              background: 'white',\r\n              padding: '25px',\r\n              borderRadius: '16px',\r\n              boxShadow: '0 4px 20px rgba(0,0,0,0.08)',\r\n              borderTop: '4px solid #22c55e',\r\n              transition: 'transform 0.3s ease',\r\n              cursor: 'pointer'\r\n            }}\r\n              onMouseEnter={(e) => e.currentTarget.style.transform = 'translateY(-5px)'}\r\n              onMouseLeave={(e) => e.currentTarget.style.transform = 'translateY(0)'}>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div>\r\n                  <div style={{ color: '#6b7280', fontSize: '14px', fontWeight: '500' }}>Este Mes</div>\r\n                  <div style={{ fontSize: '36px', fontWeight: 'bold', color: '#1f2937' }}>{stats.esteMes}</div>\r\n                </div>\r\n                <div style={{ fontSize: '40px', opacity: 0.2 }}>ðŸ“…</div>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{\r\n              background: 'white',\r\n              padding: '25px',\r\n              borderRadius: '16px',\r\n              boxShadow: '0 4px 20px rgba(0,0,0,0.08)',\r\n              borderTop: '4px solid #f59e0b',\r\n              transition: 'transform 0.3s ease',\r\n              cursor: 'pointer'\r\n            }}\r\n              onMouseEnter={(e) => e.currentTarget.style.transform = 'translateY(-5px)'}\r\n              onMouseLeave={(e) => e.currentTarget.style.transform = 'translateY(0)'}>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div>\r\n                  <div style={{ color: '#6b7280', fontSize: '14px', fontWeight: '500' }}>InversiÃ³n Total</div>\r\n                  <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#1f2937' }}>\r\n                    ${stats.costoTotal.toLocaleString('es-CL')}\r\n                  </div>\r\n                </div>\r\n                <div style={{ fontSize: '40px', opacity: 0.2 }}>ðŸ’°</div>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{\r\n              background: 'white',\r\n              padding: '25px',\r\n              borderRadius: '16px',\r\n              boxShadow: '0 4px 20px rgba(0,0,0,0.08)',\r\n              borderTop: '4px solid #8b5cf6',\r\n              transition: 'transform 0.3s ease',\r\n              cursor: 'pointer'\r\n            }}\r\n              onMouseEnter={(e) => e.currentTarget.style.transform = 'translateY(-5px)'}\r\n              onMouseLeave={(e) => e.currentTarget.style.transform = 'translateY(0)'}>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <div>\r\n                  <div style={{ color: '#6b7280', fontSize: '14px', fontWeight: '500' }}>Promedio Mensual</div>\r\n                  <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#1f2937' }}>\r\n                    ${stats.promedioMensual.toLocaleString('es-CL')}\r\n                  </div>\r\n                </div>\r\n                <div style={{ fontSize: '40px', opacity: 0.2 }}>ðŸ“ˆ</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Barra de acciones y filtros mejorada */}\r\n          <div style={{\r\n            background: 'white',\r\n            padding: '20px',\r\n            borderRadius: '16px',\r\n            marginBottom: '30px',\r\n            boxShadow: '0 4px 20px rgba(0,0,0,0.08)'\r\n          }}>\r\n            {/* Primera fila: BotÃ³n nuevo y bÃºsqueda */}\r\n            <div style={{\r\n              marginBottom: '30px',\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              alignItems: 'center',\r\n              flexWrap: 'wrap',\r\n              gap: '15px'\r\n            }}>\r\n              <h1 style={{\r\n                margin: 0,\r\n                color: '#1e293b',\r\n                fontSize: isMobile ? '24px' : '28px',\r\n                fontWeight: '600'\r\n              }}>\r\n                â›½ Centro de Suministros y Mantenimiento Preventivo\r\n              </h1>\r\n              <button\r\n                onClick={() => setShowServiceCatalogManager(true)}\r\n                style={{\r\n                  padding: '10px 20px',\r\n                  background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '8px',\r\n                  fontSize: '14px',\r\n                  cursor: 'pointer',\r\n                  boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '6px'\r\n                }}\r\n              >\r\n                ðŸ“¦ Gestionar CatÃ¡logo\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowMaintenanceForm(true);\r\n                  setCurrentStep(1);\r\n                }}\r\n                style={{\r\n                  padding: '12px 24px',\r\n                  background: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '12px',\r\n                  fontSize: '16px',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '8px',\r\n                  boxShadow: '0 4px 15px rgba(34, 197, 94, 0.3)',\r\n                  transition: 'all 0.3s ease'\r\n                }}\r\n                onMouseEnter={(e) => {\r\n                  e.currentTarget.style.transform = 'translateY(-2px)';\r\n                  e.currentTarget.style.boxShadow = '0 6px 20px rgba(34, 197, 94, 0.4)';\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                  e.currentTarget.style.transform = 'translateY(0)';\r\n                  e.currentTarget.style.boxShadow = '0 4px 15px rgba(34, 197, 94, 0.3)';\r\n                }}>\r\n                <span style={{ fontSize: '20px' }}>âž•</span>\r\n                Nuevo Presupuesto\r\n              </button>\r\n\r\n              <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"ðŸ” Buscar vehÃ­culo...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  style={{\r\n                    padding: '10px 15px',\r\n                    border: '2px solid #e5e7eb',\r\n                    borderRadius: '10px',\r\n                    fontSize: '14px',\r\n                    width: '200px',\r\n                    transition: 'border-color 0.3s ease',\r\n                    outline: 'none'\r\n                  }}\r\n                  onFocus={(e) => e.currentTarget.style.borderColor = '#3b82f6'}\r\n                  onBlur={(e) => e.currentTarget.style.borderColor = '#e5e7eb'}\r\n                />\r\n\r\n                <select\r\n                  value={filterStatus}\r\n                  onChange={(e) => setFilterStatus(e.target.value)}\r\n                  style={{\r\n                    padding: '10px 15px',\r\n                    border: '2px solid #e5e7eb',\r\n                    borderRadius: '10px',\r\n                    fontSize: '14px',\r\n                    cursor: 'pointer',\r\n                    transition: 'border-color 0.3s ease',\r\n                    outline: 'none'\r\n                  }}\r\n                  onFocus={(e) => e.currentTarget.style.borderColor = '#3b82f6'}\r\n                  onBlur={(e) => e.currentTarget.style.borderColor = '#e5e7eb'}>\r\n                  <option value=\"todos\">Todos</option>\r\n                  <option value=\"original\">Originales</option>\r\n                  <option value=\"alternativo\">Alternativos</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Segunda fila: Filtros de fecha */}\r\n            <div style={{\r\n              display: 'flex',\r\n              gap: '10px',\r\n              alignItems: 'center',\r\n              flexWrap: 'wrap'\r\n            }}>\r\n              <span style={{ fontSize: '14px', color: '#6b7280', fontWeight: '500' }}>\r\n                Filtrar por fecha:\r\n              </span>\r\n              <input\r\n                type=\"date\"\r\n                value={filterDateFrom}\r\n                onChange={(e) => setFilterDateFrom(e.target.value)}\r\n                placeholder=\"Desde\"\r\n                style={{\r\n                  padding: '8px 12px',\r\n                  border: '2px solid #e5e7eb',\r\n                  borderRadius: '8px',\r\n                  fontSize: '14px',\r\n                  outline: 'none',\r\n                  transition: 'border-color 0.3s ease'\r\n                }}\r\n                onFocus={(e) => e.currentTarget.style.borderColor = '#3b82f6'}\r\n                onBlur={(e) => e.currentTarget.style.borderColor = '#e5e7eb'}\r\n              />\r\n              <span style={{ color: '#9ca3af' }}>hasta</span>\r\n              <input\r\n                type=\"date\"\r\n                value={filterDateTo}\r\n                onChange={(e) => setFilterDateTo(e.target.value)}\r\n                placeholder=\"Hasta\"\r\n                style={{\r\n                  padding: '8px 12px',\r\n                  border: '2px solid #e5e7eb',\r\n                  borderRadius: '8px',\r\n                  fontSize: '14px',\r\n                  outline: 'none',\r\n                  transition: 'border-color 0.3s ease'\r\n                }}\r\n                onFocus={(e) => e.currentTarget.style.borderColor = '#3b82f6'}\r\n                onBlur={(e) => e.currentTarget.style.borderColor = '#e5e7eb'}\r\n              />\r\n              {(filterDateFrom || filterDateTo) && (\r\n                <button\r\n                  onClick={() => {\r\n                    setFilterDateFrom('');\r\n                    setFilterDateTo('');\r\n                  }}\r\n                  style={{\r\n                    padding: '8px 12px',\r\n                    background: '#ef4444',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '8px',\r\n                    fontSize: '13px',\r\n                    cursor: 'pointer',\r\n                    fontWeight: '500'\r\n                  }}>\r\n                  Limpiar fechas\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {/* Formulario mejorado con pasos */}\r\n      {showMaintenanceForm && (\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '20px',\r\n          boxShadow: '0 10px 40px rgba(0,0,0,0.1)',\r\n          overflow: 'hidden'\r\n        }}>\r\n          {/* Indicador de progreso */}\r\n          <div style={{\r\n            background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\r\n            padding: '30px',\r\n            borderBottom: '2px solid #e5e7eb'\r\n          }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n              <h2 style={{ margin: 0, fontSize: '24px', fontWeight: '600', color: '#1f2937' }}>\r\n                {editingMaintenance ? 'âœï¸ Editar Presupuesto' : 'âž• Nuevo Presupuesto'}\r\n              </h2>\r\n              <button\r\n                onClick={resetForm}\r\n                style={{\r\n                  padding: '8px 16px',\r\n                  background: '#ef4444',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '8px',\r\n                  fontSize: '14px',\r\n                  cursor: 'pointer'\r\n                }}>\r\n                âœ– Cancelar\r\n              </button>\r\n            </div>\r\n\r\n            {/* Pasos */}\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', maxWidth: '600px', margin: '0 auto' }}>\r\n              {[\r\n                { num: 1, label: 'VehÃ­culo', icon: 'ðŸš›' },\r\n                { num: 2, label: 'Servicios', icon: 'ðŸ”§' },\r\n                { num: 3, label: 'Resumen', icon: 'ðŸ’°' }\r\n              ].map((step, index) => (\r\n                <div key={step.num} style={{ flex: 1, display: 'flex', alignItems: 'center' }}>\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    alignItems: 'center',\r\n                    flex: 1\r\n                  }}>\r\n                    <div style={{\r\n                      width: '50px',\r\n                      height: '50px',\r\n                      borderRadius: '50%',\r\n                      background: currentStep >= step.num ?\r\n                        'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)' :\r\n                        '#e5e7eb',\r\n                      color: currentStep >= step.num ? 'white' : '#6b7280',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      fontSize: '20px',\r\n                      fontWeight: 'bold',\r\n                      boxShadow: currentStep === step.num ? '0 4px 15px rgba(59, 130, 246, 0.3)' : 'none',\r\n                      transition: 'all 0.3s ease',\r\n                      cursor: currentStep >= step.num ? 'pointer' : 'default'\r\n                    }}\r\n                      onClick={() => currentStep >= step.num && setCurrentStep(step.num)}>\r\n                      {step.icon}\r\n                    </div>\r\n                    <span style={{\r\n                      marginTop: '8px',\r\n                      fontSize: '13px',\r\n                      fontWeight: '500',\r\n                      color: currentStep >= step.num ? '#1f2937' : '#9ca3af'\r\n                    }}>\r\n                      {step.label}\r\n                    </span>\r\n                  </div>\r\n                  {index < 2 && (\r\n                    <div style={{\r\n                      height: '2px',\r\n                      background: currentStep > step.num ? '#3b82f6' : '#e5e7eb',\r\n                      flex: 1,\r\n                      margin: '0 10px',\r\n                      transition: 'background 0.3s ease'\r\n                    }} />\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <form onSubmit={handleSaveMaintenance} style={{ padding: '30px' }}>\r\n            {/* Paso 1: SelecciÃ³n de vehÃ­culo y fecha */}\r\n            {currentStep === 1 && (\r\n              <div style={{ animation: 'fadeIn 0.3s ease' }}>\r\n                {/* Fecha y hora de solicitud */}\r\n                <div style={{\r\n                  marginBottom: '30px',\r\n                  padding: '20px',\r\n                  background: '#f0f9ff',\r\n                  borderRadius: '12px',\r\n                  border: '2px solid #0ea5e9'\r\n                }}>\r\n                  <h3 style={{ marginTop: 0, marginBottom: '20px', color: '#0c4a6e', fontSize: '18px' }}>\r\n                    ðŸ“… Fecha y hora de la solicitud del presupuesto\r\n                  </h3>\r\n                  <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\r\n                    <div>\r\n                      <label style={{ display: 'block', marginBottom: '8px', fontSize: '14px', fontWeight: '500', color: '#374151' }}>\r\n                        Fecha de solicitud\r\n                      </label>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={fechaSolicitud}\r\n                        onChange={(e) => setFechaSolicitud(e.target.value)}\r\n                        required\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '10px',\r\n                          border: '2px solid #cbd5e1',\r\n                          borderRadius: '8px',\r\n                          fontSize: '14px',\r\n                          outline: 'none'\r\n                        }}\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label style={{ display: 'block', marginBottom: '8px', fontSize: '14px', fontWeight: '500', color: '#374151' }}>\r\n                        Hora de solicitud\r\n                      </label>\r\n                      <input\r\n                        type=\"time\"\r\n                        value={horaSolicitud}\r\n                        onChange={(e) => setHoraSolicitud(e.target.value)}\r\n                        required\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '10px',\r\n                          border: '2px solid #cbd5e1',\r\n                          borderRadius: '8px',\r\n                          fontSize: '14px',\r\n                          outline: 'none'\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <h3 style={{ marginBottom: '20px', color: '#1f2937', fontSize: '20px' }}>\r\n                  Selecciona el vehÃ­culo\r\n                </h3>\r\n\r\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '15px' }}>\r\n                  {vehiculos.map(v => (\r\n                    <div\r\n                      key={v.id}\r\n                      onClick={() => setSelectedVehicle(v.id)}\r\n                      style={{\r\n                        padding: '20px',\r\n                        border: `3px solid ${selectedVehicle === v.id ? '#3b82f6' : '#e5e7eb'}`,\r\n                        borderRadius: '12px',\r\n                        cursor: 'pointer',\r\n                        background: selectedVehicle === v.id ? '#eff6ff' : 'white',\r\n                        transition: 'all 0.3s ease'\r\n                      }}\r\n                      onMouseEnter={(e) => {\r\n                        if (selectedVehicle !== v.id) {\r\n                          e.currentTarget.style.borderColor = '#93c5fd';\r\n                          e.currentTarget.style.background = '#f0f9ff';\r\n                        }\r\n                      }}\r\n                      onMouseLeave={(e) => {\r\n                        if (selectedVehicle !== v.id) {\r\n                          e.currentTarget.style.borderColor = '#e5e7eb';\r\n                          e.currentTarget.style.background = 'white';\r\n                        }\r\n                      }}>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                        <div>\r\n                          <h4 style={{ margin: '0 0 5px 0', fontSize: '18px', color: '#1f2937' }}>\r\n                            {v.nombre}\r\n                          </h4>\r\n                          <p style={{ margin: '0', fontSize: '14px', color: '#6b7280' }}>\r\n                            {v.marca} {v.modelo} â€¢ Patente: {v.patente}\r\n                          </p>\r\n                          <p style={{ margin: '5px 0 0 0', fontSize: '13px', color: '#9ca3af' }}>\r\n                            Kilometraje: {v.kilometraje?.toLocaleString('es-CL') || 0} km\r\n                          </p>\r\n                        </div>\r\n                        {selectedVehicle === v.id && (\r\n                          <div style={{ fontSize: '30px', color: '#3b82f6' }}>âœ“</div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                <div style={{ marginTop: '30px' }}>\r\n                  <h3 style={{ marginBottom: '15px', color: '#1f2937', fontSize: '18px' }}>\r\n                    Tipo de repuestos a utilizar\r\n                  </h3>\r\n\r\n                  <div style={{ display: 'flex', gap: '15px' }}>\r\n                    <label style={{\r\n                      flex: 1,\r\n                      padding: '20px',\r\n                      border: `3px solid ${tipoRepuesto === 'original' ? '#22c55e' : '#e5e7eb'}`,\r\n                      borderRadius: '12px',\r\n                      cursor: 'pointer',\r\n                      background: tipoRepuesto === 'original' ? '#f0fdf4' : 'white',\r\n                      transition: 'all 0.3s ease',\r\n                      textAlign: 'center'\r\n                    }}>\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"tipoRepuesto\"\r\n                        value=\"original\"\r\n                        checked={tipoRepuesto === 'original'}\r\n                        onChange={(e) => setTipoRepuesto(e.target.value)}\r\n                        style={{ display: 'none' }}\r\n                      />\r\n                      <div style={{ fontSize: '30px', marginBottom: '10px' }}>âœ…</div>\r\n                      <div style={{ fontSize: '16px', fontWeight: '600', color: '#15803d' }}>\r\n                        Repuestos Originales\r\n                      </div>\r\n                      <div style={{ fontSize: '13px', color: '#6b7280', marginTop: '5px' }}>\r\n                        GarantÃ­a oficial del fabricante\r\n                      </div>\r\n                    </label>\r\n\r\n                    <label style={{\r\n                      flex: 1,\r\n                      padding: '20px',\r\n                      border: `3px solid ${tipoRepuesto === 'alternativo' ? '#f59e0b' : '#e5e7eb'}`,\r\n                      borderRadius: '12px',\r\n                      cursor: 'pointer',\r\n                      background: tipoRepuesto === 'alternativo' ? '#fef3c7' : 'white',\r\n                      transition: 'all 0.3s ease',\r\n                      textAlign: 'center'\r\n                    }}>\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"tipoRepuesto\"\r\n                        value=\"alternativo\"\r\n                        checked={tipoRepuesto === 'alternativo'}\r\n                        onChange={(e) => setTipoRepuesto(e.target.value)}\r\n                        style={{ display: 'none' }}\r\n                      />\r\n                      <div style={{ fontSize: '30px', marginBottom: '10px' }}>ðŸ”„</div>\r\n                      <div style={{ fontSize: '16px', fontWeight: '600', color: '#92400e' }}>\r\n                        Repuestos Alternativos\r\n                      </div>\r\n                      <div style={{ fontSize: '13px', color: '#6b7280', marginTop: '5px' }}>\r\n                        Menor costo, garantÃ­a limitada\r\n                      </div>\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{ marginTop: '30px', display: 'flex', justifyContent: 'flex-end' }}>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setCurrentStep(2)}\r\n                    disabled={!selectedVehicle}\r\n                    style={{\r\n                      padding: '12px 30px',\r\n                      background: selectedVehicle ?\r\n                        'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)' :\r\n                        '#e5e7eb',\r\n                      color: selectedVehicle ? 'white' : '#9ca3af',\r\n                      border: 'none',\r\n                      borderRadius: '10px',\r\n                      fontSize: '16px',\r\n                      fontWeight: '600',\r\n                      cursor: selectedVehicle ? 'pointer' : 'not-allowed',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: '8px'\r\n                    }}>\r\n                    Continuar\r\n                    <span style={{ fontSize: '18px' }}>â†’</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Paso 2: Servicios */}\r\n            {currentStep === 2 && (\r\n              <div style={{ animation: 'fadeIn 0.3s ease' }}>\r\n                <h3 style={{ marginBottom: '20px', color: '#1f2937', fontSize: '20px' }}>\r\n                  Seleccionar servicios del catÃ¡logo\r\n                </h3>\r\n\r\n                {/* Selector de servicios del catÃ¡logo */}\r\n                <div style={{\r\n                  marginBottom: '20px',\r\n                  padding: '20px',\r\n                  background: '#f0f9ff',\r\n                  borderRadius: '12px',\r\n                  border: '2px solid #0ea5e9'\r\n                }}>\r\n                  <h4 style={{ margin: '0 0 15px 0', color: '#0c4a6e', fontSize: '16px' }}>\r\n                    ðŸ“¦ Buscar en el CatÃ¡logo de Servicios\r\n                  </h4>\r\n\r\n                  {/* Buscador con filtros */}\r\n                  <div style={{ marginBottom: '15px' }}>\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"ðŸ” Buscar por cÃ³digo o nombre del servicio...\"\r\n                      value={catalogSearchTerm}\r\n                      onChange={(e) => setCatalogSearchTerm(e.target.value)}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '10px',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '8px',\r\n                        fontSize: '14px'\r\n                      }}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Lista de servicios del catÃ¡logo */}\r\n                  <div style={{\r\n                    maxHeight: '300px',\r\n                    overflowY: 'auto',\r\n                    border: '1px solid #e5e7eb',\r\n                    borderRadius: '8px',\r\n                    background: 'white'\r\n                  }}>\r\n                    {getFilteredCatalogServices().map(servicio => {\r\n                      const yaAgregado = serviciosPreventivos.some(s => s.catalogoId === servicio.id);\r\n                      const totales = calcularTotalesServicioCatalogo(servicio);\r\n\r\n                      return (\r\n                        <div key={servicio.id} style={{\r\n                          padding: '12px',\r\n                          borderBottom: '1px solid #f3f4f6',\r\n                          display: 'flex',\r\n                          justifyContent: 'space-between',\r\n                          alignItems: 'center',\r\n                          background: yaAgregado ? '#f0fdf4' : 'white',\r\n                          transition: 'background 0.2s'\r\n                        }}\r\n                          onMouseEnter={(e) => !yaAgregado && (e.currentTarget.style.background = '#f9fafb')}\r\n                          onMouseLeave={(e) => !yaAgregado && (e.currentTarget.style.background = 'white')}>\r\n                          <div style={{ flex: 1 }}>\r\n                            <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '4px' }}>\r\n                              <span style={{\r\n                                padding: '2px 8px',\r\n                                background: '#dbeafe',\r\n                                color: '#1e40af',\r\n                                borderRadius: '4px',\r\n                                fontSize: '12px',\r\n                                fontWeight: '600'\r\n                              }}>\r\n                                {servicio.codigo}\r\n                              </span>\r\n                              <span style={{ fontSize: '14px', fontWeight: '500' }}>\r\n                                {servicio.descripcion}\r\n                              </span>\r\n                            </div>\r\n                            <div style={{ fontSize: '13px', color: '#6b7280' }}>\r\n                              Mano de obra: ${servicio.manoObra?.toLocaleString() || 0} â€¢\r\n                              {servicio.repuestos?.length || 0} repuesto(s) â€¢\r\n                              Total: ${totales.total.toLocaleString()}\r\n                            </div>\r\n                          </div>\r\n\r\n                          {!yaAgregado ? (\r\n                            <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n                              <input\r\n                                type=\"number\"\r\n                                min=\"1\"\r\n                                defaultValue=\"1\"\r\n                                id={`cantidad-${servicio.id}`}\r\n                                style={{\r\n                                  width: '60px',\r\n                                  padding: '6px',\r\n                                  border: '1px solid #d1d5db',\r\n                                  borderRadius: '4px',\r\n                                  fontSize: '14px'\r\n                                }}\r\n                              />\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={() => agregarServicioDeCatalogo(servicio)}\r\n                                style={{\r\n                                  padding: '6px 16px',\r\n                                  background: '#22c55e',\r\n                                  color: 'white',\r\n                                  border: 'none',\r\n                                  borderRadius: '6px',\r\n                                  fontSize: '13px',\r\n                                  fontWeight: '500',\r\n                                  cursor: 'pointer'\r\n                                }}\r\n                              >\r\n                                Agregar\r\n                              </button>\r\n                            </div>\r\n                          ) : (\r\n                            <span style={{\r\n                              padding: '6px 12px',\r\n                              background: '#dcfce7',\r\n                              color: '#15803d',\r\n                              borderRadius: '6px',\r\n                              fontSize: '13px',\r\n                              fontWeight: '500'\r\n                            }}>\r\n                              âœ“ Agregado\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      );\r\n                    })}\r\n\r\n                    {getFilteredCatalogServices().length === 0 && (\r\n                      <div style={{\r\n                        padding: '40px',\r\n                        textAlign: 'center',\r\n                        color: '#9ca3af'\r\n                      }}>\r\n                        {catalogSearchTerm ?\r\n                          'No se encontraron servicios con ese criterio' :\r\n                          catalogoServicios.length === 0 ?\r\n                            'No hay servicios en el catÃ¡logo. Crea servicios usando el botÃ³n \"ðŸ“¦ Gestionar CatÃ¡logo\"' :\r\n                            'Ingresa un cÃ³digo o nombre para buscar'}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Servicios seleccionados */}\r\n                {serviciosPreventivos.length > 0 && (\r\n                  <div style={{ marginTop: '20px' }}>\r\n                    <h4 style={{ marginBottom: '15px', fontSize: '16px', color: '#374151' }}>\r\n                      Servicios seleccionados para el presupuesto ({serviciosPreventivos.length})\r\n                    </h4>\r\n\r\n                    {serviciosPreventivos.map((servicio, index) => (\r\n                      <div key={servicio.id} style={{\r\n                        marginBottom: '15px',\r\n                        padding: '15px',\r\n                        background: '#f9fafb',\r\n                        borderRadius: '8px',\r\n                        border: '1px solid #e5e7eb'\r\n                      }}>\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start' }}>\r\n                          <div style={{ flex: 1 }}>\r\n                            <div style={{ marginBottom: '8px' }}>\r\n                              <span style={{\r\n                                padding: '2px 8px',\r\n                                background: '#dbeafe',\r\n                                color: '#1e40af',\r\n                                borderRadius: '4px',\r\n                                fontSize: '12px',\r\n                                fontWeight: '600',\r\n                                marginRight: '10px'\r\n                              }}>\r\n                                {servicio.codigo}\r\n                              </span>\r\n                              <span style={{ fontSize: '15px', fontWeight: '500' }}>\r\n                                {servicio.descripcion || servicio.servicio}\r\n                              </span>\r\n                              <span style={{\r\n                                marginLeft: '10px',\r\n                                padding: '2px 8px',\r\n                                background: '#fef3c7',\r\n                                color: '#92400e',\r\n                                borderRadius: '4px',\r\n                                fontSize: '12px'\r\n                              }}>\r\n                                Cantidad: {servicio.cantidadServicio || servicio.cantidadRepuesto || 1}\r\n                              </span>\r\n                            </div>\r\n\r\n                            {/* Detalles del servicio */}\r\n                            <div style={{\r\n                              display: 'grid',\r\n                              gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))',\r\n                              gap: '10px',\r\n                              fontSize: '13px',\r\n                              color: '#6b7280',\r\n                              marginBottom: '10px'\r\n                            }}>\r\n                              <div>\r\n                                <span style={{ color: '#9ca3af' }}>Mano de obra:</span>\r\n                                <div style={{ fontWeight: '500' }}>\r\n                                  ${((servicio.manoObra || 0) * (servicio.cantidadServicio || 1)).toLocaleString()}\r\n                                </div>\r\n                              </div>\r\n                              {servicio.repuestos && servicio.repuestos.length > 0 && (\r\n                                <>\r\n                                  <div>\r\n                                    <span style={{ color: '#9ca3af' }}>Repuestos neto:</span>\r\n                                    <div style={{ fontWeight: '500' }}>\r\n                                      ${servicio.totalRepuestos?.toLocaleString() || 0}\r\n                                    </div>\r\n                                  </div>\r\n                                  <div>\r\n                                    <span style={{ color: '#9ca3af' }}>IVA (19%):</span>\r\n                                    <div style={{ fontWeight: '500' }}>\r\n                                      ${servicio.iva?.toLocaleString() || 0}\r\n                                    </div>\r\n                                  </div>\r\n                                </>\r\n                              )}\r\n                              <div>\r\n                                <span style={{ color: '#9ca3af' }}>Total:</span>\r\n                                <div style={{ fontWeight: '600', color: '#059669' }}>\r\n                                  ${servicio.totalServicio?.toLocaleString() || 0}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n\r\n                            {/* Lista de repuestos si existen */}\r\n                            {servicio.repuestos && servicio.repuestos.length > 0 && (\r\n                              <div style={{\r\n                                padding: '8px',\r\n                                background: 'white',\r\n                                borderRadius: '4px',\r\n                                fontSize: '11px',\r\n                                color: '#6b7280'\r\n                              }}>\r\n                                <strong>Repuestos incluidos:</strong>\r\n                                <ul style={{ margin: '4px 0 0 16px', padding: 0 }}>\r\n                                  {servicio.repuestos.map((rep, idx) => (\r\n                                    <li key={idx}>\r\n                                      {rep.cantidad * (servicio.cantidadServicio || 1)}x {rep.nombre} -\r\n                                      ${(rep.costoUnitario * rep.cantidad * (servicio.cantidadServicio || 1)).toLocaleString()}\r\n                                    </li>\r\n                                  ))}\r\n                                </ul>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => eliminarServicio(servicio.id)}\r\n                            style={{\r\n                              padding: '6px 10px',\r\n                              background: '#ef4444',\r\n                              color: 'white',\r\n                              border: 'none',\r\n                              borderRadius: '6px',\r\n                              fontSize: '12px',\r\n                              cursor: 'pointer'\r\n                            }}\r\n                          >\r\n                            ðŸ—‘ï¸ Quitar\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n\r\n                    {/* Total general */}\r\n                    <div style={{\r\n                      marginTop: '20px',\r\n                      padding: '15px',\r\n                      background: '#f0fdf4',\r\n                      borderRadius: '8px',\r\n                      border: '1px solid #86efac'\r\n                    }}>\r\n                      <div style={{\r\n                        display: 'flex',\r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'center',\r\n                        fontSize: '18px',\r\n                        fontWeight: '600',\r\n                        color: '#059669'\r\n                      }}>\r\n                        <span>ðŸ’° Total del Presupuesto:</span>\r\n                        <span>${calcularTotales().total.toLocaleString()}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {serviciosPreventivos.length === 0 && (\r\n                  <div style={{\r\n                    padding: '40px',\r\n                    background: '#f9fafb',\r\n                    borderRadius: '12px',\r\n                    textAlign: 'center',\r\n                    color: '#6b7280'\r\n                  }}>\r\n                    <div style={{ fontSize: '48px', marginBottom: '10px' }}>ðŸ“¦</div>\r\n                    <p style={{ fontSize: '16px', fontWeight: '500' }}>\r\n                      No hay servicios seleccionados\r\n                    </p>\r\n                    <p style={{ fontSize: '14px' }}>\r\n                      Busca y agrega servicios del catÃ¡logo para crear tu presupuesto\r\n                    </p>\r\n                  </div>\r\n                )}\r\n\r\n                {/* NavegaciÃ³n */}\r\n                <div style={{ marginTop: '30px', display: 'flex', justifyContent: 'space-between' }}>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setCurrentStep(1)}\r\n                    style={{\r\n                      padding: '12px 30px',\r\n                      background: 'white',\r\n                      color: '#6b7280',\r\n                      border: '2px solid #e5e7eb',\r\n                      borderRadius: '10px',\r\n                      fontSize: '16px',\r\n                      fontWeight: '600',\r\n                      cursor: 'pointer',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: '8px'\r\n                    }}>\r\n                    <span style={{ fontSize: '18px' }}>â†</span>\r\n                    Anterior\r\n                  </button>\r\n\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setCurrentStep(3)}\r\n                    disabled={serviciosPreventivos.length === 0}\r\n                    style={{\r\n                      padding: '12px 30px',\r\n                      background: serviciosPreventivos.length > 0 ?\r\n                        'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)' : '#e5e7eb',\r\n                      color: serviciosPreventivos.length > 0 ? 'white' : '#9ca3af',\r\n                      border: 'none',\r\n                      borderRadius: '10px',\r\n                      fontSize: '16px',\r\n                      fontWeight: '600',\r\n                      cursor: serviciosPreventivos.length > 0 ? 'pointer' : 'not-allowed',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: '8px'\r\n                    }}>\r\n                    Continuar\r\n                    <span style={{ fontSize: '18px' }}>â†’</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {/* Paso 3: Resumen */}\r\n            {currentStep === 3 && (\r\n              <div style={{ animation: 'fadeIn 0.3s ease' }}>\r\n                <h3 style={{ marginBottom: '20px', color: '#1f2937', fontSize: '20px' }}>\r\n                  Resumen del presupuesto\r\n                </h3>\r\n\r\n                {/* InformaciÃ³n de la solicitud */}\r\n                <div style={{\r\n                  marginBottom: '20px',\r\n                  padding: '20px',\r\n                  background: '#fef3c7',\r\n                  borderRadius: '12px',\r\n                  border: '2px solid #fbbf24'\r\n                }}>\r\n                  <h4 style={{ margin: '0 0 10px 0', color: '#78350f', fontSize: '16px' }}>\r\n                    ðŸ“… InformaciÃ³n de la Solicitud\r\n                  </h4>\r\n                  <p style={{ margin: '5px 0', fontSize: '15px', color: '#92400e' }}>\r\n                    <strong>Fecha:</strong> {new Date(fechaSolicitud).toLocaleDateString('es-CL', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}\r\n                  </p>\r\n                  <p style={{ margin: '5px 0', fontSize: '15px', color: '#92400e' }}>\r\n                    <strong>Hora:</strong> {horaSolicitud} hrs\r\n                  </p>\r\n                </div>\r\n\r\n                {/* InformaciÃ³n del vehÃ­culo */}\r\n                <div style={{\r\n                  marginBottom: '20px',\r\n                  padding: '20px',\r\n                  background: '#f0f9ff',\r\n                  borderRadius: '12px',\r\n                  border: '2px solid #0284c7'\r\n                }}>\r\n                  <h4 style={{ margin: '0 0 10px 0', color: '#0c4a6e', fontSize: '16px' }}>\r\n                    ðŸš› VehÃ­culo\r\n                  </h4>\r\n                  {vehiculos.filter(v => v.id === selectedVehicle).map(v => (\r\n                    <div key={v.id}>\r\n                      <p style={{ margin: '5px 0', fontSize: '15px', color: '#334155' }}>\r\n                        <strong>{v.nombre}</strong> - {v.marca} {v.modelo}\r\n                      </p>\r\n                      <p style={{ margin: '5px 0', fontSize: '14px', color: '#64748b' }}>\r\n                        Patente: {v.patente} | Kilometraje: {v.kilometraje?.toLocaleString('es-CL') || 0} km\r\n                      </p>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Resumen de servicios */}\r\n                <div style={{\r\n                  marginBottom: '20px',\r\n                  padding: '20px',\r\n                  background: '#f3f4f6',\r\n                  borderRadius: '12px',\r\n                  border: '2px solid #9ca3af'\r\n                }}>\r\n                  <h4 style={{ margin: '0 0 15px 0', color: '#374151', fontSize: '16px' }}>\r\n                    ðŸ”§ Servicios presupuestados\r\n                  </h4>\r\n                  {serviciosPreventivos.map((s, i) => (\r\n                    <div key={s.id} style={{\r\n                      padding: '10px',\r\n                      marginBottom: '10px',\r\n                      background: 'white',\r\n                      borderRadius: '8px'\r\n                    }}>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <strong style={{ fontSize: '14px' }}>#{i + 1} {s.servicio || 'Sin nombre'}</strong>\r\n                        <span style={{ fontWeight: '600', color: '#059669' }}>\r\n                          ${((parseFloat(s.manoObra) || 0) + ((parseFloat(s.costoRepuesto) || 0) * (parseInt(s.cantidadRepuesto) || 1))).toLocaleString('es-CL')}\r\n                        </span>\r\n                      </div>\r\n                      {s.detalle && (\r\n                        <p style={{ margin: '5px 0 0 0', fontSize: '13px', color: '#6b7280' }}>\r\n                          {s.detalle}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Resumen de costos */}\r\n                <div style={{\r\n                  padding: '25px',\r\n                  background: tipoRepuesto === 'original' ? '#f0fdf4' : '#fef3c7',\r\n                  borderRadius: '12px',\r\n                  border: `3px solid ${tipoRepuesto === 'original' ? '#22c55e' : '#f59e0b'}`\r\n                }}>\r\n                  <h4 style={{\r\n                    margin: '0 0 20px 0',\r\n                    color: tipoRepuesto === 'original' ? '#166534' : '#78350f',\r\n                    fontSize: '18px',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    ðŸ’° Presupuesto con repuestos {tipoRepuesto === 'original' ? 'ORIGINALES' : 'ALTERNATIVOS'}\r\n                  </h4>\r\n\r\n                  <div style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: '10px' }}>\r\n                    <div style={{ fontSize: '15px', color: '#6b7280' }}>Subtotal Mano de Obra:</div>\r\n                    <div style={{ textAlign: 'right', fontSize: '15px', fontWeight: '500' }}>\r\n                      ${totales.subtotalManoObra.toLocaleString('es-CL')}\r\n                    </div>\r\n\r\n                    <div style={{ fontSize: '15px', color: '#6b7280' }}>Subtotal Repuestos:</div>\r\n                    <div style={{ textAlign: 'right', fontSize: '15px', fontWeight: '500' }}>\r\n                      ${totales.subtotalRepuestos.toLocaleString('es-CL')}\r\n                    </div>\r\n\r\n                    <div style={{\r\n                      paddingTop: '10px',\r\n                      borderTop: '1px solid #e5e7eb',\r\n                      fontWeight: '600',\r\n                      fontSize: '16px'\r\n                    }}>\r\n                      VALOR NETO:\r\n                    </div>\r\n                    <div style={{\r\n                      paddingTop: '10px',\r\n                      borderTop: '1px solid #e5e7eb',\r\n                      textAlign: 'right',\r\n                      fontWeight: '600',\r\n                      fontSize: '16px'\r\n                    }}>\r\n                      ${totales.valorNeto.toLocaleString('es-CL')}\r\n                    </div>\r\n\r\n                    <div style={{ fontSize: '15px', color: '#6b7280' }}>IVA:</div>\r\n                    <div style={{ textAlign: 'right', fontSize: '15px' }}>\r\n                      ${totales.iva.toLocaleString('es-CL')}\r\n                    </div>\r\n\r\n                    <div style={{\r\n                      paddingTop: '15px',\r\n                      borderTop: '2px solid',\r\n                      borderColor: tipoRepuesto === 'original' ? '#22c55e' : '#f59e0b',\r\n                      fontSize: '22px',\r\n                      fontWeight: 'bold',\r\n                      color: tipoRepuesto === 'original' ? '#166534' : '#78350f'\r\n                    }}>\r\n                      TOTAL:\r\n                    </div>\r\n                    <div style={{\r\n                      paddingTop: '15px',\r\n                      borderTop: '2px solid',\r\n                      borderColor: tipoRepuesto === 'original' ? '#22c55e' : '#f59e0b',\r\n                      textAlign: 'right',\r\n                      fontSize: '22px',\r\n                      fontWeight: 'bold',\r\n                      color: tipoRepuesto === 'original' ? '#166534' : '#78350f'\r\n                    }}>\r\n                      ${totales.total.toLocaleString('es-CL')}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{ marginTop: '30px', display: 'flex', justifyContent: 'space-between' }}>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setCurrentStep(2)}\r\n                    style={{\r\n                      padding: '12px 30px',\r\n                      background: 'white',\r\n                      color: '#6b7280',\r\n                      border: '2px solid #e5e7eb',\r\n                      borderRadius: '10px',\r\n                      fontSize: '16px',\r\n                      fontWeight: '600',\r\n                      cursor: 'pointer',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: '8px'\r\n                    }}>\r\n                    <span style={{ fontSize: '18px' }}>â†</span>\r\n                    Anterior\r\n                  </button>\r\n\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={loading}\r\n                    style={{\r\n                      padding: '12px 40px',\r\n                      background: loading ? '#9ca3af' : 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\r\n                      color: 'white',\r\n                      border: 'none',\r\n                      borderRadius: '10px',\r\n                      fontSize: '16px',\r\n                      fontWeight: '600',\r\n                      cursor: loading ? 'not-allowed' : 'pointer',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: '8px',\r\n                      boxShadow: '0 4px 15px rgba(34, 197, 94, 0.3)'\r\n                    }}>\r\n                    {loading ? 'â³ Guardando...' : editingMaintenance ? 'âœ… Actualizar Presupuesto' : 'âœ… Guardar Presupuesto'}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </form>\r\n\r\n          <style>{`\r\n            @keyframes fadeIn {\r\n              from { opacity: 0; transform: translateY(10px); }\r\n              to { opacity: 1; transform: translateY(0); }\r\n            }\r\n            @keyframes slideIn {\r\n              from { transform: translateX(-20px); opacity: 0; }\r\n              to { transform: translateX(0); opacity: 1; }\r\n            }\r\n          `}</style>\r\n        </div>\r\n      )}\r\n\r\n      {/* Lista de mantenimientos mejorada */}\r\n      {!showMaintenanceForm && (\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '20px',\r\n          boxShadow: '0 10px 40px rgba(0,0,0,0.1)',\r\n          overflow: 'hidden'\r\n        }}>\r\n          <div style={{\r\n            padding: '25px',\r\n            borderBottom: '2px solid #e5e7eb',\r\n            background: 'linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%)'\r\n          }}>\r\n            <h2 style={{ margin: 0, color: '#1f2937', fontSize: '22px', fontWeight: '600' }}>\r\n              ðŸ“‹ Historial de Presupuestos\r\n            </h2>\r\n          </div>\r\n\r\n          {filteredRecords.length === 0 ? (\r\n            <div style={{\r\n              padding: '60px',\r\n              textAlign: 'center'\r\n            }}>\r\n              <div style={{ fontSize: '60px', marginBottom: '20px', opacity: 0.2 }}>ðŸ”§</div>\r\n              <h3 style={{ color: '#9ca3af', fontSize: '20px', margin: '0 0 10px 0' }}>\r\n                No hay presupuestos registrados\r\n              </h3>\r\n              <p style={{ color: '#d1d5db', fontSize: '16px' }}>\r\n                {(filterDateFrom || filterDateTo) ? 'No se encontraron presupuestos en el rango de fechas seleccionado' : 'Comienza agregando tu primer presupuesto de mantenimiento'}\r\n              </p>\r\n              {(filterDateFrom || filterDateTo) && (\r\n                <button\r\n                  onClick={() => {\r\n                    setFilterDateFrom('');\r\n                    setFilterDateTo('');\r\n                  }}\r\n                  style={{\r\n                    marginTop: '20px',\r\n                    padding: '10px 20px',\r\n                    background: '#3b82f6',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '8px',\r\n                    fontSize: '14px',\r\n                    cursor: 'pointer'\r\n                  }}>\r\n                  Ver todos los presupuestos\r\n                </button>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div style={{ padding: '20px' }}>\r\n              {filteredRecords.map((record) => (\r\n                <div key={record.id} style={{\r\n                  marginBottom: '15px',\r\n                  padding: '20px',\r\n                  background: '#f9fafb',\r\n                  borderRadius: '12px',\r\n                  border: '2px solid #e5e7eb',\r\n                  transition: 'all 0.3s ease'\r\n                }}\r\n                  onMouseEnter={(e) => {\r\n                    e.currentTarget.style.borderColor = '#3b82f6';\r\n                    e.currentTarget.style.transform = 'translateX(5px)';\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.currentTarget.style.borderColor = '#e5e7eb';\r\n                    e.currentTarget.style.transform = 'translateX(0)';\r\n                  }}>\r\n                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'start' }}>\r\n                    <div style={{ flex: 1 }}>\r\n                      <div style={{ display: 'flex', alignItems: 'center', gap: '15px', marginBottom: '10px' }}>\r\n                        <h3 style={{ margin: 0, fontSize: '18px', color: '#1f2937' }}>\r\n                          {record.vehiculoNombre}\r\n                        </h3>\r\n                        <span style={{\r\n                          padding: '4px 10px',\r\n                          borderRadius: '6px',\r\n                          fontSize: '12px',\r\n                          fontWeight: '600',\r\n                          background: record.tipoRepuesto === 'original' ? '#dcfce7' : '#fef3c7',\r\n                          color: record.tipoRepuesto === 'original' ? '#166534' : '#78350f'\r\n                        }}>\r\n                          {record.tipoRepuesto === 'original' ? 'âœ… Original' : 'ðŸ”„ Alternativo'}\r\n                        </span>\r\n                      </div>\r\n\r\n                      <div style={{ display: 'flex', gap: '20px', fontSize: '14px', color: '#6b7280', flexWrap: 'wrap' }}>\r\n                        <span>ðŸ“… Solicitud: {record.fechaSolicitud || new Date(record.fechaMantenimiento).toLocaleDateString('es-CL')}</span>\r\n                        <span>ðŸ• {record.horaSolicitud || 'Sin hora'}</span>\r\n                        <span>ðŸš— {record.vehiculoPatente}</span>\r\n                        <span>ðŸ”§ {record.serviciosPreventivos?.length || 0} servicios</span>\r\n                        <span>ðŸ“ {record.kilometrajeActual?.toLocaleString('es-CL') || 0} km</span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\r\n                      <div style={{ textAlign: 'right' }}>\r\n                        <div style={{ fontSize: '12px', color: '#9ca3af' }}>Total</div>\r\n                        <div style={{ fontSize: '22px', fontWeight: 'bold', color: '#059669' }}>\r\n                          ${record.totales?.total?.toLocaleString('es-CL') || 0}\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div style={{ display: 'flex', gap: '8px' }}>\r\n                        <button\r\n                          onClick={() => handleExportPDF(record)}\r\n                          style={{\r\n                            padding: '8px',\r\n                            background: '#10b981',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            fontSize: '16px',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            width: '36px',\r\n                            height: '36px',\r\n                            transition: 'background 0.3s ease'\r\n                          }}\r\n                          onMouseEnter={(e) => e.currentTarget.style.background = '#059669'}\r\n                          onMouseLeave={(e) => e.currentTarget.style.background = '#10b981'}\r\n                          title=\"Exportar a PDF\">\r\n                          ðŸ“„\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleEditMaintenance(record)}\r\n                          style={{\r\n                            padding: '8px',\r\n                            background: '#3b82f6',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            fontSize: '16px',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            width: '36px',\r\n                            height: '36px'\r\n                          }}\r\n                          title=\"Editar\">\r\n                          âœï¸\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleDeleteMaintenance(record.id)}\r\n                          style={{\r\n                            padding: '8px',\r\n                            background: '#ef4444',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            fontSize: '16px',\r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                            width: '36px',\r\n                            height: '36px'\r\n                          }}\r\n                          title=\"Eliminar\">\r\n                          ðŸ—‘ï¸\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PreventiveMaintenanceModule;"],"mappings":"AAAA;AAEA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OACEC,GAAG,GAAI,CAAAC,WAAW,CAClBC,GAAG,GAAI,CAAAC,WAAW,CAClBC,IAAI,CACJC,MAAM,CACNC,MAAM,CACNC,OAAO,CACPC,GAAG,KACE,mBAAmB,CAC1B,MAAO,CAAAC,qBAAqB,KAAM,yBAAyB,CAC3D,OAASC,QAAQ,KAAQ,oBAAoB,CAC7C,OAASC,gBAAgB,KAAQ,8BAA8B,CAC/D,OAASC,KAAK,KAAQ,OAAO,CAC7B,MAAO,CAAAC,SAAS,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAExC,KAAM,CAAAC,2BAA2B,CAAGC,IAAA,EAA0C,IAAzC,CAAEC,SAAS,CAAEC,WAAW,CAAEC,QAAS,CAAC,CAAAH,IAAA,CACvE;AACA,KAAM,CAACI,kBAAkB,CAAEC,qBAAqB,CAAC,CAAG7B,QAAQ,CAAC,EAAE,CAAC,CAChE,KAAM,CAAC8B,mBAAmB,CAAEC,sBAAsB,CAAC,CAAG/B,QAAQ,CAAC,KAAK,CAAC,CACrE,KAAM,CAACgC,eAAe,CAAEC,kBAAkB,CAAC,CAAGjC,QAAQ,CAAC,EAAE,CAAC,CAC1D,KAAM,CAACkC,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGnC,QAAQ,CAAC,IAAI,CAAC,CAClE,KAAM,CAACoC,OAAO,CAAEC,UAAU,CAAC,CAAGrC,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACsC,OAAO,CAAEC,UAAU,CAAC,CAAGvC,QAAQ,CAAC,CAAEwC,IAAI,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAG,CAAC,CAAC,CAC9D,KAAM,CAACC,yBAAyB,CAAEC,4BAA4B,CAAC,CAAG3C,QAAQ,CAAC,KAAK,CAAC,CAGjF;AACA,KAAM,CAAC4C,WAAW,CAAEC,cAAc,CAAC,CAAG7C,QAAQ,CAAC,CAAC,CAAC,CAEjD;AACA,KAAM,CAAC8C,UAAU,CAAEC,aAAa,CAAC,CAAG/C,QAAQ,CAAC,WAAW,CAAC,CAEzD;AACA,KAAM,CAACgD,UAAU,CAAEC,aAAa,CAAC,CAAGjD,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACkD,YAAY,CAAEC,eAAe,CAAC,CAAGnD,QAAQ,CAAC,OAAO,CAAC,CACzD,KAAM,CAACoD,cAAc,CAAEC,iBAAiB,CAAC,CAAGrD,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAACsD,YAAY,CAAEC,eAAe,CAAC,CAAGvD,QAAQ,CAAC,EAAE,CAAC,CAEpD;AACA,KAAM,CAACwD,YAAY,CAAEC,eAAe,CAAC,CAAGzD,QAAQ,CAAC,UAAU,CAAC,CAE5D;AACA,KAAM,CAAC0D,cAAc,CAAEC,iBAAiB,CAAC,CAAG3D,QAAQ,CAAC,GAAI,CAAA4D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAC5F,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGhE,QAAQ,CAAC,GAAI,CAAA4D,IAAI,CAAC,CAAC,CAACK,kBAAkB,CAAC,OAAO,CAAE,CAAEC,IAAI,CAAE,SAAS,CAAEC,MAAM,CAAE,SAAS,CAAEC,MAAM,CAAE,KAAM,CAAC,CAAC,CAAC,CAEjJ;AACA,KAAM,CAACC,oBAAoB,CAAEC,uBAAuB,CAAC,CAAGtE,QAAQ,CAAC,EAAE,CAAC,CACpE,KAAM,CAACuE,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGxE,QAAQ,CAAC,EAAE,CAAC,CAC9D,KAAM,CAACyE,iBAAiB,CAAEC,oBAAoB,CAAC,CAAG1E,QAAQ,CAAC,EAAE,CAAC,CAE9D,KAAM,CAAC2E,QAAQ,CAAEC,WAAW,CAAC,CAAG5E,QAAQ,CAAC,CAAC,CAAC,CAC3C,KAAM,CAAA6E,eAAe,CAAG3E,WAAW,CAAC,IAAM,CACxC,KAAM,CAAA4E,gBAAgB,CAAGT,oBAAoB,CAACU,MAAM,CAAC,CAACC,GAAG,CAAEC,CAAC,GAAKD,GAAG,EAAIE,UAAU,CAACD,CAAC,CAACE,QAAQ,CAAC,EAAI,CAAC,CAAC,CAAE,CAAC,CAAC,CACxG,KAAM,CAAAC,iBAAiB,CAAGf,oBAAoB,CAACU,MAAM,CAAC,CAACC,GAAG,CAAEC,CAAC,GAAKD,GAAG,CAAI,CAACE,UAAU,CAACD,CAAC,CAACI,aAAa,CAAC,EAAI,CAAC,GAAKC,QAAQ,CAACL,CAAC,CAACM,gBAAgB,CAAC,EAAI,CAAC,CAAE,CAAE,CAAC,CAAC,CACtJ,KAAM,CAAAC,eAAe,CAAGC,IAAI,CAACC,KAAK,CAACN,iBAAiB,CAAG,IAAI,CAAC,CAAE;AAC9D,KAAM,CAAAO,GAAG,CAAGF,IAAI,CAACC,KAAK,CAACN,iBAAiB,CAAG,IAAI,CAAC,CAAE;AAClD,KAAM,CAAAQ,KAAK,CAAGd,gBAAgB,CAAGU,eAAe,CAAE;AAElD,MAAO,CACLV,gBAAgB,CAChBM,iBAAiB,CACjBS,SAAS,CAAEf,gBAAgB,CAAGM,iBAAiB,CAC/CO,GAAG,CACHC,KACF,CAAC,CACH,CAAC,CAAE,CAACvB,oBAAoB,CAAC,CAAC,CAC1B;AACA;AAEA,KAAM,CAAAyB,+BAA+B,CAAG5F,WAAW,CAAE6F,QAAQ,EAAK,KAAAC,mBAAA,CAChE,KAAM,CAAAb,QAAQ,CAAGD,UAAU,CAACa,QAAQ,CAACZ,QAAQ,CAAC,EAAI,CAAC,CACnD,KAAM,CAAAc,cAAc,CAAG,EAAAD,mBAAA,CAAAD,QAAQ,CAACG,SAAS,UAAAF,mBAAA,iBAAlBA,mBAAA,CAAoBjB,MAAM,CAAC,CAACC,GAAG,CAAEmB,QAAQ,GAAK,CACnE,MAAO,CAAAnB,GAAG,CAAImB,QAAQ,CAACC,QAAQ,CAAGD,QAAQ,CAACE,aAAc,CAC3D,CAAC,CAAE,CAAC,CAAC,GAAI,CAAC,CACV,KAAM,CAAAV,GAAG,CAAGF,IAAI,CAACC,KAAK,CAACO,cAAc,CAAG,IAAI,CAAC,CAC7C,KAAM,CAAAL,KAAK,CAAGT,QAAQ,CAAGc,cAAc,CAAGN,GAAG,CAE7C,MAAO,CACLR,QAAQ,CACRc,cAAc,CACdN,GAAG,CACHC,KACF,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN;AACA3F,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqG,cAAc,CAAGlG,WAAW,CAACS,QAAQ,CAAE,gBAAgB,CAAC,CAC9D,KAAM,CAAA0F,WAAW,CAAG7F,OAAO,CAAC4F,cAAc,CAAGE,QAAQ,EAAK,CACxD,KAAM,CAAAC,IAAI,CAAGD,QAAQ,CAACE,GAAG,CAAC,CAAC,CAC3B,GAAID,IAAI,CAAE,CACR,KAAM,CAAAE,gBAAgB,CAAGC,MAAM,CAACC,OAAO,CAACJ,IAAI,CAAC,CAACK,GAAG,CAACC,KAAA,MAAC,CAACC,EAAE,CAAEC,WAAW,CAAC,CAAAF,KAAA,OAAM,CACxEC,EAAE,CACF,GAAGC,WACL,CAAC,EAAC,CAAC,CACHpF,qBAAqB,CAAC8E,gBAAgB,CAAC,CACzC,CAAC,IAAM,CACL9E,qBAAqB,CAAC,EAAE,CAAC,CAC3B,CACF,CAAC,CAAC,CAEF,MAAO,IAAMlB,GAAG,CAAC2F,cAAc,CAAC,CAClC,CAAC,CAAE,EAAE,CAAC,CACNrG,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiH,WAAW,CAAG9G,WAAW,CAACS,QAAQ,CAAE,oBAAoB,CAAC,CAC/DH,OAAO,CAACwG,WAAW,CAAGV,QAAQ,EAAK,CACjC,KAAM,CAAAC,IAAI,CAAGD,QAAQ,CAACE,GAAG,CAAC,CAAC,CAC3B,GAAID,IAAI,CAAE,CACR,KAAM,CAAAU,cAAc,CAAGP,MAAM,CAACC,OAAO,CAACJ,IAAI,CAAC,CAACK,GAAG,CAACM,KAAA,MAAC,CAACJ,EAAE,CAAEjB,QAAQ,CAAC,CAAAqB,KAAA,OAAM,CACnEJ,EAAE,CACF,GAAGjB,QACL,CAAC,EAAC,CAAC,CACHvB,oBAAoB,CAAC2C,cAAc,CAAC,CACtC,CACF,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAE,0BAA0B,CAAGA,CAAA,GAAM,CACvC,GAAI,CAAC5C,iBAAiB,CAAE,MAAO,CAAAF,iBAAiB,CAEhD,KAAM,CAAA+C,WAAW,CAAG7C,iBAAiB,CAAC8C,WAAW,CAAC,CAAC,CACnD,MAAO,CAAAhD,iBAAiB,CAACiD,MAAM,CAACzB,QAAQ,EACtCA,QAAQ,CAAC0B,MAAM,CAACF,WAAW,CAAC,CAAC,CAACG,QAAQ,CAACJ,WAAW,CAAC,EACnDvB,QAAQ,CAAC4B,WAAW,CAACJ,WAAW,CAAC,CAAC,CAACG,QAAQ,CAACJ,WAAW,CACzD,CAAC,CACH,CAAC,CAED;AACA,KAAM,CAAAM,yBAAyB,CAAI7B,QAAQ,EAAK,KAAA8B,oBAAA,CAC9C,KAAM,CAAAC,aAAa,CAAGC,QAAQ,CAACC,cAAc,CAAC,YAAYjC,QAAQ,CAACiB,EAAE,EAAE,CAAC,CACxE,KAAM,CAAAZ,QAAQ,CAAGd,QAAQ,CAACwC,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEG,KAAK,CAAC,EAAI,CAAC,CAEpD,KAAM,CAAAhC,cAAc,CAAG,CAAC,EAAA4B,oBAAA,CAAA9B,QAAQ,CAACG,SAAS,UAAA2B,oBAAA,iBAAlBA,oBAAA,CAAoB9C,MAAM,CAAC,CAACC,GAAG,CAAEkD,GAAG,GAC1DlD,GAAG,CAAIkD,GAAG,CAAC9B,QAAQ,CAAG8B,GAAG,CAAC7B,aAAc,CAAE,CAAC,CAAC,GAAI,CAAC,EAAID,QAAQ,CAC/D,KAAM,CAAAT,GAAG,CAAGF,IAAI,CAACC,KAAK,CAACO,cAAc,CAAG,IAAI,CAAC,CAC7C,KAAM,CAAAkC,aAAa,CAAG,CAACpC,QAAQ,CAACZ,QAAQ,EAAI,CAAC,EAAIiB,QAAQ,CAAGH,cAAc,CAAGN,GAAG,CAEhF,KAAM,CAAAyC,aAAa,CAAG,CACpBpB,EAAE,CAAEpD,IAAI,CAACyE,GAAG,CAAC,CAAC,CACdC,UAAU,CAAEvC,QAAQ,CAACiB,EAAE,CACvBS,MAAM,CAAE1B,QAAQ,CAAC0B,MAAM,CACvBE,WAAW,CAAE5B,QAAQ,CAAC4B,WAAW,CACjCxC,QAAQ,CAAEY,QAAQ,CAACZ,QAAQ,EAAI,CAAC,CAChCe,SAAS,CAAEH,QAAQ,CAACG,SAAS,EAAI,EAAE,CACnCqC,gBAAgB,CAAEnC,QAAQ,CAC1BH,cAAc,CACdN,GAAG,CACHwC,aACF,CAAC,CAED7D,uBAAuB,CAAC,CAAC,GAAGD,oBAAoB,CAAE+D,aAAa,CAAC,CAAC,CACnE,CAAC,CAED;AACA,KAAM,CAAAI,eAAe,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAAAC,cAAc,CAAGpE,oBAAoB,CAACA,oBAAoB,CAACqE,MAAM,CAAG,CAAC,CAAC,CAC5E;AACA,GAAID,cAAc,EAChB,CAACA,cAAc,CAAC1C,QAAQ,EACxB,CAAC0C,cAAc,CAACE,OAAO,EACvBF,cAAc,CAACtD,QAAQ,GAAK,CAAC,EAC7BsD,cAAc,CAACpD,aAAa,GAAK,CAAC,CAAE,CACpC9C,UAAU,CAAC,CAAEC,IAAI,CAAE,SAAS,CAAEC,IAAI,CAAE,sDAAuD,CAAC,CAAC,CAC7F,OACF,CACA,KAAM,CAAAmG,WAAW,CAAGvE,oBAAoB,CAACqE,MAAM,CAAG,CAAC,CACnDpE,uBAAuB,CAAC,CAAC,GAAGD,oBAAoB,CAAE,CAChD2C,EAAE,CAAEpD,IAAI,CAACyE,GAAG,CAAC,CAAC,CACdQ,MAAM,CAAED,WAAW,CACnB7C,QAAQ,CAAE,EAAE,CACZ0B,MAAM,CAAE,EAAE,CACVkB,OAAO,CAAE,EAAE,CACXxD,QAAQ,CAAE,CAAC,CACXE,aAAa,CAAE,CAAC,CAChBE,gBAAgB,CAAE,CAAC,CACnBuD,mBAAmB,CAAE,EAAE,CACvBnD,GAAG,CAAE,CAEP,CAAC,CAAC,CAAC,CACL,CAAC,CAED,KAAM,CAAAoD,kBAAkB,CAAGA,CAAC/B,EAAE,CAAEgC,KAAK,CAAEC,KAAK,GAAK,CAC/C3E,uBAAuB,CAACD,oBAAoB,CAACyC,GAAG,CAAC7B,CAAC,EAChDA,CAAC,CAAC+B,EAAE,GAAKA,EAAE,CAAG,CAAE,GAAG/B,CAAC,CAAE,CAAC+D,KAAK,EAAGC,KAAM,CAAC,CAAGhE,CAC3C,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAiE,gBAAgB,CAAIlC,EAAE,EAAK,CAC/B,GAAI3C,oBAAoB,CAACqE,MAAM,CAAG,CAAC,CAAE,CACnC,KAAM,CAAAS,eAAe,CAAG9E,oBAAoB,CAACmD,MAAM,CAACvC,CAAC,EAAIA,CAAC,CAAC+B,EAAE,GAAKA,EAAE,CAAC,CACrE,KAAM,CAAAoC,oBAAoB,CAAGD,eAAe,CAACrC,GAAG,CAAC,CAAC7B,CAAC,CAAEoE,KAAK,IAAM,CAC9D,GAAGpE,CAAC,CACJ4D,MAAM,CAAEQ,KAAK,CAAG,CAClB,CAAC,CAAC,CAAC,CACH/E,uBAAuB,CAAC8E,oBAAoB,CAAC,CAC/C,CACF,CAAC,CACD;AAEA,KAAM,CAAAE,eAAe,CAAIC,MAAM,EAAK,CAClC,GAAI,KAAAC,aAAA,CAAAC,qBAAA,CACF,KAAM,CAAAC,GAAG,CAAG,GAAI,CAAA3I,KAAK,CAAC,CAAC,CACvB,KAAM,CAAA4I,SAAS,CAAGD,GAAG,CAACE,QAAQ,CAACC,QAAQ,CAACC,KAAK,CAC7C,KAAM,CAAAC,UAAU,CAAGL,GAAG,CAACE,QAAQ,CAACC,QAAQ,CAACG,MAAM,CAE/C;AACA,KAAM,CAAA3B,GAAG,CAAG,GAAI,CAAAzE,IAAI,CAAC,CAAC,CACtB,KAAM,CAAAqG,eAAe,CAAG5B,GAAG,CAAC6B,kBAAkB,CAAC,OAAO,CAAE,CACtDC,IAAI,CAAE,SAAS,CACfC,KAAK,CAAE,MAAM,CACbC,GAAG,CAAE,SACP,CAAC,CAAC,CAEF;AACA,KAAM,CAAAC,gBAAgB,CAAGf,MAAM,CAAClF,oBAAoB,CAACmD,MAAM,CAACzB,QAAQ,EAClEA,QAAQ,CAACA,QAAQ,EACjBA,QAAQ,CAAC4C,OAAO,EAChB5C,QAAQ,CAACZ,QAAQ,CAAG,CAAC,EACrBY,QAAQ,CAACV,aAAa,CAAG,CAC3B,CAAC,CAED,GAAIiF,gBAAgB,CAAC5B,MAAM,GAAK,CAAC,CAAE,CACjCnG,UAAU,CAAC,CAAEC,IAAI,CAAE,OAAO,CAAEC,IAAI,CAAE,0CAA2C,CAAC,CAAC,CAC/E,OACF,CAEA;AACAiH,GAAG,CAACa,YAAY,CAAC,GAAG,CAAE,GAAG,CAAE,GAAG,CAAC,CAC/Bb,GAAG,CAACc,IAAI,CAAC,CAAC,CAAE,CAAC,CAAEb,SAAS,CAAE,EAAE,CAAE,GAAG,CAAC,CAElC;AACAD,GAAG,CAACe,YAAY,CAAC,GAAG,CAAE,GAAG,CAAE,GAAG,CAAC,CAC/Bf,GAAG,CAACgB,WAAW,CAAC,EAAE,CAAC,CACnBhB,GAAG,CAACiB,OAAO,CAACC,SAAS,CAAE,MAAM,CAAC,CAC9BlB,GAAG,CAACjH,IAAI,CAAC,8BAA8B,CAAEkH,SAAS,CAAG,CAAC,CAAE,EAAE,CAAE,CAAEkB,KAAK,CAAE,QAAS,CAAC,CAAC,CAEhF;AACAnB,GAAG,CAACgB,WAAW,CAAC,EAAE,CAAC,CACnBhB,GAAG,CAACiB,OAAO,CAACC,SAAS,CAAE,QAAQ,CAAC,CAChClB,GAAG,CAACjH,IAAI,CAAC,qBAAqB,CAAEkH,SAAS,CAAG,CAAC,CAAE,EAAE,CAAE,CAAEkB,KAAK,CAAE,QAAS,CAAC,CAAC,CAEvE;AACAnB,GAAG,CAACgB,WAAW,CAAC,EAAE,CAAC,CACnBhB,GAAG,CAACjH,IAAI,CAAC,gBAAgB8G,MAAM,CAACvC,EAAE,CAAC8D,SAAS,CAAC,CAAC,CAAE,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EAAE,CAAEpB,SAAS,CAAG,CAAC,CAAE,EAAE,CAAE,CAAEkB,KAAK,CAAE,QAAS,CAAC,CAAC,CAE3G;AACA,GAAI,CAAAG,IAAI,CAAG,EAAE,CACbtB,GAAG,CAACe,YAAY,CAAC,EAAE,CAAE,EAAE,CAAE,EAAE,CAAC,CAC5Bf,GAAG,CAACgB,WAAW,CAAC,EAAE,CAAC,CACnBhB,GAAG,CAACiB,OAAO,CAACC,SAAS,CAAE,MAAM,CAAC,CAC9BlB,GAAG,CAACjH,IAAI,CAAC,6BAA6B,CAAE,EAAE,CAAEuI,IAAI,CAAC,CAEjDA,IAAI,EAAI,EAAE,CACVtB,GAAG,CAACgB,WAAW,CAAC,EAAE,CAAC,CACnBhB,GAAG,CAACiB,OAAO,CAACC,SAAS,CAAE,QAAQ,CAAC,CAEhC;AACA,KAAM,CAAAK,aAAa,CAAG,CACpB,CAAC,qBAAqB,CAAE,GAAI,CAAArH,IAAI,CAAC2F,MAAM,CAAC7F,cAAc,EAAI6F,MAAM,CAAC2B,kBAAkB,CAAC,CAAChB,kBAAkB,CAAC,OAAO,CAAE,CAAEiB,OAAO,CAAE,MAAM,CAAEhB,IAAI,CAAE,SAAS,CAAEC,KAAK,CAAE,MAAM,CAAEC,GAAG,CAAE,SAAU,CAAC,CAAC,CAAC,CACtL,CAAC,oBAAoB,CAAE,GAAGd,MAAM,CAACxF,aAAa,EAAI,iBAAiB,MAAM,CAAC,CAC1E,CAAC,iBAAiB,CAAErC,WAAW,CAAC0J,IAAI,EAAI1J,WAAW,CAAC2J,KAAK,EAAI,qBAAqB,CAAC,CACnF,CAAC,SAAS,CAAE,aAAa,CAAC,CAC3B,CAEDrK,SAAS,CAAC0I,GAAG,CAAE,CACb4B,MAAM,CAAEN,IAAI,CACZO,IAAI,CAAE,EAAE,CACRC,IAAI,CAAEP,aAAa,CACnBQ,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,CACNC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,CACf,CAAC,CACDC,YAAY,CAAE,CACZ,CAAC,CAAE,CAAEC,SAAS,CAAE,MAAM,CAAEC,SAAS,CAAE,EAAG,CAAC,CACvC,CAAC,CAAE,CAAEA,SAAS,CAAE,GAAI,CACtB,CACF,CAAC,CAAC,CAEFf,IAAI,CAAGtB,GAAG,CAACsC,aAAa,CAACC,MAAM,CAAG,EAAE,CAEpC;AACAvC,GAAG,CAACgB,WAAW,CAAC,EAAE,CAAC,CACnBhB,GAAG,CAACiB,OAAO,CAACC,SAAS,CAAE,MAAM,CAAC,CAC9BlB,GAAG,CAACjH,IAAI,CAAC,0BAA0B,CAAE,EAAE,CAAEuI,IAAI,CAAC,CAE9CA,IAAI,EAAI,EAAE,CAEV,KAAM,CAAAkB,QAAQ,CAAGzK,SAAS,CAAC0K,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACpF,EAAE,GAAKuC,MAAM,CAAC8C,UAAU,CAAC,CAChE,KAAM,CAAAC,YAAY,CAAG,CACnB,CAAC,WAAW,CAAE/C,MAAM,CAACgD,cAAc,EAAI,iBAAiB,CAAC,CACzD,CAAC,UAAU,CAAEhD,MAAM,CAACiD,eAAe,EAAI,iBAAiB,CAAC,CACzD,CAAC,eAAe,CAAEN,QAAQ,CAAG,GAAGA,QAAQ,CAACO,KAAK,IAAIP,QAAQ,CAACQ,MAAM,EAAE,CAAG,iBAAiB,CAAC,CACxF,CAAC,MAAM,CAAE,CAAAR,QAAQ,SAARA,QAAQ,kBAAA1C,aAAA,CAAR0C,QAAQ,CAAES,GAAG,UAAAnD,aAAA,iBAAbA,aAAA,CAAeoD,QAAQ,CAAC,CAAC,GAAI,iBAAiB,CAAC,CACxD,CAAC,qBAAqB,CAAE,GAAG,EAAAnD,qBAAA,CAAAF,MAAM,CAACsD,iBAAiB,UAAApD,qBAAA,iBAAxBA,qBAAA,CAA0BqD,cAAc,CAAC,OAAO,CAAC,GAAI,CAAC,KAAK,CAAC,CACvF,CAAC,oBAAoB,CAAEvD,MAAM,CAAC/F,YAAY,GAAK,UAAU,CAAG,+BAA+B,CAAG,4BAA4B,CAAC,CAC5H,CAEDxC,SAAS,CAAC0I,GAAG,CAAE,CACb4B,MAAM,CAAEN,IAAI,CACZO,IAAI,CAAE,EAAE,CACRC,IAAI,CAAEc,YAAY,CAClBb,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,CACNC,QAAQ,CAAE,EAAE,CACZC,WAAW,CAAE,CACf,CAAC,CACDC,YAAY,CAAE,CACZ,CAAC,CAAE,CAAEC,SAAS,CAAE,MAAM,CAAEC,SAAS,CAAE,EAAG,CAAC,CACvC,CAAC,CAAE,CAAEA,SAAS,CAAE,GAAI,CACtB,CACF,CAAC,CAAC,CAEFf,IAAI,CAAGtB,GAAG,CAACsC,aAAa,CAACC,MAAM,CAAG,EAAE,CAEpC;AACAvC,GAAG,CAACgB,WAAW,CAAC,EAAE,CAAC,CACnBhB,GAAG,CAACiB,OAAO,CAACC,SAAS,CAAE,MAAM,CAAC,CAC9BlB,GAAG,CAACjH,IAAI,CAAC,qCAAqC,CAAE,EAAE,CAAEuI,IAAI,CAAC,CAEzDA,IAAI,EAAI,EAAE,CAEV;AACA,KAAM,CAAA+B,aAAa,CAAGzC,gBAAgB,CAACxD,GAAG,CAAC,CAACf,QAAQ,CAAEsD,KAAK,GAAK,KAAA2D,qBAAA,CAC9D,KAAM,CAAAC,cAAc,CAAG,CAAC/H,UAAU,CAACa,QAAQ,CAACZ,QAAQ,CAAC,EAAI,CAAC,EACvD,CAACD,UAAU,CAACa,QAAQ,CAACV,aAAa,CAAC,EAAI,CAAC,GAAKC,QAAQ,CAACS,QAAQ,CAACR,gBAAgB,CAAC,EAAI,CAAC,CAAE,CAC1F,KAAM,CAAAI,GAAG,CAAGT,UAAU,CAACa,QAAQ,CAACJ,GAAG,CAAC,EAAI,CAAC,CACzC,KAAM,CAAAuH,WAAW,CAAGD,cAAc,CAAGtH,GAAG,CAExC,MAAO,CACL,CAAC0D,KAAK,CAAG,CAAC,EAAEuD,QAAQ,CAAC,CAAC,CACtB7G,QAAQ,CAACA,QAAQ,EAAI,kBAAkB,CACvCA,QAAQ,CAAC4C,OAAO,EAAI,iBAAiB,CACrC5C,QAAQ,CAAC+C,mBAAmB,EAAI,KAAK,CACrC,EAAAkE,qBAAA,CAAAjH,QAAQ,CAACR,gBAAgB,UAAAyH,qBAAA,iBAAzBA,qBAAA,CAA2BJ,QAAQ,CAAC,CAAC,GAAI,GAAG,CAC5C,IAAI,CAAC1H,UAAU,CAACa,QAAQ,CAACZ,QAAQ,CAAC,EAAI,CAAC,EAAE2H,cAAc,CAAC,OAAO,CAAC,EAAE,CAClE,IAAI,CAAC5H,UAAU,CAACa,QAAQ,CAACV,aAAa,CAAC,EAAI,CAAC,EAAEyH,cAAc,CAAC,OAAO,CAAC,EAAE,CACvE,IAAInH,GAAG,CAACmH,cAAc,CAAC,OAAO,CAAC,EAAE,CAAE;AACnC,IAAII,WAAW,CAACJ,cAAc,CAAC,OAAO,CAAC,EAAE,CAC1C,CACH,CAAC,CAAC,CAEF;AACA9L,SAAS,CAAC0I,GAAG,CAAE,CACb4B,MAAM,CAAEN,IAAI,CACZO,IAAI,CAAE,CAAC,CAAC,GAAG,CAAE,UAAU,CAAE,aAAa,CAAE,UAAU,CAAE,OAAO,CAAE,WAAW,CAAE,aAAa,CAAE,KAAK,CAAE,OAAO,CAAC,CAAC,CACzGC,IAAI,CAAEuB,aAAa,CACnBtB,KAAK,CAAE,SAAS,CAChB0B,UAAU,CAAE,CACVC,SAAS,CAAE,CAAC,GAAG,CAAE,GAAG,CAAE,GAAG,CAAC,CAC1BC,SAAS,CAAE,GAAG,CACd1B,QAAQ,CAAE,CAAC,CACXG,SAAS,CAAE,MACb,CAAC,CACDwB,UAAU,CAAE,CACV3B,QAAQ,CAAE,CACZ,CAAC,CACDE,YAAY,CAAE,CACZ,CAAC,CAAE,CAAEE,SAAS,CAAE,CAAC,CAAEwB,MAAM,CAAE,QAAS,CAAC,CACrC,CAAC,CAAE,CAAExB,SAAS,CAAE,EAAG,CAAC,CACpB,CAAC,CAAE,CAAEA,SAAS,CAAE,EAAG,CAAC,CACpB,CAAC,CAAE,CAAEA,SAAS,CAAE,EAAG,CAAC,CACpB,CAAC,CAAE,CAAEA,SAAS,CAAE,EAAE,CAAEwB,MAAM,CAAE,QAAS,CAAC,CACtC,CAAC,CAAE,CAAExB,SAAS,CAAE,EAAE,CAAEwB,MAAM,CAAE,OAAQ,CAAC,CACrC,CAAC,CAAE,CAAExB,SAAS,CAAE,EAAE,CAAEwB,MAAM,CAAE,OAAQ,CAAC,CACrC,CAAC,CAAE,CAAExB,SAAS,CAAE,EAAE,CAAEwB,MAAM,CAAE,OAAQ,CAAC,CAAE;AACvC,CAAC,CAAE,CAAExB,SAAS,CAAE,EAAE,CAAEwB,MAAM,CAAE,OAAO,CAAEzB,SAAS,CAAE,MAAO,CAAE;AAC3D,CACF,CAAC,CAAC,CAEFd,IAAI,CAAGtB,GAAG,CAACsC,aAAa,CAACC,MAAM,CAAG,EAAE,CAEpC;AACA,GAAIjB,IAAI,CAAGjB,UAAU,CAAG,EAAE,CAAE,CAC1BL,GAAG,CAAC8D,OAAO,CAAC,CAAC,CACbxC,IAAI,CAAG,EAAE,CACX,CAEA;AACAtB,GAAG,CAACa,YAAY,CAAC,GAAG,CAAE,GAAG,CAAE,GAAG,CAAC,CAC/Bb,GAAG,CAACc,IAAI,CAACb,SAAS,CAAG,GAAG,CAAEqB,IAAI,CAAG,CAAC,CAAE,EAAE,CAAE,EAAE,CAAE,GAAG,CAAC,CAEhDtB,GAAG,CAACe,YAAY,CAAC,EAAE,CAAE,EAAE,CAAE,EAAE,CAAC,CAC5Bf,GAAG,CAACgB,WAAW,CAAC,EAAE,CAAC,CACnBhB,GAAG,CAACiB,OAAO,CAACC,SAAS,CAAE,QAAQ,CAAC,CAEhC,KAAM,CAAA6C,MAAM,CAAG9D,SAAS,CAAG,EAAE,CAC7BD,GAAG,CAACjH,IAAI,CAAC,wBAAwB,CAAEgL,MAAM,CAAEzC,IAAI,CAAG,CAAC,CAAC,CACpDtB,GAAG,CAACjH,IAAI,CAAC,IAAI8G,MAAM,CAACmE,OAAO,CAAC5I,gBAAgB,CAACgI,cAAc,CAAC,OAAO,CAAC,EAAE,CAAEnD,SAAS,CAAG,EAAE,CAAEqB,IAAI,CAAG,CAAC,CAAE,CAAEH,KAAK,CAAE,OAAQ,CAAC,CAAC,CAErHnB,GAAG,CAACjH,IAAI,CAAC,qBAAqB,CAAEgL,MAAM,CAAEzC,IAAI,CAAG,EAAE,CAAC,CAClDtB,GAAG,CAACjH,IAAI,CAAC,IAAI8G,MAAM,CAACmE,OAAO,CAACtI,iBAAiB,CAAC0H,cAAc,CAAC,OAAO,CAAC,EAAE,CAAEnD,SAAS,CAAG,EAAE,CAAEqB,IAAI,CAAG,EAAE,CAAE,CAAEH,KAAK,CAAE,OAAQ,CAAC,CAAC,CAEvHnB,GAAG,CAACiE,YAAY,CAAC,GAAG,CAAE,GAAG,CAAE,GAAG,CAAC,CAC/BjE,GAAG,CAACkE,IAAI,CAACH,MAAM,CAAEzC,IAAI,CAAG,EAAE,CAAErB,SAAS,CAAG,EAAE,CAAEqB,IAAI,CAAG,EAAE,CAAC,CAEtDtB,GAAG,CAACiB,OAAO,CAACC,SAAS,CAAE,MAAM,CAAC,CAC9BlB,GAAG,CAACjH,IAAI,CAAC,aAAa,CAAEgL,MAAM,CAAEzC,IAAI,CAAG,EAAE,CAAC,CAC1CtB,GAAG,CAACjH,IAAI,CAAC,IAAI8G,MAAM,CAACmE,OAAO,CAAC7H,SAAS,CAACiH,cAAc,CAAC,OAAO,CAAC,EAAE,CAAEnD,SAAS,CAAG,EAAE,CAAEqB,IAAI,CAAG,EAAE,CAAE,CAAEH,KAAK,CAAE,OAAQ,CAAC,CAAC,CAE/GnB,GAAG,CAACiB,OAAO,CAACC,SAAS,CAAE,QAAQ,CAAC,CAChClB,GAAG,CAACjH,IAAI,CAAC,MAAM,CAAEgL,MAAM,CAAEzC,IAAI,CAAG,EAAE,CAAC,CACnCtB,GAAG,CAACjH,IAAI,CAAC,IAAI8G,MAAM,CAACmE,OAAO,CAAC/H,GAAG,CAACmH,cAAc,CAAC,OAAO,CAAC,EAAE,CAAEnD,SAAS,CAAG,EAAE,CAAEqB,IAAI,CAAG,EAAE,CAAE,CAAEH,KAAK,CAAE,OAAQ,CAAC,CAAC,CAEzGnB,GAAG,CAACiE,YAAY,CAAC,EAAE,CAAE,GAAG,CAAE,EAAE,CAAC,CAC7BjE,GAAG,CAACmE,YAAY,CAAC,CAAC,CAAC,CACnBnE,GAAG,CAACkE,IAAI,CAACH,MAAM,CAAEzC,IAAI,CAAG,EAAE,CAAErB,SAAS,CAAG,EAAE,CAAEqB,IAAI,CAAG,EAAE,CAAC,CAEtDtB,GAAG,CAACgB,WAAW,CAAC,EAAE,CAAC,CACnBhB,GAAG,CAACiB,OAAO,CAACC,SAAS,CAAE,MAAM,CAAC,CAC9BlB,GAAG,CAACe,YAAY,CAAC,EAAE,CAAE,GAAG,CAAE,EAAE,CAAC,CAC7Bf,GAAG,CAACjH,IAAI,CAAC,QAAQ,CAAEgL,MAAM,CAAEzC,IAAI,CAAG,EAAE,CAAC,CACrCtB,GAAG,CAACjH,IAAI,CAAC,IAAI8G,MAAM,CAACmE,OAAO,CAAC9H,KAAK,CAACkH,cAAc,CAAC,OAAO,CAAC,EAAE,CAAEnD,SAAS,CAAG,EAAE,CAAEqB,IAAI,CAAG,EAAE,CAAE,CAAEH,KAAK,CAAE,OAAQ,CAAC,CAAC,CAE3G;AACAG,IAAI,EAAI,EAAE,CAEV,GAAIA,IAAI,CAAGjB,UAAU,CAAG,EAAE,CAAE,CAC1BL,GAAG,CAACe,YAAY,CAAC,GAAG,CAAE,GAAG,CAAE,GAAG,CAAC,CAC/Bf,GAAG,CAACgB,WAAW,CAAC,CAAC,CAAC,CAClBhB,GAAG,CAACiB,OAAO,CAACC,SAAS,CAAE,QAAQ,CAAC,CAChClB,GAAG,CAACjH,IAAI,CAAC,cAAc,CAAE,EAAE,CAAEuI,IAAI,CAAC,CAClCA,IAAI,EAAI,CAAC,CACTtB,GAAG,CAACiB,OAAO,CAACC,SAAS,CAAE,QAAQ,CAAC,CAChClB,GAAG,CAACjH,IAAI,CAAC,2EAA2E,CAAE,EAAE,CAAEuI,IAAI,CAAC,CAC/FA,IAAI,EAAI,CAAC,CACTtB,GAAG,CAACjH,IAAI,CAAC,4BAA4B,CAAE,EAAE,CAAEuI,IAAI,CAAC,CAChDA,IAAI,EAAI,CAAC,CACTtB,GAAG,CAACjH,IAAI,CAAC,wBAAwB8G,MAAM,CAAC/F,YAAY,GAAK,UAAU,CAAG,oCAAoC,CAAG,oCAAoC,EAAE,CAAE,EAAE,CAAEwH,IAAI,CAAC,CAC9JA,IAAI,EAAI,CAAC,CACTtB,GAAG,CAACjH,IAAI,CAAC,wCAAwC,CAAE,EAAE,CAAEuI,IAAI,CAAC,CAC9D,CAEA;AACAtB,GAAG,CAACiE,YAAY,CAAC,GAAG,CAAE,GAAG,CAAE,GAAG,CAAC,CAC/BjE,GAAG,CAACkE,IAAI,CAAC,EAAE,CAAE7D,UAAU,CAAG,EAAE,CAAEJ,SAAS,CAAG,EAAE,CAAEI,UAAU,CAAG,EAAE,CAAC,CAE9DL,GAAG,CAACe,YAAY,CAAC,GAAG,CAAE,GAAG,CAAE,GAAG,CAAC,CAC/Bf,GAAG,CAACgB,WAAW,CAAC,CAAC,CAAC,CAClBhB,GAAG,CAACiB,OAAO,CAACC,SAAS,CAAE,QAAQ,CAAC,CAChClB,GAAG,CAACjH,IAAI,CAAC,yBAAyBwH,eAAe,EAAE,CAAE,EAAE,CAAEF,UAAU,CAAG,EAAE,CAAC,CACzEL,GAAG,CAACjH,IAAI,CAAC,QAAQf,WAAW,CAAC0J,IAAI,EAAI1J,WAAW,CAAC2J,KAAK,EAAE,CAAE,EAAE,CAAEtB,UAAU,CAAG,EAAE,CAAC,CAC9EL,GAAG,CAACjH,IAAI,CAAC,gDAAgD,CAAEkH,SAAS,CAAG,EAAE,CAAEI,UAAU,CAAG,EAAE,CAAE,CAAEc,KAAK,CAAE,OAAQ,CAAC,CAAC,CAC/GnB,GAAG,CAACjH,IAAI,CAAC,8DAA8D,CAAEkH,SAAS,CAAG,EAAE,CAAEI,UAAU,CAAG,EAAE,CAAE,CAAEc,KAAK,CAAE,OAAQ,CAAC,CAAC,CAE7H;AACA,KAAM,CAAAiD,QAAQ,CAAG,eAAevE,MAAM,CAACiD,eAAe,IAAIjD,MAAM,CAAC7F,cAAc,EAAI,GAAI,CAAAE,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAIF,IAAI,CAACyE,GAAG,CAAC,CAAC,MAAM,CAC7IqB,GAAG,CAACqE,IAAI,CAACD,QAAQ,CAAC,CAElBvL,UAAU,CAAC,CAAEC,IAAI,CAAE,SAAS,CAAEC,IAAI,CAAE,gDAAiD,CAAC,CAAC,CACzF,CAAE,MAAOuL,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CzL,UAAU,CAAC,CAAEC,IAAI,CAAE,OAAO,CAAEC,IAAI,CAAE,oCAAqC,CAAC,CAAC,CAC3E,CACF,CAAC,CAED;AACA,KAAM,CAAAyL,qBAAqB,CAAG,KAAO,CAAAC,CAAC,EAAK,CACzCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,GAAI,CAACpM,eAAe,CAAE,CACpBO,UAAU,CAAC,CAAEC,IAAI,CAAE,OAAO,CAAEC,IAAI,CAAE,gCAAiC,CAAC,CAAC,CACrE,OACF,CAEA,GAAI,CAACiB,cAAc,EAAI,CAACK,aAAa,CAAE,CACrCxB,UAAU,CAAC,CAAEC,IAAI,CAAE,OAAO,CAAEC,IAAI,CAAE,iDAAkD,CAAC,CAAC,CACtF,OACF,CAEAJ,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAI,CACF,KAAM,CAAAqL,OAAO,CAAG7I,eAAe,CAAC,CAAC,CACjC,KAAM,CAAAqH,QAAQ,CAAGzK,SAAS,CAAC0K,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACpF,EAAE,GAAKhF,eAAe,CAAC,CAE9D,KAAM,CAAAqM,eAAe,CAAG,CACtBhC,UAAU,CAAErK,eAAe,CAC3BuK,cAAc,CAAE,CAAAL,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEoC,MAAM,GAAI,EAAE,CACtC9B,eAAe,CAAE,CAAAN,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEqC,OAAO,GAAI,EAAE,CACxC/K,YAAY,CACZmB,QAAQ,CAAEO,UAAU,CAACP,QAAQ,CAAC,EAAI,CAAC,CACnCN,oBAAoB,CACpBqJ,OAAO,CACPhK,cAAc,CACdK,aAAa,CACbmH,kBAAkB,CAAE,GAAI,CAAAtH,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC5CgJ,iBAAiB,CAAE,CAAAX,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEsC,WAAW,GAAI,CAAC,CAC7CC,SAAS,CAAE/M,WAAW,CAACgN,GAAG,CAC1BC,SAAS,CAAE,GAAI,CAAA/K,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CACpC,CAAC,CAED,GAAI3B,kBAAkB,CAAE,CACtB,KAAM,CAAAoE,cAAc,CAAGlG,WAAW,CAACS,QAAQ,CAAE,kBAAkBqB,kBAAkB,CAAC8E,EAAE,EAAE,CAAC,CACvF,KAAM,CAAAxG,MAAM,CAAC8F,cAAc,CAAE,CAC3B,GAAG+H,eAAe,CAClBO,SAAS,CAAE,GAAI,CAAAhL,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACnCgL,SAAS,CAAEnN,WAAW,CAACgN,GACzB,CAAC,CAAC,CAEFnM,UAAU,CAAC,CAAEC,IAAI,CAAE,SAAS,CAAEC,IAAI,CAAE,wCAAyC,CAAC,CAAC,CACjF,CAAC,IAAM,CACL,KAAM,CAAA6D,cAAc,CAAGlG,WAAW,CAACS,QAAQ,CAAE,gBAAgB,CAAC,CAC9D,KAAM,CAAAiO,iBAAiB,CAAGvO,IAAI,CAAC+F,cAAc,CAAC,CAC9C,KAAM,CAAAhG,WAAW,CAACwO,iBAAiB,CAAET,eAAe,CAAC,CAErD,KAAM,CAAAU,UAAU,CAAG3O,WAAW,CAACS,QAAQ,CAAE,aAAamB,eAAe,EAAE,CAAC,CACxE,KAAM,CAAAxB,MAAM,CAACuO,UAAU,CAAE,CACvBC,mBAAmB,CAAE,GAAI,CAAApL,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAC3DmL,8BAA8B,CAAE,CAAA/C,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEsC,WAAW,GAAI,CAC3D,CAAC,CAAC,CAEFjM,UAAU,CAAC,CAAEC,IAAI,CAAE,SAAS,CAAEC,IAAI,CAAE,uCAAwC,CAAC,CAAC,CAChF,CAEAyM,SAAS,CAAC,CAAC,CAEb,CAAE,MAAOlB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,CAAEA,KAAK,CAAC,CACvDzL,UAAU,CAAC,CAAEC,IAAI,CAAE,OAAO,CAAEC,IAAI,CAAE,gCAAiC,CAAC,CAAC,CACvE,CAAC,OAAS,CACRJ,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAA8M,qBAAqB,CAAIlI,WAAW,EAAK,KAAAmI,oBAAA,CAC7CjN,qBAAqB,CAAC8E,WAAW,CAAC,CAClChF,kBAAkB,CAACgF,WAAW,CAACoF,UAAU,CAAC,CAC1C5I,eAAe,CAACwD,WAAW,CAACzD,YAAY,CAAC,CACzCoB,WAAW,CAACqC,WAAW,CAACtC,QAAQ,IAAAyK,oBAAA,CAAInI,WAAW,CAACyG,OAAO,UAAA0B,oBAAA,iBAAnBA,oBAAA,CAAqBzJ,GAAG,GAAI,CAAC,CAAC,CAClErB,uBAAuB,CAAC2C,WAAW,CAAC5C,oBAAoB,CAAC,CACzDV,iBAAiB,CAACsD,WAAW,CAACvD,cAAc,EAAI,GAAI,CAAAE,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CACvFE,gBAAgB,CAACiD,WAAW,CAAClD,aAAa,EAAI,OAAO,CAAC,CACtDhC,sBAAsB,CAAC,IAAI,CAAC,CAC5Bc,cAAc,CAAC,CAAC,CAAC,CACnB,CAAC,CAED,KAAM,CAAAwM,uBAAuB,CAAG,KAAO,CAAAC,aAAa,EAAK,CACvD,GAAIC,MAAM,CAACC,OAAO,CAAC,0DAA0D,CAAC,CAAE,CAC9E,GAAI,CACF,KAAM,CAAAlJ,cAAc,CAAGlG,WAAW,CAACS,QAAQ,CAAE,kBAAkByO,aAAa,EAAE,CAAC,CAC/E,KAAM,CAAA7O,MAAM,CAAC6F,cAAc,CAAC,CAC5B/D,UAAU,CAAC,CAAEC,IAAI,CAAE,SAAS,CAAEC,IAAI,CAAE,yBAA0B,CAAC,CAAC,CAClE,CAAE,MAAOuL,KAAK,CAAE,CACdzL,UAAU,CAAC,CAAEC,IAAI,CAAE,OAAO,CAAEC,IAAI,CAAE,iCAAkC,CAAC,CAAC,CACxE,CACF,CACF,CAAC,CAED,KAAM,CAAAyM,SAAS,CAAGA,CAAA,GAAM,CACtBnN,sBAAsB,CAAC,KAAK,CAAC,CAC7BI,qBAAqB,CAAC,IAAI,CAAC,CAC3BF,kBAAkB,CAAC,EAAE,CAAC,CACtBwB,eAAe,CAAC,UAAU,CAAC,CAC3BmB,WAAW,CAAC,CAAC,CAAC,CACd/B,cAAc,CAAC,CAAC,CAAC,CACjBc,iBAAiB,CAAC,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CACzDE,gBAAgB,CAAC,GAAI,CAAAJ,IAAI,CAAC,CAAC,CAACK,kBAAkB,CAAC,OAAO,CAAE,CAAEC,IAAI,CAAE,SAAS,CAAEC,MAAM,CAAE,SAAS,CAAEC,MAAM,CAAE,KAAM,CAAC,CAAC,CAAC,CAC/GE,uBAAuB,CAAC,EAAE,CAAC,CAE7B,CAAC,CAED,KAAM,CAAAoJ,OAAO,CAAG7I,eAAe,CAAC,CAAC,CAEjC;AACA,KAAM,CAAA4K,eAAe,CAAG7N,kBAAkB,CAAC4F,MAAM,CAAC+B,MAAM,EAAI,CAC1D,GAAI,CAACA,MAAM,CAAE,MAAO,MAAK,CAEzB,KAAM,CAAAgD,cAAc,CAAGhD,MAAM,CAACgD,cAAc,EAAI,EAAE,CAClD,KAAM,CAAAC,eAAe,CAAGjD,MAAM,CAACiD,eAAe,EAAI,EAAE,CACpD,KAAM,CAAAkD,eAAe,CAAG1M,UAAU,CAACuE,WAAW,CAAC,CAAC,CAEhD,KAAM,CAAAoI,aAAa,CAAGD,eAAe,GAAK,EAAE,EAC1CnD,cAAc,CAAChF,WAAW,CAAC,CAAC,CAACG,QAAQ,CAACgI,eAAe,CAAC,EACtDlD,eAAe,CAACjF,WAAW,CAAC,CAAC,CAACG,QAAQ,CAACgI,eAAe,CAAC,CAEzD,KAAM,CAAAE,aAAa,CAAG1M,YAAY,GAAK,OAAO,EAC5CqG,MAAM,CAAC/F,YAAY,GAAKN,YAAY,CAEtC;AACA,GAAI,CAAA2M,gBAAgB,CAAG,IAAI,CAC3B,GAAIzM,cAAc,EAAIE,YAAY,CAAE,CAClC,KAAM,CAAAwM,UAAU,CAAG,GAAI,CAAAlM,IAAI,CAAC2F,MAAM,CAAC7F,cAAc,EAAI6F,MAAM,CAAC2B,kBAAkB,CAAC,CAACrH,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAE3G,GAAIV,cAAc,EAAIE,YAAY,CAAE,CAClCuM,gBAAgB,CAAGC,UAAU,EAAI1M,cAAc,EAAI0M,UAAU,EAAIxM,YAAY,CAC/E,CAAC,IAAM,IAAIF,cAAc,CAAE,CACzByM,gBAAgB,CAAGC,UAAU,EAAI1M,cAAc,CACjD,CAAC,IAAM,IAAIE,YAAY,CAAE,CACvBuM,gBAAgB,CAAGC,UAAU,EAAIxM,YAAY,CAC/C,CACF,CAEA,MAAO,CAAAqM,aAAa,EAAIC,aAAa,EAAIC,gBAAgB,CAC3D,CAAC,CAAC,CAEF;AACA,KAAM,CAAAE,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAAAC,GAAG,CAAG,GAAI,CAAApM,IAAI,CAAC,CAAC,CACtB,KAAM,CAAAqM,SAAS,CAAG,GAAI,CAAArM,IAAI,CAACoM,GAAG,CAACE,WAAW,CAAC,CAAC,CAAEF,GAAG,CAACG,QAAQ,CAAC,CAAC,CAAE,CAAC,CAAC,CAEhE,MAAO,CACLvK,KAAK,CAAEhE,kBAAkB,CAAC8G,MAAM,CAChC0H,OAAO,CAAExO,kBAAkB,CAAC4F,MAAM,CAAC6I,CAAC,EAAI,GAAI,CAAAzM,IAAI,CAACyM,CAAC,CAACnF,kBAAkB,CAAC,EAAI+E,SAAS,CAAC,CAACvH,MAAM,CAC3F4H,UAAU,CAAE1O,kBAAkB,CAACmD,MAAM,CAAC,CAACC,GAAG,CAAEqL,CAAC,QAAAE,UAAA,OAAK,CAAAvL,GAAG,EAAI,EAAAuL,UAAA,CAAAF,CAAC,CAAC3C,OAAO,UAAA6C,UAAA,iBAATA,UAAA,CAAW3K,KAAK,GAAI,CAAC,CAAC,GAAE,CAAC,CAAC,CACnF4K,eAAe,CAAE/K,IAAI,CAACC,KAAK,CAAC9D,kBAAkB,CAACmD,MAAM,CAAC,CAACC,GAAG,CAAEqL,CAAC,QAAAI,WAAA,OAAK,CAAAzL,GAAG,EAAI,EAAAyL,WAAA,CAAAJ,CAAC,CAAC3C,OAAO,UAAA+C,WAAA,iBAATA,WAAA,CAAW7K,KAAK,GAAI,CAAC,CAAC,GAAE,CAAC,CAAC,CAAG,EAAE,CAC1G,CAAC,CACH,CAAC,CAED,KAAM,CAAA8K,KAAK,CAAGX,QAAQ,CAAC,CAAC,CAExB,mBACE3O,KAAA,QAAKuP,KAAK,CAAE,CAAEC,QAAQ,CAAE,QAAQ,CAAEC,MAAM,CAAE,QAAS,CAAE,CAAAC,QAAA,eAEnD1P,KAAA,QAAKuP,KAAK,CAAE,CACVI,UAAU,CAAE,mDAAmD,CAC/DC,YAAY,CAAE,MAAM,CACpBC,OAAO,CAAE,MAAM,CACfC,YAAY,CAAE,MAAM,CACpBC,KAAK,CAAE,OAAO,CACdC,SAAS,CAAE,sCACb,CAAE,CAAAN,QAAA,eACA5P,IAAA,OAAIyP,KAAK,CAAE,CAAEE,MAAM,CAAE,CAAC,CAAElF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,CAAC,8BAE/D,CAAI,CAAC,cACL5P,IAAA,MAAGyP,KAAK,CAAE,CAAEE,MAAM,CAAE,YAAY,CAAES,OAAO,CAAE,GAAG,CAAE3F,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,8DAEpE,CAAG,CAAC,EACD,CAAC,CAGLxO,OAAO,CAACG,IAAI,eACXvB,IAAA,QAAKyP,KAAK,CAAE,CACVM,OAAO,CAAE,MAAM,CACfD,YAAY,CAAE,MAAM,CACpBE,YAAY,CAAE,MAAM,CACpBH,UAAU,CAAEzO,OAAO,CAACE,IAAI,GAAK,SAAS,CAAG,SAAS,CAAG,SAAS,CAC9D+O,MAAM,CAAE,aAAajP,OAAO,CAACE,IAAI,GAAK,SAAS,CAAG,SAAS,CAAG,SAAS,EAAE,CACzE2O,KAAK,CAAE7O,OAAO,CAACE,IAAI,GAAK,SAAS,CAAG,SAAS,CAAG,SAAS,CACzD6O,UAAU,CAAE,KAAK,CACjBG,SAAS,CAAE,mBACb,CAAE,CAAAV,QAAA,CACCxO,OAAO,CAACG,IAAI,CACV,CACN,cACDvB,IAAA,CAACN,qBAAqB,EACpB6Q,IAAI,CAAE/O,yBAA0B,CAChCgP,OAAO,CAAEA,CAAA,GAAM/O,4BAA4B,CAAC,KAAK,CAAE,CACnDhB,QAAQ,CAAEA,QAAS,CACnBD,WAAW,CAAEA,WAAY,CAC1B,CAAC,CAGD,CAACI,mBAAmB,eACnBV,KAAA,CAAAE,SAAA,EAAAwP,QAAA,eACE1P,KAAA,QAAKuP,KAAK,CAAE,CACVgB,OAAO,CAAE,MAAM,CACfC,mBAAmB,CAAE,2BAA2BjQ,QAAQ,CAAG,OAAO,CAAG,OAAO,SAAS,CACrFkQ,GAAG,CAAE,MAAM,CACXX,YAAY,CAAE,MAChB,CAAE,CAAAJ,QAAA,eACA5P,IAAA,QAAKyP,KAAK,CAAE,CACVI,UAAU,CAAE,OAAO,CACnBE,OAAO,CAAE,MAAM,CACfD,YAAY,CAAE,MAAM,CACpBI,SAAS,CAAE,6BAA6B,CACxCU,SAAS,CAAE,mBAAmB,CAC9BC,UAAU,CAAE,qBAAqB,CACjCC,MAAM,CAAE,SACV,CAAE,CACAC,YAAY,CAAG9D,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACwB,SAAS,CAAG,kBAAmB,CAC1EC,YAAY,CAAGjE,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACwB,SAAS,CAAG,eAAgB,CAAArB,QAAA,cACvE1P,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEU,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAxB,QAAA,eACrF1P,KAAA,QAAA0P,QAAA,eACE5P,IAAA,QAAKyP,KAAK,CAAE,CAAEQ,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,CAAC,oBAAkB,CAAK,CAAC,cAC/F5P,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,MAAM,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAEJ,KAAK,CAAC9K,KAAK,CAAM,CAAC,EACxF,CAAC,cACN1E,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAE2F,OAAO,CAAE,GAAI,CAAE,CAAAR,QAAA,CAAC,cAAE,CAAK,CAAC,EACrD,CAAC,CACH,CAAC,cAEN5P,IAAA,QAAKyP,KAAK,CAAE,CACVI,UAAU,CAAE,OAAO,CACnBE,OAAO,CAAE,MAAM,CACfD,YAAY,CAAE,MAAM,CACpBI,SAAS,CAAE,6BAA6B,CACxCU,SAAS,CAAE,mBAAmB,CAC9BC,UAAU,CAAE,qBAAqB,CACjCC,MAAM,CAAE,SACV,CAAE,CACAC,YAAY,CAAG9D,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACwB,SAAS,CAAG,kBAAmB,CAC1EC,YAAY,CAAGjE,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACwB,SAAS,CAAG,eAAgB,CAAArB,QAAA,cACvE1P,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEU,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAxB,QAAA,eACrF1P,KAAA,QAAA0P,QAAA,eACE5P,IAAA,QAAKyP,KAAK,CAAE,CAAEQ,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,CAAC,UAAQ,CAAK,CAAC,cACrF5P,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,MAAM,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAEJ,KAAK,CAACN,OAAO,CAAM,CAAC,EAC1F,CAAC,cACNlP,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAE2F,OAAO,CAAE,GAAI,CAAE,CAAAR,QAAA,CAAC,cAAE,CAAK,CAAC,EACrD,CAAC,CACH,CAAC,cAEN5P,IAAA,QAAKyP,KAAK,CAAE,CACVI,UAAU,CAAE,OAAO,CACnBE,OAAO,CAAE,MAAM,CACfD,YAAY,CAAE,MAAM,CACpBI,SAAS,CAAE,6BAA6B,CACxCU,SAAS,CAAE,mBAAmB,CAC9BC,UAAU,CAAE,qBAAqB,CACjCC,MAAM,CAAE,SACV,CAAE,CACAC,YAAY,CAAG9D,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACwB,SAAS,CAAG,kBAAmB,CAC1EC,YAAY,CAAGjE,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACwB,SAAS,CAAG,eAAgB,CAAArB,QAAA,cACvE1P,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEU,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAxB,QAAA,eACrF1P,KAAA,QAAA0P,QAAA,eACE5P,IAAA,QAAKyP,KAAK,CAAE,CAAEQ,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,CAAC,oBAAe,CAAK,CAAC,cAC5F1P,KAAA,QAAKuP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,MAAM,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,EAAC,GACrE,CAACJ,KAAK,CAACJ,UAAU,CAACxD,cAAc,CAAC,OAAO,CAAC,EACvC,CAAC,EACH,CAAC,cACN5L,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAE2F,OAAO,CAAE,GAAI,CAAE,CAAAR,QAAA,CAAC,cAAE,CAAK,CAAC,EACrD,CAAC,CACH,CAAC,cAEN5P,IAAA,QAAKyP,KAAK,CAAE,CACVI,UAAU,CAAE,OAAO,CACnBE,OAAO,CAAE,MAAM,CACfD,YAAY,CAAE,MAAM,CACpBI,SAAS,CAAE,6BAA6B,CACxCU,SAAS,CAAE,mBAAmB,CAC9BC,UAAU,CAAE,qBAAqB,CACjCC,MAAM,CAAE,SACV,CAAE,CACAC,YAAY,CAAG9D,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACwB,SAAS,CAAG,kBAAmB,CAC1EC,YAAY,CAAGjE,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACwB,SAAS,CAAG,eAAgB,CAAArB,QAAA,cACvE1P,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEU,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAxB,QAAA,eACrF1P,KAAA,QAAA0P,QAAA,eACE5P,IAAA,QAAKyP,KAAK,CAAE,CAAEQ,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,CAAC,kBAAgB,CAAK,CAAC,cAC7F1P,KAAA,QAAKuP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,MAAM,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,EAAC,GACrE,CAACJ,KAAK,CAACF,eAAe,CAAC1D,cAAc,CAAC,OAAO,CAAC,EAC5C,CAAC,EACH,CAAC,cACN5L,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAE2F,OAAO,CAAE,GAAI,CAAE,CAAAR,QAAA,CAAC,cAAE,CAAK,CAAC,EACrD,CAAC,CACH,CAAC,EACH,CAAC,cAGN1P,KAAA,QAAKuP,KAAK,CAAE,CACVI,UAAU,CAAE,OAAO,CACnBE,OAAO,CAAE,MAAM,CACfD,YAAY,CAAE,MAAM,CACpBE,YAAY,CAAE,MAAM,CACpBE,SAAS,CAAE,6BACb,CAAE,CAAAN,QAAA,eAEA1P,KAAA,QAAKuP,KAAK,CAAE,CACVO,YAAY,CAAE,MAAM,CACpBS,OAAO,CAAE,MAAM,CACfU,cAAc,CAAE,eAAe,CAC/BC,UAAU,CAAE,QAAQ,CACpBC,QAAQ,CAAE,MAAM,CAChBV,GAAG,CAAE,MACP,CAAE,CAAAf,QAAA,eACA5P,IAAA,OAAIyP,KAAK,CAAE,CACTE,MAAM,CAAE,CAAC,CACTM,KAAK,CAAE,SAAS,CAChBxF,QAAQ,CAAEhK,QAAQ,CAAG,MAAM,CAAG,MAAM,CACpC0P,UAAU,CAAE,KACd,CAAE,CAAAP,QAAA,CAAC,yDAEH,CAAI,CAAC,cACL5P,IAAA,WACEsR,OAAO,CAAEA,CAAA,GAAM7P,4BAA4B,CAAC,IAAI,CAAE,CAClDgO,KAAK,CAAE,CACLM,OAAO,CAAE,WAAW,CACpBF,UAAU,CAAE,mDAAmD,CAC/DI,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChBqG,MAAM,CAAE,SAAS,CACjBZ,SAAS,CAAE,2BAA2B,CACtCO,OAAO,CAAE,MAAM,CACfW,UAAU,CAAE,QAAQ,CACpBT,GAAG,CAAE,KACP,CAAE,CAAAf,QAAA,CACH,oCAED,CAAQ,CAAC,cACT1P,KAAA,WACEoR,OAAO,CAAEA,CAAA,GAAM,CACbzQ,sBAAsB,CAAC,IAAI,CAAC,CAC5Bc,cAAc,CAAC,CAAC,CAAC,CACnB,CAAE,CACF8N,KAAK,CAAE,CACLM,OAAO,CAAE,WAAW,CACpBF,UAAU,CAAE,mDAAmD,CAC/DI,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdP,YAAY,CAAE,MAAM,CACpBrF,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,KAAK,CACjBW,MAAM,CAAE,SAAS,CACjBL,OAAO,CAAE,MAAM,CACfW,UAAU,CAAE,QAAQ,CACpBT,GAAG,CAAE,KAAK,CACVT,SAAS,CAAE,mCAAmC,CAC9CW,UAAU,CAAE,eACd,CAAE,CACFE,YAAY,CAAG9D,CAAC,EAAK,CACnBA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACwB,SAAS,CAAG,kBAAkB,CACpDhE,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACS,SAAS,CAAG,mCAAmC,CACvE,CAAE,CACFgB,YAAY,CAAGjE,CAAC,EAAK,CACnBA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACwB,SAAS,CAAG,eAAe,CACjDhE,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACS,SAAS,CAAG,mCAAmC,CACvE,CAAE,CAAAN,QAAA,eACF5P,IAAA,SAAMyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,QAAC,CAAM,CAAC,oBAE7C,EAAQ,CAAC,cAET1P,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,MAAM,CAAES,UAAU,CAAE,QAAS,CAAE,CAAAxB,QAAA,eACjE5P,IAAA,UACEsB,IAAI,CAAC,MAAM,CACXiQ,WAAW,CAAC,oCAAuB,CACnCxK,KAAK,CAAEjF,UAAW,CAClB0P,QAAQ,CAAGvE,CAAC,EAAKlL,aAAa,CAACkL,CAAC,CAACwE,MAAM,CAAC1K,KAAK,CAAE,CAC/C0I,KAAK,CAAE,CACLM,OAAO,CAAE,WAAW,CACpBM,MAAM,CAAE,mBAAmB,CAC3BP,YAAY,CAAE,MAAM,CACpBrF,QAAQ,CAAE,MAAM,CAChB7B,KAAK,CAAE,OAAO,CACdiI,UAAU,CAAE,wBAAwB,CACpCa,OAAO,CAAE,MACX,CAAE,CACFC,OAAO,CAAG1E,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACmC,WAAW,CAAG,SAAU,CAC9DC,MAAM,CAAG5E,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACmC,WAAW,CAAG,SAAU,CAC9D,CAAC,cAEF1R,KAAA,WACE6G,KAAK,CAAE/E,YAAa,CACpBwP,QAAQ,CAAGvE,CAAC,EAAKhL,eAAe,CAACgL,CAAC,CAACwE,MAAM,CAAC1K,KAAK,CAAE,CACjD0I,KAAK,CAAE,CACLM,OAAO,CAAE,WAAW,CACpBM,MAAM,CAAE,mBAAmB,CAC3BP,YAAY,CAAE,MAAM,CACpBrF,QAAQ,CAAE,MAAM,CAChBqG,MAAM,CAAE,SAAS,CACjBD,UAAU,CAAE,wBAAwB,CACpCa,OAAO,CAAE,MACX,CAAE,CACFC,OAAO,CAAG1E,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACmC,WAAW,CAAG,SAAU,CAC9DC,MAAM,CAAG5E,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACmC,WAAW,CAAG,SAAU,CAAAhC,QAAA,eAC7D5P,IAAA,WAAQ+G,KAAK,CAAC,OAAO,CAAA6I,QAAA,CAAC,OAAK,CAAQ,CAAC,cACpC5P,IAAA,WAAQ+G,KAAK,CAAC,UAAU,CAAA6I,QAAA,CAAC,YAAU,CAAQ,CAAC,cAC5C5P,IAAA,WAAQ+G,KAAK,CAAC,aAAa,CAAA6I,QAAA,CAAC,cAAY,CAAQ,CAAC,EAC3C,CAAC,EACN,CAAC,EACH,CAAC,cAGN1P,KAAA,QAAKuP,KAAK,CAAE,CACVgB,OAAO,CAAE,MAAM,CACfE,GAAG,CAAE,MAAM,CACXS,UAAU,CAAE,QAAQ,CACpBC,QAAQ,CAAE,MACZ,CAAE,CAAAzB,QAAA,eACA5P,IAAA,SAAMyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAS,CAAEE,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,CAAC,oBAExE,CAAM,CAAC,cACP5P,IAAA,UACEsB,IAAI,CAAC,MAAM,CACXyF,KAAK,CAAE7E,cAAe,CACtBsP,QAAQ,CAAGvE,CAAC,EAAK9K,iBAAiB,CAAC8K,CAAC,CAACwE,MAAM,CAAC1K,KAAK,CAAE,CACnDwK,WAAW,CAAC,OAAO,CACnB9B,KAAK,CAAE,CACLM,OAAO,CAAE,UAAU,CACnBM,MAAM,CAAE,mBAAmB,CAC3BP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChBiH,OAAO,CAAE,MAAM,CACfb,UAAU,CAAE,wBACd,CAAE,CACFc,OAAO,CAAG1E,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACmC,WAAW,CAAG,SAAU,CAC9DC,MAAM,CAAG5E,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACmC,WAAW,CAAG,SAAU,CAC9D,CAAC,cACF5R,IAAA,SAAMyP,KAAK,CAAE,CAAEQ,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,OAAK,CAAM,CAAC,cAC/C5P,IAAA,UACEsB,IAAI,CAAC,MAAM,CACXyF,KAAK,CAAE3E,YAAa,CACpBoP,QAAQ,CAAGvE,CAAC,EAAK5K,eAAe,CAAC4K,CAAC,CAACwE,MAAM,CAAC1K,KAAK,CAAE,CACjDwK,WAAW,CAAC,OAAO,CACnB9B,KAAK,CAAE,CACLM,OAAO,CAAE,UAAU,CACnBM,MAAM,CAAE,mBAAmB,CAC3BP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChBiH,OAAO,CAAE,MAAM,CACfb,UAAU,CAAE,wBACd,CAAE,CACFc,OAAO,CAAG1E,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACmC,WAAW,CAAG,SAAU,CAC9DC,MAAM,CAAG5E,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACmC,WAAW,CAAG,SAAU,CAC9D,CAAC,CACD,CAAC1P,cAAc,EAAIE,YAAY,gBAC9BpC,IAAA,WACEsR,OAAO,CAAEA,CAAA,GAAM,CACbnP,iBAAiB,CAAC,EAAE,CAAC,CACrBE,eAAe,CAAC,EAAE,CAAC,CACrB,CAAE,CACFoN,KAAK,CAAE,CACLM,OAAO,CAAE,UAAU,CACnBF,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChBqG,MAAM,CAAE,SAAS,CACjBX,UAAU,CAAE,KACd,CAAE,CAAAP,QAAA,CAAC,gBAEL,CAAQ,CACT,EACE,CAAC,EACH,CAAC,EACN,CACH,CAGAhP,mBAAmB,eAClBV,KAAA,QAAKuP,KAAK,CAAE,CACVI,UAAU,CAAE,OAAO,CACnBC,YAAY,CAAE,MAAM,CACpBI,SAAS,CAAE,6BAA6B,CACxC4B,QAAQ,CAAE,QACZ,CAAE,CAAAlC,QAAA,eAEA1P,KAAA,QAAKuP,KAAK,CAAE,CACVI,UAAU,CAAE,mDAAmD,CAC/DE,OAAO,CAAE,MAAM,CACfgC,YAAY,CAAE,mBAChB,CAAE,CAAAnC,QAAA,eACA1P,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEU,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,QAAQ,CAAEpB,YAAY,CAAE,MAAO,CAAE,CAAAJ,QAAA,eAC3G5P,IAAA,OAAIyP,KAAK,CAAE,CAAEE,MAAM,CAAE,CAAC,CAAElF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAK,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAC7E5O,kBAAkB,CAAG,uBAAuB,CAAG,qBAAqB,CACnE,CAAC,cACLhB,IAAA,WACEsR,OAAO,CAAEtD,SAAU,CACnByB,KAAK,CAAE,CACLM,OAAO,CAAE,UAAU,CACnBF,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChBqG,MAAM,CAAE,SACV,CAAE,CAAAlB,QAAA,CAAC,iBAEL,CAAQ,CAAC,EACN,CAAC,cAGN5P,IAAA,QAAKyP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEU,cAAc,CAAE,eAAe,CAAEzB,QAAQ,CAAE,OAAO,CAAEC,MAAM,CAAE,QAAS,CAAE,CAAAC,QAAA,CACnG,CACC,CAAEoC,GAAG,CAAE,CAAC,CAAEC,KAAK,CAAE,UAAU,CAAEC,IAAI,CAAE,IAAK,CAAC,CACzC,CAAEF,GAAG,CAAE,CAAC,CAAEC,KAAK,CAAE,WAAW,CAAEC,IAAI,CAAE,IAAK,CAAC,CAC1C,CAAEF,GAAG,CAAE,CAAC,CAAEC,KAAK,CAAE,SAAS,CAAEC,IAAI,CAAE,IAAK,CAAC,CACzC,CAACtM,GAAG,CAAC,CAACuM,IAAI,CAAEhK,KAAK,gBAChBjI,KAAA,QAAoBuP,KAAK,CAAE,CAAE2C,IAAI,CAAE,CAAC,CAAE3B,OAAO,CAAE,MAAM,CAAEW,UAAU,CAAE,QAAS,CAAE,CAAAxB,QAAA,eAC5E1P,KAAA,QAAKuP,KAAK,CAAE,CACVgB,OAAO,CAAE,MAAM,CACf4B,aAAa,CAAE,QAAQ,CACvBjB,UAAU,CAAE,QAAQ,CACpBgB,IAAI,CAAE,CACR,CAAE,CAAAxC,QAAA,eACA5P,IAAA,QAAKyP,KAAK,CAAE,CACV7G,KAAK,CAAE,MAAM,CACbE,MAAM,CAAE,MAAM,CACdgH,YAAY,CAAE,KAAK,CACnBD,UAAU,CAAEnO,WAAW,EAAIyQ,IAAI,CAACH,GAAG,CACjC,mDAAmD,CACnD,SAAS,CACX/B,KAAK,CAAEvO,WAAW,EAAIyQ,IAAI,CAACH,GAAG,CAAG,OAAO,CAAG,SAAS,CACpDvB,OAAO,CAAE,MAAM,CACfW,UAAU,CAAE,QAAQ,CACpBD,cAAc,CAAE,QAAQ,CACxB1G,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,MAAM,CAClBD,SAAS,CAAExO,WAAW,GAAKyQ,IAAI,CAACH,GAAG,CAAG,oCAAoC,CAAG,MAAM,CACnFnB,UAAU,CAAE,eAAe,CAC3BC,MAAM,CAAEpP,WAAW,EAAIyQ,IAAI,CAACH,GAAG,CAAG,SAAS,CAAG,SAChD,CAAE,CACAV,OAAO,CAAEA,CAAA,GAAM5P,WAAW,EAAIyQ,IAAI,CAACH,GAAG,EAAIrQ,cAAc,CAACwQ,IAAI,CAACH,GAAG,CAAE,CAAApC,QAAA,CAClEuC,IAAI,CAACD,IAAI,CACP,CAAC,cACNlS,IAAA,SAAMyP,KAAK,CAAE,CACX6C,SAAS,CAAE,KAAK,CAChB7H,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,KAAK,CACjBF,KAAK,CAAEvO,WAAW,EAAIyQ,IAAI,CAACH,GAAG,CAAG,SAAS,CAAG,SAC/C,CAAE,CAAApC,QAAA,CACCuC,IAAI,CAACF,KAAK,CACP,CAAC,EACJ,CAAC,CACL9J,KAAK,CAAG,CAAC,eACRnI,IAAA,QAAKyP,KAAK,CAAE,CACV3G,MAAM,CAAE,KAAK,CACb+G,UAAU,CAAEnO,WAAW,CAAGyQ,IAAI,CAACH,GAAG,CAAG,SAAS,CAAG,SAAS,CAC1DI,IAAI,CAAE,CAAC,CACPzC,MAAM,CAAE,QAAQ,CAChBkB,UAAU,CAAE,sBACd,CAAE,CAAE,CACL,GA5COsB,IAAI,CAACH,GA6CV,CACN,CAAC,CACC,CAAC,EACH,CAAC,cAEN9R,KAAA,SAAMqS,QAAQ,CAAEvF,qBAAsB,CAACyC,KAAK,CAAE,CAAEM,OAAO,CAAE,MAAO,CAAE,CAAAH,QAAA,EAE/DlO,WAAW,GAAK,CAAC,eAChBxB,KAAA,QAAKuP,KAAK,CAAE,CAAEa,SAAS,CAAE,kBAAmB,CAAE,CAAAV,QAAA,eAE5C1P,KAAA,QAAKuP,KAAK,CAAE,CACVO,YAAY,CAAE,MAAM,CACpBD,OAAO,CAAE,MAAM,CACfF,UAAU,CAAE,SAAS,CACrBC,YAAY,CAAE,MAAM,CACpBO,MAAM,CAAE,mBACV,CAAE,CAAAT,QAAA,eACA5P,IAAA,OAAIyP,KAAK,CAAE,CAAE6C,SAAS,CAAE,CAAC,CAAEtC,YAAY,CAAE,MAAM,CAAEC,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,2DAEvF,CAAI,CAAC,cACL1P,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEC,mBAAmB,CAAE,SAAS,CAAEC,GAAG,CAAE,MAAO,CAAE,CAAAf,QAAA,eAC3E1P,KAAA,QAAA0P,QAAA,eACE5P,IAAA,UAAOyP,KAAK,CAAE,CAAEgB,OAAO,CAAE,OAAO,CAAET,YAAY,CAAE,KAAK,CAAEvF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAK,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,oBAEhH,CAAO,CAAC,cACR5P,IAAA,UACEsB,IAAI,CAAC,MAAM,CACXyF,KAAK,CAAEvE,cAAe,CACtBgP,QAAQ,CAAGvE,CAAC,EAAKxK,iBAAiB,CAACwK,CAAC,CAACwE,MAAM,CAAC1K,KAAK,CAAE,CACnDyL,QAAQ,MACR/C,KAAK,CAAE,CACL7G,KAAK,CAAE,MAAM,CACbmH,OAAO,CAAE,MAAM,CACfM,MAAM,CAAE,mBAAmB,CAC3BP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChBiH,OAAO,CAAE,MACX,CAAE,CACH,CAAC,EACC,CAAC,cACNxR,KAAA,QAAA0P,QAAA,eACE5P,IAAA,UAAOyP,KAAK,CAAE,CAAEgB,OAAO,CAAE,OAAO,CAAET,YAAY,CAAE,KAAK,CAAEvF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAK,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,mBAEhH,CAAO,CAAC,cACR5P,IAAA,UACEsB,IAAI,CAAC,MAAM,CACXyF,KAAK,CAAElE,aAAc,CACrB2O,QAAQ,CAAGvE,CAAC,EAAKnK,gBAAgB,CAACmK,CAAC,CAACwE,MAAM,CAAC1K,KAAK,CAAE,CAClDyL,QAAQ,MACR/C,KAAK,CAAE,CACL7G,KAAK,CAAE,MAAM,CACbmH,OAAO,CAAE,MAAM,CACfM,MAAM,CAAE,mBAAmB,CAC3BP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChBiH,OAAO,CAAE,MACX,CAAE,CACH,CAAC,EACC,CAAC,EACH,CAAC,EACH,CAAC,cAEN1R,IAAA,OAAIyP,KAAK,CAAE,CAAEO,YAAY,CAAE,MAAM,CAAEC,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,2BAEzE,CAAI,CAAC,cAEL5P,IAAA,QAAKyP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEC,mBAAmB,CAAE,sCAAsC,CAAEC,GAAG,CAAE,MAAO,CAAE,CAAAf,QAAA,CACvGrP,SAAS,CAACqF,GAAG,CAACsF,CAAC,OAAAuH,cAAA,oBACdzS,IAAA,QAEEsR,OAAO,CAAEA,CAAA,GAAMvQ,kBAAkB,CAACmK,CAAC,CAACpF,EAAE,CAAE,CACxC2J,KAAK,CAAE,CACLM,OAAO,CAAE,MAAM,CACfM,MAAM,CAAE,aAAavP,eAAe,GAAKoK,CAAC,CAACpF,EAAE,CAAG,SAAS,CAAG,SAAS,EAAE,CACvEgK,YAAY,CAAE,MAAM,CACpBgB,MAAM,CAAE,SAAS,CACjBjB,UAAU,CAAE/O,eAAe,GAAKoK,CAAC,CAACpF,EAAE,CAAG,SAAS,CAAG,OAAO,CAC1D+K,UAAU,CAAE,eACd,CAAE,CACFE,YAAY,CAAG9D,CAAC,EAAK,CACnB,GAAInM,eAAe,GAAKoK,CAAC,CAACpF,EAAE,CAAE,CAC5BmH,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACmC,WAAW,CAAG,SAAS,CAC7C3E,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACI,UAAU,CAAG,SAAS,CAC9C,CACF,CAAE,CACFqB,YAAY,CAAGjE,CAAC,EAAK,CACnB,GAAInM,eAAe,GAAKoK,CAAC,CAACpF,EAAE,CAAE,CAC5BmH,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACmC,WAAW,CAAG,SAAS,CAC7C3E,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACI,UAAU,CAAG,OAAO,CAC5C,CACF,CAAE,CAAAD,QAAA,cACF1P,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEU,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,QAAS,CAAE,CAAAxB,QAAA,eACrF1P,KAAA,QAAA0P,QAAA,eACE5P,IAAA,OAAIyP,KAAK,CAAE,CAAEE,MAAM,CAAE,WAAW,CAAElF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CACpE1E,CAAC,CAACkC,MAAM,CACP,CAAC,cACLlN,KAAA,MAAGuP,KAAK,CAAE,CAAEE,MAAM,CAAE,GAAG,CAAElF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,EAC3D1E,CAAC,CAACK,KAAK,CAAC,GAAC,CAACL,CAAC,CAACM,MAAM,CAAC,mBAAY,CAACN,CAAC,CAACmC,OAAO,EACzC,CAAC,cACJnN,KAAA,MAAGuP,KAAK,CAAE,CAAEE,MAAM,CAAE,WAAW,CAAElF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,EAAC,eACxD,CAAC,EAAA6C,cAAA,CAAAvH,CAAC,CAACoC,WAAW,UAAAmF,cAAA,iBAAbA,cAAA,CAAe7G,cAAc,CAAC,OAAO,CAAC,GAAI,CAAC,CAAC,KAC5D,EAAG,CAAC,EACD,CAAC,CACL9K,eAAe,GAAKoK,CAAC,CAACpF,EAAE,eACvB9F,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,QAAC,CAAK,CAC3D,EACE,CAAC,EArCD1E,CAAC,CAACpF,EAsCJ,CAAC,EACP,CAAC,CACC,CAAC,cAEN5F,KAAA,QAAKuP,KAAK,CAAE,CAAE6C,SAAS,CAAE,MAAO,CAAE,CAAA1C,QAAA,eAChC5P,IAAA,OAAIyP,KAAK,CAAE,CAAEO,YAAY,CAAE,MAAM,CAAEC,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,8BAEzE,CAAI,CAAC,cAEL1P,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,MAAO,CAAE,CAAAf,QAAA,eAC3C1P,KAAA,UAAOuP,KAAK,CAAE,CACZ2C,IAAI,CAAE,CAAC,CACPrC,OAAO,CAAE,MAAM,CACfM,MAAM,CAAE,aAAa/N,YAAY,GAAK,UAAU,CAAG,SAAS,CAAG,SAAS,EAAE,CAC1EwN,YAAY,CAAE,MAAM,CACpBgB,MAAM,CAAE,SAAS,CACjBjB,UAAU,CAAEvN,YAAY,GAAK,UAAU,CAAG,SAAS,CAAG,OAAO,CAC7DuO,UAAU,CAAE,eAAe,CAC3B6B,SAAS,CAAE,QACb,CAAE,CAAA9C,QAAA,eACA5P,IAAA,UACEsB,IAAI,CAAC,OAAO,CACZ4I,IAAI,CAAC,cAAc,CACnBnD,KAAK,CAAC,UAAU,CAChB4L,OAAO,CAAErQ,YAAY,GAAK,UAAW,CACrCkP,QAAQ,CAAGvE,CAAC,EAAK1K,eAAe,CAAC0K,CAAC,CAACwE,MAAM,CAAC1K,KAAK,CAAE,CACjD0I,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAO,CAAE,CAC5B,CAAC,cACFzQ,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAEuF,YAAY,CAAE,MAAO,CAAE,CAAAJ,QAAA,CAAC,QAAC,CAAK,CAAC,cAC/D5P,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAK,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,sBAEvE,CAAK,CAAC,cACN5P,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAS,CAAEqC,SAAS,CAAE,KAAM,CAAE,CAAA1C,QAAA,CAAC,oCAEtE,CAAK,CAAC,EACD,CAAC,cAER1P,KAAA,UAAOuP,KAAK,CAAE,CACZ2C,IAAI,CAAE,CAAC,CACPrC,OAAO,CAAE,MAAM,CACfM,MAAM,CAAE,aAAa/N,YAAY,GAAK,aAAa,CAAG,SAAS,CAAG,SAAS,EAAE,CAC7EwN,YAAY,CAAE,MAAM,CACpBgB,MAAM,CAAE,SAAS,CACjBjB,UAAU,CAAEvN,YAAY,GAAK,aAAa,CAAG,SAAS,CAAG,OAAO,CAChEuO,UAAU,CAAE,eAAe,CAC3B6B,SAAS,CAAE,QACb,CAAE,CAAA9C,QAAA,eACA5P,IAAA,UACEsB,IAAI,CAAC,OAAO,CACZ4I,IAAI,CAAC,cAAc,CACnBnD,KAAK,CAAC,aAAa,CACnB4L,OAAO,CAAErQ,YAAY,GAAK,aAAc,CACxCkP,QAAQ,CAAGvE,CAAC,EAAK1K,eAAe,CAAC0K,CAAC,CAACwE,MAAM,CAAC1K,KAAK,CAAE,CACjD0I,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAO,CAAE,CAC5B,CAAC,cACFzQ,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAEuF,YAAY,CAAE,MAAO,CAAE,CAAAJ,QAAA,CAAC,cAAE,CAAK,CAAC,cAChE5P,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAK,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,wBAEvE,CAAK,CAAC,cACN5P,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAS,CAAEqC,SAAS,CAAE,KAAM,CAAE,CAAA1C,QAAA,CAAC,mCAEtE,CAAK,CAAC,EACD,CAAC,EACL,CAAC,EACH,CAAC,cAEN5P,IAAA,QAAKyP,KAAK,CAAE,CAAE6C,SAAS,CAAE,MAAM,CAAE7B,OAAO,CAAE,MAAM,CAAEU,cAAc,CAAE,UAAW,CAAE,CAAAvB,QAAA,cAC7E1P,KAAA,WACEoB,IAAI,CAAC,QAAQ,CACbgQ,OAAO,CAAEA,CAAA,GAAM3P,cAAc,CAAC,CAAC,CAAE,CACjCiR,QAAQ,CAAE,CAAC9R,eAAgB,CAC3B2O,KAAK,CAAE,CACLM,OAAO,CAAE,WAAW,CACpBF,UAAU,CAAE/O,eAAe,CACzB,mDAAmD,CACnD,SAAS,CACXmP,KAAK,CAAEnP,eAAe,CAAG,OAAO,CAAG,SAAS,CAC5CuP,MAAM,CAAE,MAAM,CACdP,YAAY,CAAE,MAAM,CACpBrF,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,KAAK,CACjBW,MAAM,CAAEhQ,eAAe,CAAG,SAAS,CAAG,aAAa,CACnD2P,OAAO,CAAE,MAAM,CACfW,UAAU,CAAE,QAAQ,CACpBT,GAAG,CAAE,KACP,CAAE,CAAAf,QAAA,EAAC,WAEH,cAAA5P,IAAA,SAAMyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,QAAC,CAAM,CAAC,EACrC,CAAC,CACN,CAAC,EACH,CACN,CAGAlO,WAAW,GAAK,CAAC,eAChBxB,KAAA,QAAKuP,KAAK,CAAE,CAAEa,SAAS,CAAE,kBAAmB,CAAE,CAAAV,QAAA,eAC5C5P,IAAA,OAAIyP,KAAK,CAAE,CAAEO,YAAY,CAAE,MAAM,CAAEC,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,uCAEzE,CAAI,CAAC,cAGL1P,KAAA,QAAKuP,KAAK,CAAE,CACVO,YAAY,CAAE,MAAM,CACpBD,OAAO,CAAE,MAAM,CACfF,UAAU,CAAE,SAAS,CACrBC,YAAY,CAAE,MAAM,CACpBO,MAAM,CAAE,mBACV,CAAE,CAAAT,QAAA,eACA5P,IAAA,OAAIyP,KAAK,CAAE,CAAEE,MAAM,CAAE,YAAY,CAAEM,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,oDAEzE,CAAI,CAAC,cAGL5P,IAAA,QAAKyP,KAAK,CAAE,CAAEO,YAAY,CAAE,MAAO,CAAE,CAAAJ,QAAA,cACnC5P,IAAA,UACEsB,IAAI,CAAC,MAAM,CACXiQ,WAAW,CAAC,4DAA+C,CAC3DxK,KAAK,CAAExD,iBAAkB,CACzBiO,QAAQ,CAAGvE,CAAC,EAAKzJ,oBAAoB,CAACyJ,CAAC,CAACwE,MAAM,CAAC1K,KAAK,CAAE,CACtD0I,KAAK,CAAE,CACL7G,KAAK,CAAE,MAAM,CACbmH,OAAO,CAAE,MAAM,CACfM,MAAM,CAAE,mBAAmB,CAC3BP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MACZ,CAAE,CACH,CAAC,CACC,CAAC,cAGNvK,KAAA,QAAKuP,KAAK,CAAE,CACVoD,SAAS,CAAE,OAAO,CAClBC,SAAS,CAAE,MAAM,CACjBzC,MAAM,CAAE,mBAAmB,CAC3BP,YAAY,CAAE,KAAK,CACnBD,UAAU,CAAE,OACd,CAAE,CAAAD,QAAA,EACCzJ,0BAA0B,CAAC,CAAC,CAACP,GAAG,CAACf,QAAQ,EAAI,KAAAkO,kBAAA,CAAAC,oBAAA,CAC5C,KAAM,CAAAC,UAAU,CAAG9P,oBAAoB,CAAC+P,IAAI,CAACnP,CAAC,EAAIA,CAAC,CAACqD,UAAU,GAAKvC,QAAQ,CAACiB,EAAE,CAAC,CAC/E,KAAM,CAAA0G,OAAO,CAAG5H,+BAA+B,CAACC,QAAQ,CAAC,CAEzD,mBACE3E,KAAA,QAAuBuP,KAAK,CAAE,CAC5BM,OAAO,CAAE,MAAM,CACfgC,YAAY,CAAE,mBAAmB,CACjCtB,OAAO,CAAE,MAAM,CACfU,cAAc,CAAE,eAAe,CAC/BC,UAAU,CAAE,QAAQ,CACpBvB,UAAU,CAAEoD,UAAU,CAAG,SAAS,CAAG,OAAO,CAC5CpC,UAAU,CAAE,iBACd,CAAE,CACAE,YAAY,CAAG9D,CAAC,EAAK,CAACgG,UAAU,GAAKhG,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACI,UAAU,CAAG,SAAS,CAAE,CACnFqB,YAAY,CAAGjE,CAAC,EAAK,CAACgG,UAAU,GAAKhG,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACI,UAAU,CAAG,OAAO,CAAE,CAAAD,QAAA,eACjF1P,KAAA,QAAKuP,KAAK,CAAE,CAAE2C,IAAI,CAAE,CAAE,CAAE,CAAAxC,QAAA,eACtB1P,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEW,UAAU,CAAE,QAAQ,CAAET,GAAG,CAAE,MAAM,CAAEX,YAAY,CAAE,KAAM,CAAE,CAAAJ,QAAA,eACtF5P,IAAA,SAAMyP,KAAK,CAAE,CACXM,OAAO,CAAE,SAAS,CAClBF,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,SAAS,CAChBH,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,KACd,CAAE,CAAAP,QAAA,CACC/K,QAAQ,CAAC0B,MAAM,CACZ,CAAC,cACPvG,IAAA,SAAMyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,CAClD/K,QAAQ,CAAC4B,WAAW,CACjB,CAAC,EACJ,CAAC,cACNvG,KAAA,QAAKuP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,EAAC,iBACnC,CAAC,EAAAmD,kBAAA,CAAAlO,QAAQ,CAACZ,QAAQ,UAAA8O,kBAAA,iBAAjBA,kBAAA,CAAmBnH,cAAc,CAAC,CAAC,GAAI,CAAC,CAAC,SACzD,CAAC,EAAAoH,oBAAA,CAAAnO,QAAQ,CAACG,SAAS,UAAAgO,oBAAA,iBAAlBA,oBAAA,CAAoBxL,MAAM,GAAI,CAAC,CAAC,8BACzB,CAACgF,OAAO,CAAC9H,KAAK,CAACkH,cAAc,CAAC,CAAC,EACpC,CAAC,EACH,CAAC,CAEL,CAACqH,UAAU,cACV/S,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,KAAK,CAAES,UAAU,CAAE,QAAS,CAAE,CAAAxB,QAAA,eAChE5P,IAAA,UACEsB,IAAI,CAAC,QAAQ,CACb6R,GAAG,CAAC,GAAG,CACPC,YAAY,CAAC,GAAG,CAChBtN,EAAE,CAAE,YAAYjB,QAAQ,CAACiB,EAAE,EAAG,CAC9B2J,KAAK,CAAE,CACL7G,KAAK,CAAE,MAAM,CACbmH,OAAO,CAAE,KAAK,CACdM,MAAM,CAAE,mBAAmB,CAC3BP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MACZ,CAAE,CACH,CAAC,cACFzK,IAAA,WACEsB,IAAI,CAAC,QAAQ,CACbgQ,OAAO,CAAEA,CAAA,GAAM5K,yBAAyB,CAAC7B,QAAQ,CAAE,CACnD4K,KAAK,CAAE,CACLM,OAAO,CAAE,UAAU,CACnBF,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,KAAK,CACjBW,MAAM,CAAE,SACV,CAAE,CAAAlB,QAAA,CACH,SAED,CAAQ,CAAC,EACN,CAAC,cAEN5P,IAAA,SAAMyP,KAAK,CAAE,CACXM,OAAO,CAAE,UAAU,CACnBF,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,SAAS,CAChBH,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,KACd,CAAE,CAAAP,QAAA,CAAC,iBAEH,CAAM,CACP,GA7EO/K,QAAQ,CAACiB,EA8Ed,CAAC,CAEV,CAAC,CAAC,CAEDK,0BAA0B,CAAC,CAAC,CAACqB,MAAM,GAAK,CAAC,eACxCxH,IAAA,QAAKyP,KAAK,CAAE,CACVM,OAAO,CAAE,MAAM,CACf2C,SAAS,CAAE,QAAQ,CACnBzC,KAAK,CAAE,SACT,CAAE,CAAAL,QAAA,CACCrM,iBAAiB,CAChB,8CAA8C,CAC9CF,iBAAiB,CAACmE,MAAM,GAAK,CAAC,CAC5B,yFAAyF,CACzF,wCAAwC,CACzC,CACN,EACE,CAAC,EACH,CAAC,CAGLrE,oBAAoB,CAACqE,MAAM,CAAG,CAAC,eAC9BtH,KAAA,QAAKuP,KAAK,CAAE,CAAE6C,SAAS,CAAE,MAAO,CAAE,CAAA1C,QAAA,eAChC1P,KAAA,OAAIuP,KAAK,CAAE,CAAEO,YAAY,CAAE,MAAM,CAAEvF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,EAAC,+CAC1B,CAACzM,oBAAoB,CAACqE,MAAM,CAAC,GAC5E,EAAI,CAAC,CAEJrE,oBAAoB,CAACyC,GAAG,CAAC,CAACf,QAAQ,CAAEsD,KAAK,QAAAkL,qBAAA,CAAAC,aAAA,CAAAC,qBAAA,oBACxCvT,IAAA,QAAuByP,KAAK,CAAE,CAC5BO,YAAY,CAAE,MAAM,CACpBD,OAAO,CAAE,MAAM,CACfF,UAAU,CAAE,SAAS,CACrBC,YAAY,CAAE,KAAK,CACnBO,MAAM,CAAE,mBACV,CAAE,CAAAT,QAAA,cACA1P,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEU,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,OAAQ,CAAE,CAAAxB,QAAA,eACpF1P,KAAA,QAAKuP,KAAK,CAAE,CAAE2C,IAAI,CAAE,CAAE,CAAE,CAAAxC,QAAA,eACtB1P,KAAA,QAAKuP,KAAK,CAAE,CAAEO,YAAY,CAAE,KAAM,CAAE,CAAAJ,QAAA,eAClC5P,IAAA,SAAMyP,KAAK,CAAE,CACXM,OAAO,CAAE,SAAS,CAClBF,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,SAAS,CAChBH,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,KAAK,CACjBqD,WAAW,CAAE,MACf,CAAE,CAAA5D,QAAA,CACC/K,QAAQ,CAAC0B,MAAM,CACZ,CAAC,cACPvG,IAAA,SAAMyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,CAClD/K,QAAQ,CAAC4B,WAAW,EAAI5B,QAAQ,CAACA,QAAQ,CACtC,CAAC,cACP3E,KAAA,SAAMuP,KAAK,CAAE,CACXgE,UAAU,CAAE,MAAM,CAClB1D,OAAO,CAAE,SAAS,CAClBF,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,SAAS,CAChBH,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MACZ,CAAE,CAAAmF,QAAA,EAAC,YACS,CAAC/K,QAAQ,CAACwC,gBAAgB,EAAIxC,QAAQ,CAACR,gBAAgB,EAAI,CAAC,EAClE,CAAC,EACJ,CAAC,cAGNnE,KAAA,QAAKuP,KAAK,CAAE,CACVgB,OAAO,CAAE,MAAM,CACfC,mBAAmB,CAAE,sCAAsC,CAC3DC,GAAG,CAAE,MAAM,CACXlG,QAAQ,CAAE,MAAM,CAChBwF,KAAK,CAAE,SAAS,CAChBD,YAAY,CAAE,MAChB,CAAE,CAAAJ,QAAA,eACA1P,KAAA,QAAA0P,QAAA,eACE5P,IAAA,SAAMyP,KAAK,CAAE,CAAEQ,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,eAAa,CAAM,CAAC,cACvD1P,KAAA,QAAKuP,KAAK,CAAE,CAAEU,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,EAAC,GAChC,CAAC,CAAC,CAAC/K,QAAQ,CAACZ,QAAQ,EAAI,CAAC,GAAKY,QAAQ,CAACwC,gBAAgB,EAAI,CAAC,CAAC,EAAEuE,cAAc,CAAC,CAAC,EAC7E,CAAC,EACH,CAAC,CACL/G,QAAQ,CAACG,SAAS,EAAIH,QAAQ,CAACG,SAAS,CAACwC,MAAM,CAAG,CAAC,eAClDtH,KAAA,CAAAE,SAAA,EAAAwP,QAAA,eACE1P,KAAA,QAAA0P,QAAA,eACE5P,IAAA,SAAMyP,KAAK,CAAE,CAAEQ,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,iBAAe,CAAM,CAAC,cACzD1P,KAAA,QAAKuP,KAAK,CAAE,CAAEU,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,EAAC,GAChC,CAAC,EAAAyD,qBAAA,CAAAxO,QAAQ,CAACE,cAAc,UAAAsO,qBAAA,iBAAvBA,qBAAA,CAAyBzH,cAAc,CAAC,CAAC,GAAI,CAAC,EAC7C,CAAC,EACH,CAAC,cACN1L,KAAA,QAAA0P,QAAA,eACE5P,IAAA,SAAMyP,KAAK,CAAE,CAAEQ,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,YAAU,CAAM,CAAC,cACpD1P,KAAA,QAAKuP,KAAK,CAAE,CAAEU,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,EAAC,GAChC,CAAC,EAAA0D,aAAA,CAAAzO,QAAQ,CAACJ,GAAG,UAAA6O,aAAA,iBAAZA,aAAA,CAAc1H,cAAc,CAAC,CAAC,GAAI,CAAC,EAClC,CAAC,EACH,CAAC,EACN,CACH,cACD1L,KAAA,QAAA0P,QAAA,eACE5P,IAAA,SAAMyP,KAAK,CAAE,CAAEQ,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,QAAM,CAAM,CAAC,cAChD1P,KAAA,QAAKuP,KAAK,CAAE,CAAEU,UAAU,CAAE,KAAK,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,EAAC,GAClD,CAAC,EAAA2D,qBAAA,CAAA1O,QAAQ,CAACoC,aAAa,UAAAsM,qBAAA,iBAAtBA,qBAAA,CAAwB3H,cAAc,CAAC,CAAC,GAAI,CAAC,EAC5C,CAAC,EACH,CAAC,EACH,CAAC,CAGL/G,QAAQ,CAACG,SAAS,EAAIH,QAAQ,CAACG,SAAS,CAACwC,MAAM,CAAG,CAAC,eAClDtH,KAAA,QAAKuP,KAAK,CAAE,CACVM,OAAO,CAAE,KAAK,CACdF,UAAU,CAAE,OAAO,CACnBC,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChBwF,KAAK,CAAE,SACT,CAAE,CAAAL,QAAA,eACA5P,IAAA,WAAA4P,QAAA,CAAQ,sBAAoB,CAAQ,CAAC,cACrC5P,IAAA,OAAIyP,KAAK,CAAE,CAAEE,MAAM,CAAE,cAAc,CAAEI,OAAO,CAAE,CAAE,CAAE,CAAAH,QAAA,CAC/C/K,QAAQ,CAACG,SAAS,CAACY,GAAG,CAAC,CAACoB,GAAG,CAAE0M,GAAG,gBAC/BxT,KAAA,OAAA0P,QAAA,EACG5I,GAAG,CAAC9B,QAAQ,EAAIL,QAAQ,CAACwC,gBAAgB,EAAI,CAAC,CAAC,CAAC,IAAE,CAACL,GAAG,CAACoG,MAAM,CAAC,MAC9D,CAAC,CAACpG,GAAG,CAAC7B,aAAa,CAAG6B,GAAG,CAAC9B,QAAQ,EAAIL,QAAQ,CAACwC,gBAAgB,EAAI,CAAC,CAAC,EAAEuE,cAAc,CAAC,CAAC,GAFjF8H,GAGL,CACL,CAAC,CACA,CAAC,EACF,CACN,EACE,CAAC,cAEN1T,IAAA,WACEsB,IAAI,CAAC,QAAQ,CACbgQ,OAAO,CAAEA,CAAA,GAAMtJ,gBAAgB,CAACnD,QAAQ,CAACiB,EAAE,CAAE,CAC7C2J,KAAK,CAAE,CACLM,OAAO,CAAE,UAAU,CACnBF,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChBqG,MAAM,CAAE,SACV,CAAE,CAAAlB,QAAA,CACH,2BAED,CAAQ,CAAC,EACN,CAAC,EAhHE/K,QAAQ,CAACiB,EAiHd,CAAC,EACP,CAAC,cAGF9F,IAAA,QAAKyP,KAAK,CAAE,CACV6C,SAAS,CAAE,MAAM,CACjBvC,OAAO,CAAE,MAAM,CACfF,UAAU,CAAE,SAAS,CACrBC,YAAY,CAAE,KAAK,CACnBO,MAAM,CAAE,mBACV,CAAE,CAAAT,QAAA,cACA1P,KAAA,QAAKuP,KAAK,CAAE,CACVgB,OAAO,CAAE,MAAM,CACfU,cAAc,CAAE,eAAe,CAC/BC,UAAU,CAAE,QAAQ,CACpB3G,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,KAAK,CACjBF,KAAK,CAAE,SACT,CAAE,CAAAL,QAAA,eACA5P,IAAA,SAAA4P,QAAA,CAAM,qCAAyB,CAAM,CAAC,cACtC1P,KAAA,SAAA0P,QAAA,EAAM,GAAC,CAACjM,eAAe,CAAC,CAAC,CAACe,KAAK,CAACkH,cAAc,CAAC,CAAC,EAAO,CAAC,EACrD,CAAC,CACH,CAAC,EACH,CACN,CAEAzI,oBAAoB,CAACqE,MAAM,GAAK,CAAC,eAChCtH,KAAA,QAAKuP,KAAK,CAAE,CACVM,OAAO,CAAE,MAAM,CACfF,UAAU,CAAE,SAAS,CACrBC,YAAY,CAAE,MAAM,CACpB4C,SAAS,CAAE,QAAQ,CACnBzC,KAAK,CAAE,SACT,CAAE,CAAAL,QAAA,eACA5P,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAEuF,YAAY,CAAE,MAAO,CAAE,CAAAJ,QAAA,CAAC,cAAE,CAAK,CAAC,cAChE5P,IAAA,MAAGyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,CAAC,gCAEnD,CAAG,CAAC,cACJ5P,IAAA,MAAGyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,oEAEhC,CAAG,CAAC,EACD,CACN,cAGD1P,KAAA,QAAKuP,KAAK,CAAE,CAAE6C,SAAS,CAAE,MAAM,CAAE7B,OAAO,CAAE,MAAM,CAAEU,cAAc,CAAE,eAAgB,CAAE,CAAAvB,QAAA,eAClF1P,KAAA,WACEoB,IAAI,CAAC,QAAQ,CACbgQ,OAAO,CAAEA,CAAA,GAAM3P,cAAc,CAAC,CAAC,CAAE,CACjC8N,KAAK,CAAE,CACLM,OAAO,CAAE,WAAW,CACpBF,UAAU,CAAE,OAAO,CACnBI,KAAK,CAAE,SAAS,CAChBI,MAAM,CAAE,mBAAmB,CAC3BP,YAAY,CAAE,MAAM,CACpBrF,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,KAAK,CACjBW,MAAM,CAAE,SAAS,CACjBL,OAAO,CAAE,MAAM,CACfW,UAAU,CAAE,QAAQ,CACpBT,GAAG,CAAE,KACP,CAAE,CAAAf,QAAA,eACF5P,IAAA,SAAMyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,QAAC,CAAM,CAAC,WAE7C,EAAQ,CAAC,cAET1P,KAAA,WACEoB,IAAI,CAAC,QAAQ,CACbgQ,OAAO,CAAEA,CAAA,GAAM3P,cAAc,CAAC,CAAC,CAAE,CACjCiR,QAAQ,CAAEzP,oBAAoB,CAACqE,MAAM,GAAK,CAAE,CAC5CiI,KAAK,CAAE,CACLM,OAAO,CAAE,WAAW,CACpBF,UAAU,CAAE1M,oBAAoB,CAACqE,MAAM,CAAG,CAAC,CACzC,mDAAmD,CAAG,SAAS,CACjEyI,KAAK,CAAE9M,oBAAoB,CAACqE,MAAM,CAAG,CAAC,CAAG,OAAO,CAAG,SAAS,CAC5D6I,MAAM,CAAE,MAAM,CACdP,YAAY,CAAE,MAAM,CACpBrF,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,KAAK,CACjBW,MAAM,CAAE3N,oBAAoB,CAACqE,MAAM,CAAG,CAAC,CAAG,SAAS,CAAG,aAAa,CACnEiJ,OAAO,CAAE,MAAM,CACfW,UAAU,CAAE,QAAQ,CACpBT,GAAG,CAAE,KACP,CAAE,CAAAf,QAAA,EAAC,WAEH,cAAA5P,IAAA,SAAMyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,QAAC,CAAM,CAAC,EACrC,CAAC,EACN,CAAC,EACH,CACN,CAEAlO,WAAW,GAAK,CAAC,eAChBxB,KAAA,QAAKuP,KAAK,CAAE,CAAEa,SAAS,CAAE,kBAAmB,CAAE,CAAAV,QAAA,eAC5C5P,IAAA,OAAIyP,KAAK,CAAE,CAAEO,YAAY,CAAE,MAAM,CAAEC,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,yBAEzE,CAAI,CAAC,cAGL1P,KAAA,QAAKuP,KAAK,CAAE,CACVO,YAAY,CAAE,MAAM,CACpBD,OAAO,CAAE,MAAM,CACfF,UAAU,CAAE,SAAS,CACrBC,YAAY,CAAE,MAAM,CACpBO,MAAM,CAAE,mBACV,CAAE,CAAAT,QAAA,eACA5P,IAAA,OAAIyP,KAAK,CAAE,CAAEE,MAAM,CAAE,YAAY,CAAEM,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,6CAEzE,CAAI,CAAC,cACL1P,KAAA,MAAGuP,KAAK,CAAE,CAAEE,MAAM,CAAE,OAAO,CAAElF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,eAChE5P,IAAA,WAAA4P,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAAC,GAAI,CAAAlN,IAAI,CAACF,cAAc,CAAC,CAACwG,kBAAkB,CAAC,OAAO,CAAE,CAAEiB,OAAO,CAAE,MAAM,CAAEhB,IAAI,CAAE,SAAS,CAAEC,KAAK,CAAE,MAAM,CAAEC,GAAG,CAAE,SAAU,CAAC,CAAC,EACjJ,CAAC,cACJjJ,KAAA,MAAGuP,KAAK,CAAE,CAAEE,MAAM,CAAE,OAAO,CAAElF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,eAChE5P,IAAA,WAAA4P,QAAA,CAAQ,OAAK,CAAQ,CAAC,IAAC,CAAC/M,aAAa,CAAC,MACxC,EAAG,CAAC,EACD,CAAC,cAGN3C,KAAA,QAAKuP,KAAK,CAAE,CACVO,YAAY,CAAE,MAAM,CACpBD,OAAO,CAAE,MAAM,CACfF,UAAU,CAAE,SAAS,CACrBC,YAAY,CAAE,MAAM,CACpBO,MAAM,CAAE,mBACV,CAAE,CAAAT,QAAA,eACA5P,IAAA,OAAIyP,KAAK,CAAE,CAAEE,MAAM,CAAE,YAAY,CAAEM,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,0BAEzE,CAAI,CAAC,CACJrP,SAAS,CAAC+F,MAAM,CAAC4E,CAAC,EAAIA,CAAC,CAACpF,EAAE,GAAKhF,eAAe,CAAC,CAAC8E,GAAG,CAACsF,CAAC,OAAAyI,eAAA,oBACpDzT,KAAA,QAAA0P,QAAA,eACE1P,KAAA,MAAGuP,KAAK,CAAE,CAAEE,MAAM,CAAE,OAAO,CAAElF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,eAChE5P,IAAA,WAAA4P,QAAA,CAAS1E,CAAC,CAACkC,MAAM,CAAS,CAAC,MAAG,CAAClC,CAAC,CAACK,KAAK,CAAC,GAAC,CAACL,CAAC,CAACM,MAAM,EAChD,CAAC,cACJtL,KAAA,MAAGuP,KAAK,CAAE,CAAEE,MAAM,CAAE,OAAO,CAAElF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,EAAC,WACxD,CAAC1E,CAAC,CAACmC,OAAO,CAAC,kBAAgB,CAAC,EAAAsG,eAAA,CAAAzI,CAAC,CAACoC,WAAW,UAAAqG,eAAA,iBAAbA,eAAA,CAAe/H,cAAc,CAAC,OAAO,CAAC,GAAI,CAAC,CAAC,KACnF,EAAG,CAAC,GANIV,CAAC,CAACpF,EAOP,CAAC,EACP,CAAC,EACC,CAAC,cAGN5F,KAAA,QAAKuP,KAAK,CAAE,CACVO,YAAY,CAAE,MAAM,CACpBD,OAAO,CAAE,MAAM,CACfF,UAAU,CAAE,SAAS,CACrBC,YAAY,CAAE,MAAM,CACpBO,MAAM,CAAE,mBACV,CAAE,CAAAT,QAAA,eACA5P,IAAA,OAAIyP,KAAK,CAAE,CAAEE,MAAM,CAAE,YAAY,CAAEM,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,uCAEzE,CAAI,CAAC,CACJzM,oBAAoB,CAACyC,GAAG,CAAC,CAAC7B,CAAC,CAAE6P,CAAC,gBAC7B1T,KAAA,QAAgBuP,KAAK,CAAE,CACrBM,OAAO,CAAE,MAAM,CACfC,YAAY,CAAE,MAAM,CACpBH,UAAU,CAAE,OAAO,CACnBC,YAAY,CAAE,KAChB,CAAE,CAAAF,QAAA,eACA1P,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEU,cAAc,CAAE,eAAgB,CAAE,CAAAvB,QAAA,eAC/D1P,KAAA,WAAQuP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,EAAC,GAAC,CAACgE,CAAC,CAAG,CAAC,CAAC,GAAC,CAAC7P,CAAC,CAACc,QAAQ,EAAI,YAAY,EAAS,CAAC,cACnF3E,KAAA,SAAMuP,KAAK,CAAE,CAAEU,UAAU,CAAE,KAAK,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,EAAC,GACnD,CAAC,CAAC,CAAC5L,UAAU,CAACD,CAAC,CAACE,QAAQ,CAAC,EAAI,CAAC,EAAK,CAACD,UAAU,CAACD,CAAC,CAACI,aAAa,CAAC,EAAI,CAAC,GAAKC,QAAQ,CAACL,CAAC,CAACM,gBAAgB,CAAC,EAAI,CAAC,CAAE,EAAEuH,cAAc,CAAC,OAAO,CAAC,EAClI,CAAC,EACJ,CAAC,CACL7H,CAAC,CAAC0D,OAAO,eACRzH,IAAA,MAAGyP,KAAK,CAAE,CAAEE,MAAM,CAAE,WAAW,CAAElF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CACnE7L,CAAC,CAAC0D,OAAO,CACT,CACJ,GAhBO1D,CAAC,CAAC+B,EAiBP,CACN,CAAC,EACC,CAAC,cAGN5F,KAAA,QAAKuP,KAAK,CAAE,CACVM,OAAO,CAAE,MAAM,CACfF,UAAU,CAAEvN,YAAY,GAAK,UAAU,CAAG,SAAS,CAAG,SAAS,CAC/DwN,YAAY,CAAE,MAAM,CACpBO,MAAM,CAAE,aAAa/N,YAAY,GAAK,UAAU,CAAG,SAAS,CAAG,SAAS,EAC1E,CAAE,CAAAsN,QAAA,eACA1P,KAAA,OAAIuP,KAAK,CAAE,CACTE,MAAM,CAAE,YAAY,CACpBM,KAAK,CAAE3N,YAAY,GAAK,UAAU,CAAG,SAAS,CAAG,SAAS,CAC1DmI,QAAQ,CAAE,MAAM,CAChBiI,SAAS,CAAE,QACb,CAAE,CAAA9C,QAAA,EAAC,yCAC4B,CAACtN,YAAY,GAAK,UAAU,CAAG,YAAY,CAAG,cAAc,EACvF,CAAC,cAELpC,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEC,mBAAmB,CAAE,SAAS,CAAEC,GAAG,CAAE,MAAO,CAAE,CAAAf,QAAA,eAC3E5P,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,wBAAsB,CAAK,CAAC,cAChF1P,KAAA,QAAKuP,KAAK,CAAE,CAAEiD,SAAS,CAAE,OAAO,CAAEjI,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,EAAC,GACtE,CAACpD,OAAO,CAAC5I,gBAAgB,CAACgI,cAAc,CAAC,OAAO,CAAC,EAC/C,CAAC,cAEN5L,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,qBAAmB,CAAK,CAAC,cAC7E1P,KAAA,QAAKuP,KAAK,CAAE,CAAEiD,SAAS,CAAE,OAAO,CAAEjI,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,EAAC,GACtE,CAACpD,OAAO,CAACtI,iBAAiB,CAAC0H,cAAc,CAAC,OAAO,CAAC,EAChD,CAAC,cAEN5L,IAAA,QAAKyP,KAAK,CAAE,CACVoE,UAAU,CAAE,MAAM,CAClBjD,SAAS,CAAE,mBAAmB,CAC9BT,UAAU,CAAE,KAAK,CACjB1F,QAAQ,CAAE,MACZ,CAAE,CAAAmF,QAAA,CAAC,aAEH,CAAK,CAAC,cACN1P,KAAA,QAAKuP,KAAK,CAAE,CACVoE,UAAU,CAAE,MAAM,CAClBjD,SAAS,CAAE,mBAAmB,CAC9B8B,SAAS,CAAE,OAAO,CAClBvC,UAAU,CAAE,KAAK,CACjB1F,QAAQ,CAAE,MACZ,CAAE,CAAAmF,QAAA,EAAC,GACA,CAACpD,OAAO,CAAC7H,SAAS,CAACiH,cAAc,CAAC,OAAO,CAAC,EACxC,CAAC,cAEN5L,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,MAAI,CAAK,CAAC,cAC9D1P,KAAA,QAAKuP,KAAK,CAAE,CAAEiD,SAAS,CAAE,OAAO,CAAEjI,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,EAAC,GACnD,CAACpD,OAAO,CAAC/H,GAAG,CAACmH,cAAc,CAAC,OAAO,CAAC,EAClC,CAAC,cAEN5L,IAAA,QAAKyP,KAAK,CAAE,CACVoE,UAAU,CAAE,MAAM,CAClBjD,SAAS,CAAE,WAAW,CACtBgB,WAAW,CAAEtP,YAAY,GAAK,UAAU,CAAG,SAAS,CAAG,SAAS,CAChEmI,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,MAAM,CAClBF,KAAK,CAAE3N,YAAY,GAAK,UAAU,CAAG,SAAS,CAAG,SACnD,CAAE,CAAAsN,QAAA,CAAC,QAEH,CAAK,CAAC,cACN1P,KAAA,QAAKuP,KAAK,CAAE,CACVoE,UAAU,CAAE,MAAM,CAClBjD,SAAS,CAAE,WAAW,CACtBgB,WAAW,CAAEtP,YAAY,GAAK,UAAU,CAAG,SAAS,CAAG,SAAS,CAChEoQ,SAAS,CAAE,OAAO,CAClBjI,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,MAAM,CAClBF,KAAK,CAAE3N,YAAY,GAAK,UAAU,CAAG,SAAS,CAAG,SACnD,CAAE,CAAAsN,QAAA,EAAC,GACA,CAACpD,OAAO,CAAC9H,KAAK,CAACkH,cAAc,CAAC,OAAO,CAAC,EACpC,CAAC,EACH,CAAC,EACH,CAAC,cAEN1L,KAAA,QAAKuP,KAAK,CAAE,CAAE6C,SAAS,CAAE,MAAM,CAAE7B,OAAO,CAAE,MAAM,CAAEU,cAAc,CAAE,eAAgB,CAAE,CAAAvB,QAAA,eAClF1P,KAAA,WACEoB,IAAI,CAAC,QAAQ,CACbgQ,OAAO,CAAEA,CAAA,GAAM3P,cAAc,CAAC,CAAC,CAAE,CACjC8N,KAAK,CAAE,CACLM,OAAO,CAAE,WAAW,CACpBF,UAAU,CAAE,OAAO,CACnBI,KAAK,CAAE,SAAS,CAChBI,MAAM,CAAE,mBAAmB,CAC3BP,YAAY,CAAE,MAAM,CACpBrF,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,KAAK,CACjBW,MAAM,CAAE,SAAS,CACjBL,OAAO,CAAE,MAAM,CACfW,UAAU,CAAE,QAAQ,CACpBT,GAAG,CAAE,KACP,CAAE,CAAAf,QAAA,eACF5P,IAAA,SAAMyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAAC,QAAC,CAAM,CAAC,WAE7C,EAAQ,CAAC,cAET5P,IAAA,WACEsB,IAAI,CAAC,QAAQ,CACbsR,QAAQ,CAAE1R,OAAQ,CAClBuO,KAAK,CAAE,CACLM,OAAO,CAAE,WAAW,CACpBF,UAAU,CAAE3O,OAAO,CAAG,SAAS,CAAG,mDAAmD,CACrF+O,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdP,YAAY,CAAE,MAAM,CACpBrF,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,KAAK,CACjBW,MAAM,CAAE5P,OAAO,CAAG,aAAa,CAAG,SAAS,CAC3CuP,OAAO,CAAE,MAAM,CACfW,UAAU,CAAE,QAAQ,CACpBT,GAAG,CAAE,KAAK,CACVT,SAAS,CAAE,mCACb,CAAE,CAAAN,QAAA,CACD1O,OAAO,CAAG,gBAAgB,CAAGF,kBAAkB,CAAG,0BAA0B,CAAG,uBAAuB,CACjG,CAAC,EACN,CAAC,EACH,CACN,EACG,CAAC,cAEPhB,IAAA,UAAA4P,QAAA,CAAQ;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,CAAQ,CAAC,EACP,CACN,CAGA,CAAChP,mBAAmB,eACnBV,KAAA,QAAKuP,KAAK,CAAE,CACVI,UAAU,CAAE,OAAO,CACnBC,YAAY,CAAE,MAAM,CACpBI,SAAS,CAAE,6BAA6B,CACxC4B,QAAQ,CAAE,QACZ,CAAE,CAAAlC,QAAA,eACA5P,IAAA,QAAKyP,KAAK,CAAE,CACVM,OAAO,CAAE,MAAM,CACfgC,YAAY,CAAE,mBAAmB,CACjClC,UAAU,CAAE,mDACd,CAAE,CAAAD,QAAA,cACA5P,IAAA,OAAIyP,KAAK,CAAE,CAAEE,MAAM,CAAE,CAAC,CAAEM,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,KAAM,CAAE,CAAAP,QAAA,CAAC,wCAEjF,CAAI,CAAC,CACF,CAAC,CAELrB,eAAe,CAAC/G,MAAM,GAAK,CAAC,cAC3BtH,KAAA,QAAKuP,KAAK,CAAE,CACVM,OAAO,CAAE,MAAM,CACf2C,SAAS,CAAE,QACb,CAAE,CAAA9C,QAAA,eACA5P,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAEuF,YAAY,CAAE,MAAM,CAAEI,OAAO,CAAE,GAAI,CAAE,CAAAR,QAAA,CAAC,cAAE,CAAK,CAAC,cAC9E5P,IAAA,OAAIyP,KAAK,CAAE,CAAEQ,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAM,CAAEkF,MAAM,CAAE,YAAa,CAAE,CAAAC,QAAA,CAAC,iCAEzE,CAAI,CAAC,cACL5P,IAAA,MAAGyP,KAAK,CAAE,CAAEQ,KAAK,CAAE,SAAS,CAAExF,QAAQ,CAAE,MAAO,CAAE,CAAAmF,QAAA,CAC7C1N,cAAc,EAAIE,YAAY,CAAI,mEAAmE,CAAG,2DAA2D,CACpK,CAAC,CACH,CAACF,cAAc,EAAIE,YAAY,gBAC9BpC,IAAA,WACEsR,OAAO,CAAEA,CAAA,GAAM,CACbnP,iBAAiB,CAAC,EAAE,CAAC,CACrBE,eAAe,CAAC,EAAE,CAAC,CACrB,CAAE,CACFoN,KAAK,CAAE,CACL6C,SAAS,CAAE,MAAM,CACjBvC,OAAO,CAAE,WAAW,CACpBF,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChBqG,MAAM,CAAE,SACV,CAAE,CAAAlB,QAAA,CAAC,4BAEL,CAAQ,CACT,EACE,CAAC,cAEN5P,IAAA,QAAKyP,KAAK,CAAE,CAAEM,OAAO,CAAE,MAAO,CAAE,CAAAH,QAAA,CAC7BrB,eAAe,CAAC3I,GAAG,CAAEyC,MAAM,OAAAyL,qBAAA,CAAAC,sBAAA,CAAAC,eAAA,CAAAC,qBAAA,oBAC1BjU,IAAA,QAAqByP,KAAK,CAAE,CAC1BO,YAAY,CAAE,MAAM,CACpBD,OAAO,CAAE,MAAM,CACfF,UAAU,CAAE,SAAS,CACrBC,YAAY,CAAE,MAAM,CACpBO,MAAM,CAAE,mBAAmB,CAC3BQ,UAAU,CAAE,eACd,CAAE,CACAE,YAAY,CAAG9D,CAAC,EAAK,CACnBA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACmC,WAAW,CAAG,SAAS,CAC7C3E,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACwB,SAAS,CAAG,iBAAiB,CACrD,CAAE,CACFC,YAAY,CAAGjE,CAAC,EAAK,CACnBA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACmC,WAAW,CAAG,SAAS,CAC7C3E,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACwB,SAAS,CAAG,eAAe,CACnD,CAAE,CAAArB,QAAA,cACF1P,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEU,cAAc,CAAE,eAAe,CAAEC,UAAU,CAAE,OAAQ,CAAE,CAAAxB,QAAA,eACpF1P,KAAA,QAAKuP,KAAK,CAAE,CAAE2C,IAAI,CAAE,CAAE,CAAE,CAAAxC,QAAA,eACtB1P,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEW,UAAU,CAAE,QAAQ,CAAET,GAAG,CAAE,MAAM,CAAEX,YAAY,CAAE,MAAO,CAAE,CAAAJ,QAAA,eACvF5P,IAAA,OAAIyP,KAAK,CAAE,CAAEE,MAAM,CAAE,CAAC,CAAElF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAC1DvH,MAAM,CAACgD,cAAc,CACpB,CAAC,cACLrL,IAAA,SAAMyP,KAAK,CAAE,CACXM,OAAO,CAAE,UAAU,CACnBD,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChB0F,UAAU,CAAE,KAAK,CACjBN,UAAU,CAAExH,MAAM,CAAC/F,YAAY,GAAK,UAAU,CAAG,SAAS,CAAG,SAAS,CACtE2N,KAAK,CAAE5H,MAAM,CAAC/F,YAAY,GAAK,UAAU,CAAG,SAAS,CAAG,SAC1D,CAAE,CAAAsN,QAAA,CACCvH,MAAM,CAAC/F,YAAY,GAAK,UAAU,CAAG,YAAY,CAAG,gBAAgB,CACjE,CAAC,EACJ,CAAC,cAENpC,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,MAAM,CAAElG,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAS,CAAEoB,QAAQ,CAAE,MAAO,CAAE,CAAAzB,QAAA,eACjG1P,KAAA,SAAA0P,QAAA,EAAM,0BAAc,CAACvH,MAAM,CAAC7F,cAAc,EAAI,GAAI,CAAAE,IAAI,CAAC2F,MAAM,CAAC2B,kBAAkB,CAAC,CAAChB,kBAAkB,CAAC,OAAO,CAAC,EAAO,CAAC,cACrH9I,KAAA,SAAA0P,QAAA,EAAM,eAAG,CAACvH,MAAM,CAACxF,aAAa,EAAI,UAAU,EAAO,CAAC,cACpD3C,KAAA,SAAA0P,QAAA,EAAM,eAAG,CAACvH,MAAM,CAACiD,eAAe,EAAO,CAAC,cACxCpL,KAAA,SAAA0P,QAAA,EAAM,eAAG,CAAC,EAAAkE,qBAAA,CAAAzL,MAAM,CAAClF,oBAAoB,UAAA2Q,qBAAA,iBAA3BA,qBAAA,CAA6BtM,MAAM,GAAI,CAAC,CAAC,YAAU,EAAM,CAAC,cACpEtH,KAAA,SAAA0P,QAAA,EAAM,eAAG,CAAC,EAAAmE,sBAAA,CAAA1L,MAAM,CAACsD,iBAAiB,UAAAoI,sBAAA,iBAAxBA,sBAAA,CAA0BnI,cAAc,CAAC,OAAO,CAAC,GAAI,CAAC,CAAC,KAAG,EAAM,CAAC,EACxE,CAAC,EACH,CAAC,cAEN1L,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEW,UAAU,CAAE,QAAQ,CAAET,GAAG,CAAE,MAAO,CAAE,CAAAf,QAAA,eACjE1P,KAAA,QAAKuP,KAAK,CAAE,CAAEiD,SAAS,CAAE,OAAQ,CAAE,CAAA9C,QAAA,eACjC5P,IAAA,QAAKyP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAEwF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,CAAC,OAAK,CAAK,CAAC,cAC/D1P,KAAA,QAAKuP,KAAK,CAAE,CAAEhF,QAAQ,CAAE,MAAM,CAAE0F,UAAU,CAAE,MAAM,CAAEF,KAAK,CAAE,SAAU,CAAE,CAAAL,QAAA,EAAC,GACrE,CAAC,EAAAoE,eAAA,CAAA3L,MAAM,CAACmE,OAAO,UAAAwH,eAAA,kBAAAC,qBAAA,CAAdD,eAAA,CAAgBtP,KAAK,UAAAuP,qBAAA,iBAArBA,qBAAA,CAAuBrI,cAAc,CAAC,OAAO,CAAC,GAAI,CAAC,EAClD,CAAC,EACH,CAAC,cAEN1L,KAAA,QAAKuP,KAAK,CAAE,CAAEgB,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,KAAM,CAAE,CAAAf,QAAA,eAC1C5P,IAAA,WACEsR,OAAO,CAAEA,CAAA,GAAMlJ,eAAe,CAACC,MAAM,CAAE,CACvCoH,KAAK,CAAE,CACLM,OAAO,CAAE,KAAK,CACdF,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChBqG,MAAM,CAAE,SAAS,CACjBL,OAAO,CAAE,MAAM,CACfW,UAAU,CAAE,QAAQ,CACpBD,cAAc,CAAE,QAAQ,CACxBvI,KAAK,CAAE,MAAM,CACbE,MAAM,CAAE,MAAM,CACd+H,UAAU,CAAE,sBACd,CAAE,CACFE,YAAY,CAAG9D,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACI,UAAU,CAAG,SAAU,CAClEqB,YAAY,CAAGjE,CAAC,EAAKA,CAAC,CAAC+D,aAAa,CAACvB,KAAK,CAACI,UAAU,CAAG,SAAU,CAClEqE,KAAK,CAAC,gBAAgB,CAAAtE,QAAA,CAAC,cAEzB,CAAQ,CAAC,cACT5P,IAAA,WACEsR,OAAO,CAAEA,CAAA,GAAMrD,qBAAqB,CAAC5F,MAAM,CAAE,CAC7CoH,KAAK,CAAE,CACLM,OAAO,CAAE,KAAK,CACdF,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChBqG,MAAM,CAAE,SAAS,CACjBL,OAAO,CAAE,MAAM,CACfW,UAAU,CAAE,QAAQ,CACpBD,cAAc,CAAE,QAAQ,CACxBvI,KAAK,CAAE,MAAM,CACbE,MAAM,CAAE,MACV,CAAE,CACFoL,KAAK,CAAC,QAAQ,CAAAtE,QAAA,CAAC,cAEjB,CAAQ,CAAC,cACT5P,IAAA,WACEsR,OAAO,CAAEA,CAAA,GAAMnD,uBAAuB,CAAC9F,MAAM,CAACvC,EAAE,CAAE,CAClD2J,KAAK,CAAE,CACLM,OAAO,CAAE,KAAK,CACdF,UAAU,CAAE,SAAS,CACrBI,KAAK,CAAE,OAAO,CACdI,MAAM,CAAE,MAAM,CACdP,YAAY,CAAE,KAAK,CACnBrF,QAAQ,CAAE,MAAM,CAChBqG,MAAM,CAAE,SAAS,CACjBL,OAAO,CAAE,MAAM,CACfW,UAAU,CAAE,QAAQ,CACpBD,cAAc,CAAE,QAAQ,CACxBvI,KAAK,CAAE,MAAM,CACbE,MAAM,CAAE,MACV,CAAE,CACFoL,KAAK,CAAC,UAAU,CAAAtE,QAAA,CAAC,oBAEnB,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,EACH,CAAC,EAlHEvH,MAAM,CAACvC,EAmHZ,CAAC,EACP,CAAC,CACC,CACN,EACE,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAzF,2BAA2B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
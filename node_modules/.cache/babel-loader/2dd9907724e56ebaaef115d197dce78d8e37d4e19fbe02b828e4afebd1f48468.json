{"ast":null,"code":"// src/components/FleetPanel.js\nimport React,{useState,useEffect}from'react';import{database,firestore}from'../config/firebase';import{ref,onValue,update,get}from'firebase/database';import{collection,getDocs,updateDoc,doc}from'firebase/firestore';import NotificationSystem,{createNotification}from'./NotificationSystem';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FleetPanel=_ref=>{let{currentUser,onLogout,onViewChange,currentView='fleet'}=_ref;const[vehiculos,setVehiculos]=useState([]);const[trabajadores,setTrabajadores]=useState([]);const[users,setUsers]=useState([]);const[activeTab,setActiveTab]=useState('vehicles');const[editingItem,setEditingItem]=useState(null);const[message,setMessage]=useState({type:'',text:''});const[loading,setLoading]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[filterStatus,setFilterStatus]=useState('todos');const[isMobile,setIsMobile]=useState(false);const[showEditModal,setShowEditModal]=useState(false);const[editFormData,setEditFormData]=useState({});const[expandedCards,setExpandedCards]=useState({});const[quickEditMode,setQuickEditMode]=useState({});// Para edición rápida de operador\nconst[isSidebarOpen,setIsSidebarOpen]=useState(!isMobile);// NUEVO: Estados para documentos\nconst[showDocumentsModal,setShowDocumentsModal]=useState(false);const[selectedDocuments,setSelectedDocuments]=useState(null);const[documentOwner,setDocumentOwner]=useState(null);const[loadingDocuments,setLoadingDocuments]=useState(false);// Agregar estos estados después de los existentes\nconst[showWorkerDetailModal,setShowWorkerDetailModal]=useState(false);const[selectedWorker,setSelectedWorker]=useState(null);const[updatingLicense,setUpdatingLicense]=useState(false);// Detectar si es móvil - MEJORADO\nuseEffect(()=>{const checkMobile=()=>{setIsMobile(window.innerWidth<=768||/iPhone|iPad|iPod|Android/i.test(navigator.userAgent));};checkMobile();window.addEventListener('resize',checkMobile);return()=>window.removeEventListener('resize',checkMobile);},[]);// Cargar datos\nuseEffect(()=>{loadVehiculos();loadTrabajadores();loadUsers();},[]);const loadVehiculos=()=>{const vehiculosRef=ref(database,'vehiculos');const unsubscribe=onValue(vehiculosRef,snapshot=>{const data=snapshot.val();if(data){const vehiculosArray=Object.entries(data).map(_ref2=>{let[id,vehiculo]=_ref2;return{id,...vehiculo};});setVehiculos(vehiculosArray);}else{setVehiculos([]);}});return unsubscribe;};const loadTrabajadores=()=>{const trabajadoresRef=ref(database,'trabajadores');const unsubscribe=onValue(trabajadoresRef,async snapshot=>{const data=snapshot.val();// Obtener trabajadores de Realtime Database\nconst trabajadoresDB=data?Object.entries(data).map(_ref3=>{let[id,trabajador]=_ref3;return{id,...trabajador,source:'database'};}):[];// Obtener TODOS los usuarios de Firestore (no solo trabajadores)\ntry{const usersSnapshot=await getDocs(collection(firestore,'users'));const todosLosUsuarios=[];usersSnapshot.forEach(doc=>{const userData=doc.data();// Buscar si existe en trabajadoresDB\nconst existeEnDB=trabajadoresDB.find(t=>t.id===doc.id);if(!existeEnDB){// Si no existe en Realtime Database, agregarlo desde Firestore\ntodosLosUsuarios.push({id:doc.id,nombre:userData.name||'Sin nombre',email:userData.email,telefono:userData.phone||'',role:userData.role||'trabajador',// IMPORTANTE: mantener el rol\nvehiculoAsignado:userData.vehicleId||null,estado:'disponible',licenciaConducir:userData.licenciaConducir||'',licenciasConducir:userData.licenciasConducir||[],fechaVencimientoLicencia:userData.fechaVencimientoLicencia||'',observacionesLicencia:userData.observacionesLicencia||'',licenciaBloqueada:userData.licenciaBloqueada||false,rut:userData.rut||'',localidad:userData.localidad||'',source:'firestore'});}else{// Si existe, actualizar con datos de Firestore que puedan faltar\nconst index=trabajadoresDB.findIndex(t=>t.id===doc.id);if(index!==-1){trabajadoresDB[index]={...trabajadoresDB[index],nombre:trabajadoresDB[index].nombre||userData.name,email:userData.email,telefono:trabajadoresDB[index].telefono||userData.phone,role:userData.role||'trabajador',// Asegurar que tenga rol\nlicenciaConducir:userData.licenciaConducir||trabajadoresDB[index].licenciaConducir,licenciasConducir:userData.licenciasConducir||trabajadoresDB[index].licenciasConducir,fechaVencimientoLicencia:userData.fechaVencimientoLicencia||trabajadoresDB[index].fechaVencimientoLicencia,observacionesLicencia:userData.observacionesLicencia||trabajadoresDB[index].observacionesLicencia,licenciaBloqueada:userData.licenciaBloqueada!==undefined?userData.licenciaBloqueada:trabajadoresDB[index].licenciaBloqueada,rut:userData.rut||trabajadoresDB[index].rut,localidad:userData.localidad||trabajadoresDB[index].localidad};}}});// Combinar ambas fuentes\nconst todosLosTrabajadores=[...trabajadoresDB,...todosLosUsuarios];// Eliminar duplicados\nconst trabajadoresUnicos=todosLosTrabajadores.reduce((acc,current)=>{const x=acc.find(item=>item.id===current.id);if(!x){return acc.concat([current]);}else{return acc;}},[]);console.log(`📊 Total usuarios encontrados: ${trabajadoresUnicos.length}`);console.log(`  - Trabajadores: ${trabajadoresUnicos.filter(u=>u.role==='trabajador').length}`);console.log(`  - Administradores: ${trabajadoresUnicos.filter(u=>u.role==='admin').length}`);console.log(`  - Super Admins: ${trabajadoresUnicos.filter(u=>u.role==='superadmin').length}`);setTrabajadores(trabajadoresUnicos);}catch(error){console.error('Error al cargar usuarios de Firestore:',error);setTrabajadores(trabajadoresDB);}});return unsubscribe;};const loadUsers=async()=>{try{const usersSnapshot=await getDocs(collection(firestore,'users'));const usersList=[];usersSnapshot.forEach(doc=>{usersList.push({id:doc.id,...doc.data()});});setUsers(usersList);}catch(error){console.error('Error al cargar usuarios:',error);}};// NUEVA FUNCIÓN: Cargar documentos de vehículo\nconst loadVehicleDocuments=async(vehiculoId,vehicleData)=>{setLoadingDocuments(true);try{// Buscar documentos en diferentes rutas posibles\nconst rutas=[`vehiculos/${vehiculoId}/documentos`,`documentos/vehiculos/${vehiculoId}`,`documentos_vehiculos/${vehiculoId}`];let documentosEncontrados=null;for(const ruta of rutas){const docsRef=ref(database,ruta);const snapshot=await get(docsRef);const data=snapshot.val();if(data&&Object.keys(data).length>0){documentosEncontrados=data;console.log(`📄 Documentos de vehículo encontrados en: ${ruta}`);break;}}// Verificar si hay documentos dentro del objeto del vehículo\nif(!documentosEncontrados&&vehicleData!==null&&vehicleData!==void 0&&vehicleData.documentos){documentosEncontrados=vehicleData.documentos;console.log('📄 Documentos encontrados dentro del objeto vehículo');}// Pasar todos los documentos encontrados tal como están\nsetSelectedDocuments(documentosEncontrados||{});setDocumentOwner({type:'vehicle',id:vehiculoId,name:vehicleData.nombre||'Vehículo'});setShowDocumentsModal(true);}catch(error){console.error('Error al cargar documentos del vehículo:',error);setMessage({type:'error',text:'❌ Error al cargar documentos'});}finally{setLoadingDocuments(false);}// Cuando se suben documentos exitosamente\nawait createNotification(currentUser.uid,{tipo:'documento_subido',titulo:'Documentos cargados',mensaje:`Se cargaron los documentos del vehículo ${vehicleData.nombre}`});};// NUEVA FUNCIÓN: Cargar documentos de trabajador\nconst loadWorkerDocuments=async(trabajadorId,workerData)=>{setLoadingDocuments(true);try{// Buscar documentos en diferentes rutas posibles\nconst rutas=[`trabajadores/${trabajadorId}/documentos`,`documentos/${trabajadorId}`,`usuarios/${trabajadorId}/documentos`];let documentosEncontrados=null;for(const ruta of rutas){const docsRef=ref(database,ruta);const snapshot=await get(docsRef);const data=snapshot.val();if(data&&Object.keys(data).length>0){documentosEncontrados=data;console.log(`📄 Documentos de trabajador encontrados en: ${ruta}`);break;}}// Verificar si hay documentos dentro del objeto del trabajador\nif(!documentosEncontrados&&workerData!==null&&workerData!==void 0&&workerData.documentos){documentosEncontrados=workerData.documentos;console.log('📄 Documentos encontrados dentro del objeto trabajador');}if(documentosEncontrados){// Procesar certificados si existen\nlet certificadosProcesados=[];if(documentosEncontrados.certificados&&typeof documentosEncontrados.certificados==='object'){certificadosProcesados=Object.entries(documentosEncontrados.certificados).map(_ref4=>{let[key,cert]=_ref4;return{firebaseKey:key,...cert};});}setSelectedDocuments({licenciaConducir:documentosEncontrados.licenciaConducir||null,certificadoOperador:documentosEncontrados.certificadoOperador||null,certificados:certificadosProcesados});}else{setSelectedDocuments({licenciaConducir:null,certificadoOperador:null,certificados:[]});}setDocumentOwner({type:'worker',id:trabajadorId,name:workerData.nombre||'Trabajador'});setShowDocumentsModal(true);}catch(error){console.error('Error al cargar documentos del trabajador:',error);setMessage({type:'error',text:'❌ Error al cargar documentos'});}finally{setLoadingDocuments(false);}};// Función para verificar vencimientos (ejecutar cada día)\nconst checkExpirations=async()=>{const hoy=new Date();// Verificar licencias de trabajadores\ntrabajadores.forEach(async trabajador=>{if(trabajador.fechaVencimientoLicencia){const fechaVencimiento=new Date(trabajador.fechaVencimientoLicencia);const diasRestantes=Math.ceil((fechaVencimiento-hoy)/(1000*60*60*24));if(diasRestantes===14||diasRestantes===7||diasRestantes===1){await createNotification(currentUser.uid,{tipo:'licencia_proxima',titulo:`⚠️ Licencia próxima a vencer`,mensaje:`La licencia de ${trabajador.nombre} vence en ${diasRestantes} día${diasRestantes>1?'s':''}`});}else if(diasRestantes===0){await createNotification(currentUser.uid,{tipo:'licencia_vencida',titulo:`🚫 Licencia vencida`,mensaje:`La licencia de ${trabajador.nombre} venció hoy`});}}});// Verificar documentos de vehículos\nvehiculos.forEach(async vehiculo=>{if(vehiculo.fechaRevisionTecnica){const fechaRevision=new Date(vehiculo.fechaRevisionTecnica);const diasRestantes=Math.ceil((fechaRevision-hoy)/(1000*60*60*24));if(diasRestantes<=7&&diasRestantes>0){await createNotification(currentUser.uid,{tipo:'documento_vencido',titulo:`📄 Revisión técnica próxima a vencer`,mensaje:`La revisión técnica de ${vehiculo.nombre} vence en ${diasRestantes} días`});}}});};// Ejecutar al cargar y cada 24 horas\nuseEffect(()=>{checkExpirations();const interval=setInterval(checkExpirations,24*60*60*1000);return()=>clearInterval(interval);},[trabajadores,vehiculos]);// Función para formatear tamaño de archivo\nconst formatFileSize=bytes=>{if(!bytes||bytes===0)return'0 Bytes';const k=1024;const sizes=['Bytes','KB','MB','GB'];const i=Math.floor(Math.log(bytes)/Math.log(k));return Math.round(bytes/Math.pow(k,i)*100)/100+' '+sizes[i];};const quickUpdateOperator=async(vehiculoId,nuevoOperadorId)=>{setLoading(true);try{const vehiculo=vehiculos.find(v=>v.id===vehiculoId);const trabajador=nuevoOperadorId?trabajadores.find(t=>t.id===nuevoOperadorId):null;// Verificar si el vehículo está habilitado\nif((vehiculo===null||vehiculo===void 0?void 0:vehiculo.habilitado)===false){setMessage({type:'error',text:'❌ Este vehículo está deshabilitado. No se puede asignar operador.'});setLoading(false);return;}if((trabajador===null||trabajador===void 0?void 0:trabajador.habilitado)===false){setMessage({type:'error',text:'❌ Este trabajador está deshabilitado. No puede ser asignado a vehículos.'});setLoading(false);return;}// VALIDACIÓN: Verificar licencias requeridas\nif(nuevoOperadorId&&trabajador){if(vehiculo!==null&&vehiculo!==void 0&&vehiculo.licenciasRequeridas&&vehiculo.licenciasRequeridas.length>0){const licenciasTrabajador=(trabajador===null||trabajador===void 0?void 0:trabajador.licenciasConducir)||[];const tieneAlgunaLicenciaRequerida=vehiculo.licenciasRequeridas.some(licRequerida=>licenciasTrabajador.includes(licRequerida));if(!tieneAlgunaLicenciaRequerida){const licenciasRequeridas=vehiculo.licenciasRequeridas.join(', ');const licenciasTrabajadorStr=licenciasTrabajador.length>0?licenciasTrabajador.join(', '):'ninguna';setMessage({type:'error',text:`❌ No se puede asignar. El vehículo requiere licencia clase: ${licenciasRequeridas}. El trabajador tiene: ${licenciasTrabajadorStr}`});setLoading(false);return;}}// Verificar si el trabajador tiene licencia bloqueada\nif(trabajador!==null&&trabajador!==void 0&&trabajador.licenciaBloqueada){setMessage({type:'error',text:'❌ No se puede asignar. El trabajador tiene la licencia bloqueada.'});setLoading(false);return;}}// PASO 1: Limpiar asignación anterior del vehículo\nconst trabajadorAnterior=trabajadores.find(t=>t.vehiculoAsignado===vehiculoId||t.vehicleId===vehiculoId);if(trabajadorAnterior&&trabajadorAnterior.id!==nuevoOperadorId){const trabajadorAnteriorRef=ref(database,`trabajadores/${trabajadorAnterior.id}`);await update(trabajadorAnteriorRef,{vehiculoAsignado:null,vehicleId:null,ultimaActualizacion:new Date().toISOString()});}// PASO 2: Si hay nuevo operador, limpiar cualquier otro vehículo que pudiera tener\nif(nuevoOperadorId){// Buscar si el trabajador tenía otro vehículo asignado\nconst otrosVehiculos=vehiculos.filter(v=>v.id!==vehiculoId&&(v.trabajadorAsignado===nuevoOperadorId||v.operadorAsignado===nuevoOperadorId||v.asignadoA===nuevoOperadorId));// Limpiar esos vehículos\nfor(const otroVehiculo of otrosVehiculos){const otroVehiculoRef=ref(database,`vehiculos/${otroVehiculo.id}`);await update(otroVehiculoRef,{trabajadorAsignado:null,operadorAsignado:null,asignadoA:null,ultimaActualizacion:new Date().toISOString()});}}// PASO 3: Actualizar el vehículo\nconst vehiculoRef=ref(database,`vehiculos/${vehiculoId}`);await update(vehiculoRef,{trabajadorAsignado:nuevoOperadorId||null,operadorAsignado:null,// SIEMPRE limpiar campos antiguos\nasignadoA:null,// SIEMPRE limpiar campos antiguos\nultimaActualizacion:new Date().toISOString(),actualizadoPor:currentUser.uid});// PASO 4: Si se asignó un nuevo trabajador, actualizar sus datos\nif(nuevoOperadorId){const trabajadorRef=ref(database,`trabajadores/${nuevoOperadorId}`);await update(trabajadorRef,{vehiculoAsignado:vehiculoId,vehicleId:vehiculoId,// Mantener por compatibilidad temporal\nultimaActualizacion:new Date().toISOString()});}// NOTIFICACIONES\nif(typeof createNotification==='function'){// Notificación para el administrador\nawait createNotification(currentUser.uid,{tipo:'vehiculo_asignado',titulo:`Operador actualizado en ${(vehiculo===null||vehiculo===void 0?void 0:vehiculo.nombre)||'Vehículo'}`,mensaje:nuevoOperadorId&&trabajador?`${trabajador.nombre} fue asignado como operador`:'Se removió el operador del vehículo'});// Notificar al trabajador si fue asignado\nif(nuevoOperadorId&&trabajador){await createNotification(nuevoOperadorId,{tipo:'vehiculo_asignado',titulo:'Te han asignado un vehículo',mensaje:`Has sido asignado como operador del vehículo ${(vehiculo===null||vehiculo===void 0?void 0:vehiculo.nombre)||''}`});}// Notificar al trabajador anterior si fue removido\nif(trabajadorAnterior&&trabajadorAnterior.id!==nuevoOperadorId){await createNotification(trabajadorAnterior.id,{tipo:'vehiculo_removido',titulo:'Asignación de vehículo removida',mensaje:`Ya no eres el operador del vehículo ${(vehiculo===null||vehiculo===void 0?void 0:vehiculo.nombre)||''}`});}}setMessage({type:'success',text:'✅ Operador actualizado exitosamente'});setQuickEditMode({...quickEditMode,[vehiculoId]:false});setTimeout(()=>setMessage({type:'',text:''}),3000);}catch(error){setMessage({type:'error',text:'❌ Error al actualizar operador'});console.error('Error:',error);}finally{setLoading(false);}};// En FleetPanel.js, agrega este botón temporalmente donde prefieras\n/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{if(!window.confirm('¿Limpiar todas las asignaciones de vehículos? Esto corregirá inconsistencias.'))return;console.log('🧹 Iniciando limpieza de asignaciones...');try{const vehiculosRef=ref(database,'vehiculos');const snapshot=await get(vehiculosRef);const vehiculosData=snapshot.val()||{};for(const[id,vehiculo]of Object.entries(vehiculosData)){const updates={};let needsUpdate=false;// Si tiene trabajadorAsignado, mantenerlo y limpiar los demás\nif(vehiculo.trabajadorAsignado){updates.trabajadorAsignado=vehiculo.trabajadorAsignado;updates.operadorAsignado=null;updates.asignadoA=null;needsUpdate=true;}// Si no tiene trabajadorAsignado pero tiene operadorAsignado, moverlo\nelse if(vehiculo.operadorAsignado){updates.trabajadorAsignado=vehiculo.operadorAsignado;updates.operadorAsignado=null;updates.asignadoA=null;needsUpdate=true;}// Si solo tiene asignadoA, moverlo\nelse if(vehiculo.asignadoA){updates.trabajadorAsignado=vehiculo.asignadoA;updates.operadorAsignado=null;updates.asignadoA=null;needsUpdate=true;}if(needsUpdate){console.log(`Actualizando vehículo ${id}...`);await update(ref(database,`vehiculos/${id}`),{...updates,ultimaActualizacion:new Date().toISOString()});}}alert('✅ Limpieza completada. Por favor recarga la página.');window.location.reload();}catch(error){console.error('Error en limpieza:',error);alert('Error: '+error.message);}},style:{padding:'10px 20px',background:'#f59e0b',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',margin:'10px'},children:\"\\uD83E\\uDDF9 Limpiar Asignaciones (Ejecutar Una Vez)\"});const corregirAsignacionesVehiculos=async()=>{const vehiculosRef=ref(database,'vehiculos');const snapshot=await get(vehiculosRef);const vehiculos=snapshot.val()||{};for(const[id,vehiculo]of Object.entries(vehiculos)){// Si tiene asignación en campos incorrectos\nif(vehiculo.operadorAsignado||vehiculo.asignadoA){const trabajadorId=vehiculo.operadorAsignado||vehiculo.asignadoA;console.log(`Corrigiendo vehículo ${id}...`);// Mover al campo correcto\nawait update(ref(database,`vehiculos/${id}`),{trabajadorAsignado:trabajadorId,// Campo correcto\noperadorAsignado:null,// Limpiar campo incorrecto\nasignadoA:null,// Limpiar campo incorrecto\nultimaActualizacion:new Date().toISOString()});console.log(`✅ Vehículo ${id} corregido`);}}console.log('✅ Todas las asignaciones corregidas');};// Ejecutar la corrección\ncorregirAsignacionesVehiculos();// Abrir modal de edición\nconst openEditModal=(item,type)=>{if(type==='vehicle'){setEditFormData({nombre:item.nombre||'',patente:item.patente||'',kilometraje:item.kilometraje||0,operadorAsignado:item.operadorAsignado||'',observaciones:item.observaciones||'',estado:item.estado||'disponible'});}else if(type==='worker'){const userData=users.find(u=>u.id===item.id);setEditFormData({nombre:item.nombre||(userData===null||userData===void 0?void 0:userData.name)||'',email:(userData===null||userData===void 0?void 0:userData.email)||'',telefono:(userData===null||userData===void 0?void 0:userData.phone)||item.telefono||'',vehicleId:(userData===null||userData===void 0?void 0:userData.vehicleId)||'',estado:item.estado||'disponible'});}setEditingItem({...item,type});setShowEditModal(true);};// Guardar cambios de vehículo\nconst saveVehicleChanges=async()=>{if(!editingItem)return;setLoading(true);try{const vehicleRef=ref(database,`vehiculos/${editingItem.id}`);await update(vehicleRef,{...editFormData,ultimaActualizacion:new Date().toISOString(),actualizadoPor:currentUser.uid});setMessage({type:'success',text:'✅ Vehículo actualizado exitosamente'});setShowEditModal(false);setEditingItem(null);setTimeout(()=>setMessage({type:'',text:''}),3000);}catch(error){setMessage({type:'error',text:'❌ Error al actualizar vehículo'});}finally{setLoading(false);}};// Guardar cambios de trabajador\nconst saveWorkerChanges=async()=>{if(!editingItem)return;setLoading(true);try{// Actualizar en Realtime Database\nconst trabajadorRef=ref(database,`trabajadores/${editingItem.id}`);await update(trabajadorRef,{nombre:editFormData.nombre,telefono:editFormData.telefono,estado:editFormData.estado,ultimaActualizacion:new Date().toISOString()});// Actualizar en Firestore\nconst userRef=doc(firestore,'users',editingItem.id);await updateDoc(userRef,{name:editFormData.nombre,phone:editFormData.telefono,vehicleId:editFormData.vehicleId||null,updatedAt:new Date().toISOString(),updatedBy:currentUser.uid});setMessage({type:'success',text:'✅ Trabajador actualizado exitosamente'});setShowEditModal(false);setEditingItem(null);setTimeout(()=>setMessage({type:'',text:''}),3000);}catch(error){setMessage({type:'error',text:'❌ Error al actualizar trabajador'});}finally{setLoading(false);}};// Filtrar vehículos\nconst filteredVehiculos=vehiculos.filter(v=>{var _v$nombre,_v$patente,_v$marca;const matchesSearch=((_v$nombre=v.nombre)===null||_v$nombre===void 0?void 0:_v$nombre.toLowerCase().includes(searchTerm.toLowerCase()))||((_v$patente=v.patente)===null||_v$patente===void 0?void 0:_v$patente.toLowerCase().includes(searchTerm.toLowerCase()))||((_v$marca=v.marca)===null||_v$marca===void 0?void 0:_v$marca.toLowerCase().includes(searchTerm.toLowerCase()));const matchesFilter=filterStatus==='todos'||v.estado===filterStatus;return matchesSearch&&matchesFilter;});// Filtrar trabajadores\nconst filteredTrabajadores=trabajadores.filter(t=>{var _t$nombre,_t$email,_t$telefono;const matchesSearch=((_t$nombre=t.nombre)===null||_t$nombre===void 0?void 0:_t$nombre.toLowerCase().includes(searchTerm.toLowerCase()))||((_t$email=t.email)===null||_t$email===void 0?void 0:_t$email.toLowerCase().includes(searchTerm.toLowerCase()))||((_t$telefono=t.telefono)===null||_t$telefono===void 0?void 0:_t$telefono.toLowerCase().includes(searchTerm.toLowerCase()));const matchesFilter=filterStatus==='todos'||t.estado&&t.estado===filterStatus||filterStatus==='disponible'&&!t.estado;// Si no tiene estado, considerarlo disponible\nreturn matchesSearch&&matchesFilter;});const trabajadoresReales=filteredTrabajadores.filter(t=>!t.role||t.role==='trabajador');const administradores=filteredTrabajadores.filter(t=>t.role==='admin');const superAdmins=filteredTrabajadores.filter(t=>t.role==='superadmin');// Obtener estadísticas\nconst getStats=()=>{const vehicleStats={total:vehiculos.length,disponibles:vehiculos.filter(v=>v.estado==='disponible').length,enUso:vehiculos.filter(v=>v.estado==='en_uso').length,mantenimiento:vehiculos.filter(v=>v.estado==='mantenimiento').length};const workerStats={total:trabajadores.length,trabajadores:trabajadores.filter(t=>!t.role||t.role==='trabajador').length,administradores:trabajadores.filter(t=>t.role==='admin').length,superadmins:trabajadores.filter(t=>t.role==='superadmin').length,activos:trabajadores.filter(t=>t.ubicacion&&new Date()-new Date(t.ubicacion.timestamp)<300000).length,enRuta:trabajadores.filter(t=>t.estado==='en_camino').length,trabajando:trabajadores.filter(t=>t.estado==='trabajando').length,disponibles:trabajadores.filter(t=>t.estado==='disponible'||!t.estado).length};return{vehicleStats,workerStats};};const{vehicleStats,workerStats}=getStats();// Toggle expandir/contraer tarjeta\nconst toggleCardExpansion=id=>{setExpandedCards(prev=>({...prev,[id]:!prev[id]}));};// NUEVO: Modal de Documentos\nconst DocumentsModal=()=>{var _selectedDocuments$li,_selectedDocuments$li2,_selectedDocuments$ce,_selectedDocuments$ce2,_selectedDocuments$li3,_selectedDocuments$ce3,_selectedDocuments$ce4;if(!showDocumentsModal||!selectedDocuments||!documentOwner)return null;const isVehicle=documentOwner.type==='vehicle';return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.5)',display:'flex',justifyContent:'center',alignItems:isMobile?'flex-start':'center',zIndex:3000,padding:isMobile?'10px':'20px',overflowY:'auto'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',maxWidth:isMobile?'100%':'900px',width:'100%',maxHeight:isMobile?'none':'90vh',height:isMobile?'auto':'auto',overflow:'auto',padding:isMobile?'20px':'30px',marginTop:isMobile?'20px':'0',marginBottom:isMobile?'20px':'0'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'25px',flexWrap:'wrap',gap:'10px'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{margin:0,color:'#1f2937',fontSize:isMobile?'20px':'24px',flex:1},children:[\"\\uD83D\\uDCC4 Documentos de \",documentOwner.name]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowDocumentsModal(false);setSelectedDocuments(null);setDocumentOwner(null);},style:{padding:'8px',background:'#6b7280',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'18px',minWidth:'40px',height:'40px',display:'flex',alignItems:'center',justifyContent:'center'},children:\"\\u2716\"})]}),loadingDocuments?/*#__PURE__*/_jsxs(\"div\",{style:{padding:'40px',textAlign:'center',color:'#6b7280'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'24px',marginBottom:'10px'},children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Cargando documentos...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[isVehicle?/*#__PURE__*/// Documentos de Vehículo - MOSTRAR TODOS LOS DOCUMENTOS\n_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fit, minmax(280px, 1fr))',gap:'20px'},children:Object.entries(selectedDocuments).map(_ref5=>{let[key,documento]=_ref5;// Saltar el array de \"otros\" ya que lo procesaremos después\nif(key==='otros'||!documento||typeof documento!=='object')return null;// Determinar el icono y nombre del documento\nconst getDocumentInfo=docKey=>{const docTypes={permisoCirculacion:{icon:'📋',name:'Permiso de Circulación'},revisionTecnica:{icon:'🔧',name:'Revisión Técnica'},seguroObligatorio:{icon:'🛡️',name:'Seguro Obligatorio'},soap:{icon:'🛡️',name:'SOAP'},padronMunicipal:{icon:'🏛️',name:'Padrón Municipal'},certificadoGases:{icon:'💨',name:'Certificado de Gases'},seguroComplementario:{icon:'🔒',name:'Seguro Complementario'},certificadoRevision:{icon:'📝',name:'Certificado de Revisión'},permisoTransporte:{icon:'🚛',name:'Permiso de Transporte'},certificadoOperatividad:{icon:'✅',name:'Certificado de Operatividad'}};return docTypes[docKey]||{icon:'📄',name:docKey.replace(/([A-Z])/g,' $1').replace(/^./,str=>str.toUpperCase())};};const docInfo=getDocumentInfo(key);return/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'8px',padding:'15px',background:documento!==null&&documento!==void 0&&documento.url?'#f0fdf4':'white'},children:[/*#__PURE__*/_jsxs(\"h5\",{style:{margin:'0 0 10px 0',fontSize:'14px',fontWeight:'600',color:'#374151'},children:[docInfo.icon,\" \",docInfo.name]}),documento!==null&&documento!==void 0&&documento.url?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px',background:'#f9fafb',borderRadius:'6px',marginBottom:'8px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',color:'#1f2937',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:documento.nombre||'Documento'}),documento.fecha&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'11px',marginTop:'2px'},children:new Date(documento.fecha).toLocaleDateString('es-CL')}),documento.tamaño>0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#9ca3af',fontSize:'10px',marginTop:'2px'},children:formatFileSize(documento.tamaño)})]}),/*#__PURE__*/_jsx(\"a\",{href:documento.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{display:'block',padding:'6px',background:'#3b82f6',color:'white',textAlign:'center',borderRadius:'6px',textDecoration:'none',fontSize:'12px'},children:\"\\uD83D\\uDC41\\uFE0F Ver Documento\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',background:'#f9fafb',borderRadius:'6px',textAlign:'center',color:'#6b7280',fontSize:'12px'},children:\"Sin documento\"})]},key);})}),selectedDocuments.otros&&selectedDocuments.otros.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'30px',padding:'20px',background:'#f9fafb',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 15px 0',fontSize:'16px',fontWeight:'600',color:'#374151'},children:\"\\uD83D\\uDCDA Otros Documentos\"}),/*#__PURE__*/_jsx(\"div\",{children:selectedDocuments.otros.map((doc,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px',background:'white',borderRadius:'6px',marginBottom:'8px',display:'flex',justifyContent:'space-between',alignItems:'center',border:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,minWidth:0},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'500',fontSize:'13px',color:'#1f2937'},children:[\"\\uD83D\\uDCDC \",doc.nombre||'Documento adicional']}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#6b7280',fontSize:'11px',marginTop:'2px'},children:[doc.tamaño&&formatFileSize(doc.tamaño),doc.fecha&&` • ${new Date(doc.fecha).toLocaleDateString('es-CL')}`]})]}),/*#__PURE__*/_jsx(\"a\",{href:doc.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{padding:'4px 8px',background:'#3b82f6',color:'white',borderRadius:'4px',textDecoration:'none',fontSize:'11px',marginLeft:'10px'},children:\"Ver\"})]},index))})]})]}):/*#__PURE__*/// Documentos de Trabajador\n_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fit, minmax(280px, 1fr))',gap:'20px',marginBottom:'30px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'8px',padding:'15px',background:(_selectedDocuments$li=selectedDocuments.licenciaConducir)!==null&&_selectedDocuments$li!==void 0&&_selectedDocuments$li.url?'#f0fdf4':'white'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 10px 0',fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"\\uD83D\\uDE97 Licencia de Conducir\"}),(_selectedDocuments$li2=selectedDocuments.licenciaConducir)!==null&&_selectedDocuments$li2!==void 0&&_selectedDocuments$li2.url?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px',background:'#f9fafb',borderRadius:'6px',marginBottom:'8px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',color:'#1f2937'},children:selectedDocuments.licenciaConducir.nombre||'Documento'}),selectedDocuments.licenciaConducir.fecha&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'11px',marginTop:'2px'},children:new Date(selectedDocuments.licenciaConducir.fecha).toLocaleDateString('es-CL')}),selectedDocuments.licenciaConducir.tamaño>0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#9ca3af',fontSize:'10px',marginTop:'2px'},children:formatFileSize(selectedDocuments.licenciaConducir.tamaño)})]}),/*#__PURE__*/_jsx(\"a\",{href:selectedDocuments.licenciaConducir.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{display:'block',padding:'6px',background:'#3b82f6',color:'white',textAlign:'center',borderRadius:'6px',textDecoration:'none',fontSize:'12px'},children:\"\\uD83D\\uDC41\\uFE0F Ver Documento\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',background:'#f9fafb',borderRadius:'6px',textAlign:'center',color:'#6b7280',fontSize:'12px'},children:\"Sin documento\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'8px',padding:'15px',background:(_selectedDocuments$ce=selectedDocuments.certificadoOperador)!==null&&_selectedDocuments$ce!==void 0&&_selectedDocuments$ce.url?'#f0fdf4':'white'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 10px 0',fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"\\uD83C\\uDFD7\\uFE0F Certificado de Operador\"}),(_selectedDocuments$ce2=selectedDocuments.certificadoOperador)!==null&&_selectedDocuments$ce2!==void 0&&_selectedDocuments$ce2.url?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px',background:'#f9fafb',borderRadius:'6px',marginBottom:'8px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',color:'#1f2937'},children:selectedDocuments.certificadoOperador.nombre||'Documento'}),selectedDocuments.certificadoOperador.fecha&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'11px',marginTop:'2px'},children:new Date(selectedDocuments.certificadoOperador.fecha).toLocaleDateString('es-CL')}),selectedDocuments.certificadoOperador.tamaño>0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#9ca3af',fontSize:'10px',marginTop:'2px'},children:formatFileSize(selectedDocuments.certificadoOperador.tamaño)})]}),/*#__PURE__*/_jsx(\"a\",{href:selectedDocuments.certificadoOperador.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{display:'block',padding:'6px',background:'#3b82f6',color:'white',textAlign:'center',borderRadius:'6px',textDecoration:'none',fontSize:'12px'},children:\"\\uD83D\\uDC41\\uFE0F Ver Documento\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',background:'#f9fafb',borderRadius:'6px',textAlign:'center',color:'#6b7280',fontSize:'12px'},children:\"Sin documento\"})]})]}),selectedDocuments.certificados&&selectedDocuments.certificados.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',background:'#f9fafb',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 15px 0',fontSize:'16px',fontWeight:'600',color:'#374151'},children:\"\\uD83D\\uDCDA Certificados de Capacitaci\\xF3n\"}),/*#__PURE__*/_jsx(\"div\",{children:selectedDocuments.certificados.map((cert,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px',background:'white',borderRadius:'6px',marginBottom:'8px',display:'flex',justifyContent:'space-between',alignItems:'center',border:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,minWidth:0},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'500',fontSize:'13px',color:'#1f2937'},children:[\"\\uD83D\\uDCDC \",cert.nombre||'Certificado']}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#6b7280',fontSize:'11px',marginTop:'2px'},children:[cert.tamaño&&formatFileSize(cert.tamaño),cert.fecha&&` • ${new Date(cert.fecha).toLocaleDateString('es-CL')}`]})]}),/*#__PURE__*/_jsx(\"a\",{href:cert.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{padding:'4px 8px',background:'#3b82f6',color:'white',borderRadius:'4px',textDecoration:'none',fontSize:'11px',marginLeft:'10px'},children:\"Ver\"})]},index))})]})]}),isVehicle?Object.keys(selectedDocuments).length===0&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'40px',textAlign:'center',color:'#6b7280',background:'#f9fafb',borderRadius:'8px',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'10px'},children:\"\\uD83D\\uDCED\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No hay documentos registrados para este veh\\xEDculo\"})]}):!((_selectedDocuments$li3=selectedDocuments.licenciaConducir)!==null&&_selectedDocuments$li3!==void 0&&_selectedDocuments$li3.url)&&!((_selectedDocuments$ce3=selectedDocuments.certificadoOperador)!==null&&_selectedDocuments$ce3!==void 0&&_selectedDocuments$ce3.url)&&((_selectedDocuments$ce4=selectedDocuments.certificados)===null||_selectedDocuments$ce4===void 0?void 0:_selectedDocuments$ce4.length)===0&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'40px',textAlign:'center',color:'#6b7280',background:'#f9fafb',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'10px'},children:\"\\uD83D\\uDCED\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No hay documentos registrados para este trabajador\"})]})]})]})});};// Agregar este componente antes del return principal\nconst WorkerDetailModal=()=>{var _selectedWorker$licen,_selectedWorker$licen2,_selectedWorker$licen3,_selectedWorker$licen4,_selectedWorker$licen5,_selectedWorker$licen6;if(!showWorkerDetailModal||!selectedWorker)return null;const userData=users.find(u=>u.id===selectedWorker.id);const vehiculo=vehiculos.find(v=>v.operadorAsignado===selectedWorker.id);// Calcular estado de licencia\nlet estadoLicencia=null;if(selectedWorker.fechaVencimientoLicencia&&((_selectedWorker$licen=selectedWorker.licenciasConducir)===null||_selectedWorker$licen===void 0?void 0:_selectedWorker$licen.length)>0){const fechaVencimiento=new Date(selectedWorker.fechaVencimientoLicencia);const hoy=new Date();const diasRestantes=Math.ceil((fechaVencimiento-hoy)/(1000*60*60*24));if(diasRestantes<0){estadoLicencia={tipo:'vencida',texto:'VENCIDA',color:'#ef4444',dias:diasRestantes};}else if(diasRestantes<=14){estadoLicencia={tipo:'porVencer',texto:`${diasRestantes} días`,color:'#f59e0b',dias:diasRestantes};}else{estadoLicencia={tipo:'vigente',texto:'Vigente',color:'#22c55e',dias:diasRestantes};}}const handleToggleLicenseBlock=async()=>{setUpdatingLicense(true);try{const nuevoEstadoBloqueo=!selectedWorker.licenciaBloqueada;// Actualizar en Firestore\nconst userRef=doc(firestore,'users',selectedWorker.id);await updateDoc(userRef,{licenciaBloqueada:nuevoEstadoBloqueo,motivoBloqueo:nuevoEstadoBloqueo?'Bloqueado por administrador':'',fechaBloqueo:nuevoEstadoBloqueo?new Date().toISOString():'',updatedAt:new Date().toISOString(),updatedBy:currentUser.uid});// Actualizar en Realtime Database\nconst trabajadorRef=ref(database,`trabajadores/${selectedWorker.id}`);await update(trabajadorRef,{licenciaBloqueada:nuevoEstadoBloqueo,motivoBloqueo:nuevoEstadoBloqueo?'Bloqueado por administrador':'',fechaBloqueo:nuevoEstadoBloqueo?new Date().toISOString():'',ultimaActualizacion:new Date().toISOString()});// Si se bloquea la licencia y tiene vehículo asignado, desasignarlo\nif(nuevoEstadoBloqueo&&vehiculo){const vehiculoRef=ref(database,`vehiculos/${vehiculo.id}`);await update(vehiculoRef,{operadorAsignado:null,ultimaActualizacion:new Date().toISOString()});}setMessage({type:'success',text:`✅ Licencia ${nuevoEstadoBloqueo?'bloqueada':'habilitada'} exitosamente`});// Actualizar el trabajador seleccionado\nsetSelectedWorker({...selectedWorker,licenciaBloqueada:nuevoEstadoBloqueo,motivoBloqueo:nuevoEstadoBloqueo?'Bloqueado por administrador':'',fechaBloqueo:nuevoEstadoBloqueo?new Date().toISOString():''});// Recargar datos\nloadTrabajadores();loadUsers();}catch(error){console.error('Error al actualizar licencia:',error);setMessage({type:'error',text:'❌ Error al actualizar el estado de la licencia'});}finally{setUpdatingLicense(false);}};return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.5)',display:'flex',justifyContent:'center',alignItems:isMobile?'flex-start':'center',zIndex:3000,padding:isMobile?'10px':'20px',overflowY:'auto'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',maxWidth:isMobile?'100%':'800px',width:'100%',maxHeight:isMobile?'none':'90vh',overflow:'auto',padding:isMobile?'20px':'30px',marginTop:isMobile?'20px':'0',marginBottom:isMobile?'20px':'0'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'25px',paddingBottom:'15px',borderBottom:'2px solid #e5e7eb'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{margin:0,color:'#1f2937',fontSize:isMobile?'20px':'24px',display:'flex',alignItems:'center',gap:'10px'},children:[\"\\uD83D\\uDC77 \",selectedWorker.nombre||(userData===null||userData===void 0?void 0:userData.name)||'Trabajador']}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowWorkerDetailModal(false);setSelectedWorker(null);},style:{padding:'8px',background:'#6b7280',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'18px',minWidth:'40px',height:'40px'},children:\"\\u2716\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#f9fafb',padding:'20px',borderRadius:'8px',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 15px 0',fontSize:'16px',color:'#374151'},children:\"\\uD83D\\uDCCB Informaci\\xF3n Personal\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(2, 1fr)',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"RUT\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',fontSize:'15px'},children:selectedWorker.rut||(userData===null||userData===void 0?void 0:userData.rut)||'No registrado'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',fontSize:'15px'},children:selectedWorker.email||(userData===null||userData===void 0?void 0:userData.email)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',fontSize:'15px'},children:selectedWorker.telefono||(userData===null||userData===void 0?void 0:userData.phone)||'No registrado'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"Estado\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',fontSize:'15px'},children:/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 10px',borderRadius:'20px',fontSize:'12px',background:selectedWorker.estado==='trabajando'?'#dcfce7':selectedWorker.estado==='en_camino'?'#ede9fe':selectedWorker.estado==='disponible'?'#e0f2fe':'#f3f4f6',color:selectedWorker.estado==='trabajando'?'#15803d':selectedWorker.estado==='en_camino'?'#6b21a8':selectedWorker.estado==='disponible'?'#0891b2':'#6b7280'},children:selectedWorker.estado==='trabajando'?'🔧 Trabajando':selectedWorker.estado==='en_camino'?'🚗 En Camino':selectedWorker.estado==='disponible'?'✅ Disponible':'⏸️ Inactivo'})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:selectedWorker.licenciaBloqueada?'#fee2e2':'#f9fafb',padding:'20px',borderRadius:'8px',marginBottom:'20px',border:selectedWorker.licenciaBloqueada?'2px solid #ef4444':'none'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:'0 0 15px 0',fontSize:'16px',color:selectedWorker.licenciaBloqueada?'#991b1b':'#374151',display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDE97 Informaci\\xF3n de Licencia\"}),selectedWorker.licenciaBloqueada&&/*#__PURE__*/_jsx(\"span\",{style:{background:'#ef4444',color:'white',padding:'4px 10px',borderRadius:'4px',fontSize:'12px',fontWeight:'600'},children:\"\\uD83D\\uDEAB BLOQUEADA\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(2, 1fr)',gap:'15px',marginBottom:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"Licencias\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',fontSize:'15px'},children:((_selectedWorker$licen2=selectedWorker.licenciasConducir)===null||_selectedWorker$licen2===void 0?void 0:_selectedWorker$licen2.length)>0?/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:'5px',marginTop:'5px'},children:selectedWorker.licenciasConducir.map(lic=>/*#__PURE__*/_jsxs(\"span\",{style:{padding:'3px 8px',background:'#3b82f6',color:'white',borderRadius:'4px',fontSize:'12px',fontWeight:'500'},children:[\"Clase \",lic]},lic))}):'Sin licencia registrada'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"Vencimiento\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',fontSize:'15px'},children:selectedWorker.fechaVencimientoLicencia?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{children:new Date(selectedWorker.fechaVencimientoLicencia).toLocaleDateString('es-CL')}),estadoLicencia&&/*#__PURE__*/_jsx(\"span\",{style:{padding:'2px 8px',borderRadius:'4px',fontSize:'11px',fontWeight:'600',background:estadoLicencia.color+'20',color:estadoLicencia.color,border:`1px solid ${estadoLicencia.color}`},children:estadoLicencia.tipo==='vencida'?'⚠️ VENCIDA':estadoLicencia.tipo==='porVencer'?`⚠️ Vence en ${estadoLicencia.dias} días`:'✅ Vigente'})]}):'No registrado'})]}),selectedWorker.observacionesLicencia&&/*#__PURE__*/_jsxs(\"div\",{style:{gridColumn:isMobile?'span 1':'span 2'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"Observaciones/Restricciones\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',fontSize:'14px',padding:'10px',background:'white',borderRadius:'6px',marginTop:'5px'},children:selectedWorker.observacionesLicencia})]}),selectedWorker.licenciaBloqueada&&/*#__PURE__*/_jsxs(\"div\",{style:{gridColumn:isMobile?'span 1':'span 2'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#991b1b',fontSize:'13px',fontWeight:'600'},children:\"Motivo del Bloqueo\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',padding:'10px',background:'#fef2f2',borderRadius:'6px',marginTop:'5px',color:'#7f1d1d'},children:[selectedWorker.motivoBloqueo||'No especificado',selectedWorker.fechaBloqueo&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',marginTop:'5px',color:'#991b1b'},children:[\"Bloqueado el: \",new Date(selectedWorker.fechaBloqueo).toLocaleDateString('es-CL')]})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleToggleLicenseBlock,disabled:updatingLicense||!((_selectedWorker$licen3=selectedWorker.licenciasConducir)!==null&&_selectedWorker$licen3!==void 0&&_selectedWorker$licen3.length),style:{width:'100%',padding:'12px',background:selectedWorker.licenciaBloqueada?'#22c55e':'#ef4444',color:'white',border:'none',borderRadius:'6px',fontSize:'14px',fontWeight:'600',cursor:updatingLicense||!((_selectedWorker$licen4=selectedWorker.licenciasConducir)!==null&&_selectedWorker$licen4!==void 0&&_selectedWorker$licen4.length)?'not-allowed':'pointer',opacity:updatingLicense||!((_selectedWorker$licen5=selectedWorker.licenciasConducir)!==null&&_selectedWorker$licen5!==void 0&&_selectedWorker$licen5.length)?0.5:1},children:updatingLicense?'Procesando...':selectedWorker.licenciaBloqueada?'✅ Habilitar Licencia':'🚫 Bloquear Licencia'}),!((_selectedWorker$licen6=selectedWorker.licenciasConducir)!==null&&_selectedWorker$licen6!==void 0&&_selectedWorker$licen6.length)&&/*#__PURE__*/_jsx(\"small\",{style:{color:'#6b7280',fontSize:'12px',display:'block',marginTop:'5px',textAlign:'center'},children:\"No se puede gestionar sin licencia registrada\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#f9fafb',padding:'20px',borderRadius:'8px',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 15px 0',fontSize:'16px',color:'#374151'},children:\"\\uD83D\\uDE9B Veh\\xEDculo Asignado\"}),vehiculo?/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(2, 1fr)',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"Nombre\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',fontSize:'15px'},children:vehiculo.nombre})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"Patente\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',fontSize:'15px'},children:vehiculo.patente})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"Marca/Modelo\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'500',fontSize:'15px'},children:[vehiculo.marca,\" \",vehiculo.modelo]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"Estado\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',fontSize:'15px'},children:/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 10px',borderRadius:'20px',fontSize:'12px',background:vehiculo.estado==='disponible'?'#dcfce7':vehiculo.estado==='en_uso'?'#dbeafe':vehiculo.estado==='mantenimiento'?'#fef3c7':'#fee2e2',color:vehiculo.estado==='disponible'?'#15803d':vehiculo.estado==='en_uso'?'#1e40af':vehiculo.estado==='mantenimiento'?'#92400e':'#991b1b'},children:vehiculo.estado==='disponible'?'✅ Disponible':vehiculo.estado==='en_uso'?'🔧 En Uso':vehiculo.estado==='mantenimiento'?'🔧 Mantenimiento':'❌ Fuera de Servicio'})})]})]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',background:'white',borderRadius:'6px',textAlign:'center',color:'#6b7280'},children:\"Sin veh\\xEDculo asignado\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{openEditModal(selectedWorker,'worker');setShowWorkerDetailModal(false);},style:{flex:1,padding:'12px',background:'#3b82f6',color:'white',border:'none',borderRadius:'6px',fontSize:'14px',fontWeight:'500',cursor:'pointer'},children:\"\\u270F\\uFE0F Editar Informaci\\xF3n\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{loadWorkerDocuments(selectedWorker.id,selectedWorker);setShowWorkerDetailModal(false);},style:{flex:1,padding:'12px',background:'#10b981',color:'white',border:'none',borderRadius:'6px',fontSize:'14px',fontWeight:'500',cursor:'pointer'},children:\"\\uD83D\\uDCC4 Ver Documentos\"})]})]})});};// Función para renderizar tarjetas de usuario (reutilizable)\nconst renderUserCard=(usuario,rolColor)=>{var _usuario$licenciasCon;const userData=users.find(u=>u.id===usuario.id);const vehiculo=vehiculos.find(v=>v.operadorAsignado===usuario.id);const isExpanded=expandedCards[usuario.id];const isGPSActive=usuario.ubicacion&&new Date()-new Date(usuario.ubicacion.timestamp)<60000;let tieneProblemaLicencia=false;if(usuario.licenciaBloqueada){tieneProblemaLicencia=true;}else if(usuario.fechaVencimientoLicencia){const fechaVencimiento=new Date(usuario.fechaVencimientoLicencia);const hoy=new Date();const diasRestantes=Math.ceil((fechaVencimiento-hoy)/(1000*60*60*24));if(diasRestantes<=14)tieneProblemaLicencia=true;}return/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',overflow:'hidden',transition:'all 0.3s ease',border:isGPSActive?'2px solid #10b981':tieneProblemaLicencia?'2px solid #f59e0b':'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'15px 20px',background:rolColor,borderBottom:'1px solid #e5e7eb'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'18px',fontWeight:'600',color:'#1f2937'},children:[usuario.role==='admin'?'👨‍💼':usuario.role==='superadmin'?'🔐':'👷',\" \",usuario.nombre||(userData===null||userData===void 0?void 0:userData.name)||'Usuario']}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',alignItems:'center'},children:[usuario.licenciaBloqueada&&/*#__PURE__*/_jsx(\"span\",{style:{padding:'2px 6px',background:'#ef4444',color:'white',borderRadius:'4px',fontSize:'10px',fontWeight:'600'},children:\"\\uD83D\\uDEAB LIC.BLOQ\"}),isGPSActive&&/*#__PURE__*/_jsx(\"span\",{style:{width:'10px',height:'10px',borderRadius:'50%',background:'#10b981',animation:'pulse 2s infinite'},title:\"GPS Activo\"}),/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 10px',borderRadius:'20px',fontSize:'12px',fontWeight:'500',background:'white',color:usuario.role==='admin'?'#1e40af':usuario.role==='superadmin'?'#6b21a8':usuario.estado==='trabajando'?'#15803d':usuario.estado==='disponible'?'#0891b2':'#6b7280'},children:usuario.role==='admin'?'Administrador':usuario.role==='superadmin'?'Super Admin':usuario.estado==='trabajando'?'🔧 Trabajando':usuario.estado==='disponible'?'✅ Disponible':'⏸️ Inactivo'})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'10px',fontSize:'14px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCE7 Email:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500',fontSize:'13px'},children:(userData===null||userData===void 0?void 0:userData.email)||usuario.email||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCF1 Tel\\xE9fono:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:(userData===null||userData===void 0?void 0:userData.phone)||usuario.telefono||'N/A'})]}),(!usuario.role||usuario.role==='trabajador')&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDE9B Veh\\xEDculo:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:(vehiculo===null||vehiculo===void 0?void 0:vehiculo.nombre)||'Sin asignar'})]}),usuario.localidad&&(usuario.role==='admin'||usuario.role==='superadmin')&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCCD Localidad:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:usuario.localidad})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDE97 Licencias:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:((_usuario$licenciasCon=usuario.licenciasConducir)===null||_usuario$licenciasCon===void 0?void 0:_usuario$licenciasCon.length)>0?usuario.licenciasConducir.join(', '):usuario.licenciaConducir||'Sin licencia'})]}),(!usuario.role||usuario.role==='trabajador')&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCCD GPS:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500',color:isGPSActive?'#10b981':'#ef4444'},children:isGPSActive?'🟢 Activo':'🔴 Inactivo'})]}),isExpanded&&/*#__PURE__*/_jsxs(\"div\",{style:{borderTop:'1px solid #e5e7eb',paddingTop:'10px',marginTop:'5px'},children:[usuario.fechaVencimientoLicencia&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCC5 Vence Licencia:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500',fontSize:'13px'},children:new Date(usuario.fechaVencimientoLicencia).toLocaleDateString('es-CL')})]}),usuario.observacionesLicencia&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',padding:'10px',background:'#fef3c7',borderRadius:'6px'},children:[/*#__PURE__*/_jsx(\"strong\",{style:{color:'#92400e',fontSize:'12px'},children:\"\\u26A0\\uFE0F Restricciones:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'5px 0 0 0',fontSize:'13px'},children:usuario.observacionesLicencia})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(2, 1fr)',gap:'8px',marginTop:'15px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleCardExpansion(usuario.id),style:{padding:isMobile?'6px':'8px',background:'#f3f4f6',color:'#374151',border:'none',borderRadius:'6px',fontSize:isMobile?'11px':'13px',cursor:'pointer',fontWeight:'500'},children:isExpanded?'➖ Menos':'➕ Más'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedWorker(usuario);setShowWorkerDetailModal(true);},style:{padding:isMobile?'6px':'8px',background:'#8b5cf6',color:'white',border:'none',borderRadius:'6px',fontSize:isMobile?'11px':'13px',cursor:'pointer',fontWeight:'500'},children:\"\\uD83D\\uDC41\\uFE0F Ver Todo\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadWorkerDocuments(usuario.id,usuario),style:{padding:isMobile?'6px':'8px',background:'#10b981',color:'white',border:'none',borderRadius:'6px',fontSize:isMobile?'11px':'13px',cursor:'pointer',fontWeight:'500'},children:\"\\uD83D\\uDCC4 Docs\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openEditModal(usuario,'worker'),style:{padding:isMobile?'6px':'8px',background:'#3b82f6',color:'white',border:'none',borderRadius:'6px',fontSize:isMobile?'11px':'13px',cursor:'pointer',fontWeight:'500'},children:\"\\u270F\\uFE0F Editar\"})]})]})]},usuario.id);};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',height:'100vh',background:'#f3f4f6'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:isMobile?'280px':'260px',background:'linear-gradient(135deg, #1e293b 0%, #334155 100%)',transition:'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',position:isMobile?'fixed':'relative',height:'100vh',zIndex:999,left:isMobile?isSidebarOpen?'0':'-280px':'0',boxShadow:'4px 0 20px rgba(0,0,0,0.3)',display:'flex',flexDirection:'column',overflow:'visible'// CAMBIAR A VISIBLE para permitir que el dropdown se muestre\n},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',borderBottom:'1px solid rgba(255,255,255,0.1)',display:'flex',alignItems:'center',gap:'12px',background:'rgba(0,0,0,0.2)',position:'relative'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'32px',filter:'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'},children:\"\\uD83D\\uDE9B\"}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,color:'white',fontSize:'18px',fontWeight:'600',letterSpacing:'0.5px'},children:\"Panel de Flota\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,color:'rgba(255,255,255,0.7)',fontSize:'12px'},children:\"Control de veh\\xEDculos\"})]}),isMobile&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsSidebarOpen(false),style:{position:'absolute',right:'15px',top:'50%',transform:'translateY(-50%)',background:'rgba(255,255,255,0.1)',border:'1px solid rgba(255,255,255,0.2)',borderRadius:'50%',width:'32px',height:'32px',display:'flex',alignItems:'center',justifyContent:'center',cursor:'pointer',color:'white',fontSize:'18px',transition:'all 0.2s ease',padding:0},onMouseEnter:e=>{e.currentTarget.style.background='rgba(255,255,255,0.2)';e.currentTarget.style.transform='translateY(-50%) scale(1.1)';},onMouseLeave:e=>{e.currentTarget.style.background='rgba(255,255,255,0.1)';e.currentTarget.style.transform='translateY(-50%) scale(1)';},\"aria-label\":\"Cerrar men\\xFA\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'10px',borderBottom:'1px solid rgba(255,255,255,0.1)',position:'relative',// Importante para el posicionamiento\nzIndex:1001// Mayor z-index\n},children:/*#__PURE__*/_jsx(\"div\",{style:{background:'rgba(255,255,255,0.1)',borderRadius:'8px',padding:'12px',display:'flex',alignItems:'center',gap:'10px',cursor:'pointer',position:'relative'// Añadir posición relativa\n},children:/*#__PURE__*/_jsx(NotificationSystem,{currentUser:currentUser,isMobile:isMobile,inSidebar:true,dropdownPosition:isMobile?'right':'right'// Forzar que el dropdown aparezca a la derecha\n,style:{position:'relative',zIndex:1002}})})}),currentUser.role==='superadmin'&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'10px'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('admin'),style:{width:'100%',padding:'12px 20px',background:'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'500',display:'flex',alignItems:'center',gap:'10px',transition:'all 0.3s ease',boxShadow:'0 2px 8px rgba(139, 92, 246, 0.3)'},onMouseEnter:e=>{e.currentTarget.style.transform='translateX(2px)';e.currentTarget.style.boxShadow='0 4px 12px rgba(139, 92, 246, 0.4)';},onMouseLeave:e=>{e.currentTarget.style.transform='translateX(0)';e.currentTarget.style.boxShadow='0 2px 8px rgba(139, 92, 246, 0.3)';},children:\"\\uD83D\\uDD10 Super Administrador\"})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',borderTop:'1px solid rgba(255,255,255,0.1)',background:'rgba(0,0,0,0.2)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'12px',marginBottom:'15px',color:'white'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'40px',height:'40px',background:'rgba(255,255,255,0.2)',borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'18px'},children:\"\\uD83D\\uDC64\"}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,minWidth:0},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',fontWeight:'500',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:currentUser.name||'Usuario'}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',opacity:0.7,overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:currentUser.email})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,style:{width:'100%',padding:'10px',background:'#ef4444',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'14px',fontWeight:'500',display:'flex',alignItems:'center',justifyContent:'center',gap:'8px',transition:'all 0.2s'},onMouseEnter:e=>{e.currentTarget.style.background='#dc2626';e.currentTarget.style.transform='scale(1.02)';},onMouseLeave:e=>{e.currentTarget.style.background='#ef4444';e.currentTarget.style.transform='scale(1)';},children:\"\\uD83D\\uDEAA Cerrar Sesi\\xF3n\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,overflow:'auto'},children:[isMobile&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'15px',borderBottom:'1px solid #e5e7eb',display:'flex',alignItems:'center',gap:'15px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsSidebarOpen(!isSidebarOpen),style:{background:'#1e293b',color:'white',border:'none',padding:'8px',borderRadius:'6px',cursor:'pointer',fontSize:'20px'},children:\"\\u2630\"}),/*#__PURE__*/_jsx(\"h1\",{style:{margin:0,fontSize:'18px',color:'#1e293b'},children:\"Panel de Gesti\\xF3n de Flota\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:isMobile?'10px':'15px',paddingTop:isMobile?'10px':'15px'// Reducir mucho más el padding superior\n},children:!isMobile&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',// CAMBIAR de 'absolute' a 'fixed'\ntop:'15px',left:'275px',// Justo después del sidebar (260px + 15px de margen)\nwidth:'120px',height:'120px',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',background:'white',borderRadius:'8px',padding:'10px',boxShadow:'0 2px 8px rgba(0,0,0,0.1)',zIndex:100,// Agregar z-index para que esté sobre otros elementos\nborder:'1px solid #e5e7eb'// Añadir un borde sutil\n},children:/*#__PURE__*/_jsx(\"img\",{src:\"/logoQuillon.jpg\"// Aquí colocar la ruta correcta del logo\n,alt:\"Municipalidad de Quill\\xF3n\",style:{maxWidth:'150px',maxHeight:'150px',objectFit:'contain'}})})}),/*#__PURE__*/_jsx(\"div\",{style:{padding:isMobile?'15px':'30px',paddingTop:isMobile?'20px':'30px'// Reducir el padding superior\n}}),/*#__PURE__*/_jsx(\"div\",{style:{padding:isMobile?'20px':'40px',// Aumentar padding\npaddingTop:isMobile?'30px':'50px'// Más espacio arriba\n}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:`repeat(auto-fit, minmax(${isMobile?'140px':'200px'}, 1fr))`,gap:'15px',marginBottom:'25px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'20px',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',borderLeft:'4px solid #3b82f6'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'28px',fontWeight:'bold',color:'#1f2937'},children:vehicleStats.total}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'13px'},children:\"\\uD83D\\uDE9B Total Veh\\xEDculos\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'20px',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',borderLeft:'4px solid #22c55e'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'28px',fontWeight:'bold',color:'#1f2937'},children:vehicleStats.disponibles}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'13px'},children:\"\\u2705 Disponibles\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'20px',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',borderLeft:'4px solid #f59e0b'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'28px',fontWeight:'bold',color:'#1f2937'},children:vehicleStats.enUso}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'13px'},children:\"\\uD83D\\uDD27 En Uso\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'20px',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',borderLeft:'4px solid #8b5cf6'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'28px',fontWeight:'bold',color:'#1f2937'},children:workerStats.total}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'13px'},children:\"\\uD83D\\uDC77 Trabajadores\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'20px',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',borderLeft:'4px solid #10b981'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'28px',fontWeight:'bold',color:'#1f2937'},children:workerStats.activos}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'13px'},children:\"\\uD83D\\uDFE2 GPS Activos\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'20px',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',borderLeft:'4px solid #06b6d4'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'28px',fontWeight:'bold',color:'#1f2937'},children:workerStats.trabajando}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'13px'},children:\"\\uD83D\\uDD27 Trabajando\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{background:'white',padding:'20px',borderRadius:'12px',marginBottom:'20px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'15px',flexWrap:'wrap',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uD83D\\uDD0D Buscar por nombre, patente, email...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{flex:isMobile?'1 1 100%':'1 1 300px',padding:'10px 15px',border:'1px solid #d1d5db',borderRadius:'8px',fontSize:'14px',outline:'none'}}),/*#__PURE__*/_jsxs(\"select\",{value:filterStatus,onChange:e=>setFilterStatus(e.target.value),style:{padding:'10px 15px',border:'1px solid #d1d5db',borderRadius:'8px',fontSize:'14px',cursor:'pointer',minWidth:'150px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"todos\",children:\"\\uD83D\\uDCCB Todos\"}),/*#__PURE__*/_jsx(\"option\",{value:\"disponible\",children:\"\\u2705 Disponible\"}),/*#__PURE__*/_jsx(\"option\",{value:\"en_uso\",children:\"\\uD83D\\uDD27 En Uso\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mantenimiento\",children:\"\\uD83D\\uDD27 Mantenimiento\"}),/*#__PURE__*/_jsx(\"option\",{value:\"en_camino\",children:\"\\uD83D\\uDE97 En Camino\"}),/*#__PURE__*/_jsx(\"option\",{value:\"trabajando\",children:\"\\uD83D\\uDC77 Trabajando\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginBottom:'20px',borderBottom:'2px solid #e5e7eb',flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('vehicles'),style:{padding:'12px 24px',background:activeTab==='vehicles'?'white':'transparent',color:activeTab==='vehicles'?'#1e293b':'#64748b',border:'none',borderBottom:activeTab==='vehicles'?'2px solid #3b82f6':'none',fontSize:'16px',fontWeight:activeTab==='vehicles'?'600':'400',cursor:'pointer',marginBottom:'-2px'},children:[\"\\uD83D\\uDE9B Veh\\xEDculos (\",filteredVehiculos.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('workers'),style:{padding:'12px 24px',background:activeTab==='workers'?'white':'transparent',color:activeTab==='workers'?'#1e293b':'#64748b',border:'none',borderBottom:activeTab==='workers'?'2px solid #3b82f6':'none',fontSize:'16px',fontWeight:activeTab==='workers'?'600':'400',cursor:'pointer',marginBottom:'-2px'},children:[\"\\uD83D\\uDC77 Trabajadores (\",trabajadoresReales.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('admins'),style:{padding:'12px 24px',background:activeTab==='admins'?'white':'transparent',color:activeTab==='admins'?'#1e293b':'#64748b',border:'none',borderBottom:activeTab==='admins'?'2px solid #3b82f6':'none',fontSize:'16px',fontWeight:activeTab==='admins'?'600':'400',cursor:'pointer',marginBottom:'-2px'},children:[\"\\uD83D\\uDC68\\u200D\\uD83D\\uDCBC Administradores (\",administradores.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('superadmins'),style:{padding:'12px 24px',background:activeTab==='superadmins'?'white':'transparent',color:activeTab==='superadmins'?'#1e293b':'#64748b',border:'none',borderBottom:activeTab==='superadmins'?'2px solid #3b82f6':'none',fontSize:'16px',fontWeight:activeTab==='superadmins'?'600':'400',cursor:'pointer',marginBottom:'-2px'},children:[\"\\uD83D\\uDD10 Super Admins (\",superAdmins.length,\")\"]})]}),activeTab==='vehicles'&&/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fill, minmax(350px, 1fr))',gap:'20px'},children:filteredVehiculos.map(vehiculo=>{var _vehiculo$kilometraje;const operador=users.find(u=>u.id===(vehiculo.trabajadorAsignado||vehiculo.operadorAsignado));const isExpanded=expandedCards[vehiculo.id];const isEditingOperator=quickEditMode[vehiculo.id];const isDisabled=vehiculo.habilitado===false;return/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',overflow:'hidden',transition:'all 0.3s ease',border:isDisabled?'2px solid #ef4444':vehiculo.estado==='en_uso'?'2px solid #3b82f6':'1px solid #e5e7eb',opacity:isDisabled?0.6:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'15px 20px',background:isDisabled?'#fee2e2':vehiculo.estado==='disponible'?'#dcfce7':vehiculo.estado==='en_uso'?'#dbeafe':vehiculo.estado==='mantenimiento'?'#fef3c7':'#fee2e2',borderBottom:'1px solid #e5e7eb'},children:[isDisabled&&/*#__PURE__*/_jsx(\"div\",{style:{background:'#ef4444',color:'white',padding:'4px 8px',borderRadius:'4px',fontSize:'12px',fontWeight:'bold',marginBottom:'10px'},children:\"\\uD83D\\uDEAB VEH\\xCDCULO BLOQUEADO\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'18px',fontWeight:'600',color:'#1f2937'},children:[vehiculo.tipo==='maquinaria'?'🏗️':'🚗',\" \",vehiculo.nombre]}),/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 10px',borderRadius:'20px',fontSize:'12px',fontWeight:'500',background:'white',color:vehiculo.estado==='disponible'?'#15803d':vehiculo.estado==='en_uso'?'#1e40af':vehiculo.estado==='mantenimiento'?'#92400e':'#991b1b'},children:vehiculo.estado==='disponible'?'✅ Disponible':vehiculo.estado==='en_uso'?'🔧 En Uso':vehiculo.estado==='mantenimiento'?'🔧 Mantenimiento':'❌ Fuera de Servicio'})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'10px',fontSize:'14px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCCB Patente:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:vehiculo.patente||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83C\\uDFED Marca/Modelo:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:'500'},children:[vehiculo.marca,\" \",vehiculo.modelo]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'8px',background:isEditingOperator?'#f0f9ff':'transparent',borderRadius:'6px',border:isEditingOperator?'2px solid #3b82f6':'none',margin:isEditingOperator?'-2px':'0'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',minWidth:'80px'},children:\"\\uD83D\\uDC64 Operador:\"}),isEditingOperator?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',alignItems:'center',flex:1},children:[/*#__PURE__*/_jsxs(\"select\",{style:{flex:1,padding:'6px',border:'1px solid #d1d5db',borderRadius:'4px',fontSize:'13px',background:'white'},defaultValue:vehiculo.operadorAsignado||'',onChange:e=>{quickUpdateOperator(vehiculo.id,e.target.value);},disabled:loading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Sin asignar\"}),users.filter(u=>u.role==='trabajador').map(user=>{// Verificar si el trabajador cumple con las licencias requeridas\nconst trabajador=trabajadores.find(t=>t.id===user.id);const licenciasTrabajador=(trabajador===null||trabajador===void 0?void 0:trabajador.licenciasConducir)||[];const cumpleRequisitos=!vehiculo.licenciasRequeridas||vehiculo.licenciasRequeridas.length===0||vehiculo.licenciasRequeridas.some(licReq=>licenciasTrabajador.includes(licReq));const tieneLicenciaBloqueada=trabajador===null||trabajador===void 0?void 0:trabajador.licenciaBloqueada;return/*#__PURE__*/_jsxs(\"option\",{value:user.id,disabled:!cumpleRequisitos||tieneLicenciaBloqueada,style:{color:!cumpleRequisitos||tieneLicenciaBloqueada?'#ef4444':'#000'},children:[user.name||user.email,!cumpleRequisitos&&' ❌ (Sin licencia requerida)',tieneLicenciaBloqueada&&' 🚫 (Licencia bloqueada)',cumpleRequisitos&&!tieneLicenciaBloqueada&&licenciasTrabajador.length>0&&` ✓ (${licenciasTrabajador.join(', ')})`]},user.id);})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuickEditMode({...quickEditMode,[vehiculo.id]:false}),style:{padding:'4px 8px',background:'#ef4444',color:'white',border:'none',borderRadius:'4px',fontSize:'12px',cursor:'pointer'},children:\"\\u2715\"})]}):/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:(operador===null||operador===void 0?void 0:operador.name)||'Sin asignar'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuickEditMode({...quickEditMode,[vehiculo.id]:true}),style:{padding:'2px 6px',background:'#3b82f6',color:'white',border:'none',borderRadius:'4px',fontSize:'11px',cursor:'pointer',fontWeight:'600'},children:\"Cambiar\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCCF Kilometraje:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:'500'},children:[((_vehiculo$kilometraje=vehiculo.kilometraje)===null||_vehiculo$kilometraje===void 0?void 0:_vehiculo$kilometraje.toLocaleString())||0,\" km\"]})]}),isExpanded&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{style:{borderTop:'1px solid #e5e7eb',paddingTop:'10px',marginTop:'5px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\u26FD Combustible:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:vehiculo.tipoCombustible||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDD27 \\xDAltimo Mant.:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:vehiculo.ultimoMantenimiento?new Date(vehiculo.ultimoMantenimiento).toLocaleDateString('es-CL'):'Sin registro'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCC5 Pr\\xF3ximo Mant.:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:vehiculo.proximoMantenimiento?new Date(vehiculo.proximoMantenimiento).toLocaleDateString('es-CL'):'No programado'})]}),vehiculo.observaciones&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',padding:'10px',background:'#f9fafb',borderRadius:'6px'},children:[/*#__PURE__*/_jsx(\"strong\",{style:{color:'#6b7280',fontSize:'12px'},children:\"\\uD83D\\uDCDD Observaciones:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'5px 0 0 0',fontSize:'13px'},children:vehiculo.observaciones})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'repeat(3, 1fr)':'repeat(3, 1fr)',gap:'8px',marginTop:'15px'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>toggleCardExpansion(vehiculo.id),style:{padding:isMobile?'6px':'8px',background:'#f3f4f6',color:'#374151',border:'none',borderRadius:'6px',fontSize:isMobile?'11px':'13px',cursor:'pointer',fontWeight:'500',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis'},children:[isExpanded?'➖':'➕',\" \",!isMobile&&(isExpanded?'Menos':'Más')]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>loadVehicleDocuments(vehiculo.id,vehiculo),style:{padding:isMobile?'6px':'8px',background:'#10b981',color:'white',border:'none',borderRadius:'6px',fontSize:isMobile?'11px':'13px',cursor:'pointer',fontWeight:'500',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis'},children:[\"\\uD83D\\uDCC4 \",!isMobile&&'Docs']}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>openEditModal(vehiculo,'vehicle'),style:{padding:isMobile?'6px':'8px',background:'#3b82f6',color:'white',border:'none',borderRadius:'6px',fontSize:isMobile?'11px':'13px',cursor:'pointer',fontWeight:'500',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis'},children:[\"\\u270F\\uFE0F \",!isMobile&&'Editar']})]})]})]},vehiculo.id);})}),activeTab==='workers'&&/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fill, minmax(350px, 1fr))',gap:'20px'},children:filteredTrabajadores.map(trabajador=>{var _trabajador$licencias;const userData=users.find(u=>u.id===trabajador.id);const vehiculo=vehiculos.find(v=>v.operadorAsignado===trabajador.id);const isExpanded=expandedCards[trabajador.id];const isGPSActive=trabajador.ubicacion&&new Date()-new Date(trabajador.ubicacion.timestamp)<60000;// Calcular estado de licencia\nlet tieneProblemaLicencia=false;if(trabajador.licenciaBloqueada){tieneProblemaLicencia=true;}else if(trabajador.fechaVencimientoLicencia){const fechaVencimiento=new Date(trabajador.fechaVencimientoLicencia);const hoy=new Date();const diasRestantes=Math.ceil((fechaVencimiento-hoy)/(1000*60*60*24));if(diasRestantes<=14)tieneProblemaLicencia=true;}return/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',overflow:'hidden',transition:'all 0.3s ease',border:isGPSActive?'2px solid #10b981':tieneProblemaLicencia?'2px solid #f59e0b':'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'15px 20px',background:trabajador.estado==='en_camino'?'#ede9fe':trabajador.estado==='trabajando'?'#dcfce7':trabajador.estado==='disponible'?'#e0f2fe':'#f3f4f6',borderBottom:'1px solid #e5e7eb'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'18px',fontWeight:'600',color:'#1f2937'},children:[\"\\uD83D\\uDC77 \",trabajador.nombre||(userData===null||userData===void 0?void 0:userData.name)||'Trabajador']}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',alignItems:'center'},children:[trabajador.licenciaBloqueada&&/*#__PURE__*/_jsx(\"span\",{style:{padding:'2px 6px',background:'#ef4444',color:'white',borderRadius:'4px',fontSize:'10px',fontWeight:'600'},children:\"\\uD83D\\uDEAB LIC.BLOQ\"}),isGPSActive&&/*#__PURE__*/_jsx(\"span\",{style:{width:'10px',height:'10px',borderRadius:'50%',background:'#10b981',animation:'pulse 2s infinite'},title:\"GPS Activo\"}),/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 10px',borderRadius:'20px',fontSize:'12px',fontWeight:'500',background:'white',color:trabajador.estado==='en_camino'?'#6b21a8':trabajador.estado==='trabajando'?'#15803d':trabajador.estado==='disponible'?'#0891b2':'#6b7280'},children:trabajador.estado==='en_camino'?'🚗 En Camino':trabajador.estado==='trabajando'?'🔧 Trabajando':trabajador.estado==='disponible'?'✅ Disponible':'⏸️ Inactivo'})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'10px',fontSize:'14px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCE7 Email:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500',fontSize:'13px'},children:(userData===null||userData===void 0?void 0:userData.email)||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCF1 Tel\\xE9fono:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:(userData===null||userData===void 0?void 0:userData.phone)||trabajador.telefono||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDE9B Veh\\xEDculo:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:(vehiculo===null||vehiculo===void 0?void 0:vehiculo.nombre)||'Sin asignar'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDE97 Licencias:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:((_trabajador$licencias=trabajador.licenciasConducir)===null||_trabajador$licencias===void 0?void 0:_trabajador$licencias.length)>0?trabajador.licenciasConducir.join(', '):trabajador.licenciaConducir||'Sin licencia'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCCD GPS:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500',color:isGPSActive?'#10b981':'#ef4444'},children:isGPSActive?'🟢 Activo':'🔴 Inactivo'})]}),isExpanded&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{style:{borderTop:'1px solid #e5e7eb',paddingTop:'10px',marginTop:'5px'},children:[vehiculo.licenciasRequeridas&&vehiculo.licenciasRequeridas.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDE97 Licencias Requeridas:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:vehiculo.licenciasRequeridas.map(lic=>/*#__PURE__*/_jsxs(\"span\",{style:{padding:'2px 6px',background:'#3b82f6',color:'white',borderRadius:'4px',fontSize:'11px',marginLeft:'4px'},children:[\"Clase \",lic]},lic))})]}),trabajador.fechaVencimientoLicencia&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCC5 Vence Licencia:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500',fontSize:'13px'},children:new Date(trabajador.fechaVencimientoLicencia).toLocaleDateString('es-CL')})]}),trabajador.observacionesLicencia&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',padding:'10px',background:'#fef3c7',borderRadius:'6px'},children:[/*#__PURE__*/_jsx(\"strong\",{style:{color:'#92400e',fontSize:'12px'},children:\"\\u26A0\\uFE0F Restricciones:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'5px 0 0 0',fontSize:'13px'},children:trabajador.observacionesLicencia})]}),trabajador.zonaDestino&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83C\\uDFAF Zona Destino:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:trabajador.zonaDestino})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(2, 1fr)',gap:'8px',marginTop:'15px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleCardExpansion(trabajador.id),style:{padding:isMobile?'6px':'8px',background:'#f3f4f6',color:'#374151',border:'none',borderRadius:'6px',fontSize:isMobile?'11px':'13px',cursor:'pointer',fontWeight:'500'},children:isExpanded?'➖ Menos':'➕ Más'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedWorker(trabajador);setShowWorkerDetailModal(true);},style:{padding:isMobile?'6px':'8px',background:'#8b5cf6',color:'white',border:'none',borderRadius:'6px',fontSize:isMobile?'11px':'13px',cursor:'pointer',fontWeight:'500'},children:\"\\uD83D\\uDC41\\uFE0F Ver Todo\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadWorkerDocuments(trabajador.id,trabajador),style:{padding:isMobile?'6px':'8px',background:'#10b981',color:'white',border:'none',borderRadius:'6px',fontSize:isMobile?'11px':'13px',cursor:'pointer',fontWeight:'500'},children:\"\\uD83D\\uDCC4 Docs\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openEditModal(trabajador,'worker'),style:{padding:isMobile?'6px':'8px',background:'#3b82f6',color:'white',border:'none',borderRadius:'6px',fontSize:isMobile?'11px':'13px',cursor:'pointer',fontWeight:'500'},children:\"\\u270F\\uFE0F Editar\"})]})]})]},trabajador.id);})}),activeTab==='admins'&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fill, minmax(350px, 1fr))',gap:'20px'},children:[administradores.map(admin=>renderUserCard(admin,'#dbeafe')),administradores.length===0&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:'60px 20px',textAlign:'center',color:'#6b7280',gridColumn:'1 / -1'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'20px'},children:\"\\uD83D\\uDC68\\u200D\\uD83D\\uDCBC\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'16px'},children:\"No hay administradores registrados\"})]})]}),activeTab==='superadmins'&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fill, minmax(350px, 1fr))',gap:'20px'},children:[superAdmins.map(superAdmin=>renderUserCard(superAdmin,'#ede9fe')),superAdmins.length===0&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:'60px 20px',textAlign:'center',color:'#6b7280',gridColumn:'1 / -1'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'20px'},children:\"\\uD83D\\uDD10\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'16px'},children:\"No hay super administradores registrados\"})]})]}),(activeTab==='vehicles'&&filteredVehiculos.length===0||activeTab==='workers'&&filteredTrabajadores.length===0)&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:'60px 20px',textAlign:'center',color:'#6b7280'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'20px'},children:activeTab==='vehicles'?'🚛':'👷'}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'16px'},children:[\"No se encontraron \",activeTab==='vehicles'?'vehículos':'trabajadores',searchTerm&&` para \"${searchTerm}\"`,filterStatus!=='todos'&&` con estado \"${filterStatus}\"`]})]})]}),showEditModal&&editingItem&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:2000,padding:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:isMobile?'20px':'30px',maxWidth:'500px',width:'100%',maxHeight:'80vh',overflow:'auto'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{margin:'0 0 20px 0',color:'#1f2937'},children:[\"\\u270F\\uFE0F Editar \",editingItem.type==='vehicle'?'Vehículo':'Trabajador']}),editingItem.type==='vehicle'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editFormData.nombre,onChange:e=>setEditFormData({...editFormData,nombre:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Patente\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editFormData.patente,onChange:e=>setEditFormData({...editFormData,patente:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Kilometraje\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editFormData.kilometraje,onChange:e=>setEditFormData({...editFormData,kilometraje:parseInt(e.target.value)}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Operador Asignado\"}),/*#__PURE__*/_jsxs(\"select\",{value:editFormData.operadorAsignado,onChange:e=>setEditFormData({...editFormData,operadorAsignado:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Sin asignar --\"}),users.filter(u=>u.role==='trabajador').map(user=>/*#__PURE__*/_jsx(\"option\",{value:user.id,children:user.name||user.email},user.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Observaciones\"}),/*#__PURE__*/_jsx(\"textarea\",{value:editFormData.observaciones,onChange:e=>setEditFormData({...editFormData,observaciones:e.target.value}),rows:3,style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px',resize:'vertical'}})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editFormData.nombre,onChange:e=>setEditFormData({...editFormData,nombre:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:editFormData.email,disabled:true,style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px',background:'#f3f4f6',cursor:'not-allowed'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:editFormData.telefono,onChange:e=>setEditFormData({...editFormData,telefono:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Veh\\xEDculo Asignado\"}),/*#__PURE__*/_jsxs(\"select\",{value:editFormData.vehicleId,onChange:e=>setEditFormData({...editFormData,vehicleId:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Sin asignar --\"}),vehiculos.filter(v=>!v.operadorAsignado||v.operadorAsignado===editingItem.id).map(vehiculo=>/*#__PURE__*/_jsx(\"option\",{value:vehiculo.id,children:vehiculo.nombre},vehiculo.id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editingItem.type==='vehicle'?saveVehicleChanges():saveWorkerChanges(),disabled:loading,style:{flex:1,padding:'12px',background:loading?'#9ca3af':'#22c55e',color:'white',border:'none',borderRadius:'6px',fontSize:'14px',fontWeight:'500',cursor:loading?'not-allowed':'pointer'},children:loading?'Guardando...':'✅ Guardar Cambios'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowEditModal(false);setEditingItem(null);},style:{flex:1,padding:'12px',background:'#6b7280',color:'white',border:'none',borderRadius:'6px',fontSize:'14px',fontWeight:'500',cursor:'pointer'},children:\"Cancelar\"})]})]})}),/*#__PURE__*/_jsx(DocumentsModal,{}),/*#__PURE__*/_jsx(WorkerDetailModal,{}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:`\n        @keyframes pulse {\n          0% {\n            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);\n          }\n          70% {\n            box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);\n          }\n          100% {\n            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);\n          }\n        }\n          \n      `})]});};export default FleetPanel;","map":{"version":3,"names":["React","useState","useEffect","database","firestore","ref","onValue","update","get","collection","getDocs","updateDoc","doc","NotificationSystem","createNotification","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FleetPanel","_ref","currentUser","onLogout","onViewChange","currentView","vehiculos","setVehiculos","trabajadores","setTrabajadores","users","setUsers","activeTab","setActiveTab","editingItem","setEditingItem","message","setMessage","type","text","loading","setLoading","searchTerm","setSearchTerm","filterStatus","setFilterStatus","isMobile","setIsMobile","showEditModal","setShowEditModal","editFormData","setEditFormData","expandedCards","setExpandedCards","quickEditMode","setQuickEditMode","isSidebarOpen","setIsSidebarOpen","showDocumentsModal","setShowDocumentsModal","selectedDocuments","setSelectedDocuments","documentOwner","setDocumentOwner","loadingDocuments","setLoadingDocuments","showWorkerDetailModal","setShowWorkerDetailModal","selectedWorker","setSelectedWorker","updatingLicense","setUpdatingLicense","checkMobile","window","innerWidth","test","navigator","userAgent","addEventListener","removeEventListener","loadVehiculos","loadTrabajadores","loadUsers","vehiculosRef","unsubscribe","snapshot","data","val","vehiculosArray","Object","entries","map","_ref2","id","vehiculo","trabajadoresRef","trabajadoresDB","_ref3","trabajador","source","usersSnapshot","todosLosUsuarios","forEach","userData","existeEnDB","find","t","push","nombre","name","email","telefono","phone","role","vehiculoAsignado","vehicleId","estado","licenciaConducir","licenciasConducir","fechaVencimientoLicencia","observacionesLicencia","licenciaBloqueada","rut","localidad","index","findIndex","undefined","todosLosTrabajadores","trabajadoresUnicos","reduce","acc","current","x","item","concat","console","log","length","filter","u","error","usersList","loadVehicleDocuments","vehiculoId","vehicleData","rutas","documentosEncontrados","ruta","docsRef","keys","documentos","uid","tipo","titulo","mensaje","loadWorkerDocuments","trabajadorId","workerData","certificadosProcesados","certificados","_ref4","key","cert","firebaseKey","certificadoOperador","checkExpirations","hoy","Date","fechaVencimiento","diasRestantes","Math","ceil","fechaRevisionTecnica","fechaRevision","interval","setInterval","clearInterval","formatFileSize","bytes","k","sizes","i","floor","round","pow","quickUpdateOperator","nuevoOperadorId","v","habilitado","licenciasRequeridas","licenciasTrabajador","tieneAlgunaLicenciaRequerida","some","licRequerida","includes","join","licenciasTrabajadorStr","trabajadorAnterior","trabajadorAnteriorRef","ultimaActualizacion","toISOString","otrosVehiculos","trabajadorAsignado","operadorAsignado","asignadoA","otroVehiculo","otroVehiculoRef","vehiculoRef","actualizadoPor","trabajadorRef","setTimeout","onClick","confirm","vehiculosData","updates","needsUpdate","alert","location","reload","style","padding","background","color","border","borderRadius","cursor","margin","children","corregirAsignacionesVehiculos","openEditModal","patente","kilometraje","observaciones","saveVehicleChanges","vehicleRef","saveWorkerChanges","userRef","updatedAt","updatedBy","filteredVehiculos","_v$nombre","_v$patente","_v$marca","matchesSearch","toLowerCase","marca","matchesFilter","filteredTrabajadores","_t$nombre","_t$email","_t$telefono","trabajadoresReales","administradores","superAdmins","getStats","vehicleStats","total","disponibles","enUso","mantenimiento","workerStats","superadmins","activos","ubicacion","timestamp","enRuta","trabajando","toggleCardExpansion","prev","DocumentsModal","_selectedDocuments$li","_selectedDocuments$li2","_selectedDocuments$ce","_selectedDocuments$ce2","_selectedDocuments$li3","_selectedDocuments$ce3","_selectedDocuments$ce4","isVehicle","position","top","left","right","bottom","display","justifyContent","alignItems","zIndex","overflowY","maxWidth","width","maxHeight","height","overflow","marginTop","marginBottom","flexWrap","gap","fontSize","flex","minWidth","textAlign","gridTemplateColumns","_ref5","documento","getDocumentInfo","docKey","docTypes","permisoCirculacion","icon","revisionTecnica","seguroObligatorio","soap","padronMunicipal","certificadoGases","seguroComplementario","certificadoRevision","permisoTransporte","certificadoOperatividad","replace","str","toUpperCase","docInfo","url","fontWeight","textOverflow","whiteSpace","fecha","toLocaleDateString","tamaño","href","target","rel","textDecoration","otros","marginLeft","WorkerDetailModal","_selectedWorker$licen","_selectedWorker$licen2","_selectedWorker$licen3","_selectedWorker$licen4","_selectedWorker$licen5","_selectedWorker$licen6","estadoLicencia","texto","dias","handleToggleLicenseBlock","nuevoEstadoBloqueo","motivoBloqueo","fechaBloqueo","paddingBottom","borderBottom","lic","gridColumn","disabled","opacity","modelo","renderUserCard","usuario","rolColor","_usuario$licenciasCon","isExpanded","isGPSActive","tieneProblemaLicencia","boxShadow","transition","animation","title","borderTop","paddingTop","flexDirection","letterSpacing","transform","onMouseEnter","e","currentTarget","onMouseLeave","inSidebar","dropdownPosition","src","alt","objectFit","borderLeft","placeholder","value","onChange","outline","_vehiculo$kilometraje","operador","isEditingOperator","isDisabled","defaultValue","user","cumpleRequisitos","licReq","tieneLicenciaBloqueada","toLocaleString","tipoCombustible","ultimoMantenimiento","proximoMantenimiento","_trabajador$licencias","zonaDestino","admin","superAdmin","parseInt","rows","resize"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/FleetPanel.js"],"sourcesContent":["// src/components/FleetPanel.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { database, firestore } from '../config/firebase';\r\nimport { ref, onValue, update, get } from 'firebase/database';\r\nimport { collection, getDocs, updateDoc, doc } from 'firebase/firestore';\r\nimport NotificationSystem, { createNotification } from './NotificationSystem';\r\n\r\nconst FleetPanel = ({ currentUser, onLogout, onViewChange, currentView = 'fleet' }) => {\r\n  const [vehiculos, setVehiculos] = useState([]);\r\n  const [trabajadores, setTrabajadores] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [activeTab, setActiveTab] = useState('vehicles');\r\n  const [editingItem, setEditingItem] = useState(null);\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState('todos');\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [editFormData, setEditFormData] = useState({});\r\n  const [expandedCards, setExpandedCards] = useState({});\r\n  const [quickEditMode, setQuickEditMode] = useState({}); // Para edición rápida de operador\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(!isMobile);\r\n\r\n  // NUEVO: Estados para documentos\r\n  const [showDocumentsModal, setShowDocumentsModal] = useState(false);\r\n  const [selectedDocuments, setSelectedDocuments] = useState(null);\r\n  const [documentOwner, setDocumentOwner] = useState(null);\r\n  const [loadingDocuments, setLoadingDocuments] = useState(false);\r\n  // Agregar estos estados después de los existentes\r\n  const [showWorkerDetailModal, setShowWorkerDetailModal] = useState(false);\r\n  const [selectedWorker, setSelectedWorker] = useState(null);\r\n  const [updatingLicense, setUpdatingLicense] = useState(false);\r\n\r\n  // Detectar si es móvil - MEJORADO\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth <= 768 || /iPhone|iPad|iPod|Android/i.test(navigator.userAgent));\r\n    };\r\n\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n\r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  // Cargar datos\r\n  useEffect(() => {\r\n    loadVehiculos();\r\n    loadTrabajadores();\r\n    loadUsers();\r\n  }, []);\r\n  const loadVehiculos = () => {\r\n    const vehiculosRef = ref(database, 'vehiculos');\r\n    const unsubscribe = onValue(vehiculosRef, (snapshot) => {\r\n      const data = snapshot.val();\r\n      if (data) {\r\n        const vehiculosArray = Object.entries(data).map(([id, vehiculo]) => ({\r\n          id,\r\n          ...vehiculo\r\n        }));\r\n        setVehiculos(vehiculosArray);\r\n      } else {\r\n        setVehiculos([]);\r\n      }\r\n    });\r\n    return unsubscribe;\r\n  };\r\n  const loadTrabajadores = () => {\r\n    const trabajadoresRef = ref(database, 'trabajadores');\r\n    const unsubscribe = onValue(trabajadoresRef, async (snapshot) => {\r\n      const data = snapshot.val();\r\n\r\n      // Obtener trabajadores de Realtime Database\r\n      const trabajadoresDB = data ? Object.entries(data).map(([id, trabajador]) => ({\r\n        id,\r\n        ...trabajador,\r\n        source: 'database'\r\n      })) : [];\r\n\r\n      // Obtener TODOS los usuarios de Firestore (no solo trabajadores)\r\n      try {\r\n        const usersSnapshot = await getDocs(collection(firestore, 'users'));\r\n        const todosLosUsuarios = [];\r\n\r\n        usersSnapshot.forEach((doc) => {\r\n          const userData = doc.data();\r\n\r\n          // Buscar si existe en trabajadoresDB\r\n          const existeEnDB = trabajadoresDB.find(t => t.id === doc.id);\r\n\r\n          if (!existeEnDB) {\r\n            // Si no existe en Realtime Database, agregarlo desde Firestore\r\n            todosLosUsuarios.push({\r\n              id: doc.id,\r\n              nombre: userData.name || 'Sin nombre',\r\n              email: userData.email,\r\n              telefono: userData.phone || '',\r\n              role: userData.role || 'trabajador', // IMPORTANTE: mantener el rol\r\n              vehiculoAsignado: userData.vehicleId || null,\r\n              estado: 'disponible',\r\n              licenciaConducir: userData.licenciaConducir || '',\r\n              licenciasConducir: userData.licenciasConducir || [],\r\n              fechaVencimientoLicencia: userData.fechaVencimientoLicencia || '',\r\n              observacionesLicencia: userData.observacionesLicencia || '',\r\n              licenciaBloqueada: userData.licenciaBloqueada || false,\r\n              rut: userData.rut || '',\r\n              localidad: userData.localidad || '',\r\n              source: 'firestore'\r\n            });\r\n          } else {\r\n            // Si existe, actualizar con datos de Firestore que puedan faltar\r\n            const index = trabajadoresDB.findIndex(t => t.id === doc.id);\r\n            if (index !== -1) {\r\n              trabajadoresDB[index] = {\r\n                ...trabajadoresDB[index],\r\n                nombre: trabajadoresDB[index].nombre || userData.name,\r\n                email: userData.email,\r\n                telefono: trabajadoresDB[index].telefono || userData.phone,\r\n                role: userData.role || 'trabajador', // Asegurar que tenga rol\r\n                licenciaConducir: userData.licenciaConducir || trabajadoresDB[index].licenciaConducir,\r\n                licenciasConducir: userData.licenciasConducir || trabajadoresDB[index].licenciasConducir,\r\n                fechaVencimientoLicencia: userData.fechaVencimientoLicencia || trabajadoresDB[index].fechaVencimientoLicencia,\r\n                observacionesLicencia: userData.observacionesLicencia || trabajadoresDB[index].observacionesLicencia,\r\n                licenciaBloqueada: userData.licenciaBloqueada !== undefined ? userData.licenciaBloqueada : trabajadoresDB[index].licenciaBloqueada,\r\n                rut: userData.rut || trabajadoresDB[index].rut,\r\n                localidad: userData.localidad || trabajadoresDB[index].localidad\r\n              };\r\n            }\r\n          }\r\n        });\r\n\r\n        // Combinar ambas fuentes\r\n        const todosLosTrabajadores = [...trabajadoresDB, ...todosLosUsuarios];\r\n\r\n        // Eliminar duplicados\r\n        const trabajadoresUnicos = todosLosTrabajadores.reduce((acc, current) => {\r\n          const x = acc.find(item => item.id === current.id);\r\n          if (!x) {\r\n            return acc.concat([current]);\r\n          } else {\r\n            return acc;\r\n          }\r\n        }, []);\r\n\r\n        console.log(`📊 Total usuarios encontrados: ${trabajadoresUnicos.length}`);\r\n        console.log(`  - Trabajadores: ${trabajadoresUnicos.filter(u => u.role === 'trabajador').length}`);\r\n        console.log(`  - Administradores: ${trabajadoresUnicos.filter(u => u.role === 'admin').length}`);\r\n        console.log(`  - Super Admins: ${trabajadoresUnicos.filter(u => u.role === 'superadmin').length}`);\r\n\r\n        setTrabajadores(trabajadoresUnicos);\r\n\r\n      } catch (error) {\r\n        console.error('Error al cargar usuarios de Firestore:', error);\r\n        setTrabajadores(trabajadoresDB);\r\n      }\r\n    });\r\n\r\n    return unsubscribe;\r\n  };\r\n\r\n  const loadUsers = async () => {\r\n    try {\r\n      const usersSnapshot = await getDocs(collection(firestore, 'users'));\r\n      const usersList = [];\r\n      usersSnapshot.forEach((doc) => {\r\n        usersList.push({ id: doc.id, ...doc.data() });\r\n      });\r\n      setUsers(usersList);\r\n    } catch (error) {\r\n      console.error('Error al cargar usuarios:', error);\r\n    }\r\n  };\r\n\r\n  // NUEVA FUNCIÓN: Cargar documentos de vehículo\r\n  const loadVehicleDocuments = async (vehiculoId, vehicleData) => {\r\n    setLoadingDocuments(true);\r\n    try {\r\n      // Buscar documentos en diferentes rutas posibles\r\n      const rutas = [\r\n        `vehiculos/${vehiculoId}/documentos`,\r\n        `documentos/vehiculos/${vehiculoId}`,\r\n        `documentos_vehiculos/${vehiculoId}`\r\n      ];\r\n\r\n      let documentosEncontrados = null;\r\n\r\n      for (const ruta of rutas) {\r\n        const docsRef = ref(database, ruta);\r\n        const snapshot = await get(docsRef);\r\n        const data = snapshot.val();\r\n\r\n        if (data && Object.keys(data).length > 0) {\r\n          documentosEncontrados = data;\r\n          console.log(`📄 Documentos de vehículo encontrados en: ${ruta}`);\r\n          break;\r\n        }\r\n      }\r\n\r\n      // Verificar si hay documentos dentro del objeto del vehículo\r\n      if (!documentosEncontrados && vehicleData?.documentos) {\r\n        documentosEncontrados = vehicleData.documentos;\r\n        console.log('📄 Documentos encontrados dentro del objeto vehículo');\r\n      }\r\n\r\n      // Pasar todos los documentos encontrados tal como están\r\n      setSelectedDocuments(documentosEncontrados || {});\r\n\r\n      setDocumentOwner({\r\n        type: 'vehicle',\r\n        id: vehiculoId,\r\n        name: vehicleData.nombre || 'Vehículo'\r\n      });\r\n\r\n      setShowDocumentsModal(true);\r\n    } catch (error) {\r\n      console.error('Error al cargar documentos del vehículo:', error);\r\n      setMessage({ type: 'error', text: '❌ Error al cargar documentos' });\r\n    } finally {\r\n      setLoadingDocuments(false);\r\n    }\r\n    // Cuando se suben documentos exitosamente\r\n    await createNotification(currentUser.uid, {\r\n      tipo: 'documento_subido',\r\n      titulo: 'Documentos cargados',\r\n      mensaje: `Se cargaron los documentos del vehículo ${vehicleData.nombre}`\r\n    });\r\n  };\r\n\r\n  // NUEVA FUNCIÓN: Cargar documentos de trabajador\r\n  const loadWorkerDocuments = async (trabajadorId, workerData) => {\r\n    setLoadingDocuments(true);\r\n    try {\r\n      // Buscar documentos en diferentes rutas posibles\r\n      const rutas = [\r\n        `trabajadores/${trabajadorId}/documentos`,\r\n        `documentos/${trabajadorId}`,\r\n        `usuarios/${trabajadorId}/documentos`\r\n      ];\r\n\r\n      let documentosEncontrados = null;\r\n\r\n      for (const ruta of rutas) {\r\n        const docsRef = ref(database, ruta);\r\n        const snapshot = await get(docsRef);\r\n        const data = snapshot.val();\r\n\r\n        if (data && Object.keys(data).length > 0) {\r\n          documentosEncontrados = data;\r\n          console.log(`📄 Documentos de trabajador encontrados en: ${ruta}`);\r\n          break;\r\n        }\r\n      }\r\n\r\n      // Verificar si hay documentos dentro del objeto del trabajador\r\n      if (!documentosEncontrados && workerData?.documentos) {\r\n        documentosEncontrados = workerData.documentos;\r\n        console.log('📄 Documentos encontrados dentro del objeto trabajador');\r\n      }\r\n\r\n      if (documentosEncontrados) {\r\n        // Procesar certificados si existen\r\n        let certificadosProcesados = [];\r\n        if (documentosEncontrados.certificados && typeof documentosEncontrados.certificados === 'object') {\r\n          certificadosProcesados = Object.entries(documentosEncontrados.certificados).map(([key, cert]) => ({\r\n            firebaseKey: key,\r\n            ...cert\r\n          }));\r\n        }\r\n\r\n        setSelectedDocuments({\r\n          licenciaConducir: documentosEncontrados.licenciaConducir || null,\r\n          certificadoOperador: documentosEncontrados.certificadoOperador || null,\r\n          certificados: certificadosProcesados\r\n        });\r\n      } else {\r\n        setSelectedDocuments({\r\n          licenciaConducir: null,\r\n          certificadoOperador: null,\r\n          certificados: []\r\n        });\r\n      }\r\n\r\n      setDocumentOwner({\r\n        type: 'worker',\r\n        id: trabajadorId,\r\n        name: workerData.nombre || 'Trabajador'\r\n      });\r\n\r\n      setShowDocumentsModal(true);\r\n    } catch (error) {\r\n      console.error('Error al cargar documentos del trabajador:', error);\r\n      setMessage({ type: 'error', text: '❌ Error al cargar documentos' });\r\n    } finally {\r\n      setLoadingDocuments(false);\r\n    }\r\n  };\r\n  // Función para verificar vencimientos (ejecutar cada día)\r\n  const checkExpirations = async () => {\r\n    const hoy = new Date();\r\n\r\n    // Verificar licencias de trabajadores\r\n    trabajadores.forEach(async (trabajador) => {\r\n      if (trabajador.fechaVencimientoLicencia) {\r\n        const fechaVencimiento = new Date(trabajador.fechaVencimientoLicencia);\r\n        const diasRestantes = Math.ceil((fechaVencimiento - hoy) / (1000 * 60 * 60 * 24));\r\n\r\n        if (diasRestantes === 14 || diasRestantes === 7 || diasRestantes === 1) {\r\n          await createNotification(currentUser.uid, {\r\n            tipo: 'licencia_proxima',\r\n            titulo: `⚠️ Licencia próxima a vencer`,\r\n            mensaje: `La licencia de ${trabajador.nombre} vence en ${diasRestantes} día${diasRestantes > 1 ? 's' : ''}`\r\n          });\r\n        } else if (diasRestantes === 0) {\r\n          await createNotification(currentUser.uid, {\r\n            tipo: 'licencia_vencida',\r\n            titulo: `🚫 Licencia vencida`,\r\n            mensaje: `La licencia de ${trabajador.nombre} venció hoy`\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    // Verificar documentos de vehículos\r\n    vehiculos.forEach(async (vehiculo) => {\r\n      if (vehiculo.fechaRevisionTecnica) {\r\n        const fechaRevision = new Date(vehiculo.fechaRevisionTecnica);\r\n        const diasRestantes = Math.ceil((fechaRevision - hoy) / (1000 * 60 * 60 * 24));\r\n\r\n        if (diasRestantes <= 7 && diasRestantes > 0) {\r\n          await createNotification(currentUser.uid, {\r\n            tipo: 'documento_vencido',\r\n            titulo: `📄 Revisión técnica próxima a vencer`,\r\n            mensaje: `La revisión técnica de ${vehiculo.nombre} vence en ${diasRestantes} días`\r\n          });\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  // Ejecutar al cargar y cada 24 horas\r\n  useEffect(() => {\r\n    checkExpirations();\r\n    const interval = setInterval(checkExpirations, 24 * 60 * 60 * 1000);\r\n    return () => clearInterval(interval);\r\n  }, [trabajadores, vehiculos]);\r\n\r\n  // Función para formatear tamaño de archivo\r\n  const formatFileSize = (bytes) => {\r\n    if (!bytes || bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\r\n  };\r\n\r\n  const quickUpdateOperator = async (vehiculoId, nuevoOperadorId) => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      const vehiculo = vehiculos.find(v => v.id === vehiculoId);\r\n      const trabajador = nuevoOperadorId ? trabajadores.find(t => t.id === nuevoOperadorId) : null;\r\n\r\n      // Verificar si el vehículo está habilitado\r\n      if (vehiculo?.habilitado === false) {\r\n        setMessage({\r\n          type: 'error',\r\n          text: '❌ Este vehículo está deshabilitado. No se puede asignar operador.'\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (trabajador?.habilitado === false) {\r\n        setMessage({\r\n          type: 'error',\r\n          text: '❌ Este trabajador está deshabilitado. No puede ser asignado a vehículos.'\r\n        });\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // VALIDACIÓN: Verificar licencias requeridas\r\n      if (nuevoOperadorId && trabajador) {\r\n        if (vehiculo?.licenciasRequeridas && vehiculo.licenciasRequeridas.length > 0) {\r\n          const licenciasTrabajador = trabajador?.licenciasConducir || [];\r\n          const tieneAlgunaLicenciaRequerida = vehiculo.licenciasRequeridas.some(\r\n            licRequerida => licenciasTrabajador.includes(licRequerida)\r\n          );\r\n\r\n          if (!tieneAlgunaLicenciaRequerida) {\r\n            const licenciasRequeridas = vehiculo.licenciasRequeridas.join(', ');\r\n            const licenciasTrabajadorStr = licenciasTrabajador.length > 0\r\n              ? licenciasTrabajador.join(', ')\r\n              : 'ninguna';\r\n\r\n            setMessage({\r\n              type: 'error',\r\n              text: `❌ No se puede asignar. El vehículo requiere licencia clase: ${licenciasRequeridas}. El trabajador tiene: ${licenciasTrabajadorStr}`\r\n            });\r\n            setLoading(false);\r\n            return;\r\n          }\r\n        }\r\n\r\n        // Verificar si el trabajador tiene licencia bloqueada\r\n        if (trabajador?.licenciaBloqueada) {\r\n          setMessage({\r\n            type: 'error',\r\n            text: '❌ No se puede asignar. El trabajador tiene la licencia bloqueada.'\r\n          });\r\n          setLoading(false);\r\n          return;\r\n        }\r\n      }\r\n\r\n      // PASO 1: Limpiar asignación anterior del vehículo\r\n      const trabajadorAnterior = trabajadores.find(t =>\r\n        t.vehiculoAsignado === vehiculoId || t.vehicleId === vehiculoId\r\n      );\r\n\r\n      if (trabajadorAnterior && trabajadorAnterior.id !== nuevoOperadorId) {\r\n        const trabajadorAnteriorRef = ref(database, `trabajadores/${trabajadorAnterior.id}`);\r\n        await update(trabajadorAnteriorRef, {\r\n          vehiculoAsignado: null,\r\n          vehicleId: null,\r\n          ultimaActualizacion: new Date().toISOString()\r\n        });\r\n      }\r\n\r\n      // PASO 2: Si hay nuevo operador, limpiar cualquier otro vehículo que pudiera tener\r\n      if (nuevoOperadorId) {\r\n        // Buscar si el trabajador tenía otro vehículo asignado\r\n        const otrosVehiculos = vehiculos.filter(v =>\r\n          v.id !== vehiculoId &&\r\n          (v.trabajadorAsignado === nuevoOperadorId ||\r\n            v.operadorAsignado === nuevoOperadorId ||\r\n            v.asignadoA === nuevoOperadorId)\r\n        );\r\n\r\n        // Limpiar esos vehículos\r\n        for (const otroVehiculo of otrosVehiculos) {\r\n          const otroVehiculoRef = ref(database, `vehiculos/${otroVehiculo.id}`);\r\n          await update(otroVehiculoRef, {\r\n            trabajadorAsignado: null,\r\n            operadorAsignado: null,\r\n            asignadoA: null,\r\n            ultimaActualizacion: new Date().toISOString()\r\n          });\r\n        }\r\n      }\r\n\r\n      // PASO 3: Actualizar el vehículo\r\n      const vehiculoRef = ref(database, `vehiculos/${vehiculoId}`);\r\n      await update(vehiculoRef, {\r\n        trabajadorAsignado: nuevoOperadorId || null,\r\n        operadorAsignado: null,  // SIEMPRE limpiar campos antiguos\r\n        asignadoA: null,         // SIEMPRE limpiar campos antiguos\r\n        ultimaActualizacion: new Date().toISOString(),\r\n        actualizadoPor: currentUser.uid\r\n      });\r\n\r\n      // PASO 4: Si se asignó un nuevo trabajador, actualizar sus datos\r\n      if (nuevoOperadorId) {\r\n        const trabajadorRef = ref(database, `trabajadores/${nuevoOperadorId}`);\r\n        await update(trabajadorRef, {\r\n          vehiculoAsignado: vehiculoId,\r\n          vehicleId: vehiculoId, // Mantener por compatibilidad temporal\r\n          ultimaActualizacion: new Date().toISOString()\r\n        });\r\n      }\r\n\r\n      // NOTIFICACIONES\r\n      if (typeof createNotification === 'function') {\r\n        // Notificación para el administrador\r\n        await createNotification(currentUser.uid, {\r\n          tipo: 'vehiculo_asignado',\r\n          titulo: `Operador actualizado en ${vehiculo?.nombre || 'Vehículo'}`,\r\n          mensaje: nuevoOperadorId && trabajador\r\n            ? `${trabajador.nombre} fue asignado como operador`\r\n            : 'Se removió el operador del vehículo'\r\n        });\r\n\r\n        // Notificar al trabajador si fue asignado\r\n        if (nuevoOperadorId && trabajador) {\r\n          await createNotification(nuevoOperadorId, {\r\n            tipo: 'vehiculo_asignado',\r\n            titulo: 'Te han asignado un vehículo',\r\n            mensaje: `Has sido asignado como operador del vehículo ${vehiculo?.nombre || ''}`\r\n          });\r\n        }\r\n\r\n        // Notificar al trabajador anterior si fue removido\r\n        if (trabajadorAnterior && trabajadorAnterior.id !== nuevoOperadorId) {\r\n          await createNotification(trabajadorAnterior.id, {\r\n            tipo: 'vehiculo_removido',\r\n            titulo: 'Asignación de vehículo removida',\r\n            mensaje: `Ya no eres el operador del vehículo ${vehiculo?.nombre || ''}`\r\n          });\r\n        }\r\n      }\r\n\r\n      setMessage({ type: 'success', text: '✅ Operador actualizado exitosamente' });\r\n      setQuickEditMode({ ...quickEditMode, [vehiculoId]: false });\r\n      setTimeout(() => setMessage({ type: '', text: '' }), 3000);\r\n\r\n    } catch (error) {\r\n      setMessage({ type: 'error', text: '❌ Error al actualizar operador' });\r\n      console.error('Error:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  // En FleetPanel.js, agrega este botón temporalmente donde prefieras\r\n  <button\r\n    onClick={async () => {\r\n      if (!window.confirm('¿Limpiar todas las asignaciones de vehículos? Esto corregirá inconsistencias.')) return;\r\n\r\n      console.log('🧹 Iniciando limpieza de asignaciones...');\r\n\r\n      try {\r\n        const vehiculosRef = ref(database, 'vehiculos');\r\n        const snapshot = await get(vehiculosRef);\r\n        const vehiculosData = snapshot.val() || {};\r\n\r\n        for (const [id, vehiculo] of Object.entries(vehiculosData)) {\r\n          const updates = {};\r\n          let needsUpdate = false;\r\n\r\n          // Si tiene trabajadorAsignado, mantenerlo y limpiar los demás\r\n          if (vehiculo.trabajadorAsignado) {\r\n            updates.trabajadorAsignado = vehiculo.trabajadorAsignado;\r\n            updates.operadorAsignado = null;\r\n            updates.asignadoA = null;\r\n            needsUpdate = true;\r\n          }\r\n          // Si no tiene trabajadorAsignado pero tiene operadorAsignado, moverlo\r\n          else if (vehiculo.operadorAsignado) {\r\n            updates.trabajadorAsignado = vehiculo.operadorAsignado;\r\n            updates.operadorAsignado = null;\r\n            updates.asignadoA = null;\r\n            needsUpdate = true;\r\n          }\r\n          // Si solo tiene asignadoA, moverlo\r\n          else if (vehiculo.asignadoA) {\r\n            updates.trabajadorAsignado = vehiculo.asignadoA;\r\n            updates.operadorAsignado = null;\r\n            updates.asignadoA = null;\r\n            needsUpdate = true;\r\n          }\r\n\r\n          if (needsUpdate) {\r\n            console.log(`Actualizando vehículo ${id}...`);\r\n            await update(ref(database, `vehiculos/${id}`), {\r\n              ...updates,\r\n              ultimaActualizacion: new Date().toISOString()\r\n            });\r\n          }\r\n        }\r\n\r\n        alert('✅ Limpieza completada. Por favor recarga la página.');\r\n        window.location.reload();\r\n\r\n      } catch (error) {\r\n        console.error('Error en limpieza:', error);\r\n        alert('Error: ' + error.message);\r\n      }\r\n    }}\r\n    style={{\r\n      padding: '10px 20px',\r\n      background: '#f59e0b',\r\n      color: 'white',\r\n      border: 'none',\r\n      borderRadius: '8px',\r\n      cursor: 'pointer',\r\n      margin: '10px'\r\n    }}\r\n  >\r\n    🧹 Limpiar Asignaciones (Ejecutar Una Vez)\r\n  </button>\r\n\r\n  const corregirAsignacionesVehiculos = async () => {\r\n    const vehiculosRef = ref(database, 'vehiculos');\r\n    const snapshot = await get(vehiculosRef);\r\n    const vehiculos = snapshot.val() || {};\r\n\r\n    for (const [id, vehiculo] of Object.entries(vehiculos)) {\r\n      // Si tiene asignación en campos incorrectos\r\n      if (vehiculo.operadorAsignado || vehiculo.asignadoA) {\r\n        const trabajadorId = vehiculo.operadorAsignado || vehiculo.asignadoA;\r\n\r\n        console.log(`Corrigiendo vehículo ${id}...`);\r\n\r\n        // Mover al campo correcto\r\n        await update(ref(database, `vehiculos/${id}`), {\r\n          trabajadorAsignado: trabajadorId,  // Campo correcto\r\n          operadorAsignado: null,  // Limpiar campo incorrecto\r\n          asignadoA: null,  // Limpiar campo incorrecto\r\n          ultimaActualizacion: new Date().toISOString()\r\n        });\r\n\r\n        console.log(`✅ Vehículo ${id} corregido`);\r\n      }\r\n    }\r\n\r\n    console.log('✅ Todas las asignaciones corregidas');\r\n  };\r\n\r\n  // Ejecutar la corrección\r\n  corregirAsignacionesVehiculos();\r\n\r\n\r\n  // Abrir modal de edición\r\n  const openEditModal = (item, type) => {\r\n    if (type === 'vehicle') {\r\n      setEditFormData({\r\n        nombre: item.nombre || '',\r\n        patente: item.patente || '',\r\n        kilometraje: item.kilometraje || 0,\r\n        operadorAsignado: item.operadorAsignado || '',\r\n        observaciones: item.observaciones || '',\r\n        estado: item.estado || 'disponible'\r\n      });\r\n    } else if (type === 'worker') {\r\n      const userData = users.find(u => u.id === item.id);\r\n      setEditFormData({\r\n        nombre: item.nombre || userData?.name || '',\r\n        email: userData?.email || '',\r\n        telefono: userData?.phone || item.telefono || '',\r\n        vehicleId: userData?.vehicleId || '',\r\n        estado: item.estado || 'disponible'\r\n      });\r\n    }\r\n    setEditingItem({ ...item, type });\r\n    setShowEditModal(true);\r\n  };\r\n\r\n  // Guardar cambios de vehículo\r\n  const saveVehicleChanges = async () => {\r\n    if (!editingItem) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      const vehicleRef = ref(database, `vehiculos/${editingItem.id}`);\r\n      await update(vehicleRef, {\r\n        ...editFormData,\r\n        ultimaActualizacion: new Date().toISOString(),\r\n        actualizadoPor: currentUser.uid\r\n      });\r\n\r\n      setMessage({ type: 'success', text: '✅ Vehículo actualizado exitosamente' });\r\n      setShowEditModal(false);\r\n      setEditingItem(null);\r\n      setTimeout(() => setMessage({ type: '', text: '' }), 3000);\r\n    } catch (error) {\r\n      setMessage({ type: 'error', text: '❌ Error al actualizar vehículo' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Guardar cambios de trabajador\r\n  const saveWorkerChanges = async () => {\r\n    if (!editingItem) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Actualizar en Realtime Database\r\n      const trabajadorRef = ref(database, `trabajadores/${editingItem.id}`);\r\n      await update(trabajadorRef, {\r\n        nombre: editFormData.nombre,\r\n        telefono: editFormData.telefono,\r\n        estado: editFormData.estado,\r\n        ultimaActualizacion: new Date().toISOString()\r\n      });\r\n\r\n      // Actualizar en Firestore\r\n      const userRef = doc(firestore, 'users', editingItem.id);\r\n      await updateDoc(userRef, {\r\n        name: editFormData.nombre,\r\n        phone: editFormData.telefono,\r\n        vehicleId: editFormData.vehicleId || null,\r\n        updatedAt: new Date().toISOString(),\r\n        updatedBy: currentUser.uid\r\n      });\r\n\r\n      setMessage({ type: 'success', text: '✅ Trabajador actualizado exitosamente' });\r\n      setShowEditModal(false);\r\n      setEditingItem(null);\r\n      setTimeout(() => setMessage({ type: '', text: '' }), 3000);\r\n    } catch (error) {\r\n      setMessage({ type: 'error', text: '❌ Error al actualizar trabajador' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Filtrar vehículos\r\n  const filteredVehiculos = vehiculos.filter(v => {\r\n    const matchesSearch = v.nombre?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      v.patente?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      v.marca?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesFilter = filterStatus === 'todos' || v.estado === filterStatus;\r\n    return matchesSearch && matchesFilter;\r\n  });\r\n\r\n  // Filtrar trabajadores\r\n  const filteredTrabajadores = trabajadores.filter(t => {\r\n    const matchesSearch =\r\n      t.nombre?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      t.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      t.telefono?.toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n    const matchesFilter =\r\n      filterStatus === 'todos' ||\r\n      (t.estado && t.estado === filterStatus) ||\r\n      (filterStatus === 'disponible' && !t.estado); // Si no tiene estado, considerarlo disponible\r\n\r\n    return matchesSearch && matchesFilter;\r\n  });\r\n  const trabajadoresReales = filteredTrabajadores.filter(t =>\r\n    !t.role || t.role === 'trabajador'\r\n  );\r\n  const administradores = filteredTrabajadores.filter(t =>\r\n    t.role === 'admin'\r\n  );\r\n  const superAdmins = filteredTrabajadores.filter(t =>\r\n    t.role === 'superadmin'\r\n  );\r\n\r\n  // Obtener estadísticas\r\n  const getStats = () => {\r\n    const vehicleStats = {\r\n      total: vehiculos.length,\r\n      disponibles: vehiculos.filter(v => v.estado === 'disponible').length,\r\n      enUso: vehiculos.filter(v => v.estado === 'en_uso').length,\r\n      mantenimiento: vehiculos.filter(v => v.estado === 'mantenimiento').length\r\n    };\r\n\r\n    const workerStats = {\r\n      total: trabajadores.length,\r\n      trabajadores: trabajadores.filter(t => !t.role || t.role === 'trabajador').length,\r\n      administradores: trabajadores.filter(t => t.role === 'admin').length,\r\n      superadmins: trabajadores.filter(t => t.role === 'superadmin').length,\r\n      activos: trabajadores.filter(t => t.ubicacion &&\r\n        (new Date() - new Date(t.ubicacion.timestamp)) < 300000).length,\r\n      enRuta: trabajadores.filter(t => t.estado === 'en_camino').length,\r\n      trabajando: trabajadores.filter(t => t.estado === 'trabajando').length,\r\n      disponibles: trabajadores.filter(t => t.estado === 'disponible' || !t.estado).length\r\n    };\r\n\r\n    return { vehicleStats, workerStats };\r\n  };\r\n\r\n  const { vehicleStats, workerStats } = getStats();\r\n\r\n  // Toggle expandir/contraer tarjeta\r\n  const toggleCardExpansion = (id) => {\r\n    setExpandedCards(prev => ({\r\n      ...prev,\r\n      [id]: !prev[id]\r\n    }));\r\n  };\r\n\r\n  // NUEVO: Modal de Documentos\r\n  const DocumentsModal = () => {\r\n    if (!showDocumentsModal || !selectedDocuments || !documentOwner) return null;\r\n\r\n    const isVehicle = documentOwner.type === 'vehicle';\r\n\r\n    return (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0,0,0,0.5)',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: isMobile ? 'flex-start' : 'center',\r\n        zIndex: 3000,\r\n        padding: isMobile ? '10px' : '20px',\r\n        overflowY: 'auto'\r\n      }}>\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '12px',\r\n          maxWidth: isMobile ? '100%' : '900px',\r\n          width: '100%',\r\n          maxHeight: isMobile ? 'none' : '90vh',\r\n          height: isMobile ? 'auto' : 'auto',\r\n          overflow: 'auto',\r\n          padding: isMobile ? '20px' : '30px',\r\n          marginTop: isMobile ? '20px' : '0',\r\n          marginBottom: isMobile ? '20px' : '0'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            marginBottom: '25px',\r\n            flexWrap: 'wrap',\r\n            gap: '10px'\r\n          }}>\r\n            <h2 style={{\r\n              margin: 0,\r\n              color: '#1f2937',\r\n              fontSize: isMobile ? '20px' : '24px',\r\n              flex: 1\r\n            }}>\r\n              📄 Documentos de {documentOwner.name}\r\n            </h2>\r\n            <button\r\n              onClick={() => {\r\n                setShowDocumentsModal(false);\r\n                setSelectedDocuments(null);\r\n                setDocumentOwner(null);\r\n              }}\r\n              style={{\r\n                padding: '8px',\r\n                background: '#6b7280',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                cursor: 'pointer',\r\n                fontSize: '18px',\r\n                minWidth: '40px',\r\n                height: '40px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center'\r\n              }}\r\n            >\r\n              ✖\r\n            </button>\r\n          </div>\r\n\r\n          {loadingDocuments ? (\r\n            <div style={{\r\n              padding: '40px',\r\n              textAlign: 'center',\r\n              color: '#6b7280'\r\n            }}>\r\n              <div style={{ fontSize: '24px', marginBottom: '10px' }}>⏳</div>\r\n              <div>Cargando documentos...</div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {isVehicle ? (\r\n                // Documentos de Vehículo - MOSTRAR TODOS LOS DOCUMENTOS\r\n                <div>\r\n                  <div style={{\r\n                    display: 'grid',\r\n                    gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fit, minmax(280px, 1fr))',\r\n                    gap: '20px'\r\n                  }}>\r\n                    {/* Mapear todos los documentos del vehículo */}\r\n                    {Object.entries(selectedDocuments).map(([key, documento]) => {\r\n                      // Saltar el array de \"otros\" ya que lo procesaremos después\r\n                      if (key === 'otros' || !documento || typeof documento !== 'object') return null;\r\n\r\n                      // Determinar el icono y nombre del documento\r\n                      const getDocumentInfo = (docKey) => {\r\n                        const docTypes = {\r\n                          permisoCirculacion: { icon: '📋', name: 'Permiso de Circulación' },\r\n                          revisionTecnica: { icon: '🔧', name: 'Revisión Técnica' },\r\n                          seguroObligatorio: { icon: '🛡️', name: 'Seguro Obligatorio' },\r\n                          soap: { icon: '🛡️', name: 'SOAP' },\r\n                          padronMunicipal: { icon: '🏛️', name: 'Padrón Municipal' },\r\n                          certificadoGases: { icon: '💨', name: 'Certificado de Gases' },\r\n                          seguroComplementario: { icon: '🔒', name: 'Seguro Complementario' },\r\n                          certificadoRevision: { icon: '📝', name: 'Certificado de Revisión' },\r\n                          permisoTransporte: { icon: '🚛', name: 'Permiso de Transporte' },\r\n                          certificadoOperatividad: { icon: '✅', name: 'Certificado de Operatividad' }\r\n                        };\r\n\r\n                        return docTypes[docKey] || {\r\n                          icon: '📄',\r\n                          name: docKey.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())\r\n                        };\r\n                      };\r\n\r\n                      const docInfo = getDocumentInfo(key);\r\n\r\n                      return (\r\n                        <div key={key} style={{\r\n                          border: '1px solid #e5e7eb',\r\n                          borderRadius: '8px',\r\n                          padding: '15px',\r\n                          background: documento?.url ? '#f0fdf4' : 'white'\r\n                        }}>\r\n                          <h5 style={{\r\n                            margin: '0 0 10px 0',\r\n                            fontSize: '14px',\r\n                            fontWeight: '600',\r\n                            color: '#374151'\r\n                          }}>\r\n                            {docInfo.icon} {docInfo.name}\r\n                          </h5>\r\n                          {documento?.url ? (\r\n                            <div>\r\n                              <div style={{\r\n                                padding: '8px',\r\n                                background: '#f9fafb',\r\n                                borderRadius: '6px',\r\n                                marginBottom: '8px',\r\n                                fontSize: '12px'\r\n                              }}>\r\n                                <div style={{\r\n                                  fontWeight: '500',\r\n                                  color: '#1f2937',\r\n                                  overflow: 'hidden',\r\n                                  textOverflow: 'ellipsis',\r\n                                  whiteSpace: 'nowrap'\r\n                                }}>\r\n                                  {documento.nombre || 'Documento'}\r\n                                </div>\r\n                                {documento.fecha && (\r\n                                  <div style={{ color: '#6b7280', fontSize: '11px', marginTop: '2px' }}>\r\n                                    {new Date(documento.fecha).toLocaleDateString('es-CL')}\r\n                                  </div>\r\n                                )}\r\n                                {documento.tamaño > 0 && (\r\n                                  <div style={{ color: '#9ca3af', fontSize: '10px', marginTop: '2px' }}>\r\n                                    {formatFileSize(documento.tamaño)}\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                              <a\r\n                                href={documento.url}\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                style={{\r\n                                  display: 'block',\r\n                                  padding: '6px',\r\n                                  background: '#3b82f6',\r\n                                  color: 'white',\r\n                                  textAlign: 'center',\r\n                                  borderRadius: '6px',\r\n                                  textDecoration: 'none',\r\n                                  fontSize: '12px'\r\n                                }}\r\n                              >\r\n                                👁️ Ver Documento\r\n                              </a>\r\n                            </div>\r\n                          ) : (\r\n                            <div style={{\r\n                              padding: '20px',\r\n                              background: '#f9fafb',\r\n                              borderRadius: '6px',\r\n                              textAlign: 'center',\r\n                              color: '#6b7280',\r\n                              fontSize: '12px'\r\n                            }}>\r\n                              Sin documento\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n\r\n                  {/* Documentos adicionales si existen */}\r\n                  {selectedDocuments.otros && selectedDocuments.otros.length > 0 && (\r\n                    <div style={{\r\n                      marginTop: '30px',\r\n                      padding: '20px',\r\n                      background: '#f9fafb',\r\n                      borderRadius: '8px'\r\n                    }}>\r\n                      <h5 style={{\r\n                        margin: '0 0 15px 0',\r\n                        fontSize: '16px',\r\n                        fontWeight: '600',\r\n                        color: '#374151'\r\n                      }}>\r\n                        📚 Otros Documentos\r\n                      </h5>\r\n                      <div>\r\n                        {selectedDocuments.otros.map((doc, index) => (\r\n                          <div key={index} style={{\r\n                            padding: '10px',\r\n                            background: 'white',\r\n                            borderRadius: '6px',\r\n                            marginBottom: '8px',\r\n                            display: 'flex',\r\n                            justifyContent: 'space-between',\r\n                            alignItems: 'center',\r\n                            border: '1px solid #e5e7eb'\r\n                          }}>\r\n                            <div style={{ flex: 1, minWidth: 0 }}>\r\n                              <div style={{\r\n                                fontWeight: '500',\r\n                                fontSize: '13px',\r\n                                color: '#1f2937'\r\n                              }}>\r\n                                📜 {doc.nombre || 'Documento adicional'}\r\n                              </div>\r\n                              <div style={{\r\n                                color: '#6b7280',\r\n                                fontSize: '11px',\r\n                                marginTop: '2px'\r\n                              }}>\r\n                                {doc.tamaño && formatFileSize(doc.tamaño)}\r\n                                {doc.fecha && ` • ${new Date(doc.fecha).toLocaleDateString('es-CL')}`}\r\n                              </div>\r\n                            </div>\r\n                            <a\r\n                              href={doc.url}\r\n                              target=\"_blank\"\r\n                              rel=\"noopener noreferrer\"\r\n                              style={{\r\n                                padding: '4px 8px',\r\n                                background: '#3b82f6',\r\n                                color: 'white',\r\n                                borderRadius: '4px',\r\n                                textDecoration: 'none',\r\n                                fontSize: '11px',\r\n                                marginLeft: '10px'\r\n                              }}\r\n                            >\r\n                              Ver\r\n                            </a>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                // Documentos de Trabajador\r\n                <div>\r\n                  <div style={{\r\n                    display: 'grid',\r\n                    gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fit, minmax(280px, 1fr))',\r\n                    gap: '20px',\r\n                    marginBottom: '30px'\r\n                  }}>\r\n                    {/* Licencia de Conducir */}\r\n                    <div style={{\r\n                      border: '1px solid #e5e7eb',\r\n                      borderRadius: '8px',\r\n                      padding: '15px',\r\n                      background: selectedDocuments.licenciaConducir?.url ? '#f0fdf4' : 'white'\r\n                    }}>\r\n                      <h5 style={{\r\n                        margin: '0 0 10px 0',\r\n                        fontSize: '14px',\r\n                        fontWeight: '600',\r\n                        color: '#374151'\r\n                      }}>\r\n                        🚗 Licencia de Conducir\r\n                      </h5>\r\n                      {selectedDocuments.licenciaConducir?.url ? (\r\n                        <div>\r\n                          <div style={{\r\n                            padding: '8px',\r\n                            background: '#f9fafb',\r\n                            borderRadius: '6px',\r\n                            marginBottom: '8px',\r\n                            fontSize: '12px'\r\n                          }}>\r\n                            <div style={{ fontWeight: '500', color: '#1f2937' }}>\r\n                              {selectedDocuments.licenciaConducir.nombre || 'Documento'}\r\n                            </div>\r\n                            {selectedDocuments.licenciaConducir.fecha && (\r\n                              <div style={{ color: '#6b7280', fontSize: '11px', marginTop: '2px' }}>\r\n                                {new Date(selectedDocuments.licenciaConducir.fecha).toLocaleDateString('es-CL')}\r\n                              </div>\r\n                            )}\r\n                            {selectedDocuments.licenciaConducir.tamaño > 0 && (\r\n                              <div style={{ color: '#9ca3af', fontSize: '10px', marginTop: '2px' }}>\r\n                                {formatFileSize(selectedDocuments.licenciaConducir.tamaño)}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                          <a\r\n                            href={selectedDocuments.licenciaConducir.url}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            style={{\r\n                              display: 'block',\r\n                              padding: '6px',\r\n                              background: '#3b82f6',\r\n                              color: 'white',\r\n                              textAlign: 'center',\r\n                              borderRadius: '6px',\r\n                              textDecoration: 'none',\r\n                              fontSize: '12px'\r\n                            }}\r\n                          >\r\n                            👁️ Ver Documento\r\n                          </a>\r\n                        </div>\r\n                      ) : (\r\n                        <div style={{\r\n                          padding: '20px',\r\n                          background: '#f9fafb',\r\n                          borderRadius: '6px',\r\n                          textAlign: 'center',\r\n                          color: '#6b7280',\r\n                          fontSize: '12px'\r\n                        }}>\r\n                          Sin documento\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Certificado de Operador */}\r\n                    <div style={{\r\n                      border: '1px solid #e5e7eb',\r\n                      borderRadius: '8px',\r\n                      padding: '15px',\r\n                      background: selectedDocuments.certificadoOperador?.url ? '#f0fdf4' : 'white'\r\n                    }}>\r\n                      <h5 style={{\r\n                        margin: '0 0 10px 0',\r\n                        fontSize: '14px',\r\n                        fontWeight: '600',\r\n                        color: '#374151'\r\n                      }}>\r\n                        🏗️ Certificado de Operador\r\n                      </h5>\r\n                      {selectedDocuments.certificadoOperador?.url ? (\r\n                        <div>\r\n                          <div style={{\r\n                            padding: '8px',\r\n                            background: '#f9fafb',\r\n                            borderRadius: '6px',\r\n                            marginBottom: '8px',\r\n                            fontSize: '12px'\r\n                          }}>\r\n                            <div style={{ fontWeight: '500', color: '#1f2937' }}>\r\n                              {selectedDocuments.certificadoOperador.nombre || 'Documento'}\r\n                            </div>\r\n                            {selectedDocuments.certificadoOperador.fecha && (\r\n                              <div style={{ color: '#6b7280', fontSize: '11px', marginTop: '2px' }}>\r\n                                {new Date(selectedDocuments.certificadoOperador.fecha).toLocaleDateString('es-CL')}\r\n                              </div>\r\n                            )}\r\n                            {selectedDocuments.certificadoOperador.tamaño > 0 && (\r\n                              <div style={{ color: '#9ca3af', fontSize: '10px', marginTop: '2px' }}>\r\n                                {formatFileSize(selectedDocuments.certificadoOperador.tamaño)}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                          <a\r\n                            href={selectedDocuments.certificadoOperador.url}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            style={{\r\n                              display: 'block',\r\n                              padding: '6px',\r\n                              background: '#3b82f6',\r\n                              color: 'white',\r\n                              textAlign: 'center',\r\n                              borderRadius: '6px',\r\n                              textDecoration: 'none',\r\n                              fontSize: '12px'\r\n                            }}\r\n                          >\r\n                            👁️ Ver Documento\r\n                          </a>\r\n                        </div>\r\n                      ) : (\r\n                        <div style={{\r\n                          padding: '20px',\r\n                          background: '#f9fafb',\r\n                          borderRadius: '6px',\r\n                          textAlign: 'center',\r\n                          color: '#6b7280',\r\n                          fontSize: '12px'\r\n                        }}>\r\n                          Sin documento\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Certificados Adicionales */}\r\n                  {selectedDocuments.certificados && selectedDocuments.certificados.length > 0 && (\r\n                    <div style={{\r\n                      padding: '20px',\r\n                      background: '#f9fafb',\r\n                      borderRadius: '8px'\r\n                    }}>\r\n                      <h5 style={{\r\n                        margin: '0 0 15px 0',\r\n                        fontSize: '16px',\r\n                        fontWeight: '600',\r\n                        color: '#374151'\r\n                      }}>\r\n                        📚 Certificados de Capacitación\r\n                      </h5>\r\n                      <div>\r\n                        {selectedDocuments.certificados.map((cert, index) => (\r\n                          <div key={index} style={{\r\n                            padding: '10px',\r\n                            background: 'white',\r\n                            borderRadius: '6px',\r\n                            marginBottom: '8px',\r\n                            display: 'flex',\r\n                            justifyContent: 'space-between',\r\n                            alignItems: 'center',\r\n                            border: '1px solid #e5e7eb'\r\n                          }}>\r\n                            <div style={{ flex: 1, minWidth: 0 }}>\r\n                              <div style={{\r\n                                fontWeight: '500',\r\n                                fontSize: '13px',\r\n                                color: '#1f2937'\r\n                              }}>\r\n                                📜 {cert.nombre || 'Certificado'}\r\n                              </div>\r\n                              <div style={{\r\n                                color: '#6b7280',\r\n                                fontSize: '11px',\r\n                                marginTop: '2px'\r\n                              }}>\r\n                                {cert.tamaño && formatFileSize(cert.tamaño)}\r\n                                {cert.fecha && ` • ${new Date(cert.fecha).toLocaleDateString('es-CL')}`}\r\n                              </div>\r\n                            </div>\r\n                            <a\r\n                              href={cert.url}\r\n                              target=\"_blank\"\r\n                              rel=\"noopener noreferrer\"\r\n                              style={{\r\n                                padding: '4px 8px',\r\n                                background: '#3b82f6',\r\n                                color: 'white',\r\n                                borderRadius: '4px',\r\n                                textDecoration: 'none',\r\n                                fontSize: '11px',\r\n                                marginLeft: '10px'\r\n                              }}\r\n                            >\r\n                              Ver\r\n                            </a>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Mensaje si no hay documentos */}\r\n              {isVehicle ? (\r\n                Object.keys(selectedDocuments).length === 0 && (\r\n                  <div style={{\r\n                    padding: '40px',\r\n                    textAlign: 'center',\r\n                    color: '#6b7280',\r\n                    background: '#f9fafb',\r\n                    borderRadius: '8px',\r\n                    marginTop: '20px'\r\n                  }}>\r\n                    <div style={{ fontSize: '48px', marginBottom: '10px' }}>📭</div>\r\n                    <p>No hay documentos registrados para este vehículo</p>\r\n                  </div>\r\n                )\r\n              ) : (\r\n                !selectedDocuments.licenciaConducir?.url &&\r\n                !selectedDocuments.certificadoOperador?.url &&\r\n                selectedDocuments.certificados?.length === 0 && (\r\n                  <div style={{\r\n                    padding: '40px',\r\n                    textAlign: 'center',\r\n                    color: '#6b7280',\r\n                    background: '#f9fafb',\r\n                    borderRadius: '8px'\r\n                  }}>\r\n                    <div style={{ fontSize: '48px', marginBottom: '10px' }}>📭</div>\r\n                    <p>No hay documentos registrados para este trabajador</p>\r\n                  </div>\r\n                )\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  // Agregar este componente antes del return principal\r\n  const WorkerDetailModal = () => {\r\n    if (!showWorkerDetailModal || !selectedWorker) return null;\r\n\r\n    const userData = users.find(u => u.id === selectedWorker.id);\r\n    const vehiculo = vehiculos.find(v => v.operadorAsignado === selectedWorker.id);\r\n\r\n    // Calcular estado de licencia\r\n    let estadoLicencia = null;\r\n    if (selectedWorker.fechaVencimientoLicencia && selectedWorker.licenciasConducir?.length > 0) {\r\n      const fechaVencimiento = new Date(selectedWorker.fechaVencimientoLicencia);\r\n      const hoy = new Date();\r\n      const diasRestantes = Math.ceil((fechaVencimiento - hoy) / (1000 * 60 * 60 * 24));\r\n\r\n      if (diasRestantes < 0) {\r\n        estadoLicencia = { tipo: 'vencida', texto: 'VENCIDA', color: '#ef4444', dias: diasRestantes };\r\n      } else if (diasRestantes <= 14) {\r\n        estadoLicencia = { tipo: 'porVencer', texto: `${diasRestantes} días`, color: '#f59e0b', dias: diasRestantes };\r\n      } else {\r\n        estadoLicencia = { tipo: 'vigente', texto: 'Vigente', color: '#22c55e', dias: diasRestantes };\r\n      }\r\n    }\r\n\r\n    const handleToggleLicenseBlock = async () => {\r\n      setUpdatingLicense(true);\r\n      try {\r\n        const nuevoEstadoBloqueo = !selectedWorker.licenciaBloqueada;\r\n\r\n        // Actualizar en Firestore\r\n        const userRef = doc(firestore, 'users', selectedWorker.id);\r\n        await updateDoc(userRef, {\r\n          licenciaBloqueada: nuevoEstadoBloqueo,\r\n          motivoBloqueo: nuevoEstadoBloqueo ? 'Bloqueado por administrador' : '',\r\n          fechaBloqueo: nuevoEstadoBloqueo ? new Date().toISOString() : '',\r\n          updatedAt: new Date().toISOString(),\r\n          updatedBy: currentUser.uid\r\n        });\r\n\r\n        // Actualizar en Realtime Database\r\n        const trabajadorRef = ref(database, `trabajadores/${selectedWorker.id}`);\r\n        await update(trabajadorRef, {\r\n          licenciaBloqueada: nuevoEstadoBloqueo,\r\n          motivoBloqueo: nuevoEstadoBloqueo ? 'Bloqueado por administrador' : '',\r\n          fechaBloqueo: nuevoEstadoBloqueo ? new Date().toISOString() : '',\r\n          ultimaActualizacion: new Date().toISOString()\r\n        });\r\n\r\n        // Si se bloquea la licencia y tiene vehículo asignado, desasignarlo\r\n        if (nuevoEstadoBloqueo && vehiculo) {\r\n          const vehiculoRef = ref(database, `vehiculos/${vehiculo.id}`);\r\n          await update(vehiculoRef, {\r\n            operadorAsignado: null,\r\n            ultimaActualizacion: new Date().toISOString()\r\n          });\r\n        }\r\n\r\n        setMessage({\r\n          type: 'success',\r\n          text: `✅ Licencia ${nuevoEstadoBloqueo ? 'bloqueada' : 'habilitada'} exitosamente`\r\n        });\r\n\r\n        // Actualizar el trabajador seleccionado\r\n        setSelectedWorker({\r\n          ...selectedWorker,\r\n          licenciaBloqueada: nuevoEstadoBloqueo,\r\n          motivoBloqueo: nuevoEstadoBloqueo ? 'Bloqueado por administrador' : '',\r\n          fechaBloqueo: nuevoEstadoBloqueo ? new Date().toISOString() : ''\r\n        });\r\n\r\n        // Recargar datos\r\n        loadTrabajadores();\r\n        loadUsers();\r\n\r\n      } catch (error) {\r\n        console.error('Error al actualizar licencia:', error);\r\n        setMessage({\r\n          type: 'error',\r\n          text: '❌ Error al actualizar el estado de la licencia'\r\n        });\r\n      } finally {\r\n        setUpdatingLicense(false);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0,0,0,0.5)',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: isMobile ? 'flex-start' : 'center',\r\n        zIndex: 3000,\r\n        padding: isMobile ? '10px' : '20px',\r\n        overflowY: 'auto'\r\n      }}>\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '12px',\r\n          maxWidth: isMobile ? '100%' : '800px',\r\n          width: '100%',\r\n          maxHeight: isMobile ? 'none' : '90vh',\r\n          overflow: 'auto',\r\n          padding: isMobile ? '20px' : '30px',\r\n          marginTop: isMobile ? '20px' : '0',\r\n          marginBottom: isMobile ? '20px' : '0'\r\n        }}>\r\n          {/* Header */}\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            marginBottom: '25px',\r\n            paddingBottom: '15px',\r\n            borderBottom: '2px solid #e5e7eb'\r\n          }}>\r\n            <h2 style={{\r\n              margin: 0,\r\n              color: '#1f2937',\r\n              fontSize: isMobile ? '20px' : '24px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '10px'\r\n            }}>\r\n              👷 {selectedWorker.nombre || userData?.name || 'Trabajador'}\r\n            </h2>\r\n            <button\r\n              onClick={() => {\r\n                setShowWorkerDetailModal(false);\r\n                setSelectedWorker(null);\r\n              }}\r\n              style={{\r\n                padding: '8px',\r\n                background: '#6b7280',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                cursor: 'pointer',\r\n                fontSize: '18px',\r\n                minWidth: '40px',\r\n                height: '40px'\r\n              }}\r\n            >\r\n              ✖\r\n            </button>\r\n          </div>\r\n\r\n          {/* Información Personal */}\r\n          <div style={{\r\n            background: '#f9fafb',\r\n            padding: '20px',\r\n            borderRadius: '8px',\r\n            marginBottom: '20px'\r\n          }}>\r\n            <h3 style={{ margin: '0 0 15px 0', fontSize: '16px', color: '#374151' }}>\r\n              📋 Información Personal\r\n            </h3>\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: isMobile ? '1fr' : 'repeat(2, 1fr)',\r\n              gap: '15px'\r\n            }}>\r\n              <div>\r\n                <span style={{ color: '#6b7280', fontSize: '13px' }}>RUT</span>\r\n                <div style={{ fontWeight: '500', fontSize: '15px' }}>\r\n                  {selectedWorker.rut || userData?.rut || 'No registrado'}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <span style={{ color: '#6b7280', fontSize: '13px' }}>Email</span>\r\n                <div style={{ fontWeight: '500', fontSize: '15px' }}>\r\n                  {selectedWorker.email || userData?.email}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <span style={{ color: '#6b7280', fontSize: '13px' }}>Teléfono</span>\r\n                <div style={{ fontWeight: '500', fontSize: '15px' }}>\r\n                  {selectedWorker.telefono || userData?.phone || 'No registrado'}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <span style={{ color: '#6b7280', fontSize: '13px' }}>Estado</span>\r\n                <div style={{ fontWeight: '500', fontSize: '15px' }}>\r\n                  <span style={{\r\n                    padding: '4px 10px',\r\n                    borderRadius: '20px',\r\n                    fontSize: '12px',\r\n                    background: selectedWorker.estado === 'trabajando' ? '#dcfce7' :\r\n                      selectedWorker.estado === 'en_camino' ? '#ede9fe' :\r\n                        selectedWorker.estado === 'disponible' ? '#e0f2fe' : '#f3f4f6',\r\n                    color: selectedWorker.estado === 'trabajando' ? '#15803d' :\r\n                      selectedWorker.estado === 'en_camino' ? '#6b21a8' :\r\n                        selectedWorker.estado === 'disponible' ? '#0891b2' : '#6b7280'\r\n                  }}>\r\n                    {selectedWorker.estado === 'trabajando' ? '🔧 Trabajando' :\r\n                      selectedWorker.estado === 'en_camino' ? '🚗 En Camino' :\r\n                        selectedWorker.estado === 'disponible' ? '✅ Disponible' : '⏸️ Inactivo'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Información de Licencia */}\r\n          <div style={{\r\n            background: selectedWorker.licenciaBloqueada ? '#fee2e2' : '#f9fafb',\r\n            padding: '20px',\r\n            borderRadius: '8px',\r\n            marginBottom: '20px',\r\n            border: selectedWorker.licenciaBloqueada ? '2px solid #ef4444' : 'none'\r\n          }}>\r\n            <h3 style={{\r\n              margin: '0 0 15px 0',\r\n              fontSize: '16px',\r\n              color: selectedWorker.licenciaBloqueada ? '#991b1b' : '#374151',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'space-between'\r\n            }}>\r\n              <span>🚗 Información de Licencia</span>\r\n              {selectedWorker.licenciaBloqueada && (\r\n                <span style={{\r\n                  background: '#ef4444',\r\n                  color: 'white',\r\n                  padding: '4px 10px',\r\n                  borderRadius: '4px',\r\n                  fontSize: '12px',\r\n                  fontWeight: '600'\r\n                }}>\r\n                  🚫 BLOQUEADA\r\n                </span>\r\n              )}\r\n            </h3>\r\n\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: isMobile ? '1fr' : 'repeat(2, 1fr)',\r\n              gap: '15px',\r\n              marginBottom: '15px'\r\n            }}>\r\n              <div>\r\n                <span style={{ color: '#6b7280', fontSize: '13px' }}>Licencias</span>\r\n                <div style={{ fontWeight: '500', fontSize: '15px' }}>\r\n                  {selectedWorker.licenciasConducir?.length > 0 ? (\r\n                    <div style={{ display: 'flex', flexWrap: 'wrap', gap: '5px', marginTop: '5px' }}>\r\n                      {selectedWorker.licenciasConducir.map(lic => (\r\n                        <span key={lic} style={{\r\n                          padding: '3px 8px',\r\n                          background: '#3b82f6',\r\n                          color: 'white',\r\n                          borderRadius: '4px',\r\n                          fontSize: '12px',\r\n                          fontWeight: '500'\r\n                        }}>\r\n                          Clase {lic}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  ) : 'Sin licencia registrada'}\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <span style={{ color: '#6b7280', fontSize: '13px' }}>Vencimiento</span>\r\n                <div style={{ fontWeight: '500', fontSize: '15px' }}>\r\n                  {selectedWorker.fechaVencimientoLicencia ? (\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                      <span>{new Date(selectedWorker.fechaVencimientoLicencia).toLocaleDateString('es-CL')}</span>\r\n                      {estadoLicencia && (\r\n                        <span style={{\r\n                          padding: '2px 8px',\r\n                          borderRadius: '4px',\r\n                          fontSize: '11px',\r\n                          fontWeight: '600',\r\n                          background: estadoLicencia.color + '20',\r\n                          color: estadoLicencia.color,\r\n                          border: `1px solid ${estadoLicencia.color}`\r\n                        }}>\r\n                          {estadoLicencia.tipo === 'vencida' ? '⚠️ VENCIDA' :\r\n                            estadoLicencia.tipo === 'porVencer' ? `⚠️ Vence en ${estadoLicencia.dias} días` :\r\n                              '✅ Vigente'}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  ) : 'No registrado'}\r\n                </div>\r\n              </div>\r\n\r\n              {selectedWorker.observacionesLicencia && (\r\n                <div style={{ gridColumn: isMobile ? 'span 1' : 'span 2' }}>\r\n                  <span style={{ color: '#6b7280', fontSize: '13px' }}>Observaciones/Restricciones</span>\r\n                  <div style={{\r\n                    fontWeight: '500',\r\n                    fontSize: '14px',\r\n                    padding: '10px',\r\n                    background: 'white',\r\n                    borderRadius: '6px',\r\n                    marginTop: '5px'\r\n                  }}>\r\n                    {selectedWorker.observacionesLicencia}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {selectedWorker.licenciaBloqueada && (\r\n                <div style={{ gridColumn: isMobile ? 'span 1' : 'span 2' }}>\r\n                  <span style={{ color: '#991b1b', fontSize: '13px', fontWeight: '600' }}>\r\n                    Motivo del Bloqueo\r\n                  </span>\r\n                  <div style={{\r\n                    fontSize: '14px',\r\n                    padding: '10px',\r\n                    background: '#fef2f2',\r\n                    borderRadius: '6px',\r\n                    marginTop: '5px',\r\n                    color: '#7f1d1d'\r\n                  }}>\r\n                    {selectedWorker.motivoBloqueo || 'No especificado'}\r\n                    {selectedWorker.fechaBloqueo && (\r\n                      <div style={{ fontSize: '12px', marginTop: '5px', color: '#991b1b' }}>\r\n                        Bloqueado el: {new Date(selectedWorker.fechaBloqueo).toLocaleDateString('es-CL')}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Botón para bloquear/habilitar licencia */}\r\n            <button\r\n              onClick={handleToggleLicenseBlock}\r\n              disabled={updatingLicense || !selectedWorker.licenciasConducir?.length}\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                background: selectedWorker.licenciaBloqueada ? '#22c55e' : '#ef4444',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                fontSize: '14px',\r\n                fontWeight: '600',\r\n                cursor: updatingLicense || !selectedWorker.licenciasConducir?.length ? 'not-allowed' : 'pointer',\r\n                opacity: updatingLicense || !selectedWorker.licenciasConducir?.length ? 0.5 : 1\r\n              }}\r\n            >\r\n              {updatingLicense ? 'Procesando...' :\r\n                selectedWorker.licenciaBloqueada ? '✅ Habilitar Licencia' : '🚫 Bloquear Licencia'}\r\n            </button>\r\n\r\n            {!selectedWorker.licenciasConducir?.length && (\r\n              <small style={{ color: '#6b7280', fontSize: '12px', display: 'block', marginTop: '5px', textAlign: 'center' }}>\r\n                No se puede gestionar sin licencia registrada\r\n              </small>\r\n            )}\r\n          </div>\r\n\r\n          {/* Información del Vehículo */}\r\n          <div style={{\r\n            background: '#f9fafb',\r\n            padding: '20px',\r\n            borderRadius: '8px',\r\n            marginBottom: '20px'\r\n          }}>\r\n            <h3 style={{ margin: '0 0 15px 0', fontSize: '16px', color: '#374151' }}>\r\n              🚛 Vehículo Asignado\r\n            </h3>\r\n            {vehiculo ? (\r\n              <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: isMobile ? '1fr' : 'repeat(2, 1fr)',\r\n                gap: '15px'\r\n              }}>\r\n                <div>\r\n                  <span style={{ color: '#6b7280', fontSize: '13px' }}>Nombre</span>\r\n                  <div style={{ fontWeight: '500', fontSize: '15px' }}>{vehiculo.nombre}</div>\r\n                </div>\r\n                <div>\r\n                  <span style={{ color: '#6b7280', fontSize: '13px' }}>Patente</span>\r\n                  <div style={{ fontWeight: '500', fontSize: '15px' }}>{vehiculo.patente}</div>\r\n                </div>\r\n                <div>\r\n                  <span style={{ color: '#6b7280', fontSize: '13px' }}>Marca/Modelo</span>\r\n                  <div style={{ fontWeight: '500', fontSize: '15px' }}>\r\n                    {vehiculo.marca} {vehiculo.modelo}\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  <span style={{ color: '#6b7280', fontSize: '13px' }}>Estado</span>\r\n                  <div style={{ fontWeight: '500', fontSize: '15px' }}>\r\n                    <span style={{\r\n                      padding: '4px 10px',\r\n                      borderRadius: '20px',\r\n                      fontSize: '12px',\r\n                      background: vehiculo.estado === 'disponible' ? '#dcfce7' :\r\n                        vehiculo.estado === 'en_uso' ? '#dbeafe' :\r\n                          vehiculo.estado === 'mantenimiento' ? '#fef3c7' : '#fee2e2',\r\n                      color: vehiculo.estado === 'disponible' ? '#15803d' :\r\n                        vehiculo.estado === 'en_uso' ? '#1e40af' :\r\n                          vehiculo.estado === 'mantenimiento' ? '#92400e' : '#991b1b'\r\n                    }}>\r\n                      {vehiculo.estado === 'disponible' ? '✅ Disponible' :\r\n                        vehiculo.estado === 'en_uso' ? '🔧 En Uso' :\r\n                          vehiculo.estado === 'mantenimiento' ? '🔧 Mantenimiento' : '❌ Fuera de Servicio'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div style={{\r\n                padding: '20px',\r\n                background: 'white',\r\n                borderRadius: '6px',\r\n                textAlign: 'center',\r\n                color: '#6b7280'\r\n              }}>\r\n                Sin vehículo asignado\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Botones de acción */}\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '10px',\r\n            flexWrap: 'wrap'\r\n          }}>\r\n            <button\r\n              onClick={() => {\r\n                openEditModal(selectedWorker, 'worker');\r\n                setShowWorkerDetailModal(false);\r\n              }}\r\n              style={{\r\n                flex: 1,\r\n                padding: '12px',\r\n                background: '#3b82f6',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              ✏️ Editar Información\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                loadWorkerDocuments(selectedWorker.id, selectedWorker);\r\n                setShowWorkerDetailModal(false);\r\n              }}\r\n              style={{\r\n                flex: 1,\r\n                padding: '12px',\r\n                background: '#10b981',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              📄 Ver Documentos\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  // Función para renderizar tarjetas de usuario (reutilizable)\r\n  const renderUserCard = (usuario, rolColor) => {\r\n    const userData = users.find(u => u.id === usuario.id);\r\n    const vehiculo = vehiculos.find(v => v.operadorAsignado === usuario.id);\r\n    const isExpanded = expandedCards[usuario.id];\r\n    const isGPSActive = usuario.ubicacion &&\r\n      (new Date() - new Date(usuario.ubicacion.timestamp)) < 60000;\r\n\r\n    let tieneProblemaLicencia = false;\r\n    if (usuario.licenciaBloqueada) {\r\n      tieneProblemaLicencia = true;\r\n    } else if (usuario.fechaVencimientoLicencia) {\r\n      const fechaVencimiento = new Date(usuario.fechaVencimientoLicencia);\r\n      const hoy = new Date();\r\n      const diasRestantes = Math.ceil((fechaVencimiento - hoy) / (1000 * 60 * 60 * 24));\r\n      if (diasRestantes <= 14) tieneProblemaLicencia = true;\r\n    }\r\n\r\n    return (\r\n      <div key={usuario.id} style={{\r\n        background: 'white',\r\n        borderRadius: '12px',\r\n        boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n        overflow: 'hidden',\r\n        transition: 'all 0.3s ease',\r\n        border: isGPSActive ? '2px solid #10b981' :\r\n          tieneProblemaLicencia ? '2px solid #f59e0b' : '1px solid #e5e7eb'\r\n      }}>\r\n        <div style={{\r\n          padding: '15px 20px',\r\n          background: rolColor,\r\n          borderBottom: '1px solid #e5e7eb'\r\n        }}>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <h3 style={{ margin: 0, fontSize: '18px', fontWeight: '600', color: '#1f2937' }}>\r\n              {usuario.role === 'admin' ? '👨‍💼' :\r\n                usuario.role === 'superadmin' ? '🔐' : '👷'} {usuario.nombre || userData?.name || 'Usuario'}\r\n            </h3>\r\n            <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n              {usuario.licenciaBloqueada && (\r\n                <span style={{\r\n                  padding: '2px 6px',\r\n                  background: '#ef4444',\r\n                  color: 'white',\r\n                  borderRadius: '4px',\r\n                  fontSize: '10px',\r\n                  fontWeight: '600'\r\n                }}>\r\n                  🚫 LIC.BLOQ\r\n                </span>\r\n              )}\r\n              {isGPSActive && (\r\n                <span style={{\r\n                  width: '10px',\r\n                  height: '10px',\r\n                  borderRadius: '50%',\r\n                  background: '#10b981',\r\n                  animation: 'pulse 2s infinite'\r\n                }} title=\"GPS Activo\" />\r\n              )}\r\n              <span style={{\r\n                padding: '4px 10px',\r\n                borderRadius: '20px',\r\n                fontSize: '12px',\r\n                fontWeight: '500',\r\n                background: 'white',\r\n                color: usuario.role === 'admin' ? '#1e40af' :\r\n                  usuario.role === 'superadmin' ? '#6b21a8' :\r\n                    usuario.estado === 'trabajando' ? '#15803d' :\r\n                      usuario.estado === 'disponible' ? '#0891b2' : '#6b7280'\r\n              }}>\r\n                {usuario.role === 'admin' ? 'Administrador' :\r\n                  usuario.role === 'superadmin' ? 'Super Admin' :\r\n                    usuario.estado === 'trabajando' ? '🔧 Trabajando' :\r\n                      usuario.estado === 'disponible' ? '✅ Disponible' : '⏸️ Inactivo'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ padding: '20px' }}>\r\n          <div style={{ display: 'grid', gap: '10px', fontSize: '14px' }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n              <span style={{ color: '#6b7280' }}>📧 Email:</span>\r\n              <span style={{ fontWeight: '500', fontSize: '13px' }}>{userData?.email || usuario.email || 'N/A'}</span>\r\n            </div>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n              <span style={{ color: '#6b7280' }}>📱 Teléfono:</span>\r\n              <span style={{ fontWeight: '500' }}>{userData?.phone || usuario.telefono || 'N/A'}</span>\r\n            </div>\r\n\r\n            {/* Solo mostrar vehículo para trabajadores */}\r\n            {(!usuario.role || usuario.role === 'trabajador') && (\r\n              <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                <span style={{ color: '#6b7280' }}>🚛 Vehículo:</span>\r\n                <span style={{ fontWeight: '500' }}>{vehiculo?.nombre || 'Sin asignar'}</span>\r\n              </div>\r\n            )}\r\n\r\n            {/* Mostrar localidad para admins/superadmins si tienen */}\r\n            {usuario.localidad && (usuario.role === 'admin' || usuario.role === 'superadmin') && (\r\n              <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                <span style={{ color: '#6b7280' }}>📍 Localidad:</span>\r\n                <span style={{ fontWeight: '500' }}>{usuario.localidad}</span>\r\n              </div>\r\n            )}\r\n\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n              <span style={{ color: '#6b7280' }}>🚗 Licencias:</span>\r\n              <span style={{ fontWeight: '500' }}>\r\n                {usuario.licenciasConducir?.length > 0 ?\r\n                  usuario.licenciasConducir.join(', ') :\r\n                  usuario.licenciaConducir || 'Sin licencia'}\r\n              </span>\r\n            </div>\r\n\r\n            {(!usuario.role || usuario.role === 'trabajador') && (\r\n              <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                <span style={{ color: '#6b7280' }}>📍 GPS:</span>\r\n                <span style={{\r\n                  fontWeight: '500',\r\n                  color: isGPSActive ? '#10b981' : '#ef4444'\r\n                }}>\r\n                  {isGPSActive ? '🟢 Activo' : '🔴 Inactivo'}\r\n                </span>\r\n              </div>\r\n            )}\r\n\r\n            {isExpanded && (\r\n              <div style={{ borderTop: '1px solid #e5e7eb', paddingTop: '10px', marginTop: '5px' }}>\r\n                {usuario.fechaVencimientoLicencia && (\r\n                  <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                    <span style={{ color: '#6b7280' }}>📅 Vence Licencia:</span>\r\n                    <span style={{ fontWeight: '500', fontSize: '13px' }}>\r\n                      {new Date(usuario.fechaVencimientoLicencia).toLocaleDateString('es-CL')}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n\r\n                {usuario.observacionesLicencia && (\r\n                  <div style={{\r\n                    marginTop: '10px',\r\n                    padding: '10px',\r\n                    background: '#fef3c7',\r\n                    borderRadius: '6px'\r\n                  }}>\r\n                    <strong style={{ color: '#92400e', fontSize: '12px' }}>⚠️ Restricciones:</strong>\r\n                    <p style={{ margin: '5px 0 0 0', fontSize: '13px' }}>\r\n                      {usuario.observacionesLicencia}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: 'repeat(2, 1fr)',\r\n            gap: '8px',\r\n            marginTop: '15px'\r\n          }}>\r\n            <button\r\n              onClick={() => toggleCardExpansion(usuario.id)}\r\n              style={{\r\n                padding: isMobile ? '6px' : '8px',\r\n                background: '#f3f4f6',\r\n                color: '#374151',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                fontSize: isMobile ? '11px' : '13px',\r\n                cursor: 'pointer',\r\n                fontWeight: '500'\r\n              }}\r\n            >\r\n              {isExpanded ? '➖ Menos' : '➕ Más'}\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                setSelectedWorker(usuario);\r\n                setShowWorkerDetailModal(true);\r\n              }}\r\n              style={{\r\n                padding: isMobile ? '6px' : '8px',\r\n                background: '#8b5cf6',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                fontSize: isMobile ? '11px' : '13px',\r\n                cursor: 'pointer',\r\n                fontWeight: '500'\r\n              }}\r\n            >\r\n              👁️ Ver Todo\r\n            </button>\r\n            <button\r\n              onClick={() => loadWorkerDocuments(usuario.id, usuario)}\r\n              style={{\r\n                padding: isMobile ? '6px' : '8px',\r\n                background: '#10b981',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                fontSize: isMobile ? '11px' : '13px',\r\n                cursor: 'pointer',\r\n                fontWeight: '500'\r\n              }}\r\n            >\r\n              📄 Docs\r\n            </button>\r\n            <button\r\n              onClick={() => openEditModal(usuario, 'worker')}\r\n              style={{\r\n                padding: isMobile ? '6px' : '8px',\r\n                background: '#3b82f6',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                fontSize: isMobile ? '11px' : '13px',\r\n                cursor: 'pointer',\r\n                fontWeight: '500'\r\n              }}\r\n            >\r\n              ✏️ Editar\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <div style={{ display: 'flex', height: '100vh', background: '#f3f4f6' }}>\r\n      {/* SIDEBAR IZQUIERDO */}\r\n      <div style={{\r\n        width: isMobile ? '280px' : '260px',\r\n        background: 'linear-gradient(135deg, #1e293b 0%, #334155 100%)',\r\n        transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n        position: isMobile ? 'fixed' : 'relative',\r\n        height: '100vh',\r\n        zIndex: 999,\r\n        left: isMobile ? (isSidebarOpen ? '0' : '-280px') : '0',\r\n        boxShadow: '4px 0 20px rgba(0,0,0,0.3)',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        overflow: 'visible' // CAMBIAR A VISIBLE para permitir que el dropdown se muestre\r\n      }}>\r\n        {/* Header del Sidebar */}\r\n        <div style={{\r\n          padding: '20px',\r\n          borderBottom: '1px solid rgba(255,255,255,0.1)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '12px',\r\n          background: 'rgba(0,0,0,0.2)',\r\n          position: 'relative'\r\n        }}>\r\n          <span style={{\r\n            fontSize: '32px',\r\n            filter: 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'\r\n          }}>\r\n            🚛\r\n          </span>\r\n          <div style={{ flex: 1 }}>\r\n            <h2 style={{\r\n              margin: 0,\r\n              color: 'white',\r\n              fontSize: '18px',\r\n              fontWeight: '600',\r\n              letterSpacing: '0.5px'\r\n            }}>\r\n              Panel de Flota\r\n            </h2>\r\n            <p style={{\r\n              margin: 0,\r\n              color: 'rgba(255,255,255,0.7)',\r\n              fontSize: '12px'\r\n            }}>\r\n              Control de vehículos\r\n            </p>\r\n          </div>\r\n          {/* Botón de cerrar sidebar (solo móvil) */}\r\n          {isMobile && (\r\n            <button\r\n              onClick={() => setIsSidebarOpen(false)}\r\n              style={{\r\n                position: 'absolute',\r\n                right: '15px',\r\n                top: '50%',\r\n                transform: 'translateY(-50%)',\r\n                background: 'rgba(255,255,255,0.1)',\r\n                border: '1px solid rgba(255,255,255,0.2)',\r\n                borderRadius: '50%',\r\n                width: '32px',\r\n                height: '32px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                cursor: 'pointer',\r\n                color: 'white',\r\n                fontSize: '18px',\r\n                transition: 'all 0.2s ease',\r\n                padding: 0\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                e.currentTarget.style.background = 'rgba(255,255,255,0.2)';\r\n                e.currentTarget.style.transform = 'translateY(-50%) scale(1.1)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.currentTarget.style.background = 'rgba(255,255,255,0.1)';\r\n                e.currentTarget.style.transform = 'translateY(-50%) scale(1)';\r\n              }}\r\n              aria-label=\"Cerrar menú\"\r\n            >\r\n              ✕\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Sección de Notificaciones */}\r\n        <div style={{\r\n          padding: '10px',\r\n          borderBottom: '1px solid rgba(255,255,255,0.1)',\r\n          position: 'relative', // Importante para el posicionamiento\r\n          zIndex: 1001 // Mayor z-index\r\n        }}>\r\n          <div style={{\r\n            background: 'rgba(255,255,255,0.1)',\r\n            borderRadius: '8px',\r\n            padding: '12px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '10px',\r\n            cursor: 'pointer',\r\n            position: 'relative' // Añadir posición relativa\r\n          }}>\r\n            <NotificationSystem\r\n              currentUser={currentUser}\r\n              isMobile={isMobile}\r\n              inSidebar={true}\r\n              dropdownPosition={isMobile ? 'right' : 'right'} // Forzar que el dropdown aparezca a la derecha\r\n              style={{\r\n                position: 'relative',\r\n                zIndex: 1002\r\n              }}\r\n            />\r\n\r\n          </div>\r\n        </div>\r\n\r\n        {/* Botón Super Admin */}\r\n        {currentUser.role === 'superadmin' && (\r\n          <div style={{ padding: '10px' }}>\r\n            <button\r\n              onClick={() => onViewChange('admin')}\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px 20px',\r\n                background: 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '8px',\r\n                cursor: 'pointer',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '10px',\r\n                transition: 'all 0.3s ease',\r\n                boxShadow: '0 2px 8px rgba(139, 92, 246, 0.3)'\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                e.currentTarget.style.transform = 'translateX(2px)';\r\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(139, 92, 246, 0.4)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.currentTarget.style.transform = 'translateX(0)';\r\n                e.currentTarget.style.boxShadow = '0 2px 8px rgba(139, 92, 246, 0.3)';\r\n              }}\r\n            >\r\n              🔐 Super Administrador\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Espaciador flexible */}\r\n        <div style={{ flex: 1 }}></div>\r\n\r\n        {/* Footer del Sidebar */}\r\n        <div style={{\r\n          padding: '20px',\r\n          borderTop: '1px solid rgba(255,255,255,0.1)',\r\n          background: 'rgba(0,0,0,0.2)'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '12px',\r\n            marginBottom: '15px',\r\n            color: 'white'\r\n          }}>\r\n            <div style={{\r\n              width: '40px',\r\n              height: '40px',\r\n              background: 'rgba(255,255,255,0.2)',\r\n              borderRadius: '50%',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontSize: '18px'\r\n            }}>\r\n              👤\r\n            </div>\r\n            <div style={{ flex: 1, minWidth: 0 }}>\r\n              <div style={{\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                overflow: 'hidden',\r\n                textOverflow: 'ellipsis',\r\n                whiteSpace: 'nowrap'\r\n              }}>\r\n                {currentUser.name || 'Usuario'}\r\n              </div>\r\n              <div style={{\r\n                fontSize: '12px',\r\n                opacity: 0.7,\r\n                overflow: 'hidden',\r\n                textOverflow: 'ellipsis',\r\n                whiteSpace: 'nowrap'\r\n              }}>\r\n                {currentUser.email}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            onClick={onLogout}\r\n            style={{\r\n              width: '100%',\r\n              padding: '10px',\r\n              background: '#ef4444',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '6px',\r\n              cursor: 'pointer',\r\n              fontSize: '14px',\r\n              fontWeight: '500',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              gap: '8px',\r\n              transition: 'all 0.2s'\r\n            }}\r\n            onMouseEnter={(e) => {\r\n              e.currentTarget.style.background = '#dc2626';\r\n              e.currentTarget.style.transform = 'scale(1.02)';\r\n            }}\r\n            onMouseLeave={(e) => {\r\n              e.currentTarget.style.background = '#ef4444';\r\n              e.currentTarget.style.transform = 'scale(1)';\r\n            }}\r\n          >\r\n            🚪 Cerrar Sesión\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* CONTENIDO PRINCIPAL */}\r\n      <div style={{\r\n        flex: 1,\r\n        overflow: 'auto'\r\n      }}>\r\n        {/* Botón hamburguesa para móvil */}\r\n        {isMobile && (\r\n          <div style={{\r\n            background: 'white',\r\n            padding: '15px',\r\n            borderBottom: '1px solid #e5e7eb',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '15px'\r\n          }}>\r\n            <button\r\n              onClick={() => setIsSidebarOpen(!isSidebarOpen)}\r\n              style={{\r\n                background: '#1e293b',\r\n                color: 'white',\r\n                border: 'none',\r\n                padding: '8px',\r\n                borderRadius: '6px',\r\n                cursor: 'pointer',\r\n                fontSize: '20px'\r\n              }}\r\n            >\r\n              ☰\r\n            </button>\r\n            <h1 style={{\r\n              margin: 0,\r\n              fontSize: '18px',\r\n              color: '#1e293b'\r\n            }}>\r\n              Panel de Gestión de Flota\r\n            </h1>\r\n          </div>\r\n        )}\r\n        {/* Contenedor principal con padding reducido */}\r\n        <div style={{\r\n          padding: isMobile ? '10px' : '15px',\r\n          paddingTop: isMobile ? '10px' : '15px' // Reducir mucho más el padding superior\r\n        }}>\r\n          {/* Área para el logo en la esquina superior izquierda */}\r\n          {!isMobile && (\r\n            <div style={{\r\n              position: 'fixed', // CAMBIAR de 'absolute' a 'fixed'\r\n              top: '15px',\r\n              left: '275px', // Justo después del sidebar (260px + 15px de margen)\r\n              width: '120px',\r\n              height: '120px',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              background: 'white',\r\n              borderRadius: '8px',\r\n              padding: '10px',\r\n              boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n              zIndex: 100, // Agregar z-index para que esté sobre otros elementos\r\n              border: '1px solid #e5e7eb' // Añadir un borde sutil\r\n            }}>\r\n              <img\r\n                src=\"/logoQuillon.jpg\" // Aquí colocar la ruta correcta del logo\r\n                alt=\"Municipalidad de Quillón\"\r\n                style={{\r\n                  maxWidth: '150px',\r\n                  maxHeight: '150px',\r\n                  objectFit: 'contain'\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div style={{\r\n          padding: isMobile ? '15px' : '30px',\r\n          paddingTop: isMobile ? '20px' : '30px' // Reducir el padding superior\r\n        }}></div>\r\n        <div style={{\r\n          padding: isMobile ? '20px' : '40px', // Aumentar padding\r\n          paddingTop: isMobile ? '30px' : '50px' // Más espacio arriba\r\n        }}></div>\r\n        {/* Estadísticas rápidas */}\r\n        <div style={{\r\n          display: 'grid',\r\n          gridTemplateColumns: `repeat(auto-fit, minmax(${isMobile ? '140px' : '200px'}, 1fr))`,\r\n          gap: '15px',\r\n          marginBottom: '25px'\r\n        }}>\r\n          <div style={{\r\n            background: 'white',\r\n            padding: '20px',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n            borderLeft: '4px solid #3b82f6'\r\n          }}>\r\n            <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#1f2937' }}>\r\n              {vehicleStats.total}\r\n            </div>\r\n            <div style={{ color: '#6b7280', fontSize: '13px' }}>🚛 Total Vehículos</div>\r\n          </div>\r\n          <div style={{\r\n            background: 'white',\r\n            padding: '20px',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n            borderLeft: '4px solid #22c55e'\r\n          }}>\r\n            <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#1f2937' }}>\r\n              {vehicleStats.disponibles}\r\n            </div>\r\n            <div style={{ color: '#6b7280', fontSize: '13px' }}>✅ Disponibles</div>\r\n          </div>\r\n\r\n          <div style={{\r\n            background: 'white',\r\n            padding: '20px',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n            borderLeft: '4px solid #f59e0b'\r\n          }}>\r\n            <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#1f2937' }}>\r\n              {vehicleStats.enUso}\r\n            </div>\r\n            <div style={{ color: '#6b7280', fontSize: '13px' }}>🔧 En Uso</div>\r\n          </div>\r\n\r\n          <div style={{\r\n            background: 'white',\r\n            padding: '20px',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n            borderLeft: '4px solid #8b5cf6'\r\n          }}>\r\n            <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#1f2937' }}>\r\n              {workerStats.total}\r\n            </div>\r\n            <div style={{ color: '#6b7280', fontSize: '13px' }}>👷 Trabajadores</div>\r\n          </div>\r\n\r\n          <div style={{\r\n            background: 'white',\r\n            padding: '20px',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n            borderLeft: '4px solid #10b981'\r\n          }}>\r\n            <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#1f2937' }}>\r\n              {workerStats.activos}\r\n            </div>\r\n            <div style={{ color: '#6b7280', fontSize: '13px' }}>🟢 GPS Activos</div>\r\n          </div>\r\n\r\n          <div style={{\r\n            background: 'white',\r\n            padding: '20px',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n            borderLeft: '4px solid #06b6d4'\r\n          }}>\r\n            <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#1f2937' }}>\r\n              {workerStats.trabajando}\r\n            </div>\r\n            <div style={{ color: '#6b7280', fontSize: '13px' }}>🔧 Trabajando</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Controles de búsqueda y filtros */}\r\n        <div style={{\r\n          background: 'white',\r\n          padding: '20px',\r\n          borderRadius: '12px',\r\n          marginBottom: '20px',\r\n          boxShadow: '0 2px 8px rgba(0,0,0,0.05)'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '15px',\r\n            flexWrap: 'wrap',\r\n            alignItems: 'center'\r\n          }}>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"🔍 Buscar por nombre, patente, email...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              style={{\r\n                flex: isMobile ? '1 1 100%' : '1 1 300px',\r\n                padding: '10px 15px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px',\r\n                outline: 'none'\r\n              }}\r\n            />\r\n\r\n            <select\r\n              value={filterStatus}\r\n              onChange={(e) => setFilterStatus(e.target.value)}\r\n              style={{\r\n                padding: '10px 15px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px',\r\n                cursor: 'pointer',\r\n                minWidth: '150px'\r\n              }}\r\n            >\r\n              <option value=\"todos\">📋 Todos</option>\r\n              <option value=\"disponible\">✅ Disponible</option>\r\n              <option value=\"en_uso\">🔧 En Uso</option>\r\n              <option value=\"mantenimiento\">🔧 Mantenimiento</option>\r\n              <option value=\"en_camino\">🚗 En Camino</option>\r\n              <option value=\"trabajando\">👷 Trabajando</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          display: 'flex',\r\n          gap: '10px',\r\n          marginBottom: '20px',\r\n          borderBottom: '2px solid #e5e7eb',\r\n          flexWrap: 'wrap'\r\n        }}>\r\n          <button\r\n            onClick={() => setActiveTab('vehicles')}\r\n            style={{\r\n              padding: '12px 24px',\r\n              background: activeTab === 'vehicles' ? 'white' : 'transparent',\r\n              color: activeTab === 'vehicles' ? '#1e293b' : '#64748b',\r\n              border: 'none',\r\n              borderBottom: activeTab === 'vehicles' ? '2px solid #3b82f6' : 'none',\r\n              fontSize: '16px',\r\n              fontWeight: activeTab === 'vehicles' ? '600' : '400',\r\n              cursor: 'pointer',\r\n              marginBottom: '-2px'\r\n            }}\r\n          >\r\n            🚛 Vehículos ({filteredVehiculos.length})\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('workers')}\r\n            style={{\r\n              padding: '12px 24px',\r\n              background: activeTab === 'workers' ? 'white' : 'transparent',\r\n              color: activeTab === 'workers' ? '#1e293b' : '#64748b',\r\n              border: 'none',\r\n              borderBottom: activeTab === 'workers' ? '2px solid #3b82f6' : 'none',\r\n              fontSize: '16px',\r\n              fontWeight: activeTab === 'workers' ? '600' : '400',\r\n              cursor: 'pointer',\r\n              marginBottom: '-2px'\r\n            }}\r\n          >\r\n            👷 Trabajadores ({trabajadoresReales.length})\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('admins')}\r\n            style={{\r\n              padding: '12px 24px',\r\n              background: activeTab === 'admins' ? 'white' : 'transparent',\r\n              color: activeTab === 'admins' ? '#1e293b' : '#64748b',\r\n              border: 'none',\r\n              borderBottom: activeTab === 'admins' ? '2px solid #3b82f6' : 'none',\r\n              fontSize: '16px',\r\n              fontWeight: activeTab === 'admins' ? '600' : '400',\r\n              cursor: 'pointer',\r\n              marginBottom: '-2px'\r\n            }}\r\n          >\r\n            👨‍💼 Administradores ({administradores.length})\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('superadmins')}\r\n            style={{\r\n              padding: '12px 24px',\r\n              background: activeTab === 'superadmins' ? 'white' : 'transparent',\r\n              color: activeTab === 'superadmins' ? '#1e293b' : '#64748b',\r\n              border: 'none',\r\n              borderBottom: activeTab === 'superadmins' ? '2px solid #3b82f6' : 'none',\r\n              fontSize: '16px',\r\n              fontWeight: activeTab === 'superadmins' ? '600' : '400',\r\n              cursor: 'pointer',\r\n              marginBottom: '-2px'\r\n            }}\r\n          >\r\n            🔐 Super Admins ({superAdmins.length})\r\n          </button>\r\n        </div>\r\n\r\n        {/* Lista de Vehículos */}\r\n        {activeTab === 'vehicles' && (\r\n\r\n          <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fill, minmax(350px, 1fr))',\r\n            gap: '20px'\r\n          }}>\r\n\r\n            {filteredVehiculos.map(vehiculo => {\r\n              const operador = users.find(u => u.id === (vehiculo.trabajadorAsignado || vehiculo.operadorAsignado)); const isExpanded = expandedCards[vehiculo.id];\r\n              const isEditingOperator = quickEditMode[vehiculo.id];\r\n              const isDisabled = vehiculo.habilitado === false;\r\n\r\n\r\n              return (\r\n                <div key={vehiculo.id} style={{\r\n                  background: 'white',\r\n                  borderRadius: '12px',\r\n                  boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n                  overflow: 'hidden',\r\n                  transition: 'all 0.3s ease',\r\n                  border: isDisabled ? '2px solid #ef4444' :\r\n                    vehiculo.estado === 'en_uso' ? '2px solid #3b82f6' : '1px solid #e5e7eb',\r\n                  opacity: isDisabled ? 0.6 : 1\r\n                }}>\r\n                  {/* Header de la tarjeta */}\r\n                  <div style={{\r\n                    padding: '15px 20px',\r\n                    background: isDisabled ? '#fee2e2' :\r\n                      vehiculo.estado === 'disponible' ? '#dcfce7' :\r\n                        vehiculo.estado === 'en_uso' ? '#dbeafe' :\r\n                          vehiculo.estado === 'mantenimiento' ? '#fef3c7' : '#fee2e2',\r\n                    borderBottom: '1px solid #e5e7eb'\r\n                  }}>\r\n                    {isDisabled && (\r\n                      <div style={{\r\n                        background: '#ef4444',\r\n                        color: 'white',\r\n                        padding: '4px 8px',\r\n                        borderRadius: '4px',\r\n                        fontSize: '12px',\r\n                        fontWeight: 'bold',\r\n                        marginBottom: '10px'\r\n                      }}>\r\n                        🚫 VEHÍCULO BLOQUEADO\r\n                      </div>\r\n                    )}\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                      <h3 style={{ margin: 0, fontSize: '18px', fontWeight: '600', color: '#1f2937' }}>\r\n                        {vehiculo.tipo === 'maquinaria' ? '🏗️' : '🚗'} {vehiculo.nombre}\r\n                      </h3>\r\n                      <span style={{\r\n                        padding: '4px 10px',\r\n                        borderRadius: '20px',\r\n                        fontSize: '12px',\r\n                        fontWeight: '500',\r\n                        background: 'white',\r\n                        color: vehiculo.estado === 'disponible' ? '#15803d' :\r\n                          vehiculo.estado === 'en_uso' ? '#1e40af' :\r\n                            vehiculo.estado === 'mantenimiento' ? '#92400e' : '#991b1b'\r\n                      }}>\r\n                        {vehiculo.estado === 'disponible' ? '✅ Disponible' :\r\n                          vehiculo.estado === 'en_uso' ? '🔧 En Uso' :\r\n                            vehiculo.estado === 'mantenimiento' ? '🔧 Mantenimiento' : '❌ Fuera de Servicio'}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Contenido de la tarjeta */}\r\n                  <div style={{ padding: '20px' }}>\r\n                    <div style={{ display: 'grid', gap: '10px', fontSize: '14px' }}>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <span style={{ color: '#6b7280' }}>📋 Patente:</span>\r\n                        <span style={{ fontWeight: '500' }}>{vehiculo.patente || 'N/A'}</span>\r\n                      </div>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <span style={{ color: '#6b7280' }}>🏭 Marca/Modelo:</span>\r\n                        <span style={{ fontWeight: '500' }}>{vehiculo.marca} {vehiculo.modelo}</span>\r\n                      </div>\r\n\r\n                      {/* Campo de operador con edición rápida */}\r\n                      <div style={{\r\n                        display: 'flex',\r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'center',\r\n                        padding: '8px',\r\n                        background: isEditingOperator ? '#f0f9ff' : 'transparent',\r\n                        borderRadius: '6px',\r\n                        border: isEditingOperator ? '2px solid #3b82f6' : 'none',\r\n                        margin: isEditingOperator ? '-2px' : '0'\r\n                      }}>\r\n                        <span style={{ color: '#6b7280', minWidth: '80px' }}>👤 Operador:</span>\r\n                        {isEditingOperator ? (\r\n                          <div style={{ display: 'flex', gap: '8px', alignItems: 'center', flex: 1 }}>\r\n                            <select\r\n                              style={{\r\n                                flex: 1,\r\n                                padding: '6px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '4px',\r\n                                fontSize: '13px',\r\n                                background: 'white'\r\n                              }}\r\n                              defaultValue={vehiculo.operadorAsignado || ''}\r\n                              onChange={(e) => {\r\n                                quickUpdateOperator(vehiculo.id, e.target.value);\r\n                              }}\r\n                              disabled={loading}\r\n                            >\r\n                              <option value=\"\">Sin asignar</option>\r\n                              {users.filter(u => u.role === 'trabajador').map(user => {\r\n                                // Verificar si el trabajador cumple con las licencias requeridas\r\n                                const trabajador = trabajadores.find(t => t.id === user.id);\r\n                                const licenciasTrabajador = trabajador?.licenciasConducir || [];\r\n                                const cumpleRequisitos = !vehiculo.licenciasRequeridas ||\r\n                                  vehiculo.licenciasRequeridas.length === 0 ||\r\n                                  vehiculo.licenciasRequeridas.some(licReq => licenciasTrabajador.includes(licReq));\r\n\r\n                                const tieneLicenciaBloqueada = trabajador?.licenciaBloqueada;\r\n\r\n                                return (\r\n                                  <option\r\n                                    key={user.id}\r\n                                    value={user.id}\r\n                                    disabled={!cumpleRequisitos || tieneLicenciaBloqueada}\r\n                                    style={{\r\n                                      color: !cumpleRequisitos || tieneLicenciaBloqueada ? '#ef4444' : '#000'\r\n                                    }}\r\n                                  >\r\n                                    {user.name || user.email}\r\n                                    {!cumpleRequisitos && ' ❌ (Sin licencia requerida)'}\r\n                                    {tieneLicenciaBloqueada && ' 🚫 (Licencia bloqueada)'}\r\n                                    {cumpleRequisitos && !tieneLicenciaBloqueada && licenciasTrabajador.length > 0 &&\r\n                                      ` ✓ (${licenciasTrabajador.join(', ')})`}\r\n                                  </option>\r\n                                );\r\n                              })}\r\n                            </select>\r\n                            <button\r\n                              onClick={() => setQuickEditMode({ ...quickEditMode, [vehiculo.id]: false })}\r\n                              style={{\r\n                                padding: '4px 8px',\r\n                                background: '#ef4444',\r\n                                color: 'white',\r\n                                border: 'none',\r\n                                borderRadius: '4px',\r\n                                fontSize: '12px',\r\n                                cursor: 'pointer'\r\n                              }}\r\n                            >\r\n                              ✕\r\n                            </button>\r\n                          </div>\r\n                        ) : (\r\n                          <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n                            <span style={{ fontWeight: '500' }}>{operador?.name || 'Sin asignar'}</span>\r\n\r\n                            <button\r\n                              onClick={() => setQuickEditMode({ ...quickEditMode, [vehiculo.id]: true })}\r\n                              style={{\r\n                                padding: '2px 6px',\r\n                                background: '#3b82f6',\r\n                                color: 'white',\r\n                                border: 'none',\r\n                                borderRadius: '4px',\r\n                                fontSize: '11px',\r\n                                cursor: 'pointer',\r\n                                fontWeight: '600'\r\n                              }}\r\n                            >\r\n                              Cambiar\r\n                            </button>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <span style={{ color: '#6b7280' }}>📏 Kilometraje:</span>\r\n                        <span style={{ fontWeight: '500' }}>{vehiculo.kilometraje?.toLocaleString() || 0} km</span>\r\n                      </div>\r\n\r\n                      {/* Información expandida */}\r\n                      {isExpanded && (\r\n                        <>\r\n                          <div style={{ borderTop: '1px solid #e5e7eb', paddingTop: '10px', marginTop: '5px' }}>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                              <span style={{ color: '#6b7280' }}>⛽ Combustible:</span>\r\n                              <span style={{ fontWeight: '500' }}>{vehiculo.tipoCombustible || 'N/A'}</span>\r\n                            </div>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                              <span style={{ color: '#6b7280' }}>🔧 Último Mant.:</span>\r\n                              <span style={{ fontWeight: '500' }}>\r\n                                {vehiculo.ultimoMantenimiento ?\r\n                                  new Date(vehiculo.ultimoMantenimiento).toLocaleDateString('es-CL') :\r\n                                  'Sin registro'}\r\n                              </span>\r\n                            </div>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                              <span style={{ color: '#6b7280' }}>📅 Próximo Mant.:</span>\r\n                              <span style={{ fontWeight: '500' }}>\r\n                                {vehiculo.proximoMantenimiento ?\r\n                                  new Date(vehiculo.proximoMantenimiento).toLocaleDateString('es-CL') :\r\n                                  'No programado'}\r\n                              </span>\r\n                            </div>\r\n                            {vehiculo.observaciones && (\r\n                              <div style={{ marginTop: '10px', padding: '10px', background: '#f9fafb', borderRadius: '6px' }}>\r\n                                <strong style={{ color: '#6b7280', fontSize: '12px' }}>📝 Observaciones:</strong>\r\n                                <p style={{ margin: '5px 0 0 0', fontSize: '13px' }}>{vehiculo.observaciones}</p>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Botones de acción */}\r\n                    <div style={{\r\n                      display: 'grid',\r\n                      gridTemplateColumns: isMobile ? 'repeat(3, 1fr)' : 'repeat(3, 1fr)',\r\n                      gap: '8px',\r\n                      marginTop: '15px'\r\n                    }}>\r\n                      <button\r\n                        onClick={() => toggleCardExpansion(vehiculo.id)}\r\n                        style={{\r\n                          padding: isMobile ? '6px' : '8px',\r\n                          background: '#f3f4f6',\r\n                          color: '#374151',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: isMobile ? '11px' : '13px',\r\n                          cursor: 'pointer',\r\n                          fontWeight: '500',\r\n                          whiteSpace: 'nowrap',\r\n                          overflow: 'hidden',\r\n                          textOverflow: 'ellipsis'\r\n                        }}\r\n                      >\r\n                        {isExpanded ? '➖' : '➕'} {!isMobile && (isExpanded ? 'Menos' : 'Más')}\r\n                      </button>\r\n                      <button\r\n                        onClick={() => loadVehicleDocuments(vehiculo.id, vehiculo)}\r\n                        style={{\r\n                          padding: isMobile ? '6px' : '8px',\r\n                          background: '#10b981',\r\n                          color: 'white',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: isMobile ? '11px' : '13px',\r\n                          cursor: 'pointer',\r\n                          fontWeight: '500',\r\n                          whiteSpace: 'nowrap',\r\n                          overflow: 'hidden',\r\n                          textOverflow: 'ellipsis'\r\n                        }}\r\n                      >\r\n                        📄 {!isMobile && 'Docs'}\r\n                      </button>\r\n                      <button\r\n                        onClick={() => openEditModal(vehiculo, 'vehicle')}\r\n                        style={{\r\n                          padding: isMobile ? '6px' : '8px',\r\n                          background: '#3b82f6',\r\n                          color: 'white',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: isMobile ? '11px' : '13px',\r\n                          cursor: 'pointer',\r\n                          fontWeight: '500',\r\n                          whiteSpace: 'nowrap',\r\n                          overflow: 'hidden',\r\n                          textOverflow: 'ellipsis'\r\n                        }}\r\n                      >\r\n                        ✏️ {!isMobile && 'Editar'}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n\r\n        {/* Lista de Trabajadores */}\r\n        {activeTab === 'workers' && (\r\n          <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fill, minmax(350px, 1fr))',\r\n            gap: '20px'\r\n          }}>\r\n            {filteredTrabajadores.map(trabajador => {\r\n              const userData = users.find(u => u.id === trabajador.id);\r\n              const vehiculo = vehiculos.find(v => v.operadorAsignado === trabajador.id);\r\n              const isExpanded = expandedCards[trabajador.id];\r\n              const isGPSActive = trabajador.ubicacion &&\r\n                (new Date() - new Date(trabajador.ubicacion.timestamp)) < 60000;\r\n\r\n              // Calcular estado de licencia\r\n              let tieneProblemaLicencia = false;\r\n              if (trabajador.licenciaBloqueada) {\r\n                tieneProblemaLicencia = true;\r\n              } else if (trabajador.fechaVencimientoLicencia) {\r\n                const fechaVencimiento = new Date(trabajador.fechaVencimientoLicencia);\r\n                const hoy = new Date();\r\n                const diasRestantes = Math.ceil((fechaVencimiento - hoy) / (1000 * 60 * 60 * 24));\r\n                if (diasRestantes <= 14) tieneProblemaLicencia = true;\r\n              }\r\n\r\n              return (\r\n                <div key={trabajador.id} style={{\r\n                  background: 'white',\r\n                  borderRadius: '12px',\r\n                  boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n                  overflow: 'hidden',\r\n                  transition: 'all 0.3s ease',\r\n                  border: isGPSActive ? '2px solid #10b981' :\r\n                    tieneProblemaLicencia ? '2px solid #f59e0b' : '1px solid #e5e7eb'\r\n                }}>\r\n                  {/* Header de la tarjeta */}\r\n                  <div style={{\r\n                    padding: '15px 20px',\r\n                    background: trabajador.estado === 'en_camino' ? '#ede9fe' :\r\n                      trabajador.estado === 'trabajando' ? '#dcfce7' :\r\n                        trabajador.estado === 'disponible' ? '#e0f2fe' : '#f3f4f6',\r\n                    borderBottom: '1px solid #e5e7eb'\r\n                  }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                      <h3 style={{ margin: 0, fontSize: '18px', fontWeight: '600', color: '#1f2937' }}>\r\n                        👷 {trabajador.nombre || userData?.name || 'Trabajador'}\r\n                      </h3>\r\n                      <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n                        {trabajador.licenciaBloqueada && (\r\n                          <span style={{\r\n                            padding: '2px 6px',\r\n                            background: '#ef4444',\r\n                            color: 'white',\r\n                            borderRadius: '4px',\r\n                            fontSize: '10px',\r\n                            fontWeight: '600'\r\n                          }}>\r\n                            🚫 LIC.BLOQ\r\n                          </span>\r\n                        )}\r\n                        {isGPSActive && (\r\n                          <span style={{\r\n                            width: '10px',\r\n                            height: '10px',\r\n                            borderRadius: '50%',\r\n                            background: '#10b981',\r\n                            animation: 'pulse 2s infinite'\r\n                          }} title=\"GPS Activo\" />\r\n                        )}\r\n                        <span style={{\r\n                          padding: '4px 10px',\r\n                          borderRadius: '20px',\r\n                          fontSize: '12px',\r\n                          fontWeight: '500',\r\n                          background: 'white',\r\n                          color: trabajador.estado === 'en_camino' ? '#6b21a8' :\r\n                            trabajador.estado === 'trabajando' ? '#15803d' :\r\n                              trabajador.estado === 'disponible' ? '#0891b2' : '#6b7280'\r\n                        }}>\r\n                          {trabajador.estado === 'en_camino' ? '🚗 En Camino' :\r\n                            trabajador.estado === 'trabajando' ? '🔧 Trabajando' :\r\n                              trabajador.estado === 'disponible' ? '✅ Disponible' : '⏸️ Inactivo'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Contenido de la tarjeta */}\r\n                  <div style={{ padding: '20px' }}>\r\n                    <div style={{ display: 'grid', gap: '10px', fontSize: '14px' }}>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <span style={{ color: '#6b7280' }}>📧 Email:</span>\r\n                        <span style={{ fontWeight: '500', fontSize: '13px' }}>{userData?.email || 'N/A'}</span>\r\n                      </div>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <span style={{ color: '#6b7280' }}>📱 Teléfono:</span>\r\n                        <span style={{ fontWeight: '500' }}>{userData?.phone || trabajador.telefono || 'N/A'}</span>\r\n                      </div>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <span style={{ color: '#6b7280' }}>🚛 Vehículo:</span>\r\n                        <span style={{ fontWeight: '500' }}>{vehiculo?.nombre || 'Sin asignar'}</span>\r\n                      </div>\r\n\r\n                      {/* NUEVA INFORMACIÓN DE LICENCIA */}\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                        <span style={{ color: '#6b7280' }}>🚗 Licencias:</span>\r\n                        <span style={{ fontWeight: '500' }}>\r\n                          {trabajador.licenciasConducir?.length > 0 ?\r\n                            trabajador.licenciasConducir.join(', ') :\r\n                            trabajador.licenciaConducir || 'Sin licencia'}\r\n                        </span>\r\n                      </div>\r\n\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <span style={{ color: '#6b7280' }}>📍 GPS:</span>\r\n                        <span style={{\r\n                          fontWeight: '500',\r\n                          color: isGPSActive ? '#10b981' : '#ef4444'\r\n                        }}>\r\n                          {isGPSActive ? '🟢 Activo' : '🔴 Inactivo'}\r\n                        </span>\r\n                      </div>\r\n\r\n                      {/* Información expandida */}\r\n                      {isExpanded && (\r\n                        <>\r\n                          <div style={{ borderTop: '1px solid #e5e7eb', paddingTop: '10px', marginTop: '5px' }}>\r\n                            {/* NUEVO: Mostrar licencias requeridas */}\r\n                            {vehiculo.licenciasRequeridas && vehiculo.licenciasRequeridas.length > 0 && (\r\n                              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                                <span style={{ color: '#6b7280' }}>🚗 Licencias Requeridas:</span>\r\n                                <span style={{ fontWeight: '500' }}>\r\n                                  {vehiculo.licenciasRequeridas.map(lic => (\r\n                                    <span key={lic} style={{\r\n                                      padding: '2px 6px',\r\n                                      background: '#3b82f6',\r\n                                      color: 'white',\r\n                                      borderRadius: '4px',\r\n                                      fontSize: '11px',\r\n                                      marginLeft: '4px'\r\n                                    }}>\r\n                                      Clase {lic}\r\n                                    </span>\r\n                                  ))}\r\n                                </span>\r\n                              </div>\r\n                            )}\r\n                            {/* Información adicional de licencia */}\r\n                            {trabajador.fechaVencimientoLicencia && (\r\n                              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                                <span style={{ color: '#6b7280' }}>📅 Vence Licencia:</span>\r\n                                <span style={{ fontWeight: '500', fontSize: '13px' }}>\r\n                                  {new Date(trabajador.fechaVencimientoLicencia).toLocaleDateString('es-CL')}\r\n                                </span>\r\n                              </div>\r\n                            )}\r\n\r\n                            {trabajador.observacionesLicencia && (\r\n                              <div style={{\r\n                                marginTop: '10px',\r\n                                padding: '10px',\r\n                                background: '#fef3c7',\r\n                                borderRadius: '6px'\r\n                              }}>\r\n                                <strong style={{ color: '#92400e', fontSize: '12px' }}>⚠️ Restricciones:</strong>\r\n                                <p style={{ margin: '5px 0 0 0', fontSize: '13px' }}>\r\n                                  {trabajador.observacionesLicencia}\r\n                                </p>\r\n                              </div>\r\n                            )}\r\n\r\n                            {trabajador.zonaDestino && (\r\n                              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                                <span style={{ color: '#6b7280' }}>🎯 Zona Destino:</span>\r\n                                <span style={{ fontWeight: '500' }}>{trabajador.zonaDestino}</span>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Botones de acción */}\r\n                    <div style={{\r\n                      display: 'grid',\r\n                      gridTemplateColumns: 'repeat(2, 1fr)',\r\n                      gap: '8px',\r\n                      marginTop: '15px'\r\n                    }}>\r\n                      <button\r\n                        onClick={() => toggleCardExpansion(trabajador.id)}\r\n                        style={{\r\n                          padding: isMobile ? '6px' : '8px',\r\n                          background: '#f3f4f6',\r\n                          color: '#374151',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: isMobile ? '11px' : '13px',\r\n                          cursor: 'pointer',\r\n                          fontWeight: '500'\r\n                        }}\r\n                      >\r\n                        {isExpanded ? '➖ Menos' : '➕ Más'}\r\n                      </button>\r\n                      <button\r\n                        onClick={() => {\r\n                          setSelectedWorker(trabajador);\r\n                          setShowWorkerDetailModal(true);\r\n                        }}\r\n                        style={{\r\n                          padding: isMobile ? '6px' : '8px',\r\n                          background: '#8b5cf6',\r\n                          color: 'white',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: isMobile ? '11px' : '13px',\r\n                          cursor: 'pointer',\r\n                          fontWeight: '500'\r\n                        }}\r\n                      >\r\n                        👁️ Ver Todo\r\n                      </button>\r\n                      <button\r\n                        onClick={() => loadWorkerDocuments(trabajador.id, trabajador)}\r\n                        style={{\r\n                          padding: isMobile ? '6px' : '8px',\r\n                          background: '#10b981',\r\n                          color: 'white',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: isMobile ? '11px' : '13px',\r\n                          cursor: 'pointer',\r\n                          fontWeight: '500'\r\n                        }}\r\n                      >\r\n                        📄 Docs\r\n                      </button>\r\n                      <button\r\n                        onClick={() => openEditModal(trabajador, 'worker')}\r\n                        style={{\r\n                          padding: isMobile ? '6px' : '8px',\r\n                          background: '#3b82f6',\r\n                          color: 'white',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: isMobile ? '11px' : '13px',\r\n                          cursor: 'pointer',\r\n                          fontWeight: '500'\r\n                        }}\r\n                      >\r\n                        ✏️ Editar\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n        {/* Lista de Administradores */}\r\n        {activeTab === 'admins' && (\r\n          <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fill, minmax(350px, 1fr))',\r\n            gap: '20px'\r\n          }}>\r\n            {administradores.map(admin => renderUserCard(admin, '#dbeafe'))}\r\n\r\n            {administradores.length === 0 && (\r\n              <div style={{\r\n                background: 'white',\r\n                borderRadius: '12px',\r\n                padding: '60px 20px',\r\n                textAlign: 'center',\r\n                color: '#6b7280',\r\n                gridColumn: '1 / -1'\r\n              }}>\r\n                <div style={{ fontSize: '48px', marginBottom: '20px' }}>👨‍💼</div>\r\n                <p style={{ fontSize: '16px' }}>\r\n                  No hay administradores registrados\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Lista de Super Admins */}\r\n        {activeTab === 'superadmins' && (\r\n          <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fill, minmax(350px, 1fr))',\r\n            gap: '20px'\r\n          }}>\r\n            {superAdmins.map(superAdmin => renderUserCard(superAdmin, '#ede9fe'))}\r\n\r\n            {superAdmins.length === 0 && (\r\n              <div style={{\r\n                background: 'white',\r\n                borderRadius: '12px',\r\n                padding: '60px 20px',\r\n                textAlign: 'center',\r\n                color: '#6b7280',\r\n                gridColumn: '1 / -1'\r\n              }}>\r\n                <div style={{ fontSize: '48px', marginBottom: '20px' }}>🔐</div>\r\n                <p style={{ fontSize: '16px' }}>\r\n                  No hay super administradores registrados\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* No hay resultados */}\r\n        {((activeTab === 'vehicles' && filteredVehiculos.length === 0) ||\r\n          (activeTab === 'workers' && filteredTrabajadores.length === 0)) && (\r\n            <div style={{\r\n              background: 'white',\r\n              borderRadius: '12px',\r\n              padding: '60px 20px',\r\n              textAlign: 'center',\r\n              color: '#6b7280'\r\n            }}>\r\n              <div style={{ fontSize: '48px', marginBottom: '20px' }}>\r\n                {activeTab === 'vehicles' ? '🚛' : '👷'}\r\n              </div>\r\n              <p style={{ fontSize: '16px' }}>\r\n                No se encontraron {activeTab === 'vehicles' ? 'vehículos' : 'trabajadores'}\r\n                {searchTerm && ` para \"${searchTerm}\"`}\r\n                {filterStatus !== 'todos' && ` con estado \"${filterStatus}\"`}\r\n              </p>\r\n            </div>\r\n          )}\r\n      </div>\r\n\r\n      {/* Modal de edición */}\r\n      {showEditModal && editingItem && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0,0,0,0.5)',\r\n          display: 'flex',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          zIndex: 2000,\r\n          padding: '20px'\r\n        }}>\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '12px',\r\n            padding: isMobile ? '20px' : '30px',\r\n            maxWidth: '500px',\r\n            width: '100%',\r\n            maxHeight: '80vh',\r\n            overflow: 'auto'\r\n          }}>\r\n            <h2 style={{ margin: '0 0 20px 0', color: '#1f2937' }}>\r\n              ✏️ Editar {editingItem.type === 'vehicle' ? 'Vehículo' : 'Trabajador'}\r\n            </h2>\r\n\r\n            {editingItem.type === 'vehicle' ? (\r\n              <>\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Nombre\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editFormData.nombre}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, nombre: e.target.value })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Patente\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editFormData.patente}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, patente: e.target.value })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Kilometraje\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={editFormData.kilometraje}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, kilometraje: parseInt(e.target.value) })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Operador Asignado\r\n                  </label>\r\n                  <select\r\n                    value={editFormData.operadorAsignado}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, operadorAsignado: e.target.value })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  >\r\n                    <option value=\"\">-- Sin asignar --</option>\r\n                    {users.filter(u => u.role === 'trabajador').map(user => (\r\n                      <option key={user.id} value={user.id}>\r\n                        {user.name || user.email}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Observaciones\r\n                  </label>\r\n                  <textarea\r\n                    value={editFormData.observaciones}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, observaciones: e.target.value })}\r\n                    rows={3}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px',\r\n                      resize: 'vertical'\r\n                    }}\r\n                  />\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Nombre\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editFormData.nombre}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, nombre: e.target.value })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Email\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    value={editFormData.email}\r\n                    disabled\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px',\r\n                      background: '#f3f4f6',\r\n                      cursor: 'not-allowed'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Teléfono\r\n                  </label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    value={editFormData.telefono}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, telefono: e.target.value })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Vehículo Asignado\r\n                  </label>\r\n                  <select\r\n                    value={editFormData.vehicleId}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, vehicleId: e.target.value })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  >\r\n                    <option value=\"\">-- Sin asignar --</option>\r\n                    {vehiculos.filter(v => !v.operadorAsignado || v.operadorAsignado === editingItem.id).map(vehiculo => (\r\n                      <option key={vehiculo.id} value={vehiculo.id}>\r\n                        {vehiculo.nombre}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            <div style={{ display: 'flex', gap: '10px', marginTop: '20px' }}>\r\n              <button\r\n                onClick={() => editingItem.type === 'vehicle' ? saveVehicleChanges() : saveWorkerChanges()}\r\n                disabled={loading}\r\n                style={{\r\n                  flex: 1,\r\n                  padding: '12px',\r\n                  background: loading ? '#9ca3af' : '#22c55e',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  fontSize: '14px',\r\n                  fontWeight: '500',\r\n                  cursor: loading ? 'not-allowed' : 'pointer'\r\n                }}\r\n              >\r\n                {loading ? 'Guardando...' : '✅ Guardar Cambios'}\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowEditModal(false);\r\n                  setEditingItem(null);\r\n                }}\r\n                style={{\r\n                  flex: 1,\r\n                  padding: '12px',\r\n                  background: '#6b7280',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  fontSize: '14px',\r\n                  fontWeight: '500',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                Cancelar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal de Documentos */}\r\n      <DocumentsModal />\r\n      <WorkerDetailModal />\r\n      <style jsx>{`\r\n        @keyframes pulse {\r\n          0% {\r\n            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);\r\n          }\r\n          70% {\r\n            box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);\r\n          }\r\n          100% {\r\n            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);\r\n          }\r\n        }\r\n          \r\n      `}</style>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FleetPanel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
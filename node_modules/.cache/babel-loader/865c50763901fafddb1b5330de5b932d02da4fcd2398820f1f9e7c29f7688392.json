{"ast":null,"code":"// src/components/MapaQuillonFirebase.js\nimport React,{useEffect,useRef,useState}from'react';import{vehiculosService,zonasService,trabajadoresService,reportesService}from'../services/firebaseservices';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MapaQuillonFirebase=_ref=>{var _realtimeStats$vehicu,_realtimeStats$vehicu2,_realtimeStats$vehicu3;let{currentUser,onLogout,onViewChange,currentView='dashboard'}=_ref;const mapRef=useRef(null);const[map,setMap]=useState(null);const[vehiculos,setVehiculos]=useState([]);const[zonas,setZonas]=useState([]);const[trabajadores,setTrabajadores]=useState([]);const[selectedItemId,setSelectedItemId]=useState(null);const[selectedItemType,setSelectedItemType]=useState(null);const[filtroActivo,setFiltroActivo]=useState('todos');const[mapLoaded,setMapLoaded]=useState(false);const[showStats,setShowStats]=useState(true);const[isMobile,setIsMobile]=useState(false);const[realtimeStats,setRealtimeStats]=useState({vehiculos:{total:0,activos:0,enMantenimiento:0},zonas:{total:0,activas:0,completadas:0,pendientes:0},trabajadores:{total:0,enRuta:0,trabajando:0,disponibles:0}});const[statsInitialized,setStatsInitialized]=useState(false);const markersRef=useRef({});const infoWindowRef=useRef(null);const unsubscribesRef=useRef([]);const dataRef=useRef({vehiculos:[],zonas:[],trabajadores:[]});const API_KEY='AIzaSyA7DrdL36n5cx-RNzuXGAQggFeGCheHDbY';// Detectar si es móvil\nuseEffect(()=>{const checkMobile=()=>{setIsMobile(window.innerWidth<=768);};checkMobile();window.addEventListener('resize',checkMobile);return()=>window.removeEventListener('resize',checkMobile);},[]);// Cargar Google Maps\nuseEffect(()=>{const loadGoogleMaps=()=>{return new Promise((resolve,reject)=>{if(window.google&&window.google.maps){resolve(window.google.maps);return;}const existingScript=document.querySelector('script[src*=\"maps.googleapis.com\"]');if(existingScript){existingScript.addEventListener('load',()=>{if(window.google&&window.google.maps){resolve(window.google.maps);}else{reject(new Error('Google Maps no disponible'));}});return;}const script=document.createElement('script');script.src=`https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry&v=weekly`;script.async=true;script.defer=true;script.onload=()=>{if(window.google&&window.google.maps){resolve(window.google.maps);}};script.onerror=()=>reject(new Error('Error al cargar Google Maps'));document.head.appendChild(script);});};const initMap=async()=>{try{const maps=await loadGoogleMaps();if(!mapRef.current)return;const mapInstance=new maps.Map(mapRef.current,{center:{lat:-36.7333,lng:-72.4667},zoom:13,mapTypeId:'roadmap',styles:[{featureType:'poi.business',stylers:[{visibility:'off'}]}]});setMap(mapInstance);infoWindowRef.current=new maps.InfoWindow();mapInstance.addListener('click',()=>{if(infoWindowRef.current){infoWindowRef.current.close();setSelectedItemId(null);setSelectedItemType(null);}});setMapLoaded(true);}catch(err){console.error('Error al cargar mapa:',err);}};initMap();},[]);// Calcular estadísticas locales de vehículos cuando cambien\nuseEffect(()=>{console.log('🔄 Recalculando estadísticas locales. Vehículos:',vehiculos.length);if(vehiculos.length>=0){// Cambiar > a >= para incluir cuando es 0\nconst disponibles=vehiculos.filter(v=>v.estado==='disponible').length;const enUso=vehiculos.filter(v=>v.estado==='en_uso').length;const enMantenimiento=vehiculos.filter(v=>v.estado==='mantenimiento').length;const activos=disponibles+enUso;console.log('📊 Cálculo local de estadísticas:',{total:vehiculos.length,disponibles,enUso,activos,enMantenimiento,detalleVehiculos:vehiculos.map(v=>({id:v.id,nombre:v.nombre,estado:v.estado,esDisponible:v.estado==='disponible',esEnUso:v.estado==='en_uso'}))});// Actualizar estadísticas localmente\nsetRealtimeStats(prev=>{const nuevoEstado={...prev,vehiculos:{total:vehiculos.length,activos:activos,enMantenimiento:enMantenimiento}};console.log('📊 Nuevo estado de estadísticas:',nuevoEstado);return nuevoEstado;});setStatsInitialized(true);}},[vehiculos]);// Suscribirse a datos de Firebase\nuseEffect(()=>{console.log('🔄 Iniciando suscripciones a Firebase...');const unsubVehiculos=vehiculosService.subscribeToVehiculos(vehiculosData=>{console.log('🚛 Vehículos recibidos desde Firebase:',vehiculosData);console.log('🚛 Tipos de datos:',vehiculosData.map(v=>{var _v$estado;return{id:v.id,nombre:v.nombre,estado:v.estado,tipoEstado:typeof v.estado,estadoTrimmed:(_v$estado=v.estado)!==null&&_v$estado!==void 0&&_v$estado.trim?v.estado.trim():v.estado};}));// Limpiar y normalizar estados\nconst vehiculosNormalizados=vehiculosData.map(v=>{var _v$estado2,_v$estado2$toLowerCas,_v$estado2$toLowerCas2,_v$estado2$toLowerCas3;return{...v,estado:((_v$estado2=v.estado)===null||_v$estado2===void 0?void 0:(_v$estado2$toLowerCas=_v$estado2.toLowerCase)===null||_v$estado2$toLowerCas===void 0?void 0:(_v$estado2$toLowerCas2=_v$estado2$toLowerCas.call(_v$estado2))===null||_v$estado2$toLowerCas2===void 0?void 0:(_v$estado2$toLowerCas3=_v$estado2$toLowerCas2.trim)===null||_v$estado2$toLowerCas3===void 0?void 0:_v$estado2$toLowerCas3.call(_v$estado2$toLowerCas2))||'disponible'};});dataRef.current.vehiculos=vehiculosNormalizados;setVehiculos(vehiculosNormalizados);console.log('🚛 Vehículos normalizados y guardados:',vehiculosNormalizados.length);});unsubscribesRef.current.push(unsubVehiculos);const unsubZonas=zonasService.subscribeToZonasAsignadas?zonasService.subscribeToZonasAsignadas(zonasData=>{dataRef.current.zonas=zonasData;setZonas(zonasData);console.log('🏗️ Zonas asignadas actualizadas:',zonasData.length);}):zonasService.subscribeToZonas(zonasData=>{dataRef.current.zonas=zonasData;setZonas(zonasData);console.log('🏗️ Zonas actualizadas:',zonasData.length);});unsubscribesRef.current.push(unsubZonas);const unsubTrabajadores=trabajadoresService.subscribeToTrabajadores(trabajadoresData=>{dataRef.current.trabajadores=trabajadoresData;setTrabajadores(trabajadoresData);console.log('👷 Trabajadores actualizados:',trabajadoresData.length);});unsubscribesRef.current.push(unsubTrabajadores);// Suscribirse a estadísticas en tiempo real\nconsole.log('📊 Suscribiendo a estadísticas en tiempo real...');reportesService.getRealtimeStats(stats=>{console.log('📊 Estadísticas recibidas en MapaQuillon:',stats);console.log('📊 Vehículos activos:',stats.vehiculos.activos);console.log('📊 Vehículos en mantenimiento:',stats.vehiculos.enMantenimiento);setRealtimeStats(stats);});return()=>{console.log('🔄 Limpiando suscripciones...');unsubscribesRef.current.forEach(unsub=>unsub&&unsub());};},[]);const updateInfoWindowContent=()=>{if(!infoWindowRef.current||!selectedItemId||!selectedItemType)return;let item=null;let content=null;if(selectedItemType==='vehiculo'){item=dataRef.current.vehiculos.find(v=>v.id===selectedItemId);if(item)content=createVehiculoInfoWindow(item);}else if(selectedItemType==='zona'){item=dataRef.current.zonas.find(z=>z.id===selectedItemId);if(item)content=createZonaInfoWindow(item,dataRef.current.trabajadores);}else if(selectedItemType==='trabajador'){item=dataRef.current.trabajadores.find(t=>t.id===selectedItemId);if(item)content=createTrabajadorInfoWindow(item);}if(content&&infoWindowRef.current.getMap()){infoWindowRef.current.setContent(content);}};useEffect(()=>{updateInfoWindowContent();},[vehiculos,zonas,trabajadores]);const getIcon=(tipo,estado)=>{var _iconConfigs$tipo;if(!window.google)return null;const iconConfigs={vehiculo:{activo:{color:'#22c55e',symbol:'🚛'},trabajando:{color:'#3b82f6',symbol:'🔧'},en_ruta:{color:'#f59e0b',symbol:'🚗'},mantenimiento:{color:'#ef4444',symbol:'🔧'},inactivo:{color:'#6b7280',symbol:'⏸️'}},zona:{en_progreso:{color:'#3b82f6',symbol:'🏗️'},pendiente:{color:'#f59e0b',symbol:'⏳'},completado:{color:'#22c55e',symbol:'✅'},activa:{color:'#3b82f6',symbol:'🏗️'},pausada:{color:'#f59e0b',symbol:'⏸️'},completada:{color:'#22c55e',symbol:'✅'}},trabajador:{en_camino:{color:'#8b5cf6',symbol:'👷'},trabajando:{color:'#10b981',symbol:'👷'},disponible:{color:'#06b6d4',symbol:'👷'},inactivo:{color:'#6b7280',symbol:'👷'}}};const config=((_iconConfigs$tipo=iconConfigs[tipo])===null||_iconConfigs$tipo===void 0?void 0:_iconConfigs$tipo[estado])||{color:'#6b7280',symbol:'📍'};if(tipo==='trabajador'){return{path:window.google.maps.SymbolPath.CIRCLE,scale:8,fillColor:config.color,fillOpacity:1,strokeColor:'#ffffff',strokeWeight:2};}return{path:'M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z',fillColor:config.color,fillOpacity:1,strokeColor:'#ffffff',strokeWeight:2,scale:tipo==='vehiculo'?1.8:2,anchor:new window.google.maps.Point(12,24)};};useEffect(()=>{if(!map||!window.google)return;const createOrUpdateMarker=(key,position,icon,title,clickHandler)=>{if(markersRef.current[key]){const marker=markersRef.current[key];marker.setPosition(position);marker.setIcon(icon);marker.setTitle(title);if(marker.getAnimation()&&!icon.fillColor.includes('#22c55e')){marker.setAnimation(null);}else if(!marker.getAnimation()&&icon.fillColor.includes('#22c55e')){marker.setAnimation(window.google.maps.Animation.BOUNCE);}}else{const marker=new window.google.maps.Marker({position:position,map:map,title:title,icon:icon,animation:icon.fillColor&&icon.fillColor.includes('#22c55e')?window.google.maps.Animation.BOUNCE:null});marker.addListener('click',clickHandler);markersRef.current[key]=marker;}};const hideUnusedMarkers=activeKeys=>{Object.keys(markersRef.current).forEach(key=>{if(!activeKeys.includes(key)){markersRef.current[key].setMap(null);delete markersRef.current[key];}});};const activeKeys=[];if(filtroActivo==='todos'||filtroActivo==='vehiculos'){vehiculos.forEach(vehiculo=>{if(vehiculo.lat&&vehiculo.lng){const key=`vehiculo_${vehiculo.id}`;activeKeys.push(key);createOrUpdateMarker(key,{lat:vehiculo.lat,lng:vehiculo.lng},getIcon('vehiculo',vehiculo.estado),vehiculo.nombre,()=>{const content=createVehiculoInfoWindow(vehiculo);infoWindowRef.current.setContent(content);infoWindowRef.current.open(map,markersRef.current[key]);setSelectedItemId(vehiculo.id);setSelectedItemType('vehiculo');});}});}if(filtroActivo==='todos'||filtroActivo==='zonas'){zonas.forEach(zona=>{if(zona.lat&&zona.lng){const key=`zona_${zona.id}`;activeKeys.push(key);createOrUpdateMarker(key,{lat:zona.lat,lng:zona.lng},getIcon('zona',zona.estado||'pendiente'),zona.nombre,()=>{const content=createZonaInfoWindow(zona,trabajadores);infoWindowRef.current.setContent(content);infoWindowRef.current.open(map,markersRef.current[key]);setSelectedItemId(zona.id);setSelectedItemType('zona');});}});}if(filtroActivo==='todos'||filtroActivo==='trabajadores'){trabajadores.forEach(trabajador=>{if(trabajador.ubicacion&&trabajador.ubicacion.lat&&trabajador.ubicacion.lng){const key=`trabajador_${trabajador.id}`;activeKeys.push(key);createOrUpdateMarker(key,{lat:trabajador.ubicacion.lat,lng:trabajador.ubicacion.lng},getIcon('trabajador',trabajador.estado||'disponible'),trabajador.nombre,()=>{const content=createTrabajadorInfoWindow(trabajador);infoWindowRef.current.setContent(content);infoWindowRef.current.open(map,markersRef.current[key]);setSelectedItemId(trabajador.id);setSelectedItemType('trabajador');});}});}hideUnusedMarkers(activeKeys);},[map,vehiculos,zonas,trabajadores,filtroActivo]);const createVehiculoInfoWindow=vehiculo=>{return`\n      <div style=\"padding: 10px; font-family: Arial, sans-serif; max-width: 280px;\">\n        <h3 style=\"margin: 0 0 10px 0; color: #1f2937;\">\n          ${vehiculo.nombre}\n        </h3>\n        <div style=\"background: ${vehiculo.estado==='activo'?'#dcfce7':vehiculo.estado==='trabajando'?'#dbeafe':'#fef3c7'}; \n                    padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 10px;\">\n          <strong>Estado:</strong> ${vehiculo.estado}\n        </div>\n        <div style=\"font-size: 14px; line-height: 1.6;\">\n          ${vehiculo.conductor?`<div><strong>👤 Conductor:</strong> ${vehiculo.conductor}</div>`:''}\n          ${vehiculo.telefono?`<div><strong>📱 Teléfono:</strong> ${vehiculo.telefono}</div>`:''}\n          ${vehiculo.combustible?`\n            <div><strong>⛽ Combustible:</strong> \n              <span style=\"color: ${vehiculo.combustible>50?'#22c55e':vehiculo.combustible>25?'#f59e0b':'#ef4444'}\">\n                ${vehiculo.combustible}%\n              </span>\n            </div>\n          `:''}\n          ${vehiculo.velocidad?`<div><strong>📍 Velocidad:</strong> ${vehiculo.velocidad} km/h</div>`:''}\n          ${vehiculo.zona?`<div><strong>🏗️ Zona:</strong> ${vehiculo.zona}</div>`:''}\n          ${vehiculo.destino?`<div><strong>🎯 Destino:</strong> ${vehiculo.destino}</div>`:''}\n          <div style=\"margin-top: 8px; color: #6b7280; font-size: 12px;\">\n            Última actualización: ${vehiculo.ultimaActualizacion?new Date(vehiculo.ultimaActualizacion).toLocaleTimeString():'N/A'}\n          </div>\n        </div>\n      </div>\n    `;};const createZonaInfoWindow=(zona,todosLosTrabajadores)=>{const trabajadorAsignado=todosLosTrabajadores.find(t=>t.id===zona.trabajadorAsignado);return`\n      <div style=\"padding: 10px; font-family: Arial, sans-serif; max-width: 280px;\">\n        <h3 style=\"margin: 0 0 10px 0; color: #1f2937;\">\n          ${zona.nombre}\n        </h3>\n        <div style=\"background: ${zona.estado==='en_progreso'?'#dbeafe':zona.estado==='pendiente'?'#fef3c7':'#dcfce7'}; \n                    padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 10px;\">\n          <strong>Estado:</strong> ${zona.estado||'pendiente'}\n        </div>\n        <div style=\"font-size: 14px; line-height: 1.6;\">\n          ${zona.direccion?`<div><strong>📍 Dirección:</strong> ${zona.direccion}</div>`:''}\n          ${zona.descripcion?`<div><strong>📝 Descripción:</strong> ${zona.descripcion}</div>`:''}\n          ${trabajadorAsignado?`<div><strong>👷 Trabajador:</strong> ${trabajadorAsignado.nombre||trabajadorAsignado.email}</div>`:'<div><strong>👷 Trabajador:</strong> Sin asignar</div>'}\n          ${zona.prioridad?`<div><strong>⚡ Prioridad:</strong> ${zona.prioridad}</div>`:''}\n          ${zona.fechaLimite?`<div><strong>📅 Fecha límite:</strong> ${new Date(zona.fechaLimite).toLocaleDateString()}</div>`:''}\n          ${zona.fechaCompletado?`<div style=\"color: #22c55e; margin-top: 8px;\"><strong>✅ Completado:</strong> ${new Date(zona.fechaCompletado).toLocaleString()}</div>`:''}\n        </div>\n      </div>\n    `;};const createTrabajadorInfoWindow=trabajador=>{var _trabajador$ubicacion;const ahora=new Date();const ultimaActualizacion=(_trabajador$ubicacion=trabajador.ubicacion)!==null&&_trabajador$ubicacion!==void 0&&_trabajador$ubicacion.timestamp?new Date(trabajador.ubicacion.timestamp):null;const diferenciaTiempo=ultimaActualizacion?Math.floor((ahora-ultimaActualizacion)/1000):null;let estadoConexion='⚫ Sin conexión';let colorEstado='#6b7280';if(diferenciaTiempo!==null){if(diferenciaTiempo<30){estadoConexion='🟢 En línea';colorEstado='#10b981';}else if(diferenciaTiempo<60){estadoConexion='🟡 Conexión reciente';colorEstado='#f59e0b';}else if(diferenciaTiempo<300){estadoConexion='🟠 Última conexión hace '+Math.floor(diferenciaTiempo/60)+' min';colorEstado='#fb923c';}else{estadoConexion='🔴 Sin conexión reciente';colorEstado='#ef4444';}}return`\n      <div style=\"padding: 10px; font-family: Arial, sans-serif; max-width: 300px;\">\n        <h3 style=\"margin: 0 0 10px 0; color: #1f2937; display: flex; align-items: center; gap: 8px;\">\n          👷 ${trabajador.nombre||trabajador.email||'Trabajador'}\n          <span style=\"\n            font-size: 10px;\n            padding: 2px 6px;\n            background: ${colorEstado}22;\n            color: ${colorEstado};\n            border-radius: 12px;\n            font-weight: normal;\n          \">\n            ${estadoConexion}\n          </span>\n        </h3>\n        \n        <div style=\"\n          background: ${trabajador.estado==='en_camino'?'#ede9fe':trabajador.estado==='trabajando'?'#dcfce7':trabajador.estado==='disponible'?'#e0f2fe':'#f3f4f6'}; \n          padding: 6px 10px; \n          border-radius: 6px; \n          display: inline-block; \n          margin-bottom: 12px;\n          font-size: 13px;\n        \">\n          <strong>Estado:</strong> ${trabajador.estado==='en_camino'?'🚗 En camino':trabajador.estado==='trabajando'?'🔧 Trabajando':trabajador.estado==='disponible'?'✅ Disponible':'⏸️ '+(trabajador.estado||'Sin estado')}\n        </div>\n        \n        <div style=\"font-size: 14px; line-height: 1.8;\">\n          ${trabajador.email?`\n            <div style=\"margin-bottom: 6px;\">\n              <strong>📧 Email:</strong> \n              <span style=\"color: #6b7280; font-size: 13px;\">${trabajador.email}</span>\n            </div>\n          `:''}\n          \n          ${trabajador.telefono?`\n            <div style=\"margin-bottom: 6px;\">\n              <strong>📱 Teléfono:</strong> \n              <span style=\"color: #6b7280; font-size: 13px;\">${trabajador.telefono}</span>\n            </div>\n          `:''}\n          \n          ${trabajador.zonaDestino?`\n            <div style=\"margin-bottom: 6px;\">\n              <strong>🎯 Destino:</strong> \n              <span style=\"color: #3b82f6; font-size: 13px;\">${trabajador.zonaDestino}</span>\n            </div>\n          `:''}\n          \n          ${trabajador.recorridoActual?`\n            <div style=\"margin-bottom: 6px;\">\n              <strong>📍 En recorrido:</strong> \n              <span style=\"color: #10b981; font-size: 13px;\">Activo</span>\n            </div>\n          `:''}\n          \n          ${trabajador.ubicacion?`\n            <div style=\"\n              margin-top: 12px; \n              padding-top: 10px; \n              border-top: 1px solid #e5e7eb;\n            \">\n              <div style=\"color: #6b7280; font-size: 12px; margin-bottom: 4px;\">\n                <strong>📍 Ubicación GPS:</strong>\n              </div>\n              <div style=\"\n                font-family: monospace; \n                font-size: 11px; \n                color: #9ca3af;\n                background: #f9fafb;\n                padding: 6px;\n                border-radius: 4px;\n              \">\n                Lat: ${trabajador.ubicacion.lat.toFixed(6)}<br/>\n                Lng: ${trabajador.ubicacion.lng.toFixed(6)}\n              </div>\n              <div style=\"color: #9ca3af; font-size: 11px; margin-top: 6px;\">\n                ⏱️ Última actualización: ${ultimaActualizacion?ultimaActualizacion.toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit',second:'2-digit'}):'N/A'}\n              </div>\n            </div>\n          `:`\n            <div style=\"\n              margin-top: 12px; \n              padding: 10px; \n              background: #fef2f2;\n              border-radius: 6px;\n              color: #991b1b;\n              font-size: 12px;\n              text-align: center;\n            \">\n              📍 GPS no activado\n            </div>\n          `}\n        </div>\n      </div>\n    `;};return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',height:'100vh',position:'relative',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"div\",{ref:mapRef,style:{width:'100%',height:'100%',position:'absolute',top:0,left:0}}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:0,left:0,right:0,background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white',zIndex:1000,boxShadow:'0 2px 10px rgba(0,0,0,0.2)',padding:isMobile?'10px':'12px 20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',width:'100%',flexWrap:'nowrap'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'0 0 auto',marginRight:'20px'},children:[/*#__PURE__*/_jsxs(\"h1\",{style:{margin:0,fontSize:isMobile?'16px':'20px',fontWeight:'600',whiteSpace:'nowrap'},children:[\"\\uD83D\\uDDFA\\uFE0F \",isMobile?'MapaQuillón':'Centro de Control']}),!isMobile&&/*#__PURE__*/_jsx(\"p\",{style:{margin:'2px 0 0 0',fontSize:'12px',opacity:0.9,whiteSpace:'nowrap'},children:\"Monitoreo en tiempo real\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px',flex:'0 0 auto'},children:[!isMobile&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'13px',fontWeight:'500',padding:'5px 12px',background:'rgba(255,255,255,0.15)',borderRadius:'15px',whiteSpace:'nowrap'},children:[\"\\uD83D\\uDC64 \",currentUser.name||currentUser.email||'Usuario']}),onViewChange&&!isMobile&&/*#__PURE__*/_jsxs(_Fragment,{children:[currentUser.role==='superadmin'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('admin'),style:{padding:'6px 12px',background:currentView==='admin'?'rgba(255,255,255,0.25)':'rgba(255,255,255,0.1)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'5px',cursor:'pointer',fontSize:'13px',fontWeight:currentView==='admin'?'600':'400',whiteSpace:'nowrap',minWidth:'auto'},children:\"\\uD83D\\uDD10 Panel Admin\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('dashboard'),style:{padding:'6px 12px',background:currentView==='dashboard'?'rgba(255,255,255,0.25)':'rgba(255,255,255,0.1)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'5px',cursor:'pointer',fontSize:'13px',fontWeight:currentView==='dashboard'?'600':'400',whiteSpace:'nowrap',minWidth:'auto'},children:\"\\uD83D\\uDCCA Dashboard GPS\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('zones'),style:{padding:'6px 12px',background:currentView==='zones'?'rgba(255,255,255,0.25)':'rgba(255,255,255,0.1)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'5px',cursor:'pointer',fontSize:'13px',fontWeight:currentView==='zones'?'600':'400',whiteSpace:'nowrap',minWidth:'auto'},children:\"\\uD83D\\uDDFA\\uFE0F Gesti\\xF3n Zonas\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,style:{padding:isMobile?'6px 12px':'6px 14px',background:'#ef4444',color:'white',border:'none',borderRadius:'5px',cursor:'pointer',fontSize:isMobile?'12px':'13px',fontWeight:'600',boxShadow:'0 2px 4px rgba(0,0,0,0.2)',whiteSpace:'nowrap',minWidth:'auto',transition:'all 0.2s'},onMouseEnter:e=>{e.currentTarget.style.transform='scale(1.05)';e.currentTarget.style.background='#dc2626';},onMouseLeave:e=>{e.currentTarget.style.transform='scale(1)';e.currentTarget.style.background='#ef4444';},children:isMobile?'🚪 Salir':'🚪 Cerrar Sesión'})]})]}),isMobile&&onViewChange&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'8px',display:'flex',gap:'8px'},children:[currentUser.role==='superadmin'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('admin'),style:{flex:1,padding:'6px',background:currentView==='admin'?'rgba(255,255,255,0.3)':'rgba(255,255,255,0.1)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'4px',fontSize:'11px'},children:\"\\uD83D\\uDD10 Admin\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('dashboard'),style:{flex:1,padding:'6px',background:currentView==='dashboard'?'rgba(255,255,255,0.3)':'rgba(255,255,255,0.1)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'4px',fontSize:'11px'},children:\"\\uD83D\\uDCCA Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('zones'),style:{flex:1,padding:'6px',background:currentView==='zones'?'rgba(255,255,255,0.3)':'rgba(255,255,255,0.1)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'4px',fontSize:'11px'},children:\"\\uD83D\\uDDFA\\uFE0F Zonas\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:isMobile?onViewChange?'80px':'52px':'75px',left:isMobile?'10px':'20px',right:isMobile?'10px':'auto',background:'white',borderRadius:'8px',padding:isMobile?'6px':'10px',boxShadow:'0 2px 10px rgba(0,0,0,0.1)',zIndex:999,display:'flex',gap:isMobile?'4px':'8px',overflowX:isMobile?'auto':'visible'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFiltroActivo('todos'),style:{padding:isMobile?'6px 8px':'8px 12px',background:filtroActivo==='todos'?'#667eea':'#f3f4f6',color:filtroActivo==='todos'?'white':'#374151',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:isMobile?'11px':'13px',fontWeight:'500',whiteSpace:'nowrap',minWidth:isMobile?'auto':'80px'},children:\"\\uD83D\\uDCCD Todos\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFiltroActivo('vehiculos'),style:{padding:isMobile?'6px 8px':'8px 12px',background:filtroActivo==='vehiculos'?'#22c55e':'#f3f4f6',color:filtroActivo==='vehiculos'?'white':'#374151',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:isMobile?'11px':'13px',fontWeight:'500',whiteSpace:'nowrap',minWidth:isMobile?'auto':'100px'},children:[\"\\uD83D\\uDE9B \",isMobile?`Veh (${realtimeStats.vehiculos.total})`:`Vehículos (${realtimeStats.vehiculos.total})`]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFiltroActivo('zonas'),style:{padding:isMobile?'6px 8px':'8px 12px',background:filtroActivo==='zonas'?'#3b82f6':'#f3f4f6',color:filtroActivo==='zonas'?'white':'#374151',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:isMobile?'11px':'13px',fontWeight:'500',whiteSpace:'nowrap',minWidth:isMobile?'auto':'100px'},children:[\"\\uD83C\\uDFD7\\uFE0F \",isMobile?`Zon (${realtimeStats.zonas.total})`:`Zonas (${realtimeStats.zonas.total})`]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFiltroActivo('trabajadores'),style:{padding:isMobile?'6px 8px':'8px 12px',background:filtroActivo==='trabajadores'?'#8b5cf6':'#f3f4f6',color:filtroActivo==='trabajadores'?'white':'#374151',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:isMobile?'11px':'13px',fontWeight:'500',whiteSpace:'nowrap',minWidth:isMobile?'auto':'120px'},children:[\"\\uD83D\\uDC77 \",isMobile?`Trab (${realtimeStats.trabajadores.total})`:`Trabajadores (${realtimeStats.trabajadores.total})`]})]}),showStats&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',bottom:isMobile?'10px':'20px',left:isMobile?'10px':'20px',right:isMobile?'10px':'auto',background:'white',borderRadius:'12px',padding:isMobile?'10px':'15px',boxShadow:'0 4px 20px rgba(0,0,0,0.15)',zIndex:999,maxWidth:isMobile?'calc(100% - 20px)':'380px',maxHeight:isMobile?'35vh':'50vh',overflow:'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'12px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,fontSize:isMobile?'14px':'16px',color:'#1f2937'},children:\"\\uD83D\\uDCCA Estado General\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{console.log('🔍 DEPURACIÓN - Estado actual:');console.log('📊 realtimeStats:',realtimeStats);console.log('🚛 vehiculos array:',vehiculos);console.log('🚛 Estados de vehículos:',vehiculos.map(v=>({nombre:v.nombre,estado:v.estado,tipo_estado:typeof v.estado})));const disponibles=vehiculos.filter(v=>v.estado==='disponible');const enUso=vehiculos.filter(v=>v.estado==='en_uso');const enMant=vehiculos.filter(v=>v.estado==='mantenimiento');console.log('✅ Disponibles:',disponibles.length,disponibles);console.log('🔧 En uso:',enUso.length,enUso);console.log('🔧 En mantenimiento:',enMant.length,enMant);console.log('⚡ Total activos (calculado):',disponibles.length+enUso.length);alert(`Depuración enviada a la consola. \nVehículos totales: ${vehiculos.length}\nDisponibles: ${disponibles.length}\nEn uso: ${enUso.length}\nActivos (Disp+Uso): ${disponibles.length+enUso.length}\nEn mantenimiento: ${enMant.length}\n\nRevisa la consola (F12) para más detalles.`);},style:{background:'#3b82f6',border:'none',color:'white',padding:'4px 8px',borderRadius:'4px',cursor:'pointer',fontSize:'11px'},title:\"Verificar datos en consola\",children:\"\\uD83D\\uDD0D Debug\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowStats(false),style:{background:'none',border:'none',color:'#6b7280',cursor:'pointer',fontSize:'18px'},children:\"\\xD7\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'1fr 1fr',gap:'12px',fontSize:isMobile?'12px':'13px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',marginBottom:'4px'},children:\"\\uD83D\\uDE9B Veh\\xEDculos\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'2px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Total: \",/*#__PURE__*/_jsx(\"strong\",{children:(realtimeStats===null||realtimeStats===void 0?void 0:(_realtimeStats$vehicu=realtimeStats.vehiculos)===null||_realtimeStats$vehicu===void 0?void 0:_realtimeStats$vehicu.total)||0})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Activos: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#22c55e'},children:(realtimeStats===null||realtimeStats===void 0?void 0:(_realtimeStats$vehicu2=realtimeStats.vehiculos)===null||_realtimeStats$vehicu2===void 0?void 0:_realtimeStats$vehicu2.activos)||0})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 En Mantenimiento: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#ef4444'},children:(realtimeStats===null||realtimeStats===void 0?void 0:(_realtimeStats$vehicu3=realtimeStats.vehiculos)===null||_realtimeStats$vehicu3===void 0?void 0:_realtimeStats$vehicu3.enMantenimiento)||0})]}),statsInitialized&&vehiculos.length>0&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'11px',color:'#9ca3af',marginTop:'2px'},children:[\"Detalle: \",vehiculos.filter(v=>v.estado==='disponible').length,\" disponibles + \",vehiculos.filter(v=>v.estado==='en_uso').length,\" en uso\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',marginBottom:'4px'},children:\"\\uD83C\\uDFD7\\uFE0F Zonas\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'2px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Total: \",/*#__PURE__*/_jsx(\"strong\",{children:realtimeStats.zonas.total})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 En progreso: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#3b82f6'},children:realtimeStats.zonas.activas})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Completadas: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#22c55e'},children:realtimeStats.zonas.completadas})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Pendientes: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#f59e0b'},children:realtimeStats.zonas.pendientes||0})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{gridColumn:isMobile?'span 1':'span 2'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',marginBottom:'4px'},children:\"\\uD83D\\uDC77 Trabajadores\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:isMobile?'10px':'15px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Total: \",/*#__PURE__*/_jsx(\"strong\",{children:realtimeStats.trabajadores.total})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 En ruta: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#8b5cf6'},children:realtimeStats.trabajadores.enRuta})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Trabajando: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#10b981'},children:realtimeStats.trabajadores.trabajando})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Disponibles: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#06b6d4'},children:realtimeStats.trabajadores.disponibles})]})]}),(realtimeStats.trabajadores.enRuta>0||realtimeStats.trabajadores.trabajando>0)&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'8px',padding:'6px',background:'#f0f9ff',borderRadius:'4px',fontSize:'11px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Trabajadores activos:\"}),trabajadores.filter(t=>t.estado==='en_camino'||t.estado==='trabajando').map(t=>/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'2px'},children:[\"\\u2022 \",t.nombre||t.email,\": \",t.estado==='en_camino'?'🚗 En camino':'🔧 Trabajando',\" \",t.zonaDestino&&`(${t.zonaDestino})`]},t.id))]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'8px',padding:'6px',background:'#dcfce7',borderRadius:'4px',fontSize:isMobile?'11px':'12px',color:'#15803d'},children:[\"\\uD83D\\uDFE2 GPS Activos: \",/*#__PURE__*/_jsx(\"strong\",{children:trabajadores.filter(t=>{var _t$ubicacion;const tieneUbicacion=t.ubicacion&&t.ubicacion.lat&&t.ubicacion.lng;const esReciente=((_t$ubicacion=t.ubicacion)===null||_t$ubicacion===void 0?void 0:_t$ubicacion.timestamp)&&new Date()-new Date(t.ubicacion.timestamp)<60000;return tieneUbicacion&&esReciente;}).length}),\" transmitiendo\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'12px',paddingTop:'12px',borderTop:'1px solid #e5e7eb',fontSize:'11px',color:'#22c55e',fontWeight:'bold'},children:\"\\uD83D\\uDFE2 Conectado a Firebase\"})]}),!showStats&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowStats(true),style:{position:'fixed',bottom:isMobile?'10px':'20px',left:isMobile?'10px':'20px',background:'white',border:'1px solid #e5e7eb',borderRadius:'8px',padding:isMobile?'8px 10px':'10px 15px',boxShadow:'0 2px 10px rgba(0,0,0,0.1)',zIndex:999,cursor:'pointer',fontSize:isMobile?'12px':'14px',fontWeight:'500',color:'#374151'},children:[\"\\uD83D\\uDCCA \",isMobile?'Stats':'Mostrar estadísticas']}),/*#__PURE__*/_jsx(\"div\",{ref:mapRef,style:{width:'100%',height:'100%',position:'absolute',top:0,left:0}}),!mapLoaded&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:'50%',left:'50%',transform:'translate(-50%, -50%)',textAlign:'center',zIndex:1100,background:'rgba(255,255,255,0.95)',padding:'20px',borderRadius:'12px',boxShadow:'0 4px 20px rgba(0,0,0,0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'50px',height:'50px',border:'4px solid #f3f3f3',borderTop:'4px solid #667eea',borderRadius:'50%',animation:'spin 1s linear infinite',margin:'0 auto'}}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'10px',color:'#666',fontSize:'14px'},children:\"Cargando mapa...\"})]}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `})]});};export default MapaQuillonFirebase;","map":{"version":3,"names":["React","useEffect","useRef","useState","vehiculosService","zonasService","trabajadoresService","reportesService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MapaQuillonFirebase","_ref","_realtimeStats$vehicu","_realtimeStats$vehicu2","_realtimeStats$vehicu3","currentUser","onLogout","onViewChange","currentView","mapRef","map","setMap","vehiculos","setVehiculos","zonas","setZonas","trabajadores","setTrabajadores","selectedItemId","setSelectedItemId","selectedItemType","setSelectedItemType","filtroActivo","setFiltroActivo","mapLoaded","setMapLoaded","showStats","setShowStats","isMobile","setIsMobile","realtimeStats","setRealtimeStats","total","activos","enMantenimiento","activas","completadas","pendientes","enRuta","trabajando","disponibles","statsInitialized","setStatsInitialized","markersRef","infoWindowRef","unsubscribesRef","dataRef","API_KEY","checkMobile","window","innerWidth","addEventListener","removeEventListener","loadGoogleMaps","Promise","resolve","reject","google","maps","existingScript","document","querySelector","Error","script","createElement","src","async","defer","onload","onerror","head","appendChild","initMap","current","mapInstance","Map","center","lat","lng","zoom","mapTypeId","styles","featureType","stylers","visibility","InfoWindow","addListener","close","err","console","error","log","length","filter","v","estado","enUso","detalleVehiculos","id","nombre","esDisponible","esEnUso","prev","nuevoEstado","unsubVehiculos","subscribeToVehiculos","vehiculosData","_v$estado","tipoEstado","estadoTrimmed","trim","vehiculosNormalizados","_v$estado2","_v$estado2$toLowerCas","_v$estado2$toLowerCas2","_v$estado2$toLowerCas3","toLowerCase","call","push","unsubZonas","subscribeToZonasAsignadas","zonasData","subscribeToZonas","unsubTrabajadores","subscribeToTrabajadores","trabajadoresData","getRealtimeStats","stats","forEach","unsub","updateInfoWindowContent","item","content","find","createVehiculoInfoWindow","z","createZonaInfoWindow","t","createTrabajadorInfoWindow","getMap","setContent","getIcon","tipo","_iconConfigs$tipo","iconConfigs","vehiculo","activo","color","symbol","en_ruta","mantenimiento","inactivo","zona","en_progreso","pendiente","completado","activa","pausada","completada","trabajador","en_camino","disponible","config","path","SymbolPath","CIRCLE","scale","fillColor","fillOpacity","strokeColor","strokeWeight","anchor","Point","createOrUpdateMarker","key","position","icon","title","clickHandler","marker","setPosition","setIcon","setTitle","getAnimation","includes","setAnimation","Animation","BOUNCE","Marker","animation","hideUnusedMarkers","activeKeys","Object","keys","open","ubicacion","conductor","telefono","combustible","velocidad","destino","ultimaActualizacion","Date","toLocaleTimeString","todosLosTrabajadores","trabajadorAsignado","direccion","descripcion","email","prioridad","fechaLimite","toLocaleDateString","fechaCompletado","toLocaleString","_trabajador$ubicacion","ahora","timestamp","diferenciaTiempo","Math","floor","estadoConexion","colorEstado","zonaDestino","recorridoActual","toFixed","hour","minute","second","style","width","height","overflow","children","ref","top","left","right","background","zIndex","boxShadow","padding","display","justifyContent","alignItems","flexWrap","flex","marginRight","margin","fontSize","fontWeight","whiteSpace","opacity","gap","borderRadius","name","role","onClick","border","cursor","minWidth","transition","onMouseEnter","e","currentTarget","transform","onMouseLeave","marginTop","overflowX","bottom","maxWidth","maxHeight","marginBottom","tipo_estado","enMant","alert","gridTemplateColumns","flexDirection","gridColumn","_t$ubicacion","tieneUbicacion","esReciente","paddingTop","borderTop","textAlign"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/MapaQuillonFirebase.js"],"sourcesContent":["// src/components/MapaQuillonFirebase.js\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { vehiculosService, zonasService, trabajadoresService, reportesService } from '../services/firebaseservices';\r\n\r\nconst MapaQuillonFirebase = ({ currentUser, onLogout, onViewChange, currentView = 'dashboard' }) => {\r\n  const mapRef = useRef(null);\r\n  const [map, setMap] = useState(null);\r\n  const [vehiculos, setVehiculos] = useState([]);\r\n  const [zonas, setZonas] = useState([]);\r\n  const [trabajadores, setTrabajadores] = useState([]);\r\n  const [selectedItemId, setSelectedItemId] = useState(null);\r\n  const [selectedItemType, setSelectedItemType] = useState(null);\r\n  const [filtroActivo, setFiltroActivo] = useState('todos');\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n  const [showStats, setShowStats] = useState(true);\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [realtimeStats, setRealtimeStats] = useState({\r\n    vehiculos: { total: 0, activos: 0, enMantenimiento: 0 },\r\n    zonas: { total: 0, activas: 0, completadas: 0, pendientes: 0 },\r\n    trabajadores: { total: 0, enRuta: 0, trabajando: 0, disponibles: 0 }\r\n  });\r\n  const [statsInitialized, setStatsInitialized] = useState(false);\r\n  \r\n  const markersRef = useRef({});\r\n  const infoWindowRef = useRef(null);\r\n  const unsubscribesRef = useRef([]);\r\n  const dataRef = useRef({ vehiculos: [], zonas: [], trabajadores: [] });\r\n  \r\n  const API_KEY = 'AIzaSyA7DrdL36n5cx-RNzuXGAQggFeGCheHDbY';\r\n\r\n  // Detectar si es móvil\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth <= 768);\r\n    };\r\n    \r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    \r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  // Cargar Google Maps\r\n  useEffect(() => {\r\n    const loadGoogleMaps = () => {\r\n      return new Promise((resolve, reject) => {\r\n        if (window.google && window.google.maps) {\r\n          resolve(window.google.maps);\r\n          return;\r\n        }\r\n\r\n        const existingScript = document.querySelector('script[src*=\"maps.googleapis.com\"]');\r\n        if (existingScript) {\r\n          existingScript.addEventListener('load', () => {\r\n            if (window.google && window.google.maps) {\r\n              resolve(window.google.maps);\r\n            } else {\r\n              reject(new Error('Google Maps no disponible'));\r\n            }\r\n          });\r\n          return;\r\n        }\r\n\r\n        const script = document.createElement('script');\r\n        script.src = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry&v=weekly`;\r\n        script.async = true;\r\n        script.defer = true;\r\n\r\n        script.onload = () => {\r\n          if (window.google && window.google.maps) {\r\n            resolve(window.google.maps);\r\n          }\r\n        };\r\n\r\n        script.onerror = () => reject(new Error('Error al cargar Google Maps'));\r\n        document.head.appendChild(script);\r\n      });\r\n    };\r\n\r\n    const initMap = async () => {\r\n      try {\r\n        const maps = await loadGoogleMaps();\r\n        \r\n        if (!mapRef.current) return;\r\n\r\n        const mapInstance = new maps.Map(mapRef.current, {\r\n          center: { lat: -36.7333, lng: -72.4667 },\r\n          zoom: 13,\r\n          mapTypeId: 'roadmap',\r\n          styles: [\r\n            {\r\n              featureType: 'poi.business',\r\n              stylers: [{ visibility: 'off' }]\r\n            }\r\n          ]\r\n        });\r\n\r\n        setMap(mapInstance);\r\n        infoWindowRef.current = new maps.InfoWindow();\r\n        \r\n        mapInstance.addListener('click', () => {\r\n          if (infoWindowRef.current) {\r\n            infoWindowRef.current.close();\r\n            setSelectedItemId(null);\r\n            setSelectedItemType(null);\r\n          }\r\n        });\r\n        \r\n        setMapLoaded(true);\r\n      } catch (err) {\r\n        console.error('Error al cargar mapa:', err);\r\n      }\r\n    };\r\n\r\n    initMap();\r\n  }, []);\r\n\r\n  // Calcular estadísticas locales de vehículos cuando cambien\r\n  useEffect(() => {\r\n    console.log('🔄 Recalculando estadísticas locales. Vehículos:', vehiculos.length);\r\n    \r\n    if (vehiculos.length >= 0) { // Cambiar > a >= para incluir cuando es 0\r\n      const disponibles = vehiculos.filter(v => v.estado === 'disponible').length;\r\n      const enUso = vehiculos.filter(v => v.estado === 'en_uso').length;\r\n      const enMantenimiento = vehiculos.filter(v => v.estado === 'mantenimiento').length;\r\n      const activos = disponibles + enUso;\r\n      \r\n      console.log('📊 Cálculo local de estadísticas:', {\r\n        total: vehiculos.length,\r\n        disponibles,\r\n        enUso,\r\n        activos,\r\n        enMantenimiento,\r\n        detalleVehiculos: vehiculos.map(v => ({\r\n          id: v.id,\r\n          nombre: v.nombre,\r\n          estado: v.estado,\r\n          esDisponible: v.estado === 'disponible',\r\n          esEnUso: v.estado === 'en_uso'\r\n        }))\r\n      });\r\n      \r\n      // Actualizar estadísticas localmente\r\n      setRealtimeStats(prev => {\r\n        const nuevoEstado = {\r\n          ...prev,\r\n          vehiculos: {\r\n            total: vehiculos.length,\r\n            activos: activos,\r\n            enMantenimiento: enMantenimiento\r\n          }\r\n        };\r\n        console.log('📊 Nuevo estado de estadísticas:', nuevoEstado);\r\n        return nuevoEstado;\r\n      });\r\n      \r\n      setStatsInitialized(true);\r\n    }\r\n  }, [vehiculos]);\r\n\r\n  // Suscribirse a datos de Firebase\r\n  useEffect(() => {\r\n    console.log('🔄 Iniciando suscripciones a Firebase...');\r\n    \r\n    const unsubVehiculos = vehiculosService.subscribeToVehiculos((vehiculosData) => {\r\n      console.log('🚛 Vehículos recibidos desde Firebase:', vehiculosData);\r\n      console.log('🚛 Tipos de datos:', vehiculosData.map(v => ({\r\n        id: v.id,\r\n        nombre: v.nombre,\r\n        estado: v.estado,\r\n        tipoEstado: typeof v.estado,\r\n        estadoTrimmed: v.estado?.trim ? v.estado.trim() : v.estado\r\n      })));\r\n      \r\n      // Limpiar y normalizar estados\r\n      const vehiculosNormalizados = vehiculosData.map(v => ({\r\n        ...v,\r\n        estado: v.estado?.toLowerCase?.()?.trim?.() || 'disponible'\r\n      }));\r\n      \r\n      dataRef.current.vehiculos = vehiculosNormalizados;\r\n      setVehiculos(vehiculosNormalizados);\r\n      console.log('🚛 Vehículos normalizados y guardados:', vehiculosNormalizados.length);\r\n    });\r\n    unsubscribesRef.current.push(unsubVehiculos);\r\n\r\n    const unsubZonas = zonasService.subscribeToZonasAsignadas ? \r\n      zonasService.subscribeToZonasAsignadas((zonasData) => {\r\n        dataRef.current.zonas = zonasData;\r\n        setZonas(zonasData);\r\n        console.log('🏗️ Zonas asignadas actualizadas:', zonasData.length);\r\n      }) :\r\n      zonasService.subscribeToZonas((zonasData) => {\r\n        dataRef.current.zonas = zonasData;\r\n        setZonas(zonasData);\r\n        console.log('🏗️ Zonas actualizadas:', zonasData.length);\r\n      });\r\n    unsubscribesRef.current.push(unsubZonas);\r\n\r\n    const unsubTrabajadores = trabajadoresService.subscribeToTrabajadores((trabajadoresData) => {\r\n      dataRef.current.trabajadores = trabajadoresData;\r\n      setTrabajadores(trabajadoresData);\r\n      console.log('👷 Trabajadores actualizados:', trabajadoresData.length);\r\n    });\r\n    unsubscribesRef.current.push(unsubTrabajadores);\r\n\r\n    // Suscribirse a estadísticas en tiempo real\r\n    console.log('📊 Suscribiendo a estadísticas en tiempo real...');\r\n    reportesService.getRealtimeStats((stats) => {\r\n      console.log('📊 Estadísticas recibidas en MapaQuillon:', stats);\r\n      console.log('📊 Vehículos activos:', stats.vehiculos.activos);\r\n      console.log('📊 Vehículos en mantenimiento:', stats.vehiculos.enMantenimiento);\r\n      setRealtimeStats(stats);\r\n    });\r\n\r\n    return () => {\r\n      console.log('🔄 Limpiando suscripciones...');\r\n      unsubscribesRef.current.forEach(unsub => unsub && unsub());\r\n    };\r\n  }, []);\r\n\r\n  const updateInfoWindowContent = () => {\r\n    if (!infoWindowRef.current || !selectedItemId || !selectedItemType) return;\r\n    \r\n    let item = null;\r\n    let content = null;\r\n    \r\n    if (selectedItemType === 'vehiculo') {\r\n      item = dataRef.current.vehiculos.find(v => v.id === selectedItemId);\r\n      if (item) content = createVehiculoInfoWindow(item);\r\n    } else if (selectedItemType === 'zona') {\r\n      item = dataRef.current.zonas.find(z => z.id === selectedItemId);\r\n      if (item) content = createZonaInfoWindow(item, dataRef.current.trabajadores);\r\n    } else if (selectedItemType === 'trabajador') {\r\n      item = dataRef.current.trabajadores.find(t => t.id === selectedItemId);\r\n      if (item) content = createTrabajadorInfoWindow(item);\r\n    }\r\n    \r\n    if (content && infoWindowRef.current.getMap()) {\r\n      infoWindowRef.current.setContent(content);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    updateInfoWindowContent();\r\n  }, [vehiculos, zonas, trabajadores]);\r\n\r\n  const getIcon = (tipo, estado) => {\r\n    if (!window.google) return null;\r\n    \r\n    const iconConfigs = {\r\n      vehiculo: {\r\n        activo: { color: '#22c55e', symbol: '🚛' },\r\n        trabajando: { color: '#3b82f6', symbol: '🔧' },\r\n        en_ruta: { color: '#f59e0b', symbol: '🚗' },\r\n        mantenimiento: { color: '#ef4444', symbol: '🔧' },\r\n        inactivo: { color: '#6b7280', symbol: '⏸️' }\r\n      },\r\n      zona: {\r\n        en_progreso: { color: '#3b82f6', symbol: '🏗️' },\r\n        pendiente: { color: '#f59e0b', symbol: '⏳' },\r\n        completado: { color: '#22c55e', symbol: '✅' },\r\n        activa: { color: '#3b82f6', symbol: '🏗️' },\r\n        pausada: { color: '#f59e0b', symbol: '⏸️' },\r\n        completada: { color: '#22c55e', symbol: '✅' }\r\n      },\r\n      trabajador: {\r\n        en_camino: { color: '#8b5cf6', symbol: '👷' },\r\n        trabajando: { color: '#10b981', symbol: '👷' },\r\n        disponible: { color: '#06b6d4', symbol: '👷' },\r\n        inactivo: { color: '#6b7280', symbol: '👷' }\r\n      }\r\n    };\r\n\r\n    const config = iconConfigs[tipo]?.[estado] || { color: '#6b7280', symbol: '📍' };\r\n    \r\n    if (tipo === 'trabajador') {\r\n      return {\r\n        path: window.google.maps.SymbolPath.CIRCLE,\r\n        scale: 8,\r\n        fillColor: config.color,\r\n        fillOpacity: 1,\r\n        strokeColor: '#ffffff',\r\n        strokeWeight: 2\r\n      };\r\n    }\r\n\r\n    return {\r\n      path: 'M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z',\r\n      fillColor: config.color,\r\n      fillOpacity: 1,\r\n      strokeColor: '#ffffff',\r\n      strokeWeight: 2,\r\n      scale: tipo === 'vehiculo' ? 1.8 : 2,\r\n      anchor: new window.google.maps.Point(12, 24)\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!map || !window.google) return;\r\n\r\n    const createOrUpdateMarker = (key, position, icon, title, clickHandler) => {\r\n      if (markersRef.current[key]) {\r\n        const marker = markersRef.current[key];\r\n        marker.setPosition(position);\r\n        marker.setIcon(icon);\r\n        marker.setTitle(title);\r\n        \r\n        if (marker.getAnimation() && !icon.fillColor.includes('#22c55e')) {\r\n          marker.setAnimation(null);\r\n        } else if (!marker.getAnimation() && icon.fillColor.includes('#22c55e')) {\r\n          marker.setAnimation(window.google.maps.Animation.BOUNCE);\r\n        }\r\n      } else {\r\n        const marker = new window.google.maps.Marker({\r\n          position: position,\r\n          map: map,\r\n          title: title,\r\n          icon: icon,\r\n          animation: icon.fillColor && icon.fillColor.includes('#22c55e') ? \r\n                    window.google.maps.Animation.BOUNCE : null\r\n        });\r\n\r\n        marker.addListener('click', clickHandler);\r\n        markersRef.current[key] = marker;\r\n      }\r\n    };\r\n\r\n    const hideUnusedMarkers = (activeKeys) => {\r\n      Object.keys(markersRef.current).forEach(key => {\r\n        if (!activeKeys.includes(key)) {\r\n          markersRef.current[key].setMap(null);\r\n          delete markersRef.current[key];\r\n        }\r\n      });\r\n    };\r\n\r\n    const activeKeys = [];\r\n\r\n    if (filtroActivo === 'todos' || filtroActivo === 'vehiculos') {\r\n      vehiculos.forEach(vehiculo => {\r\n        if (vehiculo.lat && vehiculo.lng) {\r\n          const key = `vehiculo_${vehiculo.id}`;\r\n          activeKeys.push(key);\r\n          \r\n          createOrUpdateMarker(\r\n            key,\r\n            { lat: vehiculo.lat, lng: vehiculo.lng },\r\n            getIcon('vehiculo', vehiculo.estado),\r\n            vehiculo.nombre,\r\n            () => {\r\n              const content = createVehiculoInfoWindow(vehiculo);\r\n              infoWindowRef.current.setContent(content);\r\n              infoWindowRef.current.open(map, markersRef.current[key]);\r\n              setSelectedItemId(vehiculo.id);\r\n              setSelectedItemType('vehiculo');\r\n            }\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    if (filtroActivo === 'todos' || filtroActivo === 'zonas') {\r\n      zonas.forEach(zona => {\r\n        if (zona.lat && zona.lng) {\r\n          const key = `zona_${zona.id}`;\r\n          activeKeys.push(key);\r\n          \r\n          createOrUpdateMarker(\r\n            key,\r\n            { lat: zona.lat, lng: zona.lng },\r\n            getIcon('zona', zona.estado || 'pendiente'),\r\n            zona.nombre,\r\n            () => {\r\n              const content = createZonaInfoWindow(zona, trabajadores);\r\n              infoWindowRef.current.setContent(content);\r\n              infoWindowRef.current.open(map, markersRef.current[key]);\r\n              setSelectedItemId(zona.id);\r\n              setSelectedItemType('zona');\r\n            }\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    if (filtroActivo === 'todos' || filtroActivo === 'trabajadores') {\r\n      trabajadores.forEach(trabajador => {\r\n        if (trabajador.ubicacion && trabajador.ubicacion.lat && trabajador.ubicacion.lng) {\r\n          const key = `trabajador_${trabajador.id}`;\r\n          activeKeys.push(key);\r\n          \r\n          createOrUpdateMarker(\r\n            key,\r\n            { lat: trabajador.ubicacion.lat, lng: trabajador.ubicacion.lng },\r\n            getIcon('trabajador', trabajador.estado || 'disponible'),\r\n            trabajador.nombre,\r\n            () => {\r\n              const content = createTrabajadorInfoWindow(trabajador);\r\n              infoWindowRef.current.setContent(content);\r\n              infoWindowRef.current.open(map, markersRef.current[key]);\r\n              setSelectedItemId(trabajador.id);\r\n              setSelectedItemType('trabajador');\r\n            }\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    hideUnusedMarkers(activeKeys);\r\n\r\n  }, [map, vehiculos, zonas, trabajadores, filtroActivo]);\r\n\r\n  const createVehiculoInfoWindow = (vehiculo) => {\r\n    return `\r\n      <div style=\"padding: 10px; font-family: Arial, sans-serif; max-width: 280px;\">\r\n        <h3 style=\"margin: 0 0 10px 0; color: #1f2937;\">\r\n          ${vehiculo.nombre}\r\n        </h3>\r\n        <div style=\"background: ${vehiculo.estado === 'activo' ? '#dcfce7' : vehiculo.estado === 'trabajando' ? '#dbeafe' : '#fef3c7'}; \r\n                    padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 10px;\">\r\n          <strong>Estado:</strong> ${vehiculo.estado}\r\n        </div>\r\n        <div style=\"font-size: 14px; line-height: 1.6;\">\r\n          ${vehiculo.conductor ? `<div><strong>👤 Conductor:</strong> ${vehiculo.conductor}</div>` : ''}\r\n          ${vehiculo.telefono ? `<div><strong>📱 Teléfono:</strong> ${vehiculo.telefono}</div>` : ''}\r\n          ${vehiculo.combustible ? `\r\n            <div><strong>⛽ Combustible:</strong> \r\n              <span style=\"color: ${vehiculo.combustible > 50 ? '#22c55e' : vehiculo.combustible > 25 ? '#f59e0b' : '#ef4444'}\">\r\n                ${vehiculo.combustible}%\r\n              </span>\r\n            </div>\r\n          ` : ''}\r\n          ${vehiculo.velocidad ? `<div><strong>📍 Velocidad:</strong> ${vehiculo.velocidad} km/h</div>` : ''}\r\n          ${vehiculo.zona ? `<div><strong>🏗️ Zona:</strong> ${vehiculo.zona}</div>` : ''}\r\n          ${vehiculo.destino ? `<div><strong>🎯 Destino:</strong> ${vehiculo.destino}</div>` : ''}\r\n          <div style=\"margin-top: 8px; color: #6b7280; font-size: 12px;\">\r\n            Última actualización: ${vehiculo.ultimaActualizacion ? new Date(vehiculo.ultimaActualizacion).toLocaleTimeString() : 'N/A'}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  };\r\n\r\n  const createZonaInfoWindow = (zona, todosLosTrabajadores) => {\r\n    const trabajadorAsignado = todosLosTrabajadores.find(t => t.id === zona.trabajadorAsignado);\r\n    return `\r\n      <div style=\"padding: 10px; font-family: Arial, sans-serif; max-width: 280px;\">\r\n        <h3 style=\"margin: 0 0 10px 0; color: #1f2937;\">\r\n          ${zona.nombre}\r\n        </h3>\r\n        <div style=\"background: ${zona.estado === 'en_progreso' ? '#dbeafe' : zona.estado === 'pendiente' ? '#fef3c7' : '#dcfce7'}; \r\n                    padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 10px;\">\r\n          <strong>Estado:</strong> ${zona.estado || 'pendiente'}\r\n        </div>\r\n        <div style=\"font-size: 14px; line-height: 1.6;\">\r\n          ${zona.direccion ? `<div><strong>📍 Dirección:</strong> ${zona.direccion}</div>` : ''}\r\n          ${zona.descripcion ? `<div><strong>📝 Descripción:</strong> ${zona.descripcion}</div>` : ''}\r\n          ${trabajadorAsignado ? `<div><strong>👷 Trabajador:</strong> ${trabajadorAsignado.nombre || trabajadorAsignado.email}</div>` : '<div><strong>👷 Trabajador:</strong> Sin asignar</div>'}\r\n          ${zona.prioridad ? `<div><strong>⚡ Prioridad:</strong> ${zona.prioridad}</div>` : ''}\r\n          ${zona.fechaLimite ? `<div><strong>📅 Fecha límite:</strong> ${new Date(zona.fechaLimite).toLocaleDateString()}</div>` : ''}\r\n          ${zona.fechaCompletado ? `<div style=\"color: #22c55e; margin-top: 8px;\"><strong>✅ Completado:</strong> ${new Date(zona.fechaCompletado).toLocaleString()}</div>` : ''}\r\n        </div>\r\n      </div>\r\n    `;\r\n  };\r\n\r\n  const createTrabajadorInfoWindow = (trabajador) => {\r\n    const ahora = new Date();\r\n    const ultimaActualizacion = trabajador.ubicacion?.timestamp ? new Date(trabajador.ubicacion.timestamp) : null;\r\n    const diferenciaTiempo = ultimaActualizacion ? Math.floor((ahora - ultimaActualizacion) / 1000) : null;\r\n    \r\n    let estadoConexion = '⚫ Sin conexión';\r\n    let colorEstado = '#6b7280';\r\n    \r\n    if (diferenciaTiempo !== null) {\r\n      if (diferenciaTiempo < 30) {\r\n        estadoConexion = '🟢 En línea';\r\n        colorEstado = '#10b981';\r\n      } else if (diferenciaTiempo < 60) {\r\n        estadoConexion = '🟡 Conexión reciente';\r\n        colorEstado = '#f59e0b';\r\n      } else if (diferenciaTiempo < 300) {\r\n        estadoConexion = '🟠 Última conexión hace ' + Math.floor(diferenciaTiempo / 60) + ' min';\r\n        colorEstado = '#fb923c';\r\n      } else {\r\n        estadoConexion = '🔴 Sin conexión reciente';\r\n        colorEstado = '#ef4444';\r\n      }\r\n    }\r\n    \r\n    return `\r\n      <div style=\"padding: 10px; font-family: Arial, sans-serif; max-width: 300px;\">\r\n        <h3 style=\"margin: 0 0 10px 0; color: #1f2937; display: flex; align-items: center; gap: 8px;\">\r\n          👷 ${trabajador.nombre || trabajador.email || 'Trabajador'}\r\n          <span style=\"\r\n            font-size: 10px;\r\n            padding: 2px 6px;\r\n            background: ${colorEstado}22;\r\n            color: ${colorEstado};\r\n            border-radius: 12px;\r\n            font-weight: normal;\r\n          \">\r\n            ${estadoConexion}\r\n          </span>\r\n        </h3>\r\n        \r\n        <div style=\"\r\n          background: ${trabajador.estado === 'en_camino' ? '#ede9fe' : \r\n                       trabajador.estado === 'trabajando' ? '#dcfce7' : \r\n                       trabajador.estado === 'disponible' ? '#e0f2fe' : '#f3f4f6'}; \r\n          padding: 6px 10px; \r\n          border-radius: 6px; \r\n          display: inline-block; \r\n          margin-bottom: 12px;\r\n          font-size: 13px;\r\n        \">\r\n          <strong>Estado:</strong> ${\r\n            trabajador.estado === 'en_camino' ? '🚗 En camino' :\r\n            trabajador.estado === 'trabajando' ? '🔧 Trabajando' :\r\n            trabajador.estado === 'disponible' ? '✅ Disponible' :\r\n            '⏸️ ' + (trabajador.estado || 'Sin estado')\r\n          }\r\n        </div>\r\n        \r\n        <div style=\"font-size: 14px; line-height: 1.8;\">\r\n          ${trabajador.email ? `\r\n            <div style=\"margin-bottom: 6px;\">\r\n              <strong>📧 Email:</strong> \r\n              <span style=\"color: #6b7280; font-size: 13px;\">${trabajador.email}</span>\r\n            </div>\r\n          ` : ''}\r\n          \r\n          ${trabajador.telefono ? `\r\n            <div style=\"margin-bottom: 6px;\">\r\n              <strong>📱 Teléfono:</strong> \r\n              <span style=\"color: #6b7280; font-size: 13px;\">${trabajador.telefono}</span>\r\n            </div>\r\n          ` : ''}\r\n          \r\n          ${trabajador.zonaDestino ? `\r\n            <div style=\"margin-bottom: 6px;\">\r\n              <strong>🎯 Destino:</strong> \r\n              <span style=\"color: #3b82f6; font-size: 13px;\">${trabajador.zonaDestino}</span>\r\n            </div>\r\n          ` : ''}\r\n          \r\n          ${trabajador.recorridoActual ? `\r\n            <div style=\"margin-bottom: 6px;\">\r\n              <strong>📍 En recorrido:</strong> \r\n              <span style=\"color: #10b981; font-size: 13px;\">Activo</span>\r\n            </div>\r\n          ` : ''}\r\n          \r\n          ${trabajador.ubicacion ? `\r\n            <div style=\"\r\n              margin-top: 12px; \r\n              padding-top: 10px; \r\n              border-top: 1px solid #e5e7eb;\r\n            \">\r\n              <div style=\"color: #6b7280; font-size: 12px; margin-bottom: 4px;\">\r\n                <strong>📍 Ubicación GPS:</strong>\r\n              </div>\r\n              <div style=\"\r\n                font-family: monospace; \r\n                font-size: 11px; \r\n                color: #9ca3af;\r\n                background: #f9fafb;\r\n                padding: 6px;\r\n                border-radius: 4px;\r\n              \">\r\n                Lat: ${trabajador.ubicacion.lat.toFixed(6)}<br/>\r\n                Lng: ${trabajador.ubicacion.lng.toFixed(6)}\r\n              </div>\r\n              <div style=\"color: #9ca3af; font-size: 11px; margin-top: 6px;\">\r\n                ⏱️ Última actualización: ${\r\n                  ultimaActualizacion ? \r\n                  ultimaActualizacion.toLocaleTimeString('es-CL', { \r\n                    hour: '2-digit', \r\n                    minute: '2-digit',\r\n                    second: '2-digit'\r\n                  }) : \r\n                  'N/A'\r\n                }\r\n              </div>\r\n            </div>\r\n          ` : `\r\n            <div style=\"\r\n              margin-top: 12px; \r\n              padding: 10px; \r\n              background: #fef2f2;\r\n              border-radius: 6px;\r\n              color: #991b1b;\r\n              font-size: 12px;\r\n              text-align: center;\r\n            \">\r\n              📍 GPS no activado\r\n            </div>\r\n          `}\r\n        </div>\r\n      </div>\r\n    `;\r\n  };\r\n\r\n  return (\r\n    <div style={{ width: '100%', height: '100vh', position: 'relative', overflow: 'hidden' }}>\r\n      <div \r\n        ref={mapRef}\r\n        style={{ \r\n          width: '100%', \r\n          height: '100%',\r\n          position: 'absolute',\r\n          top: 0,\r\n          left: 0\r\n        }} \r\n      />\r\n      \r\n      {/* Header */}\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n        color: 'white',\r\n        zIndex: 1000,\r\n        boxShadow: '0 2px 10px rgba(0,0,0,0.2)',\r\n        padding: isMobile ? '10px' : '12px 20px'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          width: '100%',\r\n          flexWrap: 'nowrap'\r\n        }}>\r\n          {/* Izquierda - Título */}\r\n          <div style={{ \r\n            flex: '0 0 auto',\r\n            marginRight: '20px'\r\n          }}>\r\n            <h1 style={{ \r\n              margin: 0, \r\n              fontSize: isMobile ? '16px' : '20px', \r\n              fontWeight: '600',\r\n              whiteSpace: 'nowrap'\r\n            }}>\r\n              🗺️ {isMobile ? 'MapaQuillón' : 'Centro de Control'}\r\n            </h1>\r\n            {!isMobile && (\r\n              <p style={{ \r\n                margin: '2px 0 0 0', \r\n                fontSize: '12px', \r\n                opacity: 0.9,\r\n                whiteSpace: 'nowrap'\r\n              }}>\r\n                Monitoreo en tiempo real\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Derecha - Todos los controles en línea */}\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '10px',\r\n            flex: '0 0 auto'\r\n          }}>\r\n            {/* Usuario (solo desktop) */}\r\n            {!isMobile && (\r\n              <span style={{\r\n                fontSize: '13px',\r\n                fontWeight: '500',\r\n                padding: '5px 12px',\r\n                background: 'rgba(255,255,255,0.15)',\r\n                borderRadius: '15px',\r\n                whiteSpace: 'nowrap'\r\n              }}>\r\n                👤 {currentUser.name || currentUser.email || 'Usuario'}\r\n              </span>\r\n            )}\r\n\r\n            {/* Botones de navegación */}\r\n            {onViewChange && !isMobile && (\r\n              <>\r\n                {/* Botón Panel Admin solo para superadmin */}\r\n                {currentUser.role === 'superadmin' && (\r\n                  <button\r\n                    onClick={() => onViewChange('admin')}\r\n                    style={{\r\n                      padding: '6px 12px',\r\n                      background: currentView === 'admin' ? 'rgba(255,255,255,0.25)' : 'rgba(255,255,255,0.1)',\r\n                      color: 'white',\r\n                      border: '1px solid rgba(255,255,255,0.3)',\r\n                      borderRadius: '5px',\r\n                      cursor: 'pointer',\r\n                      fontSize: '13px',\r\n                      fontWeight: currentView === 'admin' ? '600' : '400',\r\n                      whiteSpace: 'nowrap',\r\n                      minWidth: 'auto'\r\n                    }}\r\n                  >\r\n                    🔐 Panel Admin\r\n                  </button>\r\n                )}\r\n                <button\r\n                  onClick={() => onViewChange('dashboard')}\r\n                  style={{\r\n                    padding: '6px 12px',\r\n                    background: currentView === 'dashboard' ? 'rgba(255,255,255,0.25)' : 'rgba(255,255,255,0.1)',\r\n                    color: 'white',\r\n                    border: '1px solid rgba(255,255,255,0.3)',\r\n                    borderRadius: '5px',\r\n                    cursor: 'pointer',\r\n                    fontSize: '13px',\r\n                    fontWeight: currentView === 'dashboard' ? '600' : '400',\r\n                    whiteSpace: 'nowrap',\r\n                    minWidth: 'auto'\r\n                  }}\r\n                >\r\n                  📊 Dashboard GPS\r\n                </button>\r\n                <button\r\n                  onClick={() => onViewChange('zones')}\r\n                  style={{\r\n                    padding: '6px 12px',\r\n                    background: currentView === 'zones' ? 'rgba(255,255,255,0.25)' : 'rgba(255,255,255,0.1)',\r\n                    color: 'white',\r\n                    border: '1px solid rgba(255,255,255,0.3)',\r\n                    borderRadius: '5px',\r\n                    cursor: 'pointer',\r\n                    fontSize: '13px',\r\n                    fontWeight: currentView === 'zones' ? '600' : '400',\r\n                    whiteSpace: 'nowrap',\r\n                    minWidth: 'auto'\r\n                  }}\r\n                >\r\n                  🗺️ Gestión Zonas\r\n                </button>\r\n              </>\r\n            )}\r\n\r\n            {/* Botón Cerrar Sesión */}\r\n            <button\r\n              onClick={onLogout}\r\n              style={{\r\n                padding: isMobile ? '6px 12px' : '6px 14px',\r\n                background: '#ef4444',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '5px',\r\n                cursor: 'pointer',\r\n                fontSize: isMobile ? '12px' : '13px',\r\n                fontWeight: '600',\r\n                boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\r\n                whiteSpace: 'nowrap',\r\n                minWidth: 'auto',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                e.currentTarget.style.transform = 'scale(1.05)';\r\n                e.currentTarget.style.background = '#dc2626';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.currentTarget.style.transform = 'scale(1)';\r\n                e.currentTarget.style.background = '#ef4444';\r\n              }}\r\n            >\r\n              {isMobile ? '🚪 Salir' : '🚪 Cerrar Sesión'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Botones de navegación móvil - Segunda línea */}\r\n        {isMobile && onViewChange && (\r\n          <div style={{\r\n            marginTop: '8px',\r\n            display: 'flex',\r\n            gap: '8px'\r\n          }}>\r\n            {currentUser.role === 'superadmin' && (\r\n              <button\r\n                onClick={() => onViewChange('admin')}\r\n                style={{\r\n                  flex: 1,\r\n                  padding: '6px',\r\n                  background: currentView === 'admin' ? 'rgba(255,255,255,0.3)' : 'rgba(255,255,255,0.1)',\r\n                  color: 'white',\r\n                  border: '1px solid rgba(255,255,255,0.3)',\r\n                  borderRadius: '4px',\r\n                  fontSize: '11px'\r\n                }}\r\n              >\r\n                🔐 Admin\r\n              </button>\r\n            )}\r\n            <button\r\n              onClick={() => onViewChange('dashboard')}\r\n              style={{\r\n                flex: 1,\r\n                padding: '6px',\r\n                background: currentView === 'dashboard' ? 'rgba(255,255,255,0.3)' : 'rgba(255,255,255,0.1)',\r\n                color: 'white',\r\n                border: '1px solid rgba(255,255,255,0.3)',\r\n                borderRadius: '4px',\r\n                fontSize: '11px'\r\n              }}\r\n            >\r\n              📊 Dashboard\r\n            </button>\r\n            <button\r\n              onClick={() => onViewChange('zones')}\r\n              style={{\r\n                flex: 1,\r\n                padding: '6px',\r\n                background: currentView === 'zones' ? 'rgba(255,255,255,0.3)' : 'rgba(255,255,255,0.1)',\r\n                color: 'white',\r\n                border: '1px solid rgba(255,255,255,0.3)',\r\n                borderRadius: '4px',\r\n                fontSize: '11px'\r\n              }}\r\n            >\r\n              🗺️ Zonas\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Panel de filtros */}\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: isMobile ? (onViewChange ? '80px' : '52px') : '75px',\r\n        left: isMobile ? '10px' : '20px',\r\n        right: isMobile ? '10px' : 'auto',\r\n        background: 'white',\r\n        borderRadius: '8px',\r\n        padding: isMobile ? '6px' : '10px',\r\n        boxShadow: '0 2px 10px rgba(0,0,0,0.1)',\r\n        zIndex: 999,\r\n        display: 'flex',\r\n        gap: isMobile ? '4px' : '8px',\r\n        overflowX: isMobile ? 'auto' : 'visible'\r\n      }}>\r\n        <button\r\n          onClick={() => setFiltroActivo('todos')}\r\n          style={{\r\n            padding: isMobile ? '6px 8px' : '8px 12px',\r\n            background: filtroActivo === 'todos' ? '#667eea' : '#f3f4f6',\r\n            color: filtroActivo === 'todos' ? 'white' : '#374151',\r\n            border: 'none',\r\n            borderRadius: '6px',\r\n            cursor: 'pointer',\r\n            fontSize: isMobile ? '11px' : '13px',\r\n            fontWeight: '500',\r\n            whiteSpace: 'nowrap',\r\n            minWidth: isMobile ? 'auto' : '80px'\r\n          }}\r\n        >\r\n          📍 Todos\r\n        </button>\r\n        <button\r\n          onClick={() => setFiltroActivo('vehiculos')}\r\n          style={{\r\n            padding: isMobile ? '6px 8px' : '8px 12px',\r\n            background: filtroActivo === 'vehiculos' ? '#22c55e' : '#f3f4f6',\r\n            color: filtroActivo === 'vehiculos' ? 'white' : '#374151',\r\n            border: 'none',\r\n            borderRadius: '6px',\r\n            cursor: 'pointer',\r\n            fontSize: isMobile ? '11px' : '13px',\r\n            fontWeight: '500',\r\n            whiteSpace: 'nowrap',\r\n            minWidth: isMobile ? 'auto' : '100px'\r\n          }}\r\n        >\r\n          🚛 {isMobile ? `Veh (${realtimeStats.vehiculos.total})` : `Vehículos (${realtimeStats.vehiculos.total})`}\r\n        </button>\r\n        <button\r\n          onClick={() => setFiltroActivo('zonas')}\r\n          style={{\r\n            padding: isMobile ? '6px 8px' : '8px 12px',\r\n            background: filtroActivo === 'zonas' ? '#3b82f6' : '#f3f4f6',\r\n            color: filtroActivo === 'zonas' ? 'white' : '#374151',\r\n            border: 'none',\r\n            borderRadius: '6px',\r\n            cursor: 'pointer',\r\n            fontSize: isMobile ? '11px' : '13px',\r\n            fontWeight: '500',\r\n            whiteSpace: 'nowrap',\r\n            minWidth: isMobile ? 'auto' : '100px'\r\n          }}\r\n        >\r\n          🏗️ {isMobile ? `Zon (${realtimeStats.zonas.total})` : `Zonas (${realtimeStats.zonas.total})`}\r\n        </button>\r\n        <button\r\n          onClick={() => setFiltroActivo('trabajadores')}\r\n          style={{\r\n            padding: isMobile ? '6px 8px' : '8px 12px',\r\n            background: filtroActivo === 'trabajadores' ? '#8b5cf6' : '#f3f4f6',\r\n            color: filtroActivo === 'trabajadores' ? 'white' : '#374151',\r\n            border: 'none',\r\n            borderRadius: '6px',\r\n            cursor: 'pointer',\r\n            fontSize: isMobile ? '11px' : '13px',\r\n            fontWeight: '500',\r\n            whiteSpace: 'nowrap',\r\n            minWidth: isMobile ? 'auto' : '120px'\r\n          }}\r\n        >\r\n          👷 {isMobile ? `Trab (${realtimeStats.trabajadores.total})` : `Trabajadores (${realtimeStats.trabajadores.total})`}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Panel de estadísticas */}\r\n      {showStats && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          bottom: isMobile ? '10px' : '20px',\r\n          left: isMobile ? '10px' : '20px',\r\n          right: isMobile ? '10px' : 'auto',\r\n          background: 'white',\r\n          borderRadius: '12px',\r\n          padding: isMobile ? '10px' : '15px',\r\n          boxShadow: '0 4px 20px rgba(0,0,0,0.15)',\r\n          zIndex: 999,\r\n          maxWidth: isMobile ? 'calc(100% - 20px)' : '380px',\r\n          maxHeight: isMobile ? '35vh' : '50vh',\r\n          overflow: 'auto'\r\n        }}>\r\n          <div style={{ \r\n            display: 'flex', \r\n            justifyContent: 'space-between', \r\n            alignItems: 'center',\r\n            marginBottom: '12px'\r\n          }}>\r\n            <h3 style={{ \r\n              margin: 0, \r\n              fontSize: isMobile ? '14px' : '16px', \r\n              color: '#1f2937' \r\n            }}>\r\n              📊 Estado General\r\n            </h3>\r\n            <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n              <button\r\n                onClick={() => {\r\n                  console.log('🔍 DEPURACIÓN - Estado actual:');\r\n                  console.log('📊 realtimeStats:', realtimeStats);\r\n                  console.log('🚛 vehiculos array:', vehiculos);\r\n                  console.log('🚛 Estados de vehículos:', vehiculos.map(v => ({\r\n                    nombre: v.nombre,\r\n                    estado: v.estado,\r\n                    tipo_estado: typeof v.estado\r\n                  })));\r\n                  const disponibles = vehiculos.filter(v => v.estado === 'disponible');\r\n                  const enUso = vehiculos.filter(v => v.estado === 'en_uso');\r\n                  const enMant = vehiculos.filter(v => v.estado === 'mantenimiento');\r\n                  console.log('✅ Disponibles:', disponibles.length, disponibles);\r\n                  console.log('🔧 En uso:', enUso.length, enUso);\r\n                  console.log('🔧 En mantenimiento:', enMant.length, enMant);\r\n                  console.log('⚡ Total activos (calculado):', disponibles.length + enUso.length);\r\n                  alert(`Depuración enviada a la consola. \r\nVehículos totales: ${vehiculos.length}\r\nDisponibles: ${disponibles.length}\r\nEn uso: ${enUso.length}\r\nActivos (Disp+Uso): ${disponibles.length + enUso.length}\r\nEn mantenimiento: ${enMant.length}\r\n\r\nRevisa la consola (F12) para más detalles.`);\r\n                }}\r\n                style={{\r\n                  background: '#3b82f6',\r\n                  border: 'none',\r\n                  color: 'white',\r\n                  padding: '4px 8px',\r\n                  borderRadius: '4px',\r\n                  cursor: 'pointer',\r\n                  fontSize: '11px'\r\n                }}\r\n                title=\"Verificar datos en consola\"\r\n              >\r\n                🔍 Debug\r\n              </button>\r\n              <button\r\n                onClick={() => setShowStats(false)}\r\n                style={{\r\n                  background: 'none',\r\n                  border: 'none',\r\n                  color: '#6b7280',\r\n                  cursor: 'pointer',\r\n                  fontSize: '18px'\r\n                }}\r\n              >\r\n                ×\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ \r\n            display: 'grid', \r\n            gridTemplateColumns: isMobile ? '1fr' : '1fr 1fr', \r\n            gap: '12px', \r\n            fontSize: isMobile ? '12px' : '13px' \r\n          }}>\r\n            <div>\r\n              <div style={{ color: '#6b7280', marginBottom: '4px' }}>🚛 Vehículos</div>\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '2px' }}>\r\n                <span>• Total: <strong>{realtimeStats?.vehiculos?.total || 0}</strong></span>\r\n                <span>• Activos: <strong style={{ color: '#22c55e' }}>{realtimeStats?.vehiculos?.activos || 0}</strong></span>\r\n                <span>• En Mantenimiento: <strong style={{ color: '#ef4444' }}>{realtimeStats?.vehiculos?.enMantenimiento || 0}</strong></span>\r\n                {statsInitialized && vehiculos.length > 0 && (\r\n                  <span style={{ fontSize: '11px', color: '#9ca3af', marginTop: '2px' }}>\r\n                    Detalle: {vehiculos.filter(v => v.estado === 'disponible').length} disponibles + {vehiculos.filter(v => v.estado === 'en_uso').length} en uso\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <div style={{ color: '#6b7280', marginBottom: '4px' }}>🏗️ Zonas</div>\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '2px' }}>\r\n                <span>• Total: <strong>{realtimeStats.zonas.total}</strong></span>\r\n                <span>• En progreso: <strong style={{ color: '#3b82f6' }}>{realtimeStats.zonas.activas}</strong></span>\r\n                <span>• Completadas: <strong style={{ color: '#22c55e' }}>{realtimeStats.zonas.completadas}</strong></span>\r\n                <span>• Pendientes: <strong style={{ color: '#f59e0b' }}>{realtimeStats.zonas.pendientes || 0}</strong></span>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{ gridColumn: isMobile ? 'span 1' : 'span 2' }}>\r\n              <div style={{ color: '#6b7280', marginBottom: '4px' }}>👷 Trabajadores</div>\r\n              <div style={{ \r\n                display: 'flex', \r\n                gap: isMobile ? '10px' : '15px', \r\n                flexWrap: 'wrap' \r\n              }}>\r\n                <span>• Total: <strong>{realtimeStats.trabajadores.total}</strong></span>\r\n                <span>• En ruta: <strong style={{ color: '#8b5cf6' }}>{realtimeStats.trabajadores.enRuta}</strong></span>\r\n                <span>• Trabajando: <strong style={{ color: '#10b981' }}>{realtimeStats.trabajadores.trabajando}</strong></span>\r\n                <span>• Disponibles: <strong style={{ color: '#06b6d4' }}>{realtimeStats.trabajadores.disponibles}</strong></span>\r\n              </div>\r\n              \r\n              {(realtimeStats.trabajadores.enRuta > 0 || realtimeStats.trabajadores.trabajando > 0) && (\r\n                <div style={{ \r\n                  marginTop: '8px', \r\n                  padding: '6px', \r\n                  background: '#f0f9ff', \r\n                  borderRadius: '4px',\r\n                  fontSize: '11px'\r\n                }}>\r\n                  <strong>Trabajadores activos:</strong>\r\n                  {trabajadores.filter(t => t.estado === 'en_camino' || t.estado === 'trabajando').map(t => (\r\n                    <div key={t.id} style={{ marginTop: '2px' }}>\r\n                      • {t.nombre || t.email}: {\r\n                        t.estado === 'en_camino' ? '🚗 En camino' : '🔧 Trabajando'\r\n                      } {t.zonaDestino && `(${t.zonaDestino})`}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n              \r\n              <div style={{ \r\n                marginTop: '8px', \r\n                padding: '6px', \r\n                background: '#dcfce7', \r\n                borderRadius: '4px',\r\n                fontSize: isMobile ? '11px' : '12px',\r\n                color: '#15803d'\r\n              }}>\r\n                🟢 GPS Activos: <strong>{\r\n                  trabajadores.filter(t => {\r\n                    const tieneUbicacion = t.ubicacion && t.ubicacion.lat && t.ubicacion.lng;\r\n                    const esReciente = t.ubicacion?.timestamp && \r\n                      (new Date() - new Date(t.ubicacion.timestamp)) < 60000;\r\n                    return tieneUbicacion && esReciente;\r\n                  }).length\r\n                }</strong> transmitiendo\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{\r\n            marginTop: '12px',\r\n            paddingTop: '12px',\r\n            borderTop: '1px solid #e5e7eb',\r\n            fontSize: '11px',\r\n            color: '#22c55e',\r\n            fontWeight: 'bold'\r\n          }}>\r\n            🟢 Conectado a Firebase\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {!showStats && (\r\n        <button\r\n          onClick={() => setShowStats(true)}\r\n          style={{\r\n            position: 'fixed',\r\n            bottom: isMobile ? '10px' : '20px',\r\n            left: isMobile ? '10px' : '20px',\r\n            background: 'white',\r\n            border: '1px solid #e5e7eb',\r\n            borderRadius: '8px',\r\n            padding: isMobile ? '8px 10px' : '10px 15px',\r\n            boxShadow: '0 2px 10px rgba(0,0,0,0.1)',\r\n            zIndex: 999,\r\n            cursor: 'pointer',\r\n            fontSize: isMobile ? '12px' : '14px',\r\n            fontWeight: '500',\r\n            color: '#374151'\r\n          }}\r\n        >\r\n          📊 {isMobile ? 'Stats' : 'Mostrar estadísticas'}\r\n        </button>\r\n      )}\r\n\r\n      <div \r\n        ref={mapRef}\r\n        style={{ \r\n          width: '100%', \r\n          height: '100%',\r\n          position: 'absolute',\r\n          top: 0,\r\n          left: 0\r\n        }} \r\n      />\r\n\r\n      {!mapLoaded && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: '50%',\r\n          left: '50%',\r\n          transform: 'translate(-50%, -50%)',\r\n          textAlign: 'center',\r\n          zIndex: 1100,\r\n          background: 'rgba(255,255,255,0.95)',\r\n          padding: '20px',\r\n          borderRadius: '12px',\r\n          boxShadow: '0 4px 20px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <div style={{\r\n            width: '50px',\r\n            height: '50px',\r\n            border: '4px solid #f3f3f3',\r\n            borderTop: '4px solid #667eea',\r\n            borderRadius: '50%',\r\n            animation: 'spin 1s linear infinite',\r\n            margin: '0 auto'\r\n          }}></div>\r\n          <p style={{ marginTop: '10px', color: '#666', fontSize: '14px' }}>Cargando mapa...</p>\r\n        </div>\r\n      )}\r\n\r\n      <style jsx>{`\r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapaQuillonFirebase;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"// src/components/TrabajadorVehiclePanel.js\nimport React,{useState,useEffect}from'react';import{vehiculosService,trabajadoresService}from'../services/firebaseservices';import{database}from'../config/firebase';import{ref as databaseRef,update,get}from'firebase/database';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TrabajadorVehiclePanel=_ref=>{let{currentUser,onClose}=_ref;// ... resto del c√≥digo\nconst[vehiculoAsignado,setVehiculoAsignado]=useState(null);const[loading,setLoading]=useState(false);const[loadingVehiculo,setLoadingVehiculo]=useState(true);// NUEVO: Estado de carga inicial\nconst[message,setMessage]=useState(null);const[trabajadorData,setTrabajadorData]=useState(null);// Estados del formulario de viaje\nconst[formViaje,setFormViaje]=useState({fechaSalida:new Date().toISOString().split('T')[0],// Fecha de hoy\nhoraSalida:new Date().toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit'}),kilometrajeSalida:'',destino:'',motivoViaje:'trabajo',// trabajo, emergencia, mantenimiento\nobservaciones:''});const[showFinalizarModal,setShowFinalizarModal]=useState(false);const[kilometrajeLlegada,setKilometrajeLlegada]=useState('');const[errorKmLlegada,setErrorKmLlegada]=useState('');// Estado para el viaje activo\nconst[viajeActivo,setViajeActivo]=useState(null);// Cargar datos del trabajador y su veh√≠culo\nuseEffect(()=>{let mounted=true;const loadData=async()=>{console.log('üîÑ Iniciando carga de veh√≠culo para:',currentUser.uid);setLoadingVehiculo(true);try{// Esperar un momento para que Firebase se estabilice\nawait new Promise(resolve=>setTimeout(resolve,1000));// Verificar si el componente sigue montado\nif(!mounted)return;// Obtener datos del trabajador\nlet trabajadorData=null;await new Promise(resolve=>{const unsubscribe=trabajadoresService.getTrabajadorById(currentUser.uid,data=>{console.log('üë∑ Datos del trabajador:',data);trabajadorData=data;setTrabajadorData(data);if(data!==null&&data!==void 0&&data.viajeActivo){setViajeActivo(data.viajeActivo);}resolve();});// Timeout para evitar espera infinita\nsetTimeout(()=>resolve(),3000);});// Verificar veh√≠culos\nawait new Promise(resolve=>{const unsubscribe=vehiculosService.subscribeToVehiculos(vehiculosData=>{console.log('üöõ Total de veh√≠culos:',vehiculosData.length);// Buscar veh√≠culo asignado\n// Buscar veh√≠culo asignado - SOLO buscar en trabajadorAsignado\nlet vehiculoEncontrado=null;// IMPORTANTE: Solo buscar en el campo correcto para evitar falsos positivos\nvehiculoEncontrado=vehiculosData.find(v=>{// Solo aceptar si est√° espec√≠ficamente asignado como trabajadorAsignado\nconst asignado=v.trabajadorAsignado===currentUser.uid;if(asignado){console.log('‚úÖ Veh√≠culo encontrado correctamente asignado:',v.nombre);}// Bot√≥n temporal para limpiar campos legacy\n/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{const vehiculoRef=databaseRef(database,`vehiculos/${vehiculoAsignado.id}`);await update(vehiculoRef,{operadorAsignado:null,// Limpiar campo antiguo\nasignadoA:null,// Limpiar por si acaso\nultimaActualizacion:new Date().toISOString()});alert('‚úÖ Campos antiguos limpiados');window.location.reload();}catch(error){console.error('Error:',error);}},style:{padding:'8px 16px',background:'#dc2626',color:'white',border:'none',borderRadius:'6px',fontSize:'12px',cursor:'pointer'},children:\"Limpiar campos antiguos (ejecutar una vez)\"});// DEBUG: Mostrar si hay asignaciones incorrectas\nif(v.asignadoA===currentUser.uid||v.operadorAsignado===currentUser.uid){console.log('‚ö†Ô∏è ADVERTENCIA: Veh√≠culo mal asignado en campos incorrectos:',v.nombre);console.log('- asignadoA:',v.asignadoA);console.log('- operadorAsignado:',v.operadorAsignado);console.log('- trabajadorAsignado:',v.trabajadorAsignado);// NO retornar true aqu√≠ - ignorar estas asignaciones incorrectas\n}//dame el codigo separado con\nreturn asignado;});// NO buscar en otros campos para evitar falsos positivos\nconsole.log('Resultado de b√∫squeda:',vehiculoEncontrado?'Veh√≠culo encontrado':'NO hay veh√≠culo asignado');// NO BUSCAR EN NING√öN OTRO CAMPO - Comentar o eliminar estas l√≠neas:\n/*\r\n            if (!vehiculoEncontrado && trabajadorData?.vehiculoAsignado) {\r\n              // NO buscar aqu√≠\r\n            }\r\n            \r\n            if (!vehiculoEncontrado && currentUser.vehicleId) {\r\n              // NO buscar aqu√≠ tampoco\r\n            }\r\n            */console.log('Resultado final:',vehiculoEncontrado?`Veh√≠culo asignado: ${vehiculoEncontrado.nombre}`:'NO hay veh√≠culo asignado');if(vehiculoEncontrado){console.log('‚úÖ VEH√çCULO ASIGNADO:',vehiculoEncontrado);setVehiculoAsignado(vehiculoEncontrado);setFormViaje(prev=>({...prev,kilometrajeSalida:''// Dejar vac√≠o en lugar de prellenar\n}));}else{console.log('‚ùå NO HAY VEH√çCULO ASIGNADO');setVehiculoAsignado(null);}// Solo cambiar loading a false despu√©s de verificar todo\nif(mounted){setLoadingVehiculo(false);}resolve();});// Timeout para evitar espera infinita\nsetTimeout(()=>{if(mounted){setLoadingVehiculo(false);}resolve();},3000);});}catch(error){console.error('‚ùå Error al cargar datos:',error);if(mounted){setMessage({type:'error',text:'‚ùå Error al cargar informaci√≥n'});setLoadingVehiculo(false);setVehiculoAsignado(null);}}};loadData();// Cleanup function\nreturn()=>{mounted=false;};},[currentUser.uid]);// Iniciar viaje\nconst handleIniciarViaje=async()=>{// Validaciones\nif(!formViaje.destino){setMessage({type:'error',text:'‚ö†Ô∏è Debes indicar el destino'});return;}if(!formViaje.kilometrajeSalida){setMessage({type:'error',text:'‚ö†Ô∏è Debes indicar el kilometraje actual del veh√≠culo'});return;}// NUEVA VALIDACI√ìN: Verificar que el kilometraje no sea menor al registrado\nconst kilometrajeActual=vehiculoAsignado.kilometraje||0;const kilometrajeSalida=parseInt(formViaje.kilometrajeSalida);if(kilometrajeSalida<kilometrajeActual){setMessage({type:'error',text:`‚ö†Ô∏è El kilometraje no puede ser menor al registrado (${kilometrajeActual.toLocaleString()} km)`});return;}// Si el kilometraje es mayor al actual, preguntar confirmaci√≥n\nif(kilometrajeSalida>kilometrajeActual+1000){const confirmar=window.confirm(`El kilometraje ingresado (${kilometrajeSalida.toLocaleString()} km) es mucho mayor al √∫ltimo registro (${kilometrajeActual.toLocaleString()} km).\\n\\n¬øEs correcto?`);if(!confirmar)return;}setLoading(true);try{const viajeData={vehiculoId:vehiculoAsignado.id,vehiculoNombre:vehiculoAsignado.nombre,trabajadorId:currentUser.uid,trabajadorNombre:currentUser.name,fechaSalida:formViaje.fechaSalida,horaSalida:formViaje.horaSalida,kilometrajeSalida:parseInt(formViaje.kilometrajeSalida),destino:formViaje.destino,motivoViaje:formViaje.motivoViaje,observaciones:formViaje.observaciones,estado:'en_curso',iniciadoEn:new Date().toISOString()};// Actualizar estado del veh√≠culo a \"en_uso\"\nawait vehiculosService.updateVehiculoEstado(vehiculoAsignado.id,'en_uso',{asignadoA:currentUser.uid,asignadoNombre:currentUser.name,destino:formViaje.destino,kilometrajeUltimoViaje:parseInt(formViaje.kilometrajeSalida),viajeActivo:viajeData});// Actualizar datos del trabajador con el viaje activo\nawait trabajadoresService.updateTrabajadorData(currentUser.uid,{viajeActivo:viajeData,estadoActual:'en_viaje',ultimoDestino:formViaje.destino});setViajeActivo(viajeData);setMessage({type:'success',text:'‚úÖ Viaje iniciado exitosamente'});}catch(error){console.error('Error al iniciar viaje:',error);setMessage({type:'error',text:'‚ùå Error al iniciar el viaje'});}finally{setLoading(false);}};// Finalizar viaje\nconst handleFinalizarViaje=async()=>{setShowFinalizarModal(true);setKilometrajeLlegada('');setErrorKmLlegada('');};const confirmarFinalizarViaje=async()=>{// Validaciones\nif(!kilometrajeLlegada){setErrorKmLlegada('Debes ingresar el kilometraje final');return;}const kmLlegada=parseInt(kilometrajeLlegada);const kmSalida=viajeActivo.kilometrajeSalida;if(kmLlegada<kmSalida){setErrorKmLlegada(`El kilometraje final no puede ser menor al inicial (${kmSalida.toLocaleString()} km)`);return;}if(kmLlegada===kmSalida){setErrorKmLlegada('El veh√≠culo debe haber recorrido alguna distancia');return;}if(kmLlegada>kmSalida+5000){const confirmar=window.confirm(`¬øSeguro que recorriste ${(kmLlegada-kmSalida).toLocaleString()} km en este viaje?`);if(!confirmar)return;}setLoading(true);setShowFinalizarModal(false);try{const horaLlegada=new Date().toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit'});const kmRecorridos=kmLlegada-kmSalida;// Actualizar veh√≠culo\nawait vehiculosService.updateVehiculoEstado(vehiculoAsignado.id,'disponible',{asignadoA:currentUser.uid,kilometraje:kmLlegada,ultimoViaje:{...viajeActivo,fechaLlegada:new Date().toISOString().split('T')[0],horaLlegada:horaLlegada,kilometrajeLlegada:kmLlegada,kilometrosRecorridos:kmRecorridos,estado:'finalizado'}});// Limpiar viaje activo del trabajador\nawait trabajadoresService.updateTrabajadorData(currentUser.uid,{viajeActivo:null,estadoActual:'disponible',ultimoViaje:{...viajeActivo,fechaLlegada:new Date().toISOString().split('T')[0],horaLlegada:horaLlegada,kilometrajeLlegada:kmLlegada,kilometrosRecorridos:kmRecorridos}});setViajeActivo(null);setMessage({type:'success',text:`‚úÖ Viaje finalizado. Recorriste ${kmRecorridos.toLocaleString()} km`});}catch(error){console.error('Error al finalizar viaje:',error);setMessage({type:'error',text:'‚ùå Error al finalizar el viaje'});}finally{setLoading(false);}};// Si est√° cargando, mostrar indicador de carga\nif(loadingVehiculo){return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0, 0, 0, 0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:9999,padding:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:'30px',maxWidth:'400px',width:'100%',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'20px'},children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"h3\",{style:{color:'#1f2937',marginBottom:'10px'},children:\"Cargando informaci\\xF3n...\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280'},children:\"Verificando veh\\xEDculo asignado\"})]})});}// Si no hay veh√≠culo asignado (despu√©s de cargar)\nif(!vehiculoAsignado){return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0, 0, 0, 0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:9999,padding:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:'30px',maxWidth:'400px',width:'100%',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'20px'},children:\"\\uD83D\\uDEAB\"}),/*#__PURE__*/_jsx(\"h3\",{style:{color:'#1f2937',marginBottom:'10px'},children:\"No tienes veh\\xEDculo asignado\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280',marginBottom:'20px'},children:\"Contacta con tu supervisor para que te asigne un veh\\xEDculo\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{padding:'10px 20px',background:'#6b7280',color:'white',border:'none',borderRadius:'8px',fontSize:'14px',cursor:'pointer'},children:\"Cerrar\"})]})});}// Solo mostrar el formulario si hay veh√≠culo asignado\nif(!vehiculoAsignado){return null;// Seguridad adicional\n}return/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0, 0, 0, 0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:9999,padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',width:'100%',maxWidth:'600px',maxHeight:'90vh',overflow:'auto',boxShadow:'0 10px 40px rgba(0,0,0,0.2)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',borderBottom:'1px solid #e5e7eb',background:'linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)',borderRadius:'12px 12px 0 0',color:'white'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:'24px',fontWeight:'600'},children:\"\\uD83D\\uDE9B Control de Veh\\xEDculo\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'5px 0 0 0',fontSize:'14px',opacity:0.9},children:viajeActivo?'Viaje en curso':'Registrar salida de veh√≠culo'})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{background:'rgba(255, 255, 255, 0.2)',border:'none',color:'white',padding:'8px',borderRadius:'6px',cursor:'pointer',fontSize:'18px'},children:\"\\u2716\"})]})}),message&&/*#__PURE__*/_jsx(\"div\",{style:{margin:'20px 20px 0',padding:'12px',borderRadius:'8px',background:message.type==='error'?'#fee2e2':'#d1fae5',color:message.type==='error'?'#dc2626':'#065f46',fontSize:'14px',fontWeight:'500'},children:message.text}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',background:'#f0f9ff',borderBottom:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 15px 0',color:'#0c4a6e',fontSize:'16px',fontWeight:'600'},children:\"Veh\\xEDculo Asignado\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(2, 1fr)',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px',color:'#64748b'},children:\"Veh\\xEDculo:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0',fontWeight:'600',color:'#0c4a6e'},children:vehiculoAsignado.nombre})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px',color:'#64748b'},children:\"Patente:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0',fontWeight:'600',color:'#0c4a6e'},children:vehiculoAsignado.patente||'Sin patente'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px',color:'#64748b'},children:\"Marca/Modelo:\"}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'4px 0',fontWeight:'600',color:'#0c4a6e'},children:[vehiculoAsignado.marca,\" \",vehiculoAsignado.modelo]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px',color:'#64748b'},children:\"Estado:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0',fontWeight:'600'},children:/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',borderRadius:'4px',fontSize:'12px',background:viajeActivo?'#fef3c7':'#dcfce7',color:viajeActivo?'#92400e':'#15803d'},children:viajeActivo?'üöó En viaje':'‚úÖ Disponible'})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px'},children:!viajeActivo?/*#__PURE__*/// Formulario para iniciar viaje\n_jsx(\"form\",{onSubmit:e=>{e.preventDefault();handleIniciarViaje();},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"\\uD83D\\uDCC5 Fecha de Salida\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:formViaje.fechaSalida,onChange:e=>setFormViaje({...formViaje,fechaSalida:e.target.value}),style:{width:'100%',padding:'10px',border:'2px solid #e5e7eb',borderRadius:'8px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"\\u23F0 Hora de Salida\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:formViaje.horaSalida,onChange:e=>setFormViaje({...formViaje,horaSalida:e.target.value}),style:{width:'100%',padding:'10px',border:'2px solid #e5e7eb',borderRadius:'8px',fontSize:'14px'}})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"\\uD83D\\uDE97 Kilometraje Actual del Veh\\xEDculo\"}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px',border:'2px solid #e5e7eb',borderRadius:'8px',backgroundColor:'#f9fafb',fontSize:'16px',fontWeight:'600',color:'#1f2937'},children:[(vehiculoAsignado.kilometraje||0).toLocaleString(),\" km\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"\\uD83D\\uDCCF Kilometraje al Iniciar Viaje\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:formViaje.kilometrajeSalida,onChange:e=>{const nuevoKm=e.target.value;setFormViaje({...formViaje,kilometrajeSalida:nuevoKm});},placeholder:`M√≠nimo: ${(vehiculoAsignado.kilometraje||0).toLocaleString()} km`,required:true,min:vehiculoAsignado.kilometraje||0,style:{width:'100%',padding:'10px',border:'2px solid #e5e7eb',borderRadius:'8px',fontSize:'14px'}}),formViaje.kilometrajeSalida&&parseInt(formViaje.kilometrajeSalida)<(vehiculoAsignado.kilometraje||0)&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'5px',padding:'8px',backgroundColor:'#fee2e2',borderRadius:'6px',color:'#dc2626',fontSize:'13px',fontWeight:'500'},children:[\"\\u26A0\\uFE0F El kilometraje no puede ser menor a \",(vehiculoAsignado.kilometraje||0).toLocaleString(),\" km\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"\\uD83D\\uDCCD Destino\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formViaje.destino,onChange:e=>setFormViaje({...formViaje,destino:e.target.value}),placeholder:\"Ingresa el lugar de destino\",required:true,style:{width:'100%',padding:'10px',border:'2px solid #e5e7eb',borderRadius:'8px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"\\uD83D\\uDCCB Motivo del Viaje\"}),/*#__PURE__*/_jsxs(\"select\",{value:formViaje.motivoViaje,onChange:e=>setFormViaje({...formViaje,motivoViaje:e.target.value}),style:{width:'100%',padding:'10px',border:'2px solid #e5e7eb',borderRadius:'8px',fontSize:'14px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"trabajo\",children:\"Trabajo en terreno\"}),/*#__PURE__*/_jsx(\"option\",{value:\"emergencia\",children:\"Emergencia\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mantenimiento\",children:\"Mantenimiento\"}),/*#__PURE__*/_jsx(\"option\",{value:\"traslado\",children:\"Traslado de personal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"carga\",children:\"Transporte de carga\"}),/*#__PURE__*/_jsx(\"option\",{value:\"otro\",children:\"Otro\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"\\uD83D\\uDCDD Observaciones (Opcional)\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formViaje.observaciones,onChange:e=>setFormViaje({...formViaje,observaciones:e.target.value}),placeholder:\"Detalles adicionales del viaje...\",rows:3,style:{width:'100%',padding:'10px',border:'2px solid #e5e7eb',borderRadius:'8px',fontSize:'14px',resize:'none'}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||!formViaje.kilometrajeSalida||!formViaje.destino||parseInt(formViaje.kilometrajeSalida)<(vehiculoAsignado.kilometraje||0),style:{padding:'14px',background:loading||parseInt(formViaje.kilometrajeSalida)<(vehiculoAsignado.kilometraje||0)?'#9ca3af':'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',fontWeight:'600',cursor:loading||parseInt(formViaje.kilometrajeSalida)<(vehiculoAsignado.kilometraje||0)?'not-allowed':'pointer',display:'flex',alignItems:'center',justifyContent:'center',gap:'10px',transition:'transform 0.2s',opacity:loading||parseInt(formViaje.kilometrajeSalida)<(vehiculoAsignado.kilometraje||0)?0.5:1},onMouseEnter:e=>{if(!loading&&!(parseInt(formViaje.kilometrajeSalida)<(vehiculoAsignado.kilometraje||0))){e.currentTarget.style.transform='scale(1.02)';}},onMouseLeave:e=>e.currentTarget.style.transform='scale(1)',children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{style:{width:'16px',height:'16px',border:'2px solid white',borderTop:'2px solid transparent',borderRadius:'50%',animation:'spin 1s linear infinite'}}),\"Iniciando...\"]}):/*#__PURE__*/_jsx(_Fragment,{children:\"\\uD83D\\uDE80 INICIAR VIAJE\"})})]})}):/*#__PURE__*/// Informaci√≥n del viaje activo\n_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',background:'#fef3c7',borderRadius:'8px',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 15px 0',color:'#92400e',fontSize:'18px',fontWeight:'600'},children:\"\\uD83D\\uDE97 Viaje en Curso\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'10px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px',color:'#92400e'},children:\"Destino:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0',fontWeight:'600',fontSize:'15px'},children:viajeActivo.destino})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px',color:'#92400e'},children:\"Hora de salida:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0',fontWeight:'600'},children:viajeActivo.horaSalida})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px',color:'#92400e'},children:\"Km de salida:\"}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'4px 0',fontWeight:'600'},children:[viajeActivo.kilometrajeSalida,\" km\"]})]})]}),viajeActivo.observaciones&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px',color:'#92400e'},children:\"Observaciones:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0',fontSize:'14px'},children:viajeActivo.observaciones})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFinalizarViaje,disabled:loading,style:{width:'100%',padding:'14px',background:loading?'#9ca3af':'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',fontWeight:'600',cursor:loading?'not-allowed':'pointer',display:'flex',alignItems:'center',justifyContent:'center',gap:'10px'},children:loading?'Finalizando...':'üèÅ FINALIZAR VIAJE'})]})})]}),/*#__PURE__*/_jsx(\"style\",{children:`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `}),showFinalizarModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0, 0, 0, 0.7)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:10000,padding:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',width:'100%',maxWidth:'450px',boxShadow:'0 20px 60px rgba(0,0,0,0.3)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',background:'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',borderRadius:'12px 12px 0 0',color:'white'},children:/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,fontSize:'20px',fontWeight:'600',display:'flex',alignItems:'center',gap:'10px'},children:\"\\uD83C\\uDFC1 Finalizar Viaje\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'#f9fafb',padding:'15px',borderRadius:'8px',marginBottom:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px',color:'#6b7280'},children:\"Destino:\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'600',fontSize:'16px',color:'#1f2937'},children:viajeActivo.destino})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px',color:'#6b7280'},children:\"Hora de salida:\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'600',fontSize:'14px'},children:viajeActivo.horaSalida})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px',color:'#6b7280'},children:\"Km de salida:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'600',fontSize:'14px'},children:[viajeActivo.kilometrajeSalida.toLocaleString(),\" km\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'8px',fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"\\uD83D\\uDCCF Kilometraje Final del Veh\\xEDculo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:kilometrajeLlegada,onChange:e=>{setKilometrajeLlegada(e.target.value);setErrorKmLlegada('');},placeholder:`M√≠nimo: ${(viajeActivo.kilometrajeSalida+1).toLocaleString()} km`,min:viajeActivo.kilometrajeSalida+1,style:{width:'100%',padding:'12px',border:errorKmLlegada?'2px solid #ef4444':'2px solid #e5e7eb',borderRadius:'8px',fontSize:'16px',fontWeight:'500',backgroundColor:errorKmLlegada?'#fee2e2':'white'},autoFocus:true}),errorKmLlegada&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'8px',padding:'8px',backgroundColor:'#fee2e2',borderRadius:'6px',color:'#dc2626',fontSize:'13px',fontWeight:'500'},children:[\"\\u26A0\\uFE0F \",errorKmLlegada]}),kilometrajeLlegada&&parseInt(kilometrajeLlegada)>viajeActivo.kilometrajeSalida&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'8px',padding:'10px',backgroundColor:'#dcfce7',borderRadius:'6px',color:'#15803d',fontSize:'14px',fontWeight:'500',textAlign:'center'},children:[\"\\uD83D\\uDCCD Distancia recorrida: \",(parseInt(kilometrajeLlegada)-viajeActivo.kilometrajeSalida).toLocaleString(),\" km\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'10px',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowFinalizarModal(false);setKilometrajeLlegada('');setErrorKmLlegada('');},style:{padding:'12px',background:'#6b7280',color:'white',border:'none',borderRadius:'8px',fontSize:'14px',fontWeight:'600',cursor:'pointer'},children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:confirmarFinalizarViaje,disabled:!kilometrajeLlegada||parseInt(kilometrajeLlegada)<=viajeActivo.kilometrajeSalida,style:{padding:'12px',background:!kilometrajeLlegada||parseInt(kilometrajeLlegada)<=viajeActivo.kilometrajeSalida?'#9ca3af':'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',color:'white',border:'none',borderRadius:'8px',fontSize:'14px',fontWeight:'600',cursor:!kilometrajeLlegada||parseInt(kilometrajeLlegada)<=viajeActivo.kilometrajeSalida?'not-allowed':'pointer',opacity:!kilometrajeLlegada||parseInt(kilometrajeLlegada)<=viajeActivo.kilometrajeSalida?0.5:1},children:\"\\uD83C\\uDFC1 Finalizar Viaje\"})]})]})]})})]});};export default TrabajadorVehiclePanel;","map":{"version":3,"names":["React","useState","useEffect","vehiculosService","trabajadoresService","database","ref","databaseRef","update","get","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TrabajadorVehiclePanel","_ref","currentUser","onClose","vehiculoAsignado","setVehiculoAsignado","loading","setLoading","loadingVehiculo","setLoadingVehiculo","message","setMessage","trabajadorData","setTrabajadorData","formViaje","setFormViaje","fechaSalida","Date","toISOString","split","horaSalida","toLocaleTimeString","hour","minute","kilometrajeSalida","destino","motivoViaje","observaciones","showFinalizarModal","setShowFinalizarModal","kilometrajeLlegada","setKilometrajeLlegada","errorKmLlegada","setErrorKmLlegada","viajeActivo","setViajeActivo","mounted","loadData","console","log","uid","Promise","resolve","setTimeout","unsubscribe","getTrabajadorById","data","subscribeToVehiculos","vehiculosData","length","vehiculoEncontrado","find","v","asignado","trabajadorAsignado","nombre","onClick","vehiculoRef","id","operadorAsignado","asignadoA","ultimaActualizacion","alert","window","location","reload","error","style","padding","background","color","border","borderRadius","fontSize","cursor","children","prev","type","text","handleIniciarViaje","kilometrajeActual","kilometraje","parseInt","toLocaleString","confirmar","confirm","viajeData","vehiculoId","vehiculoNombre","trabajadorId","trabajadorNombre","name","estado","iniciadoEn","updateVehiculoEstado","asignadoNombre","kilometrajeUltimoViaje","updateTrabajadorData","estadoActual","ultimoDestino","handleFinalizarViaje","confirmarFinalizarViaje","kmLlegada","kmSalida","horaLlegada","kmRecorridos","ultimoViaje","fechaLlegada","kilometrosRecorridos","position","top","left","right","bottom","display","justifyContent","alignItems","zIndex","maxWidth","width","textAlign","marginBottom","maxHeight","overflow","boxShadow","borderBottom","margin","fontWeight","opacity","gridTemplateColumns","gap","patente","marca","modelo","onSubmit","e","preventDefault","value","onChange","target","backgroundColor","nuevoKm","placeholder","required","min","marginTop","rows","resize","disabled","transition","onMouseEnter","currentTarget","transform","onMouseLeave","height","borderTop","animation","autoFocus"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/TrabajadorVehiclePanel.js"],"sourcesContent":["// src/components/TrabajadorVehiclePanel.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { vehiculosService, trabajadoresService } from '../services/firebaseservices';\r\nimport { database } from '../config/firebase';\r\nimport { ref as databaseRef, update, get } from 'firebase/database';\r\n\r\nconst TrabajadorVehiclePanel = ({ currentUser, onClose }) => {\r\n  // ... resto del c√≥digo\r\n  const [vehiculoAsignado, setVehiculoAsignado] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loadingVehiculo, setLoadingVehiculo] = useState(true); // NUEVO: Estado de carga inicial\r\n  const [message, setMessage] = useState(null);\r\n  const [trabajadorData, setTrabajadorData] = useState(null);\r\n\r\n  // Estados del formulario de viaje\r\n  const [formViaje, setFormViaje] = useState({\r\n    fechaSalida: new Date().toISOString().split('T')[0], // Fecha de hoy\r\n    horaSalida: new Date().toLocaleTimeString('es-CL', { hour: '2-digit', minute: '2-digit' }),\r\n    kilometrajeSalida: '',\r\n    destino: '',\r\n    motivoViaje: 'trabajo', // trabajo, emergencia, mantenimiento\r\n    observaciones: ''\r\n  });\r\n  const [showFinalizarModal, setShowFinalizarModal] = useState(false);\r\n  const [kilometrajeLlegada, setKilometrajeLlegada] = useState('');\r\n  const [errorKmLlegada, setErrorKmLlegada] = useState('');\r\n\r\n  // Estado para el viaje activo\r\n  const [viajeActivo, setViajeActivo] = useState(null);\r\n\r\n  // Cargar datos del trabajador y su veh√≠culo\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    const loadData = async () => {\r\n      console.log('üîÑ Iniciando carga de veh√≠culo para:', currentUser.uid);\r\n      setLoadingVehiculo(true);\r\n\r\n      try {\r\n        // Esperar un momento para que Firebase se estabilice\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n\r\n        // Verificar si el componente sigue montado\r\n        if (!mounted) return;\r\n\r\n        // Obtener datos del trabajador\r\n        let trabajadorData = null;\r\n        await new Promise((resolve) => {\r\n          const unsubscribe = trabajadoresService.getTrabajadorById(\r\n            currentUser.uid,\r\n            (data) => {\r\n              console.log('üë∑ Datos del trabajador:', data);\r\n              trabajadorData = data;\r\n              setTrabajadorData(data);\r\n              if (data?.viajeActivo) {\r\n                setViajeActivo(data.viajeActivo);\r\n              }\r\n              resolve();\r\n            }\r\n          );\r\n\r\n          // Timeout para evitar espera infinita\r\n          setTimeout(() => resolve(), 3000);\r\n        });\r\n\r\n        // Verificar veh√≠culos\r\n        await new Promise((resolve) => {\r\n          const unsubscribe = vehiculosService.subscribeToVehiculos((vehiculosData) => {\r\n            console.log('üöõ Total de veh√≠culos:', vehiculosData.length);\r\n\r\n            // Buscar veh√≠culo asignado\r\n            // Buscar veh√≠culo asignado - SOLO buscar en trabajadorAsignado\r\n            let vehiculoEncontrado = null;\r\n\r\n            // IMPORTANTE: Solo buscar en el campo correcto para evitar falsos positivos\r\n            vehiculoEncontrado = vehiculosData.find(v => {\r\n              // Solo aceptar si est√° espec√≠ficamente asignado como trabajadorAsignado\r\n              const asignado = v.trabajadorAsignado === currentUser.uid;\r\n\r\n              if (asignado) {\r\n                console.log('‚úÖ Veh√≠culo encontrado correctamente asignado:', v.nombre);\r\n              }\r\n              // Bot√≥n temporal para limpiar campos legacy\r\n              <button\r\n                onClick={async () => {\r\n                  try {\r\n                    const vehiculoRef = databaseRef(database, `vehiculos/${vehiculoAsignado.id}`);\r\n                    await update(vehiculoRef, {\r\n                      operadorAsignado: null,  // Limpiar campo antiguo\r\n                      asignadoA: null,  // Limpiar por si acaso\r\n                      ultimaActualizacion: new Date().toISOString()\r\n                    });\r\n\r\n                    alert('‚úÖ Campos antiguos limpiados');\r\n                    window.location.reload();\r\n                  } catch (error) {\r\n                    console.error('Error:', error);\r\n                  }\r\n                }}\r\n                style={{\r\n                  padding: '8px 16px',\r\n                  background: '#dc2626',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  fontSize: '12px',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                Limpiar campos antiguos (ejecutar una vez)\r\n              </button>\r\n\r\n              // DEBUG: Mostrar si hay asignaciones incorrectas\r\n              if (v.asignadoA === currentUser.uid || v.operadorAsignado === currentUser.uid) {\r\n                console.log('‚ö†Ô∏è ADVERTENCIA: Veh√≠culo mal asignado en campos incorrectos:', v.nombre);\r\n                console.log('- asignadoA:', v.asignadoA);\r\n                console.log('- operadorAsignado:', v.operadorAsignado);\r\n                console.log('- trabajadorAsignado:', v.trabajadorAsignado);\r\n                // NO retornar true aqu√≠ - ignorar estas asignaciones incorrectas\r\n              }\r\n              //dame el codigo separado con\r\n              return asignado;\r\n            });\r\n\r\n            // NO buscar en otros campos para evitar falsos positivos\r\n            console.log('Resultado de b√∫squeda:', vehiculoEncontrado ? 'Veh√≠culo encontrado' : 'NO hay veh√≠culo asignado');\r\n            // NO BUSCAR EN NING√öN OTRO CAMPO - Comentar o eliminar estas l√≠neas:\r\n            /*\r\n            if (!vehiculoEncontrado && trabajadorData?.vehiculoAsignado) {\r\n              // NO buscar aqu√≠\r\n            }\r\n            \r\n            if (!vehiculoEncontrado && currentUser.vehicleId) {\r\n              // NO buscar aqu√≠ tampoco\r\n            }\r\n            */\r\n\r\n            console.log('Resultado final:', vehiculoEncontrado ? `Veh√≠culo asignado: ${vehiculoEncontrado.nombre}` : 'NO hay veh√≠culo asignado');\r\n            if (vehiculoEncontrado) {\r\n              console.log('‚úÖ VEH√çCULO ASIGNADO:', vehiculoEncontrado);\r\n              setVehiculoAsignado(vehiculoEncontrado);\r\n              setFormViaje(prev => ({\r\n                ...prev,\r\n                kilometrajeSalida: '' // Dejar vac√≠o en lugar de prellenar\r\n              }));\r\n            } else {\r\n              console.log('‚ùå NO HAY VEH√çCULO ASIGNADO');\r\n              setVehiculoAsignado(null);\r\n            }\r\n\r\n            // Solo cambiar loading a false despu√©s de verificar todo\r\n            if (mounted) {\r\n              setLoadingVehiculo(false);\r\n            }\r\n\r\n            resolve();\r\n          });\r\n\r\n          // Timeout para evitar espera infinita\r\n          setTimeout(() => {\r\n            if (mounted) {\r\n              setLoadingVehiculo(false);\r\n            }\r\n            resolve();\r\n          }, 3000);\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('‚ùå Error al cargar datos:', error);\r\n        if (mounted) {\r\n          setMessage({\r\n            type: 'error',\r\n            text: '‚ùå Error al cargar informaci√≥n'\r\n          });\r\n          setLoadingVehiculo(false);\r\n          setVehiculoAsignado(null);\r\n        }\r\n      }\r\n    };\r\n\r\n    loadData();\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [currentUser.uid]);\r\n\r\n  // Iniciar viaje\r\n  const handleIniciarViaje = async () => {\r\n    // Validaciones\r\n    if (!formViaje.destino) {\r\n      setMessage({ type: 'error', text: '‚ö†Ô∏è Debes indicar el destino' });\r\n      return;\r\n    }\r\n\r\n    if (!formViaje.kilometrajeSalida) {\r\n      setMessage({ type: 'error', text: '‚ö†Ô∏è Debes indicar el kilometraje actual del veh√≠culo' });\r\n      return;\r\n    }\r\n    // NUEVA VALIDACI√ìN: Verificar que el kilometraje no sea menor al registrado\r\n    const kilometrajeActual = vehiculoAsignado.kilometraje || 0;\r\n    const kilometrajeSalida = parseInt(formViaje.kilometrajeSalida);\r\n    if (kilometrajeSalida < kilometrajeActual) {\r\n      setMessage({\r\n        type: 'error',\r\n        text: `‚ö†Ô∏è El kilometraje no puede ser menor al registrado (${kilometrajeActual.toLocaleString()} km)`\r\n      });\r\n      return;\r\n    }\r\n    // Si el kilometraje es mayor al actual, preguntar confirmaci√≥n\r\n    if (kilometrajeSalida > kilometrajeActual + 1000) {\r\n      const confirmar = window.confirm(\r\n        `El kilometraje ingresado (${kilometrajeSalida.toLocaleString()} km) es mucho mayor al √∫ltimo registro (${kilometrajeActual.toLocaleString()} km).\\n\\n¬øEs correcto?`\r\n      );\r\n      if (!confirmar) return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const viajeData = {\r\n        vehiculoId: vehiculoAsignado.id,\r\n        vehiculoNombre: vehiculoAsignado.nombre,\r\n        trabajadorId: currentUser.uid,\r\n        trabajadorNombre: currentUser.name,\r\n        fechaSalida: formViaje.fechaSalida,\r\n        horaSalida: formViaje.horaSalida,\r\n        kilometrajeSalida: parseInt(formViaje.kilometrajeSalida),\r\n        destino: formViaje.destino,\r\n        motivoViaje: formViaje.motivoViaje,\r\n        observaciones: formViaje.observaciones,\r\n        estado: 'en_curso',\r\n        iniciadoEn: new Date().toISOString()\r\n      };\r\n\r\n      // Actualizar estado del veh√≠culo a \"en_uso\"\r\n      await vehiculosService.updateVehiculoEstado(vehiculoAsignado.id, 'en_uso', {\r\n        asignadoA: currentUser.uid,\r\n        asignadoNombre: currentUser.name,\r\n        destino: formViaje.destino,\r\n        kilometrajeUltimoViaje: parseInt(formViaje.kilometrajeSalida),\r\n        viajeActivo: viajeData\r\n      });\r\n\r\n      // Actualizar datos del trabajador con el viaje activo\r\n      await trabajadoresService.updateTrabajadorData(currentUser.uid, {\r\n        viajeActivo: viajeData,\r\n        estadoActual: 'en_viaje',\r\n        ultimoDestino: formViaje.destino\r\n      });\r\n\r\n      setViajeActivo(viajeData);\r\n      setMessage({\r\n        type: 'success',\r\n        text: '‚úÖ Viaje iniciado exitosamente'\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error al iniciar viaje:', error);\r\n      setMessage({\r\n        type: 'error',\r\n        text: '‚ùå Error al iniciar el viaje'\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Finalizar viaje\r\n  const handleFinalizarViaje = async () => {\r\n    setShowFinalizarModal(true);\r\n    setKilometrajeLlegada('');\r\n    setErrorKmLlegada('');\r\n  };\r\n  const confirmarFinalizarViaje = async () => {\r\n    // Validaciones\r\n    if (!kilometrajeLlegada) {\r\n      setErrorKmLlegada('Debes ingresar el kilometraje final');\r\n      return;\r\n    }\r\n\r\n    const kmLlegada = parseInt(kilometrajeLlegada);\r\n    const kmSalida = viajeActivo.kilometrajeSalida;\r\n\r\n    if (kmLlegada < kmSalida) {\r\n      setErrorKmLlegada(`El kilometraje final no puede ser menor al inicial (${kmSalida.toLocaleString()} km)`);\r\n      return;\r\n    }\r\n\r\n    if (kmLlegada === kmSalida) {\r\n      setErrorKmLlegada('El veh√≠culo debe haber recorrido alguna distancia');\r\n      return;\r\n    }\r\n\r\n    if (kmLlegada > kmSalida + 5000) {\r\n      const confirmar = window.confirm(\r\n        `¬øSeguro que recorriste ${(kmLlegada - kmSalida).toLocaleString()} km en este viaje?`\r\n      );\r\n      if (!confirmar) return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setShowFinalizarModal(false);\r\n\r\n    try {\r\n      const horaLlegada = new Date().toLocaleTimeString('es-CL', { hour: '2-digit', minute: '2-digit' });\r\n      const kmRecorridos = kmLlegada - kmSalida;\r\n\r\n      // Actualizar veh√≠culo\r\n      await vehiculosService.updateVehiculoEstado(vehiculoAsignado.id, 'disponible', {\r\n        asignadoA: currentUser.uid,\r\n        kilometraje: kmLlegada,\r\n        ultimoViaje: {\r\n          ...viajeActivo,\r\n          fechaLlegada: new Date().toISOString().split('T')[0],\r\n          horaLlegada: horaLlegada,\r\n          kilometrajeLlegada: kmLlegada,\r\n          kilometrosRecorridos: kmRecorridos,\r\n          estado: 'finalizado'\r\n        }\r\n      });\r\n\r\n      // Limpiar viaje activo del trabajador\r\n      await trabajadoresService.updateTrabajadorData(currentUser.uid, {\r\n        viajeActivo: null,\r\n        estadoActual: 'disponible',\r\n        ultimoViaje: {\r\n          ...viajeActivo,\r\n          fechaLlegada: new Date().toISOString().split('T')[0],\r\n          horaLlegada: horaLlegada,\r\n          kilometrajeLlegada: kmLlegada,\r\n          kilometrosRecorridos: kmRecorridos\r\n        }\r\n      });\r\n\r\n      setViajeActivo(null);\r\n      setMessage({\r\n        type: 'success',\r\n        text: `‚úÖ Viaje finalizado. Recorriste ${kmRecorridos.toLocaleString()} km`\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error al finalizar viaje:', error);\r\n      setMessage({\r\n        type: 'error',\r\n        text: '‚ùå Error al finalizar el viaje'\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Si est√° cargando, mostrar indicador de carga\r\n  if (loadingVehiculo) {\r\n    return (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0, 0, 0, 0.5)',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        zIndex: 9999,\r\n        padding: '20px'\r\n      }}>\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '12px',\r\n          padding: '30px',\r\n          maxWidth: '400px',\r\n          width: '100%',\r\n          textAlign: 'center'\r\n        }}>\r\n          <div style={{ fontSize: '48px', marginBottom: '20px' }}>‚è≥</div>\r\n          <h3 style={{ color: '#1f2937', marginBottom: '10px' }}>\r\n            Cargando informaci√≥n...\r\n          </h3>\r\n          <p style={{ color: '#6b7280' }}>\r\n            Verificando veh√≠culo asignado\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Si no hay veh√≠culo asignado (despu√©s de cargar)\r\n  if (!vehiculoAsignado) {\r\n    return (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0, 0, 0, 0.5)',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        zIndex: 9999,\r\n        padding: '20px'\r\n      }}>\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '12px',\r\n          padding: '30px',\r\n          maxWidth: '400px',\r\n          width: '100%',\r\n          textAlign: 'center'\r\n        }}>\r\n          <div style={{ fontSize: '48px', marginBottom: '20px' }}>üö´</div>\r\n          <h3 style={{ color: '#1f2937', marginBottom: '10px' }}>\r\n            No tienes veh√≠culo asignado\r\n          </h3>\r\n          <p style={{ color: '#6b7280', marginBottom: '20px' }}>\r\n            Contacta con tu supervisor para que te asigne un veh√≠culo\r\n          </p>\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              padding: '10px 20px',\r\n              background: '#6b7280',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              fontSize: '14px',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            Cerrar\r\n          </button>\r\n\r\n          {/* Bot√≥n temporal para limpiar datos mal guardados\r\n          <button\r\n            onClick={async () => {\r\n              console.log('üßπ Limpiando asignaciones incorrectas...');\r\n              try {\r\n                // Limpiar TODOS los veh√≠culos mal asignados\r\n                const vehiculosRef = databaseRef(database, 'vehiculos');\r\n                const snapshot = await get(vehiculosRef);\r\n                const vehiculos = snapshot.val() || {};\r\n\r\n                for (const [id, vehiculo] of Object.entries(vehiculos)) {\r\n                  if (vehiculo.asignadoA === currentUser.uid ||\r\n                    vehiculo.operadorAsignado === currentUser.uid) {\r\n                    console.log(`Limpiando veh√≠culo ${id}...`);\r\n                    await update(databaseRef(database, `vehiculos/${id}`), {\r\n                      asignadoA: null,\r\n                      operadorAsignado: null\r\n                    });\r\n                  }\r\n                }\r\n\r\n                // Limpiar el trabajador\r\n                await update(databaseRef(database, `trabajadores/${currentUser.uid}`), {\r\n                  vehiculoAsignado: null,\r\n                  vehicleId: null\r\n                });\r\n\r\n                alert('‚úÖ Limpieza completada. Por favor recarga la p√°gina.');\r\n                window.location.reload();\r\n\r\n              } catch (error) {\r\n                console.error('Error:', error);\r\n                alert('Error: ' + error.message);\r\n              }\r\n            }}\r\n            style={{\r\n              padding: '10px 20px',\r\n              background: '#dc2626',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              fontSize: '14px',\r\n              cursor: 'pointer',\r\n              marginBottom: '10px'\r\n            }}\r\n          >\r\n            üßπ LIMPIAR TODAS LAS ASIGNACIONES (DEBUG)\r\n          </button> */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Solo mostrar el formulario si hay veh√≠culo asignado\r\n  if (!vehiculoAsignado) {\r\n    return null; // Seguridad adicional\r\n  }\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      background: 'rgba(0, 0, 0, 0.5)',\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      zIndex: 9999,\r\n      padding: '20px'\r\n    }}>\r\n      <div style={{\r\n        background: 'white',\r\n        borderRadius: '12px',\r\n        width: '100%',\r\n        maxWidth: '600px',\r\n        maxHeight: '90vh',\r\n        overflow: 'auto',\r\n        boxShadow: '0 10px 40px rgba(0,0,0,0.2)'\r\n      }}>\r\n        {/* Header */}\r\n        <div style={{\r\n          padding: '20px',\r\n          borderBottom: '1px solid #e5e7eb',\r\n          background: 'linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)',\r\n          borderRadius: '12px 12px 0 0',\r\n          color: 'white'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center'\r\n          }}>\r\n            <div>\r\n              <h2 style={{ margin: 0, fontSize: '24px', fontWeight: '600' }}>\r\n                üöõ Control de Veh√≠culo\r\n              </h2>\r\n              <p style={{ margin: '5px 0 0 0', fontSize: '14px', opacity: 0.9 }}>\r\n                {viajeActivo ? 'Viaje en curso' : 'Registrar salida de veh√≠culo'}\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              style={{\r\n                background: 'rgba(255, 255, 255, 0.2)',\r\n                border: 'none',\r\n                color: 'white',\r\n                padding: '8px',\r\n                borderRadius: '6px',\r\n                cursor: 'pointer',\r\n                fontSize: '18px'\r\n              }}\r\n            >\r\n              ‚úñ\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Mensaje */}\r\n        {message && (\r\n          <div style={{\r\n            margin: '20px 20px 0',\r\n            padding: '12px',\r\n            borderRadius: '8px',\r\n            background: message.type === 'error' ? '#fee2e2' : '#d1fae5',\r\n            color: message.type === 'error' ? '#dc2626' : '#065f46',\r\n            fontSize: '14px',\r\n            fontWeight: '500'\r\n          }}>\r\n            {message.text}\r\n          </div>\r\n        )}\r\n\r\n        {/* Informaci√≥n del veh√≠culo */}\r\n        <div style={{\r\n          padding: '20px',\r\n          background: '#f0f9ff',\r\n          borderBottom: '1px solid #e5e7eb'\r\n        }}>\r\n          <h3 style={{\r\n            margin: '0 0 15px 0',\r\n            color: '#0c4a6e',\r\n            fontSize: '16px',\r\n            fontWeight: '600'\r\n          }}>\r\n            Veh√≠culo Asignado\r\n          </h3>\r\n          <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: 'repeat(2, 1fr)',\r\n            gap: '15px'\r\n          }}>\r\n            <div>\r\n              <span style={{ fontSize: '12px', color: '#64748b' }}>Veh√≠culo:</span>\r\n              <p style={{ margin: '4px 0', fontWeight: '600', color: '#0c4a6e' }}>\r\n                {vehiculoAsignado.nombre}\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <span style={{ fontSize: '12px', color: '#64748b' }}>Patente:</span>\r\n              <p style={{ margin: '4px 0', fontWeight: '600', color: '#0c4a6e' }}>\r\n                {vehiculoAsignado.patente || 'Sin patente'}\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <span style={{ fontSize: '12px', color: '#64748b' }}>Marca/Modelo:</span>\r\n              <p style={{ margin: '4px 0', fontWeight: '600', color: '#0c4a6e' }}>\r\n                {vehiculoAsignado.marca} {vehiculoAsignado.modelo}\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <span style={{ fontSize: '12px', color: '#64748b' }}>Estado:</span>\r\n              <p style={{ margin: '4px 0', fontWeight: '600' }}>\r\n                <span style={{\r\n                  padding: '4px 8px',\r\n                  borderRadius: '4px',\r\n                  fontSize: '12px',\r\n                  background: viajeActivo ? '#fef3c7' : '#dcfce7',\r\n                  color: viajeActivo ? '#92400e' : '#15803d'\r\n                }}>\r\n                  {viajeActivo ? 'üöó En viaje' : '‚úÖ Disponible'}\r\n                </span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Contenido principal */}\r\n        <div style={{ padding: '20px' }}>\r\n          {!viajeActivo ? (\r\n            // Formulario para iniciar viaje\r\n            <form onSubmit={(e) => { e.preventDefault(); handleIniciarViaje(); }}>\r\n              <div style={{ display: 'grid', gap: '15px' }}>\r\n                {/* Fecha y hora de salida */}\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px' }}>\r\n                  <div>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      marginBottom: '6px',\r\n                      fontSize: '14px',\r\n                      fontWeight: '500',\r\n                      color: '#374151'\r\n                    }}>\r\n                      üìÖ Fecha de Salida\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={formViaje.fechaSalida}\r\n                      onChange={(e) => setFormViaje({ ...formViaje, fechaSalida: e.target.value })}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '10px',\r\n                        border: '2px solid #e5e7eb',\r\n                        borderRadius: '8px',\r\n                        fontSize: '14px'\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      marginBottom: '6px',\r\n                      fontSize: '14px',\r\n                      fontWeight: '500',\r\n                      color: '#374151'\r\n                    }}>\r\n                      ‚è∞ Hora de Salida\r\n                    </label>\r\n                    <input\r\n                      type=\"time\"\r\n                      value={formViaje.horaSalida}\r\n                      onChange={(e) => setFormViaje({ ...formViaje, horaSalida: e.target.value })}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '10px',\r\n                        border: '2px solid #e5e7eb',\r\n                        borderRadius: '8px',\r\n                        fontSize: '14px'\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                {/* Kilometraje */}\r\n                <div>\r\n                  <label style={{\r\n                    display: 'block',\r\n                    marginBottom: '6px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '500',\r\n                    color: '#374151'\r\n                  }}>\r\n                    üöó Kilometraje Actual del Veh√≠culo\r\n                  </label>\r\n                  <div style={{\r\n                    padding: '10px',\r\n                    border: '2px solid #e5e7eb',\r\n                    borderRadius: '8px',\r\n                    backgroundColor: '#f9fafb',\r\n                    fontSize: '16px',\r\n                    fontWeight: '600',\r\n                    color: '#1f2937'\r\n                  }}>\r\n                    {(vehiculoAsignado.kilometraje || 0).toLocaleString()} km\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Nuevo Kilometraje */}\r\n                <div>\r\n                  <label style={{\r\n                    display: 'block',\r\n                    marginBottom: '6px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '500',\r\n                    color: '#374151'\r\n                  }}>\r\n                    üìè Kilometraje al Iniciar Viaje\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formViaje.kilometrajeSalida}\r\n                    onChange={(e) => {\r\n                      const nuevoKm = e.target.value;\r\n                      setFormViaje({ ...formViaje, kilometrajeSalida: nuevoKm });\r\n                    }}\r\n                    placeholder={`M√≠nimo: ${(vehiculoAsignado.kilometraje || 0).toLocaleString()} km`}\r\n                    required\r\n                    min={vehiculoAsignado.kilometraje || 0}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '2px solid #e5e7eb',\r\n                      borderRadius: '8px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  />\r\n                  {formViaje.kilometrajeSalida && parseInt(formViaje.kilometrajeSalida) < (vehiculoAsignado.kilometraje || 0) && (\r\n                    <div style={{\r\n                      marginTop: '5px',\r\n                      padding: '8px',\r\n                      backgroundColor: '#fee2e2',\r\n                      borderRadius: '6px',\r\n                      color: '#dc2626',\r\n                      fontSize: '13px',\r\n                      fontWeight: '500'\r\n                    }}>\r\n                      ‚ö†Ô∏è El kilometraje no puede ser menor a {(vehiculoAsignado.kilometraje || 0).toLocaleString()} km\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Destino */}\r\n                <div>\r\n                  <label style={{\r\n                    display: 'block',\r\n                    marginBottom: '6px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '500',\r\n                    color: '#374151'\r\n                  }}>\r\n                    üìç Destino\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formViaje.destino}\r\n                    onChange={(e) => setFormViaje({ ...formViaje, destino: e.target.value })}\r\n                    placeholder=\"Ingresa el lugar de destino\"\r\n                    required\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '2px solid #e5e7eb',\r\n                      borderRadius: '8px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                {/* Motivo del viaje */}\r\n                <div>\r\n                  <label style={{\r\n                    display: 'block',\r\n                    marginBottom: '6px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '500',\r\n                    color: '#374151'\r\n                  }}>\r\n                    üìã Motivo del Viaje\r\n                  </label>\r\n                  <select\r\n                    value={formViaje.motivoViaje}\r\n                    onChange={(e) => setFormViaje({ ...formViaje, motivoViaje: e.target.value })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '2px solid #e5e7eb',\r\n                      borderRadius: '8px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  >\r\n                    <option value=\"trabajo\">Trabajo en terreno</option>\r\n                    <option value=\"emergencia\">Emergencia</option>\r\n                    <option value=\"mantenimiento\">Mantenimiento</option>\r\n                    <option value=\"traslado\">Traslado de personal</option>\r\n                    <option value=\"carga\">Transporte de carga</option>\r\n                    <option value=\"otro\">Otro</option>\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Observaciones */}\r\n                <div>\r\n                  <label style={{\r\n                    display: 'block',\r\n                    marginBottom: '6px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '500',\r\n                    color: '#374151'\r\n                  }}>\r\n                    üìù Observaciones (Opcional)\r\n                  </label>\r\n                  <textarea\r\n                    value={formViaje.observaciones}\r\n                    onChange={(e) => setFormViaje({ ...formViaje, observaciones: e.target.value })}\r\n                    placeholder=\"Detalles adicionales del viaje...\"\r\n                    rows={3}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '2px solid #e5e7eb',\r\n                      borderRadius: '8px',\r\n                      fontSize: '14px',\r\n                      resize: 'none'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                {/* Bot√≥n de acci√≥n */}\r\n                {/* Bot√≥n de acci√≥n */}\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={\r\n                    loading ||\r\n                    !formViaje.kilometrajeSalida ||\r\n                    !formViaje.destino ||\r\n                    (parseInt(formViaje.kilometrajeSalida) < (vehiculoAsignado.kilometraje || 0))\r\n                  }\r\n                  style={{\r\n                    padding: '14px',\r\n                    background: loading || (parseInt(formViaje.kilometrajeSalida) < (vehiculoAsignado.kilometraje || 0))\r\n                      ? '#9ca3af'\r\n                      : 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '8px',\r\n                    fontSize: '16px',\r\n                    fontWeight: '600',\r\n                    cursor: loading || (parseInt(formViaje.kilometrajeSalida) < (vehiculoAsignado.kilometraje || 0))\r\n                      ? 'not-allowed'\r\n                      : 'pointer',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    gap: '10px',\r\n                    transition: 'transform 0.2s',\r\n                    opacity: loading || (parseInt(formViaje.kilometrajeSalida) < (vehiculoAsignado.kilometraje || 0))\r\n                      ? 0.5\r\n                      : 1\r\n                  }}\r\n                  onMouseEnter={(e) => {\r\n                    if (!loading && !(parseInt(formViaje.kilometrajeSalida) < (vehiculoAsignado.kilometraje || 0))) {\r\n                      e.currentTarget.style.transform = 'scale(1.02)';\r\n                    }\r\n                  }}\r\n                  onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}\r\n                >\r\n                  {loading ? (\r\n                    <>\r\n                      <span style={{\r\n                        width: '16px',\r\n                        height: '16px',\r\n                        border: '2px solid white',\r\n                        borderTop: '2px solid transparent',\r\n                        borderRadius: '50%',\r\n                        animation: 'spin 1s linear infinite'\r\n                      }}></span>\r\n                      Iniciando...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      üöÄ INICIAR VIAJE\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          ) : (\r\n            // Informaci√≥n del viaje activo\r\n            <div>\r\n              <div style={{\r\n                padding: '20px',\r\n                background: '#fef3c7',\r\n                borderRadius: '8px',\r\n                marginBottom: '20px'\r\n              }}>\r\n                <h3 style={{\r\n                  margin: '0 0 15px 0',\r\n                  color: '#92400e',\r\n                  fontSize: '18px',\r\n                  fontWeight: '600'\r\n                }}>\r\n                  üöó Viaje en Curso\r\n                </h3>\r\n                <div style={{ display: 'grid', gap: '10px' }}>\r\n                  <div>\r\n                    <span style={{ fontSize: '13px', color: '#92400e' }}>Destino:</span>\r\n                    <p style={{ margin: '4px 0', fontWeight: '600', fontSize: '15px' }}>\r\n                      {viajeActivo.destino}\r\n                    </p>\r\n                  </div>\r\n                  <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px' }}>\r\n                    <div>\r\n                      <span style={{ fontSize: '13px', color: '#92400e' }}>Hora de salida:</span>\r\n                      <p style={{ margin: '4px 0', fontWeight: '600' }}>\r\n                        {viajeActivo.horaSalida}\r\n                      </p>\r\n                    </div>\r\n                    <div>\r\n                      <span style={{ fontSize: '13px', color: '#92400e' }}>Km de salida:</span>\r\n                      <p style={{ margin: '4px 0', fontWeight: '600' }}>\r\n                        {viajeActivo.kilometrajeSalida} km\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  {viajeActivo.observaciones && (\r\n                    <div>\r\n                      <span style={{ fontSize: '13px', color: '#92400e' }}>Observaciones:</span>\r\n                      <p style={{ margin: '4px 0', fontSize: '14px' }}>\r\n                        {viajeActivo.observaciones}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                onClick={handleFinalizarViaje}\r\n                disabled={loading}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '14px',\r\n                  background: loading ? '#9ca3af' : 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '8px',\r\n                  fontSize: '16px',\r\n                  fontWeight: '600',\r\n                  cursor: loading ? 'not-allowed' : 'pointer',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  gap: '10px'\r\n                }}\r\n              >\r\n                {loading ? 'Finalizando...' : 'üèÅ FINALIZAR VIAJE'}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <style>{`\r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n      `}</style>\r\n      {/* Modal de Finalizaci√≥n de Viaje */}\r\n      {showFinalizarModal && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0, 0, 0, 0.7)',\r\n          display: 'flex',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          zIndex: 10000,\r\n          padding: '20px'\r\n        }}>\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '12px',\r\n            width: '100%',\r\n            maxWidth: '450px',\r\n            boxShadow: '0 20px 60px rgba(0,0,0,0.3)'\r\n          }}>\r\n            {/* Header del Modal */}\r\n            <div style={{\r\n              padding: '20px',\r\n              background: 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',\r\n              borderRadius: '12px 12px 0 0',\r\n              color: 'white'\r\n            }}>\r\n              <h3 style={{\r\n                margin: 0,\r\n                fontSize: '20px',\r\n                fontWeight: '600',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '10px'\r\n              }}>\r\n                üèÅ Finalizar Viaje\r\n              </h3>\r\n            </div>\r\n\r\n            {/* Contenido del Modal */}\r\n            <div style={{ padding: '20px' }}>\r\n              {/* Info del viaje */}\r\n              <div style={{\r\n                background: '#f9fafb',\r\n                padding: '15px',\r\n                borderRadius: '8px',\r\n                marginBottom: '20px'\r\n              }}>\r\n                <div style={{ marginBottom: '10px' }}>\r\n                  <span style={{ fontSize: '13px', color: '#6b7280' }}>Destino:</span>\r\n                  <div style={{ fontWeight: '600', fontSize: '16px', color: '#1f2937' }}>\r\n                    {viajeActivo.destino}\r\n                  </div>\r\n                </div>\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px' }}>\r\n                  <div>\r\n                    <span style={{ fontSize: '13px', color: '#6b7280' }}>Hora de salida:</span>\r\n                    <div style={{ fontWeight: '600', fontSize: '14px' }}>\r\n                      {viajeActivo.horaSalida}\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <span style={{ fontSize: '13px', color: '#6b7280' }}>Km de salida:</span>\r\n                    <div style={{ fontWeight: '600', fontSize: '14px' }}>\r\n                      {viajeActivo.kilometrajeSalida.toLocaleString()} km\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Campo de kilometraje final */}\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  marginBottom: '8px',\r\n                  fontSize: '14px',\r\n                  fontWeight: '600',\r\n                  color: '#374151'\r\n                }}>\r\n                  üìè Kilometraje Final del Veh√≠culo\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={kilometrajeLlegada}\r\n                  onChange={(e) => {\r\n                    setKilometrajeLlegada(e.target.value);\r\n                    setErrorKmLlegada('');\r\n                  }}\r\n                  placeholder={`M√≠nimo: ${(viajeActivo.kilometrajeSalida + 1).toLocaleString()} km`}\r\n                  min={viajeActivo.kilometrajeSalida + 1}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    border: errorKmLlegada ? '2px solid #ef4444' : '2px solid #e5e7eb',\r\n                    borderRadius: '8px',\r\n                    fontSize: '16px',\r\n                    fontWeight: '500',\r\n                    backgroundColor: errorKmLlegada ? '#fee2e2' : 'white'\r\n                  }}\r\n                  autoFocus\r\n                />\r\n\r\n                {/* Mensaje de error */}\r\n                {errorKmLlegada && (\r\n                  <div style={{\r\n                    marginTop: '8px',\r\n                    padding: '8px',\r\n                    backgroundColor: '#fee2e2',\r\n                    borderRadius: '6px',\r\n                    color: '#dc2626',\r\n                    fontSize: '13px',\r\n                    fontWeight: '500'\r\n                  }}>\r\n                    ‚ö†Ô∏è {errorKmLlegada}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Informaci√≥n de kil√≥metros a recorrer */}\r\n                {kilometrajeLlegada && parseInt(kilometrajeLlegada) > viajeActivo.kilometrajeSalida && (\r\n                  <div style={{\r\n                    marginTop: '8px',\r\n                    padding: '10px',\r\n                    backgroundColor: '#dcfce7',\r\n                    borderRadius: '6px',\r\n                    color: '#15803d',\r\n                    fontSize: '14px',\r\n                    fontWeight: '500',\r\n                    textAlign: 'center'\r\n                  }}>\r\n                    üìç Distancia recorrida: {(parseInt(kilometrajeLlegada) - viajeActivo.kilometrajeSalida).toLocaleString()} km\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Botones */}\r\n              <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: '1fr 1fr',\r\n                gap: '10px',\r\n                marginTop: '20px'\r\n              }}>\r\n                <button\r\n                  onClick={() => {\r\n                    setShowFinalizarModal(false);\r\n                    setKilometrajeLlegada('');\r\n                    setErrorKmLlegada('');\r\n                  }}\r\n                  style={{\r\n                    padding: '12px',\r\n                    background: '#6b7280',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '8px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer'\r\n                  }}\r\n                >\r\n                  Cancelar\r\n                </button>\r\n                <button\r\n                  onClick={confirmarFinalizarViaje}\r\n                  disabled={!kilometrajeLlegada || parseInt(kilometrajeLlegada) <= viajeActivo.kilometrajeSalida}\r\n                  style={{\r\n                    padding: '12px',\r\n                    background: !kilometrajeLlegada || parseInt(kilometrajeLlegada) <= viajeActivo.kilometrajeSalida\r\n                      ? '#9ca3af'\r\n                      : 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '8px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '600',\r\n                    cursor: !kilometrajeLlegada || parseInt(kilometrajeLlegada) <= viajeActivo.kilometrajeSalida\r\n                      ? 'not-allowed'\r\n                      : 'pointer',\r\n                    opacity: !kilometrajeLlegada || parseInt(kilometrajeLlegada) <= viajeActivo.kilometrajeSalida\r\n                      ? 0.5\r\n                      : 1\r\n                  }}\r\n                >\r\n                  üèÅ Finalizar Viaje\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TrabajadorVehiclePanel;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,gBAAgB,CAAEC,mBAAmB,KAAQ,8BAA8B,CACpF,OAASC,QAAQ,KAAQ,oBAAoB,CAC7C,OAASC,GAAG,GAAI,CAAAC,WAAW,CAAEC,MAAM,CAAEC,GAAG,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEpE,KAAM,CAAAC,sBAAsB,CAAGC,IAAA,EAA8B,IAA7B,CAAEC,WAAW,CAAEC,OAAQ,CAAC,CAAAF,IAAA,CACtD;AACA,KAAM,CAACG,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAC9D,KAAM,CAACqB,OAAO,CAAEC,UAAU,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACuB,eAAe,CAAEC,kBAAkB,CAAC,CAAGxB,QAAQ,CAAC,IAAI,CAAC,CAAE;AAC9D,KAAM,CAACyB,OAAO,CAAEC,UAAU,CAAC,CAAG1B,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAC2B,cAAc,CAAEC,iBAAiB,CAAC,CAAG5B,QAAQ,CAAC,IAAI,CAAC,CAE1D;AACA,KAAM,CAAC6B,SAAS,CAAEC,YAAY,CAAC,CAAG9B,QAAQ,CAAC,CACzC+B,WAAW,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAE;AACrDC,UAAU,CAAE,GAAI,CAAAH,IAAI,CAAC,CAAC,CAACI,kBAAkB,CAAC,OAAO,CAAE,CAAEC,IAAI,CAAE,SAAS,CAAEC,MAAM,CAAE,SAAU,CAAC,CAAC,CAC1FC,iBAAiB,CAAE,EAAE,CACrBC,OAAO,CAAE,EAAE,CACXC,WAAW,CAAE,SAAS,CAAE;AACxBC,aAAa,CAAE,EACjB,CAAC,CAAC,CACF,KAAM,CAACC,kBAAkB,CAAEC,qBAAqB,CAAC,CAAG5C,QAAQ,CAAC,KAAK,CAAC,CACnE,KAAM,CAAC6C,kBAAkB,CAAEC,qBAAqB,CAAC,CAAG9C,QAAQ,CAAC,EAAE,CAAC,CAChE,KAAM,CAAC+C,cAAc,CAAEC,iBAAiB,CAAC,CAAGhD,QAAQ,CAAC,EAAE,CAAC,CAExD;AACA,KAAM,CAACiD,WAAW,CAAEC,cAAc,CAAC,CAAGlD,QAAQ,CAAC,IAAI,CAAC,CAEpD;AACAC,SAAS,CAAC,IAAM,CACd,GAAI,CAAAkD,OAAO,CAAG,IAAI,CAElB,KAAM,CAAAC,QAAQ,CAAG,KAAAA,CAAA,GAAY,CAC3BC,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAErC,WAAW,CAACsC,GAAG,CAAC,CACpE/B,kBAAkB,CAAC,IAAI,CAAC,CAExB,GAAI,CACF;AACA,KAAM,IAAI,CAAAgC,OAAO,CAACC,OAAO,EAAIC,UAAU,CAACD,OAAO,CAAE,IAAI,CAAC,CAAC,CAEvD;AACA,GAAI,CAACN,OAAO,CAAE,OAEd;AACA,GAAI,CAAAxB,cAAc,CAAG,IAAI,CACzB,KAAM,IAAI,CAAA6B,OAAO,CAAEC,OAAO,EAAK,CAC7B,KAAM,CAAAE,WAAW,CAAGxD,mBAAmB,CAACyD,iBAAiB,CACvD3C,WAAW,CAACsC,GAAG,CACdM,IAAI,EAAK,CACRR,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEO,IAAI,CAAC,CAC7ClC,cAAc,CAAGkC,IAAI,CACrBjC,iBAAiB,CAACiC,IAAI,CAAC,CACvB,GAAIA,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEZ,WAAW,CAAE,CACrBC,cAAc,CAACW,IAAI,CAACZ,WAAW,CAAC,CAClC,CACAQ,OAAO,CAAC,CAAC,CACX,CACF,CAAC,CAED;AACAC,UAAU,CAAC,IAAMD,OAAO,CAAC,CAAC,CAAE,IAAI,CAAC,CACnC,CAAC,CAAC,CAEF;AACA,KAAM,IAAI,CAAAD,OAAO,CAAEC,OAAO,EAAK,CAC7B,KAAM,CAAAE,WAAW,CAAGzD,gBAAgB,CAAC4D,oBAAoB,CAAEC,aAAa,EAAK,CAC3EV,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAES,aAAa,CAACC,MAAM,CAAC,CAE3D;AACA;AACA,GAAI,CAAAC,kBAAkB,CAAG,IAAI,CAE7B;AACAA,kBAAkB,CAAGF,aAAa,CAACG,IAAI,CAACC,CAAC,EAAI,CAC3C;AACA,KAAM,CAAAC,QAAQ,CAAGD,CAAC,CAACE,kBAAkB,GAAKpD,WAAW,CAACsC,GAAG,CAEzD,GAAIa,QAAQ,CAAE,CACZf,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAEa,CAAC,CAACG,MAAM,CAAC,CACxE,CACA;AACA,aAAA5D,IAAA,WACE6D,OAAO,CAAE,KAAAA,CAAA,GAAY,CACnB,GAAI,CACF,KAAM,CAAAC,WAAW,CAAGlE,WAAW,CAACF,QAAQ,CAAE,aAAae,gBAAgB,CAACsD,EAAE,EAAE,CAAC,CAC7E,KAAM,CAAAlE,MAAM,CAACiE,WAAW,CAAE,CACxBE,gBAAgB,CAAE,IAAI,CAAG;AACzBC,SAAS,CAAE,IAAI,CAAG;AAClBC,mBAAmB,CAAE,GAAI,CAAA5C,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAC9C,CAAC,CAAC,CAEF4C,KAAK,CAAC,6BAA6B,CAAC,CACpCC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC1B,CAAE,MAAOC,KAAK,CAAE,CACd5B,OAAO,CAAC4B,KAAK,CAAC,QAAQ,CAAEA,KAAK,CAAC,CAChC,CACF,CAAE,CACFC,KAAK,CAAE,CACLC,OAAO,CAAE,UAAU,CACnBC,UAAU,CAAE,SAAS,CACrBC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,MAAM,CAChBC,MAAM,CAAE,SACV,CAAE,CAAAC,QAAA,CACH,4CAED,CAAQ,CAAC,CAET;AACA,GAAIvB,CAAC,CAACQ,SAAS,GAAK1D,WAAW,CAACsC,GAAG,EAAIY,CAAC,CAACO,gBAAgB,GAAKzD,WAAW,CAACsC,GAAG,CAAE,CAC7EF,OAAO,CAACC,GAAG,CAAC,8DAA8D,CAAEa,CAAC,CAACG,MAAM,CAAC,CACrFjB,OAAO,CAACC,GAAG,CAAC,cAAc,CAAEa,CAAC,CAACQ,SAAS,CAAC,CACxCtB,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAEa,CAAC,CAACO,gBAAgB,CAAC,CACtDrB,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEa,CAAC,CAACE,kBAAkB,CAAC,CAC1D;AACF,CACA;AACA,MAAO,CAAAD,QAAQ,CACjB,CAAC,CAAC,CAEF;AACAf,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAEW,kBAAkB,CAAG,qBAAqB,CAAG,0BAA0B,CAAC,CAC9G;AACA;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAEYZ,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEW,kBAAkB,CAAG,sBAAsBA,kBAAkB,CAACK,MAAM,EAAE,CAAG,0BAA0B,CAAC,CACpI,GAAIL,kBAAkB,CAAE,CACtBZ,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEW,kBAAkB,CAAC,CACvD7C,mBAAmB,CAAC6C,kBAAkB,CAAC,CACvCnC,YAAY,CAAC6D,IAAI,GAAK,CACpB,GAAGA,IAAI,CACPpD,iBAAiB,CAAE,EAAG;AACxB,CAAC,CAAC,CAAC,CACL,CAAC,IAAM,CACLc,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC,CACzClC,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CAEA;AACA,GAAI+B,OAAO,CAAE,CACX3B,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAEAiC,OAAO,CAAC,CAAC,CACX,CAAC,CAAC,CAEF;AACAC,UAAU,CAAC,IAAM,CACf,GAAIP,OAAO,CAAE,CACX3B,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CACAiC,OAAO,CAAC,CAAC,CACX,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAAC,CAEJ,CAAE,MAAOwB,KAAK,CAAE,CACd5B,OAAO,CAAC4B,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChD,GAAI9B,OAAO,CAAE,CACXzB,UAAU,CAAC,CACTkE,IAAI,CAAE,OAAO,CACbC,IAAI,CAAE,+BACR,CAAC,CAAC,CACFrE,kBAAkB,CAAC,KAAK,CAAC,CACzBJ,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CACF,CACF,CAAC,CAEDgC,QAAQ,CAAC,CAAC,CAEV;AACA,MAAO,IAAM,CACXD,OAAO,CAAG,KAAK,CACjB,CAAC,CACH,CAAC,CAAE,CAAClC,WAAW,CAACsC,GAAG,CAAC,CAAC,CAErB;AACA,KAAM,CAAAuC,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC;AACA,GAAI,CAACjE,SAAS,CAACW,OAAO,CAAE,CACtBd,UAAU,CAAC,CAAEkE,IAAI,CAAE,OAAO,CAAEC,IAAI,CAAE,6BAA8B,CAAC,CAAC,CAClE,OACF,CAEA,GAAI,CAAChE,SAAS,CAACU,iBAAiB,CAAE,CAChCb,UAAU,CAAC,CAAEkE,IAAI,CAAE,OAAO,CAAEC,IAAI,CAAE,qDAAsD,CAAC,CAAC,CAC1F,OACF,CACA;AACA,KAAM,CAAAE,iBAAiB,CAAG5E,gBAAgB,CAAC6E,WAAW,EAAI,CAAC,CAC3D,KAAM,CAAAzD,iBAAiB,CAAG0D,QAAQ,CAACpE,SAAS,CAACU,iBAAiB,CAAC,CAC/D,GAAIA,iBAAiB,CAAGwD,iBAAiB,CAAE,CACzCrE,UAAU,CAAC,CACTkE,IAAI,CAAE,OAAO,CACbC,IAAI,CAAE,uDAAuDE,iBAAiB,CAACG,cAAc,CAAC,CAAC,MACjG,CAAC,CAAC,CACF,OACF,CACA;AACA,GAAI3D,iBAAiB,CAAGwD,iBAAiB,CAAG,IAAI,CAAE,CAChD,KAAM,CAAAI,SAAS,CAAGrB,MAAM,CAACsB,OAAO,CAC9B,6BAA6B7D,iBAAiB,CAAC2D,cAAc,CAAC,CAAC,2CAA2CH,iBAAiB,CAACG,cAAc,CAAC,CAAC,wBAC9I,CAAC,CACD,GAAI,CAACC,SAAS,CAAE,OAClB,CAEA7E,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAA+E,SAAS,CAAG,CAChBC,UAAU,CAAEnF,gBAAgB,CAACsD,EAAE,CAC/B8B,cAAc,CAAEpF,gBAAgB,CAACmD,MAAM,CACvCkC,YAAY,CAAEvF,WAAW,CAACsC,GAAG,CAC7BkD,gBAAgB,CAAExF,WAAW,CAACyF,IAAI,CAClC3E,WAAW,CAAEF,SAAS,CAACE,WAAW,CAClCI,UAAU,CAAEN,SAAS,CAACM,UAAU,CAChCI,iBAAiB,CAAE0D,QAAQ,CAACpE,SAAS,CAACU,iBAAiB,CAAC,CACxDC,OAAO,CAAEX,SAAS,CAACW,OAAO,CAC1BC,WAAW,CAAEZ,SAAS,CAACY,WAAW,CAClCC,aAAa,CAAEb,SAAS,CAACa,aAAa,CACtCiE,MAAM,CAAE,UAAU,CAClBC,UAAU,CAAE,GAAI,CAAA5E,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CACrC,CAAC,CAED;AACA,KAAM,CAAA/B,gBAAgB,CAAC2G,oBAAoB,CAAC1F,gBAAgB,CAACsD,EAAE,CAAE,QAAQ,CAAE,CACzEE,SAAS,CAAE1D,WAAW,CAACsC,GAAG,CAC1BuD,cAAc,CAAE7F,WAAW,CAACyF,IAAI,CAChClE,OAAO,CAAEX,SAAS,CAACW,OAAO,CAC1BuE,sBAAsB,CAAEd,QAAQ,CAACpE,SAAS,CAACU,iBAAiB,CAAC,CAC7DU,WAAW,CAAEoD,SACf,CAAC,CAAC,CAEF;AACA,KAAM,CAAAlG,mBAAmB,CAAC6G,oBAAoB,CAAC/F,WAAW,CAACsC,GAAG,CAAE,CAC9DN,WAAW,CAAEoD,SAAS,CACtBY,YAAY,CAAE,UAAU,CACxBC,aAAa,CAAErF,SAAS,CAACW,OAC3B,CAAC,CAAC,CAEFU,cAAc,CAACmD,SAAS,CAAC,CACzB3E,UAAU,CAAC,CACTkE,IAAI,CAAE,SAAS,CACfC,IAAI,CAAE,+BACR,CAAC,CAAC,CAEJ,CAAE,MAAOZ,KAAK,CAAE,CACd5B,OAAO,CAAC4B,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CvD,UAAU,CAAC,CACTkE,IAAI,CAAE,OAAO,CACbC,IAAI,CAAE,6BACR,CAAC,CAAC,CACJ,CAAC,OAAS,CACRvE,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED;AACA,KAAM,CAAA6F,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvCvE,qBAAqB,CAAC,IAAI,CAAC,CAC3BE,qBAAqB,CAAC,EAAE,CAAC,CACzBE,iBAAiB,CAAC,EAAE,CAAC,CACvB,CAAC,CACD,KAAM,CAAAoE,uBAAuB,CAAG,KAAAA,CAAA,GAAY,CAC1C;AACA,GAAI,CAACvE,kBAAkB,CAAE,CACvBG,iBAAiB,CAAC,qCAAqC,CAAC,CACxD,OACF,CAEA,KAAM,CAAAqE,SAAS,CAAGpB,QAAQ,CAACpD,kBAAkB,CAAC,CAC9C,KAAM,CAAAyE,QAAQ,CAAGrE,WAAW,CAACV,iBAAiB,CAE9C,GAAI8E,SAAS,CAAGC,QAAQ,CAAE,CACxBtE,iBAAiB,CAAC,uDAAuDsE,QAAQ,CAACpB,cAAc,CAAC,CAAC,MAAM,CAAC,CACzG,OACF,CAEA,GAAImB,SAAS,GAAKC,QAAQ,CAAE,CAC1BtE,iBAAiB,CAAC,mDAAmD,CAAC,CACtE,OACF,CAEA,GAAIqE,SAAS,CAAGC,QAAQ,CAAG,IAAI,CAAE,CAC/B,KAAM,CAAAnB,SAAS,CAAGrB,MAAM,CAACsB,OAAO,CAC9B,0BAA0B,CAACiB,SAAS,CAAGC,QAAQ,EAAEpB,cAAc,CAAC,CAAC,oBACnE,CAAC,CACD,GAAI,CAACC,SAAS,CAAE,OAClB,CAEA7E,UAAU,CAAC,IAAI,CAAC,CAChBsB,qBAAqB,CAAC,KAAK,CAAC,CAE5B,GAAI,CACF,KAAM,CAAA2E,WAAW,CAAG,GAAI,CAAAvF,IAAI,CAAC,CAAC,CAACI,kBAAkB,CAAC,OAAO,CAAE,CAAEC,IAAI,CAAE,SAAS,CAAEC,MAAM,CAAE,SAAU,CAAC,CAAC,CAClG,KAAM,CAAAkF,YAAY,CAAGH,SAAS,CAAGC,QAAQ,CAEzC;AACA,KAAM,CAAApH,gBAAgB,CAAC2G,oBAAoB,CAAC1F,gBAAgB,CAACsD,EAAE,CAAE,YAAY,CAAE,CAC7EE,SAAS,CAAE1D,WAAW,CAACsC,GAAG,CAC1ByC,WAAW,CAAEqB,SAAS,CACtBI,WAAW,CAAE,CACX,GAAGxE,WAAW,CACdyE,YAAY,CAAE,GAAI,CAAA1F,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACpDqF,WAAW,CAAEA,WAAW,CACxB1E,kBAAkB,CAAEwE,SAAS,CAC7BM,oBAAoB,CAAEH,YAAY,CAClCb,MAAM,CAAE,YACV,CACF,CAAC,CAAC,CAEF;AACA,KAAM,CAAAxG,mBAAmB,CAAC6G,oBAAoB,CAAC/F,WAAW,CAACsC,GAAG,CAAE,CAC9DN,WAAW,CAAE,IAAI,CACjBgE,YAAY,CAAE,YAAY,CAC1BQ,WAAW,CAAE,CACX,GAAGxE,WAAW,CACdyE,YAAY,CAAE,GAAI,CAAA1F,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACpDqF,WAAW,CAAEA,WAAW,CACxB1E,kBAAkB,CAAEwE,SAAS,CAC7BM,oBAAoB,CAAEH,YACxB,CACF,CAAC,CAAC,CAEFtE,cAAc,CAAC,IAAI,CAAC,CACpBxB,UAAU,CAAC,CACTkE,IAAI,CAAE,SAAS,CACfC,IAAI,CAAE,kCAAkC2B,YAAY,CAACtB,cAAc,CAAC,CAAC,KACvE,CAAC,CAAC,CAEJ,CAAE,MAAOjB,KAAK,CAAE,CACd5B,OAAO,CAAC4B,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACjDvD,UAAU,CAAC,CACTkE,IAAI,CAAE,OAAO,CACbC,IAAI,CAAE,+BACR,CAAC,CAAC,CACJ,CAAC,OAAS,CACRvE,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED;AACA,GAAIC,eAAe,CAAE,CACnB,mBACEb,IAAA,QAAKwE,KAAK,CAAE,CACV0C,QAAQ,CAAE,OAAO,CACjBC,GAAG,CAAE,CAAC,CACNC,IAAI,CAAE,CAAC,CACPC,KAAK,CAAE,CAAC,CACRC,MAAM,CAAE,CAAC,CACT5C,UAAU,CAAE,oBAAoB,CAChC6C,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,QAAQ,CACxBC,UAAU,CAAE,QAAQ,CACpBC,MAAM,CAAE,IAAI,CACZjD,OAAO,CAAE,MACX,CAAE,CAAAO,QAAA,cACA9E,KAAA,QAAKsE,KAAK,CAAE,CACVE,UAAU,CAAE,OAAO,CACnBG,YAAY,CAAE,MAAM,CACpBJ,OAAO,CAAE,MAAM,CACfkD,QAAQ,CAAE,OAAO,CACjBC,KAAK,CAAE,MAAM,CACbC,SAAS,CAAE,QACb,CAAE,CAAA7C,QAAA,eACAhF,IAAA,QAAKwE,KAAK,CAAE,CAAEM,QAAQ,CAAE,MAAM,CAAEgD,YAAY,CAAE,MAAO,CAAE,CAAA9C,QAAA,CAAC,QAAC,CAAK,CAAC,cAC/DhF,IAAA,OAAIwE,KAAK,CAAE,CAAEG,KAAK,CAAE,SAAS,CAAEmD,YAAY,CAAE,MAAO,CAAE,CAAA9C,QAAA,CAAC,4BAEvD,CAAI,CAAC,cACLhF,IAAA,MAAGwE,KAAK,CAAE,CAAEG,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CAAC,kCAEhC,CAAG,CAAC,EACD,CAAC,CACH,CAAC,CAEV,CAEA;AACA,GAAI,CAACvE,gBAAgB,CAAE,CACrB,mBACET,IAAA,QAAKwE,KAAK,CAAE,CACV0C,QAAQ,CAAE,OAAO,CACjBC,GAAG,CAAE,CAAC,CACNC,IAAI,CAAE,CAAC,CACPC,KAAK,CAAE,CAAC,CACRC,MAAM,CAAE,CAAC,CACT5C,UAAU,CAAE,oBAAoB,CAChC6C,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,QAAQ,CACxBC,UAAU,CAAE,QAAQ,CACpBC,MAAM,CAAE,IAAI,CACZjD,OAAO,CAAE,MACX,CAAE,CAAAO,QAAA,cACA9E,KAAA,QAAKsE,KAAK,CAAE,CACVE,UAAU,CAAE,OAAO,CACnBG,YAAY,CAAE,MAAM,CACpBJ,OAAO,CAAE,MAAM,CACfkD,QAAQ,CAAE,OAAO,CACjBC,KAAK,CAAE,MAAM,CACbC,SAAS,CAAE,QACb,CAAE,CAAA7C,QAAA,eACAhF,IAAA,QAAKwE,KAAK,CAAE,CAAEM,QAAQ,CAAE,MAAM,CAAEgD,YAAY,CAAE,MAAO,CAAE,CAAA9C,QAAA,CAAC,cAAE,CAAK,CAAC,cAChEhF,IAAA,OAAIwE,KAAK,CAAE,CAAEG,KAAK,CAAE,SAAS,CAAEmD,YAAY,CAAE,MAAO,CAAE,CAAA9C,QAAA,CAAC,gCAEvD,CAAI,CAAC,cACLhF,IAAA,MAAGwE,KAAK,CAAE,CAAEG,KAAK,CAAE,SAAS,CAAEmD,YAAY,CAAE,MAAO,CAAE,CAAA9C,QAAA,CAAC,8DAEtD,CAAG,CAAC,cACJhF,IAAA,WACE6D,OAAO,CAAErD,OAAQ,CACjBgE,KAAK,CAAE,CACLC,OAAO,CAAE,WAAW,CACpBC,UAAU,CAAE,SAAS,CACrBC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,MAAM,CAChBC,MAAM,CAAE,SACV,CAAE,CAAAC,QAAA,CACH,QAED,CAAQ,CAAC,EAkDN,CAAC,CACH,CAAC,CAEV,CAEA;AACA,GAAI,CAACvE,gBAAgB,CAAE,CACrB,MAAO,KAAI,CAAE;AACf,CAEA,mBACEP,KAAA,QAAKsE,KAAK,CAAE,CACV0C,QAAQ,CAAE,OAAO,CACjBC,GAAG,CAAE,CAAC,CACNC,IAAI,CAAE,CAAC,CACPC,KAAK,CAAE,CAAC,CACRC,MAAM,CAAE,CAAC,CACT5C,UAAU,CAAE,oBAAoB,CAChC6C,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,QAAQ,CACxBC,UAAU,CAAE,QAAQ,CACpBC,MAAM,CAAE,IAAI,CACZjD,OAAO,CAAE,MACX,CAAE,CAAAO,QAAA,eACA9E,KAAA,QAAKsE,KAAK,CAAE,CACVE,UAAU,CAAE,OAAO,CACnBG,YAAY,CAAE,MAAM,CACpB+C,KAAK,CAAE,MAAM,CACbD,QAAQ,CAAE,OAAO,CACjBI,SAAS,CAAE,MAAM,CACjBC,QAAQ,CAAE,MAAM,CAChBC,SAAS,CAAE,6BACb,CAAE,CAAAjD,QAAA,eAEAhF,IAAA,QAAKwE,KAAK,CAAE,CACVC,OAAO,CAAE,MAAM,CACfyD,YAAY,CAAE,mBAAmB,CACjCxD,UAAU,CAAE,mDAAmD,CAC/DG,YAAY,CAAE,eAAe,CAC7BF,KAAK,CAAE,OACT,CAAE,CAAAK,QAAA,cACA9E,KAAA,QAAKsE,KAAK,CAAE,CACV+C,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,eAAe,CAC/BC,UAAU,CAAE,QACd,CAAE,CAAAzC,QAAA,eACA9E,KAAA,QAAA8E,QAAA,eACEhF,IAAA,OAAIwE,KAAK,CAAE,CAAE2D,MAAM,CAAE,CAAC,CAAErD,QAAQ,CAAE,MAAM,CAAEsD,UAAU,CAAE,KAAM,CAAE,CAAApD,QAAA,CAAC,qCAE/D,CAAI,CAAC,cACLhF,IAAA,MAAGwE,KAAK,CAAE,CAAE2D,MAAM,CAAE,WAAW,CAAErD,QAAQ,CAAE,MAAM,CAAEuD,OAAO,CAAE,GAAI,CAAE,CAAArD,QAAA,CAC/DzC,WAAW,CAAG,gBAAgB,CAAG,8BAA8B,CAC/D,CAAC,EACD,CAAC,cACNvC,IAAA,WACE6D,OAAO,CAAErD,OAAQ,CACjBgE,KAAK,CAAE,CACLE,UAAU,CAAE,0BAA0B,CACtCE,MAAM,CAAE,MAAM,CACdD,KAAK,CAAE,OAAO,CACdF,OAAO,CAAE,KAAK,CACdI,YAAY,CAAE,KAAK,CACnBE,MAAM,CAAE,SAAS,CACjBD,QAAQ,CAAE,MACZ,CAAE,CAAAE,QAAA,CACH,QAED,CAAQ,CAAC,EACN,CAAC,CACH,CAAC,CAGLjE,OAAO,eACNf,IAAA,QAAKwE,KAAK,CAAE,CACV2D,MAAM,CAAE,aAAa,CACrB1D,OAAO,CAAE,MAAM,CACfI,YAAY,CAAE,KAAK,CACnBH,UAAU,CAAE3D,OAAO,CAACmE,IAAI,GAAK,OAAO,CAAG,SAAS,CAAG,SAAS,CAC5DP,KAAK,CAAE5D,OAAO,CAACmE,IAAI,GAAK,OAAO,CAAG,SAAS,CAAG,SAAS,CACvDJ,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KACd,CAAE,CAAApD,QAAA,CACCjE,OAAO,CAACoE,IAAI,CACV,CACN,cAGDjF,KAAA,QAAKsE,KAAK,CAAE,CACVC,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,SAAS,CACrBwD,YAAY,CAAE,mBAChB,CAAE,CAAAlD,QAAA,eACAhF,IAAA,OAAIwE,KAAK,CAAE,CACT2D,MAAM,CAAE,YAAY,CACpBxD,KAAK,CAAE,SAAS,CAChBG,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KACd,CAAE,CAAApD,QAAA,CAAC,sBAEH,CAAI,CAAC,cACL9E,KAAA,QAAKsE,KAAK,CAAE,CACV+C,OAAO,CAAE,MAAM,CACfe,mBAAmB,CAAE,gBAAgB,CACrCC,GAAG,CAAE,MACP,CAAE,CAAAvD,QAAA,eACA9E,KAAA,QAAA8E,QAAA,eACEhF,IAAA,SAAMwE,KAAK,CAAE,CAAEM,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CAAC,cAAS,CAAM,CAAC,cACrEhF,IAAA,MAAGwE,KAAK,CAAE,CAAE2D,MAAM,CAAE,OAAO,CAAEC,UAAU,CAAE,KAAK,CAAEzD,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CAChEvE,gBAAgB,CAACmD,MAAM,CACvB,CAAC,EACD,CAAC,cACN1D,KAAA,QAAA8E,QAAA,eACEhF,IAAA,SAAMwE,KAAK,CAAE,CAAEM,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CAAC,UAAQ,CAAM,CAAC,cACpEhF,IAAA,MAAGwE,KAAK,CAAE,CAAE2D,MAAM,CAAE,OAAO,CAAEC,UAAU,CAAE,KAAK,CAAEzD,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CAChEvE,gBAAgB,CAAC+H,OAAO,EAAI,aAAa,CACzC,CAAC,EACD,CAAC,cACNtI,KAAA,QAAA8E,QAAA,eACEhF,IAAA,SAAMwE,KAAK,CAAE,CAAEM,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CAAC,eAAa,CAAM,CAAC,cACzE9E,KAAA,MAAGsE,KAAK,CAAE,CAAE2D,MAAM,CAAE,OAAO,CAAEC,UAAU,CAAE,KAAK,CAAEzD,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,EAChEvE,gBAAgB,CAACgI,KAAK,CAAC,GAAC,CAAChI,gBAAgB,CAACiI,MAAM,EAChD,CAAC,EACD,CAAC,cACNxI,KAAA,QAAA8E,QAAA,eACEhF,IAAA,SAAMwE,KAAK,CAAE,CAAEM,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CAAC,SAAO,CAAM,CAAC,cACnEhF,IAAA,MAAGwE,KAAK,CAAE,CAAE2D,MAAM,CAAE,OAAO,CAAEC,UAAU,CAAE,KAAM,CAAE,CAAApD,QAAA,cAC/ChF,IAAA,SAAMwE,KAAK,CAAE,CACXC,OAAO,CAAE,SAAS,CAClBI,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,MAAM,CAChBJ,UAAU,CAAEnC,WAAW,CAAG,SAAS,CAAG,SAAS,CAC/CoC,KAAK,CAAEpC,WAAW,CAAG,SAAS,CAAG,SACnC,CAAE,CAAAyC,QAAA,CACCzC,WAAW,CAAG,aAAa,CAAG,cAAc,CACzC,CAAC,CACN,CAAC,EACD,CAAC,EACH,CAAC,EACH,CAAC,cAGNvC,IAAA,QAAKwE,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAO,QAAA,CAC7B,CAACzC,WAAW,cACX;AACAvC,IAAA,SAAM2I,QAAQ,CAAGC,CAAC,EAAK,CAAEA,CAAC,CAACC,cAAc,CAAC,CAAC,CAAEzD,kBAAkB,CAAC,CAAC,CAAE,CAAE,CAAAJ,QAAA,cACnE9E,KAAA,QAAKsE,KAAK,CAAE,CAAE+C,OAAO,CAAE,MAAM,CAAEgB,GAAG,CAAE,MAAO,CAAE,CAAAvD,QAAA,eAE3C9E,KAAA,QAAKsE,KAAK,CAAE,CAAE+C,OAAO,CAAE,MAAM,CAAEe,mBAAmB,CAAE,SAAS,CAAEC,GAAG,CAAE,MAAO,CAAE,CAAAvD,QAAA,eAC3E9E,KAAA,QAAA8E,QAAA,eACEhF,IAAA,UAAOwE,KAAK,CAAE,CACZ+C,OAAO,CAAE,OAAO,CAChBO,YAAY,CAAE,KAAK,CACnBhD,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBzD,KAAK,CAAE,SACT,CAAE,CAAAK,QAAA,CAAC,8BAEH,CAAO,CAAC,cACRhF,IAAA,UACEkF,IAAI,CAAC,MAAM,CACX4D,KAAK,CAAE3H,SAAS,CAACE,WAAY,CAC7B0H,QAAQ,CAAGH,CAAC,EAAKxH,YAAY,CAAC,CAAE,GAAGD,SAAS,CAAEE,WAAW,CAAEuH,CAAC,CAACI,MAAM,CAACF,KAAM,CAAC,CAAE,CAC7EtE,KAAK,CAAE,CACLoD,KAAK,CAAE,MAAM,CACbnD,OAAO,CAAE,MAAM,CACfG,MAAM,CAAE,mBAAmB,CAC3BC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,MACZ,CAAE,CACH,CAAC,EACC,CAAC,cACN5E,KAAA,QAAA8E,QAAA,eACEhF,IAAA,UAAOwE,KAAK,CAAE,CACZ+C,OAAO,CAAE,OAAO,CAChBO,YAAY,CAAE,KAAK,CACnBhD,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBzD,KAAK,CAAE,SACT,CAAE,CAAAK,QAAA,CAAC,uBAEH,CAAO,CAAC,cACRhF,IAAA,UACEkF,IAAI,CAAC,MAAM,CACX4D,KAAK,CAAE3H,SAAS,CAACM,UAAW,CAC5BsH,QAAQ,CAAGH,CAAC,EAAKxH,YAAY,CAAC,CAAE,GAAGD,SAAS,CAAEM,UAAU,CAAEmH,CAAC,CAACI,MAAM,CAACF,KAAM,CAAC,CAAE,CAC5EtE,KAAK,CAAE,CACLoD,KAAK,CAAE,MAAM,CACbnD,OAAO,CAAE,MAAM,CACfG,MAAM,CAAE,mBAAmB,CAC3BC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,MACZ,CAAE,CACH,CAAC,EACC,CAAC,EACH,CAAC,cAEN5E,KAAA,QAAA8E,QAAA,eACEhF,IAAA,UAAOwE,KAAK,CAAE,CACZ+C,OAAO,CAAE,OAAO,CAChBO,YAAY,CAAE,KAAK,CACnBhD,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBzD,KAAK,CAAE,SACT,CAAE,CAAAK,QAAA,CAAC,iDAEH,CAAO,CAAC,cACR9E,KAAA,QAAKsE,KAAK,CAAE,CACVC,OAAO,CAAE,MAAM,CACfG,MAAM,CAAE,mBAAmB,CAC3BC,YAAY,CAAE,KAAK,CACnBoE,eAAe,CAAE,SAAS,CAC1BnE,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBzD,KAAK,CAAE,SACT,CAAE,CAAAK,QAAA,EACC,CAACvE,gBAAgB,CAAC6E,WAAW,EAAI,CAAC,EAAEE,cAAc,CAAC,CAAC,CAAC,KACxD,EAAK,CAAC,EACH,CAAC,cAGNtF,KAAA,QAAA8E,QAAA,eACEhF,IAAA,UAAOwE,KAAK,CAAE,CACZ+C,OAAO,CAAE,OAAO,CAChBO,YAAY,CAAE,KAAK,CACnBhD,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBzD,KAAK,CAAE,SACT,CAAE,CAAAK,QAAA,CAAC,2CAEH,CAAO,CAAC,cACRhF,IAAA,UACEkF,IAAI,CAAC,QAAQ,CACb4D,KAAK,CAAE3H,SAAS,CAACU,iBAAkB,CACnCkH,QAAQ,CAAGH,CAAC,EAAK,CACf,KAAM,CAAAM,OAAO,CAAGN,CAAC,CAACI,MAAM,CAACF,KAAK,CAC9B1H,YAAY,CAAC,CAAE,GAAGD,SAAS,CAAEU,iBAAiB,CAAEqH,OAAQ,CAAC,CAAC,CAC5D,CAAE,CACFC,WAAW,CAAE,WAAW,CAAC1I,gBAAgB,CAAC6E,WAAW,EAAI,CAAC,EAAEE,cAAc,CAAC,CAAC,KAAM,CAClF4D,QAAQ,MACRC,GAAG,CAAE5I,gBAAgB,CAAC6E,WAAW,EAAI,CAAE,CACvCd,KAAK,CAAE,CACLoD,KAAK,CAAE,MAAM,CACbnD,OAAO,CAAE,MAAM,CACfG,MAAM,CAAE,mBAAmB,CAC3BC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,MACZ,CAAE,CACH,CAAC,CACD3D,SAAS,CAACU,iBAAiB,EAAI0D,QAAQ,CAACpE,SAAS,CAACU,iBAAiB,CAAC,EAAIpB,gBAAgB,CAAC6E,WAAW,EAAI,CAAC,CAAC,eACzGpF,KAAA,QAAKsE,KAAK,CAAE,CACV8E,SAAS,CAAE,KAAK,CAChB7E,OAAO,CAAE,KAAK,CACdwE,eAAe,CAAE,SAAS,CAC1BpE,YAAY,CAAE,KAAK,CACnBF,KAAK,CAAE,SAAS,CAChBG,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KACd,CAAE,CAAApD,QAAA,EAAC,mDACsC,CAAC,CAACvE,gBAAgB,CAAC6E,WAAW,EAAI,CAAC,EAAEE,cAAc,CAAC,CAAC,CAAC,KAC/F,EAAK,CACN,EACE,CAAC,cAGNtF,KAAA,QAAA8E,QAAA,eACEhF,IAAA,UAAOwE,KAAK,CAAE,CACZ+C,OAAO,CAAE,OAAO,CAChBO,YAAY,CAAE,KAAK,CACnBhD,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBzD,KAAK,CAAE,SACT,CAAE,CAAAK,QAAA,CAAC,sBAEH,CAAO,CAAC,cACRhF,IAAA,UACEkF,IAAI,CAAC,MAAM,CACX4D,KAAK,CAAE3H,SAAS,CAACW,OAAQ,CACzBiH,QAAQ,CAAGH,CAAC,EAAKxH,YAAY,CAAC,CAAE,GAAGD,SAAS,CAAEW,OAAO,CAAE8G,CAAC,CAACI,MAAM,CAACF,KAAM,CAAC,CAAE,CACzEK,WAAW,CAAC,6BAA6B,CACzCC,QAAQ,MACR5E,KAAK,CAAE,CACLoD,KAAK,CAAE,MAAM,CACbnD,OAAO,CAAE,MAAM,CACfG,MAAM,CAAE,mBAAmB,CAC3BC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,MACZ,CAAE,CACH,CAAC,EACC,CAAC,cAGN5E,KAAA,QAAA8E,QAAA,eACEhF,IAAA,UAAOwE,KAAK,CAAE,CACZ+C,OAAO,CAAE,OAAO,CAChBO,YAAY,CAAE,KAAK,CACnBhD,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBzD,KAAK,CAAE,SACT,CAAE,CAAAK,QAAA,CAAC,+BAEH,CAAO,CAAC,cACR9E,KAAA,WACE4I,KAAK,CAAE3H,SAAS,CAACY,WAAY,CAC7BgH,QAAQ,CAAGH,CAAC,EAAKxH,YAAY,CAAC,CAAE,GAAGD,SAAS,CAAEY,WAAW,CAAE6G,CAAC,CAACI,MAAM,CAACF,KAAM,CAAC,CAAE,CAC7EtE,KAAK,CAAE,CACLoD,KAAK,CAAE,MAAM,CACbnD,OAAO,CAAE,MAAM,CACfG,MAAM,CAAE,mBAAmB,CAC3BC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,MACZ,CAAE,CAAAE,QAAA,eAEFhF,IAAA,WAAQ8I,KAAK,CAAC,SAAS,CAAA9D,QAAA,CAAC,oBAAkB,CAAQ,CAAC,cACnDhF,IAAA,WAAQ8I,KAAK,CAAC,YAAY,CAAA9D,QAAA,CAAC,YAAU,CAAQ,CAAC,cAC9ChF,IAAA,WAAQ8I,KAAK,CAAC,eAAe,CAAA9D,QAAA,CAAC,eAAa,CAAQ,CAAC,cACpDhF,IAAA,WAAQ8I,KAAK,CAAC,UAAU,CAAA9D,QAAA,CAAC,sBAAoB,CAAQ,CAAC,cACtDhF,IAAA,WAAQ8I,KAAK,CAAC,OAAO,CAAA9D,QAAA,CAAC,qBAAmB,CAAQ,CAAC,cAClDhF,IAAA,WAAQ8I,KAAK,CAAC,MAAM,CAAA9D,QAAA,CAAC,MAAI,CAAQ,CAAC,EAC5B,CAAC,EACN,CAAC,cAGN9E,KAAA,QAAA8E,QAAA,eACEhF,IAAA,UAAOwE,KAAK,CAAE,CACZ+C,OAAO,CAAE,OAAO,CAChBO,YAAY,CAAE,KAAK,CACnBhD,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBzD,KAAK,CAAE,SACT,CAAE,CAAAK,QAAA,CAAC,uCAEH,CAAO,CAAC,cACRhF,IAAA,aACE8I,KAAK,CAAE3H,SAAS,CAACa,aAAc,CAC/B+G,QAAQ,CAAGH,CAAC,EAAKxH,YAAY,CAAC,CAAE,GAAGD,SAAS,CAAEa,aAAa,CAAE4G,CAAC,CAACI,MAAM,CAACF,KAAM,CAAC,CAAE,CAC/EK,WAAW,CAAC,mCAAmC,CAC/CI,IAAI,CAAE,CAAE,CACR/E,KAAK,CAAE,CACLoD,KAAK,CAAE,MAAM,CACbnD,OAAO,CAAE,MAAM,CACfG,MAAM,CAAE,mBAAmB,CAC3BC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,MAAM,CAChB0E,MAAM,CAAE,MACV,CAAE,CACH,CAAC,EACC,CAAC,cAINxJ,IAAA,WACEkF,IAAI,CAAC,QAAQ,CACbuE,QAAQ,CACN9I,OAAO,EACP,CAACQ,SAAS,CAACU,iBAAiB,EAC5B,CAACV,SAAS,CAACW,OAAO,EACjByD,QAAQ,CAACpE,SAAS,CAACU,iBAAiB,CAAC,EAAIpB,gBAAgB,CAAC6E,WAAW,EAAI,CAAC,CAC5E,CACDd,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE/D,OAAO,EAAK4E,QAAQ,CAACpE,SAAS,CAACU,iBAAiB,CAAC,EAAIpB,gBAAgB,CAAC6E,WAAW,EAAI,CAAC,CAAE,CAChG,SAAS,CACT,mDAAmD,CACvDX,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBrD,MAAM,CAAEpE,OAAO,EAAK4E,QAAQ,CAACpE,SAAS,CAACU,iBAAiB,CAAC,EAAIpB,gBAAgB,CAAC6E,WAAW,EAAI,CAAC,CAAE,CAC5F,aAAa,CACb,SAAS,CACbiC,OAAO,CAAE,MAAM,CACfE,UAAU,CAAE,QAAQ,CACpBD,cAAc,CAAE,QAAQ,CACxBe,GAAG,CAAE,MAAM,CACXmB,UAAU,CAAE,gBAAgB,CAC5BrB,OAAO,CAAE1H,OAAO,EAAK4E,QAAQ,CAACpE,SAAS,CAACU,iBAAiB,CAAC,EAAIpB,gBAAgB,CAAC6E,WAAW,EAAI,CAAC,CAAE,CAC7F,GAAG,CACH,CACN,CAAE,CACFqE,YAAY,CAAGf,CAAC,EAAK,CACnB,GAAI,CAACjI,OAAO,EAAI,EAAE4E,QAAQ,CAACpE,SAAS,CAACU,iBAAiB,CAAC,EAAIpB,gBAAgB,CAAC6E,WAAW,EAAI,CAAC,CAAC,CAAC,CAAE,CAC9FsD,CAAC,CAACgB,aAAa,CAACpF,KAAK,CAACqF,SAAS,CAAG,aAAa,CACjD,CACF,CAAE,CACFC,YAAY,CAAGlB,CAAC,EAAKA,CAAC,CAACgB,aAAa,CAACpF,KAAK,CAACqF,SAAS,CAAG,UAAW,CAAA7E,QAAA,CAEjErE,OAAO,cACNT,KAAA,CAAAE,SAAA,EAAA4E,QAAA,eACEhF,IAAA,SAAMwE,KAAK,CAAE,CACXoD,KAAK,CAAE,MAAM,CACbmC,MAAM,CAAE,MAAM,CACdnF,MAAM,CAAE,iBAAiB,CACzBoF,SAAS,CAAE,uBAAuB,CAClCnF,YAAY,CAAE,KAAK,CACnBoF,SAAS,CAAE,yBACb,CAAE,CAAO,CAAC,eAEZ,EAAE,CAAC,cAEHjK,IAAA,CAAAI,SAAA,EAAA4E,QAAA,CAAE,4BAEF,CAAE,CACH,CACK,CAAC,EACN,CAAC,CACF,CAAC,cAEP;AACA9E,KAAA,QAAA8E,QAAA,eACE9E,KAAA,QAAKsE,KAAK,CAAE,CACVC,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,SAAS,CACrBG,YAAY,CAAE,KAAK,CACnBiD,YAAY,CAAE,MAChB,CAAE,CAAA9C,QAAA,eACAhF,IAAA,OAAIwE,KAAK,CAAE,CACT2D,MAAM,CAAE,YAAY,CACpBxD,KAAK,CAAE,SAAS,CAChBG,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KACd,CAAE,CAAApD,QAAA,CAAC,6BAEH,CAAI,CAAC,cACL9E,KAAA,QAAKsE,KAAK,CAAE,CAAE+C,OAAO,CAAE,MAAM,CAAEgB,GAAG,CAAE,MAAO,CAAE,CAAAvD,QAAA,eAC3C9E,KAAA,QAAA8E,QAAA,eACEhF,IAAA,SAAMwE,KAAK,CAAE,CAAEM,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CAAC,UAAQ,CAAM,CAAC,cACpEhF,IAAA,MAAGwE,KAAK,CAAE,CAAE2D,MAAM,CAAE,OAAO,CAAEC,UAAU,CAAE,KAAK,CAAEtD,QAAQ,CAAE,MAAO,CAAE,CAAAE,QAAA,CAChEzC,WAAW,CAACT,OAAO,CACnB,CAAC,EACD,CAAC,cACN5B,KAAA,QAAKsE,KAAK,CAAE,CAAE+C,OAAO,CAAE,MAAM,CAAEe,mBAAmB,CAAE,SAAS,CAAEC,GAAG,CAAE,MAAO,CAAE,CAAAvD,QAAA,eAC3E9E,KAAA,QAAA8E,QAAA,eACEhF,IAAA,SAAMwE,KAAK,CAAE,CAAEM,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CAAC,iBAAe,CAAM,CAAC,cAC3EhF,IAAA,MAAGwE,KAAK,CAAE,CAAE2D,MAAM,CAAE,OAAO,CAAEC,UAAU,CAAE,KAAM,CAAE,CAAApD,QAAA,CAC9CzC,WAAW,CAACd,UAAU,CACtB,CAAC,EACD,CAAC,cACNvB,KAAA,QAAA8E,QAAA,eACEhF,IAAA,SAAMwE,KAAK,CAAE,CAAEM,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CAAC,eAAa,CAAM,CAAC,cACzE9E,KAAA,MAAGsE,KAAK,CAAE,CAAE2D,MAAM,CAAE,OAAO,CAAEC,UAAU,CAAE,KAAM,CAAE,CAAApD,QAAA,EAC9CzC,WAAW,CAACV,iBAAiB,CAAC,KACjC,EAAG,CAAC,EACD,CAAC,EACH,CAAC,CACLU,WAAW,CAACP,aAAa,eACxB9B,KAAA,QAAA8E,QAAA,eACEhF,IAAA,SAAMwE,KAAK,CAAE,CAAEM,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CAAC,gBAAc,CAAM,CAAC,cAC1EhF,IAAA,MAAGwE,KAAK,CAAE,CAAE2D,MAAM,CAAE,OAAO,CAAErD,QAAQ,CAAE,MAAO,CAAE,CAAAE,QAAA,CAC7CzC,WAAW,CAACP,aAAa,CACzB,CAAC,EACD,CACN,EACE,CAAC,EACH,CAAC,cAENhC,IAAA,WACE6D,OAAO,CAAE4C,oBAAqB,CAC9BgD,QAAQ,CAAE9I,OAAQ,CAClB6D,KAAK,CAAE,CACLoD,KAAK,CAAE,MAAM,CACbnD,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE/D,OAAO,CAAG,SAAS,CAAG,mDAAmD,CACrFgE,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBrD,MAAM,CAAEpE,OAAO,CAAG,aAAa,CAAG,SAAS,CAC3C4G,OAAO,CAAE,MAAM,CACfE,UAAU,CAAE,QAAQ,CACpBD,cAAc,CAAE,QAAQ,CACxBe,GAAG,CAAE,MACP,CAAE,CAAAvD,QAAA,CAEDrE,OAAO,CAAG,gBAAgB,CAAG,oBAAoB,CAC5C,CAAC,EACN,CACN,CACE,CAAC,EACH,CAAC,cAENX,IAAA,UAAAgF,QAAA,CAAQ;AACd;AACA;AACA;AACA;AACA,OAAO,CAAQ,CAAC,CAET/C,kBAAkB,eACjBjC,IAAA,QAAKwE,KAAK,CAAE,CACV0C,QAAQ,CAAE,OAAO,CACjBC,GAAG,CAAE,CAAC,CACNC,IAAI,CAAE,CAAC,CACPC,KAAK,CAAE,CAAC,CACRC,MAAM,CAAE,CAAC,CACT5C,UAAU,CAAE,oBAAoB,CAChC6C,OAAO,CAAE,MAAM,CACfC,cAAc,CAAE,QAAQ,CACxBC,UAAU,CAAE,QAAQ,CACpBC,MAAM,CAAE,KAAK,CACbjD,OAAO,CAAE,MACX,CAAE,CAAAO,QAAA,cACA9E,KAAA,QAAKsE,KAAK,CAAE,CACVE,UAAU,CAAE,OAAO,CACnBG,YAAY,CAAE,MAAM,CACpB+C,KAAK,CAAE,MAAM,CACbD,QAAQ,CAAE,OAAO,CACjBM,SAAS,CAAE,6BACb,CAAE,CAAAjD,QAAA,eAEAhF,IAAA,QAAKwE,KAAK,CAAE,CACVC,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,mDAAmD,CAC/DG,YAAY,CAAE,eAAe,CAC7BF,KAAK,CAAE,OACT,CAAE,CAAAK,QAAA,cACAhF,IAAA,OAAIwE,KAAK,CAAE,CACT2D,MAAM,CAAE,CAAC,CACTrD,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBb,OAAO,CAAE,MAAM,CACfE,UAAU,CAAE,QAAQ,CACpBc,GAAG,CAAE,MACP,CAAE,CAAAvD,QAAA,CAAC,8BAEH,CAAI,CAAC,CACF,CAAC,cAGN9E,KAAA,QAAKsE,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAO,QAAA,eAE9B9E,KAAA,QAAKsE,KAAK,CAAE,CACVE,UAAU,CAAE,SAAS,CACrBD,OAAO,CAAE,MAAM,CACfI,YAAY,CAAE,KAAK,CACnBiD,YAAY,CAAE,MAChB,CAAE,CAAA9C,QAAA,eACA9E,KAAA,QAAKsE,KAAK,CAAE,CAAEsD,YAAY,CAAE,MAAO,CAAE,CAAA9C,QAAA,eACnChF,IAAA,SAAMwE,KAAK,CAAE,CAAEM,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CAAC,UAAQ,CAAM,CAAC,cACpEhF,IAAA,QAAKwE,KAAK,CAAE,CAAE4D,UAAU,CAAE,KAAK,CAAEtD,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CACnEzC,WAAW,CAACT,OAAO,CACjB,CAAC,EACH,CAAC,cACN5B,KAAA,QAAKsE,KAAK,CAAE,CAAE+C,OAAO,CAAE,MAAM,CAAEe,mBAAmB,CAAE,SAAS,CAAEC,GAAG,CAAE,MAAO,CAAE,CAAAvD,QAAA,eAC3E9E,KAAA,QAAA8E,QAAA,eACEhF,IAAA,SAAMwE,KAAK,CAAE,CAAEM,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CAAC,iBAAe,CAAM,CAAC,cAC3EhF,IAAA,QAAKwE,KAAK,CAAE,CAAE4D,UAAU,CAAE,KAAK,CAAEtD,QAAQ,CAAE,MAAO,CAAE,CAAAE,QAAA,CACjDzC,WAAW,CAACd,UAAU,CACpB,CAAC,EACH,CAAC,cACNvB,KAAA,QAAA8E,QAAA,eACEhF,IAAA,SAAMwE,KAAK,CAAE,CAAEM,QAAQ,CAAE,MAAM,CAAEH,KAAK,CAAE,SAAU,CAAE,CAAAK,QAAA,CAAC,eAAa,CAAM,CAAC,cACzE9E,KAAA,QAAKsE,KAAK,CAAE,CAAE4D,UAAU,CAAE,KAAK,CAAEtD,QAAQ,CAAE,MAAO,CAAE,CAAAE,QAAA,EACjDzC,WAAW,CAACV,iBAAiB,CAAC2D,cAAc,CAAC,CAAC,CAAC,KAClD,EAAK,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,cAGNtF,KAAA,QAAA8E,QAAA,eACEhF,IAAA,UAAOwE,KAAK,CAAE,CACZ+C,OAAO,CAAE,OAAO,CAChBO,YAAY,CAAE,KAAK,CACnBhD,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBzD,KAAK,CAAE,SACT,CAAE,CAAAK,QAAA,CAAC,gDAEH,CAAO,CAAC,cACRhF,IAAA,UACEkF,IAAI,CAAC,QAAQ,CACb4D,KAAK,CAAE3G,kBAAmB,CAC1B4G,QAAQ,CAAGH,CAAC,EAAK,CACfxG,qBAAqB,CAACwG,CAAC,CAACI,MAAM,CAACF,KAAK,CAAC,CACrCxG,iBAAiB,CAAC,EAAE,CAAC,CACvB,CAAE,CACF6G,WAAW,CAAE,WAAW,CAAC5G,WAAW,CAACV,iBAAiB,CAAG,CAAC,EAAE2D,cAAc,CAAC,CAAC,KAAM,CAClF6D,GAAG,CAAE9G,WAAW,CAACV,iBAAiB,CAAG,CAAE,CACvC2C,KAAK,CAAE,CACLoD,KAAK,CAAE,MAAM,CACbnD,OAAO,CAAE,MAAM,CACfG,MAAM,CAAEvC,cAAc,CAAG,mBAAmB,CAAG,mBAAmB,CAClEwC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBa,eAAe,CAAE5G,cAAc,CAAG,SAAS,CAAG,OAChD,CAAE,CACF6H,SAAS,MACV,CAAC,CAGD7H,cAAc,eACbnC,KAAA,QAAKsE,KAAK,CAAE,CACV8E,SAAS,CAAE,KAAK,CAChB7E,OAAO,CAAE,KAAK,CACdwE,eAAe,CAAE,SAAS,CAC1BpE,YAAY,CAAE,KAAK,CACnBF,KAAK,CAAE,SAAS,CAChBG,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KACd,CAAE,CAAApD,QAAA,EAAC,eACE,CAAC3C,cAAc,EACf,CACN,CAGAF,kBAAkB,EAAIoD,QAAQ,CAACpD,kBAAkB,CAAC,CAAGI,WAAW,CAACV,iBAAiB,eACjF3B,KAAA,QAAKsE,KAAK,CAAE,CACV8E,SAAS,CAAE,KAAK,CAChB7E,OAAO,CAAE,MAAM,CACfwE,eAAe,CAAE,SAAS,CAC1BpE,YAAY,CAAE,KAAK,CACnBF,KAAK,CAAE,SAAS,CAChBG,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBP,SAAS,CAAE,QACb,CAAE,CAAA7C,QAAA,EAAC,oCACuB,CAAC,CAACO,QAAQ,CAACpD,kBAAkB,CAAC,CAAGI,WAAW,CAACV,iBAAiB,EAAE2D,cAAc,CAAC,CAAC,CAAC,KAC3G,EAAK,CACN,EACE,CAAC,cAGNtF,KAAA,QAAKsE,KAAK,CAAE,CACV+C,OAAO,CAAE,MAAM,CACfe,mBAAmB,CAAE,SAAS,CAC9BC,GAAG,CAAE,MAAM,CACXe,SAAS,CAAE,MACb,CAAE,CAAAtE,QAAA,eACAhF,IAAA,WACE6D,OAAO,CAAEA,CAAA,GAAM,CACb3B,qBAAqB,CAAC,KAAK,CAAC,CAC5BE,qBAAqB,CAAC,EAAE,CAAC,CACzBE,iBAAiB,CAAC,EAAE,CAAC,CACvB,CAAE,CACFkC,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,SAAS,CACrBC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBrD,MAAM,CAAE,SACV,CAAE,CAAAC,QAAA,CACH,UAED,CAAQ,CAAC,cACThF,IAAA,WACE6D,OAAO,CAAE6C,uBAAwB,CACjC+C,QAAQ,CAAE,CAACtH,kBAAkB,EAAIoD,QAAQ,CAACpD,kBAAkB,CAAC,EAAII,WAAW,CAACV,iBAAkB,CAC/F2C,KAAK,CAAE,CACLC,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,CAACvC,kBAAkB,EAAIoD,QAAQ,CAACpD,kBAAkB,CAAC,EAAII,WAAW,CAACV,iBAAiB,CAC5F,SAAS,CACT,mDAAmD,CACvD8C,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,QAAQ,CAAE,MAAM,CAChBsD,UAAU,CAAE,KAAK,CACjBrD,MAAM,CAAE,CAAC5C,kBAAkB,EAAIoD,QAAQ,CAACpD,kBAAkB,CAAC,EAAII,WAAW,CAACV,iBAAiB,CACxF,aAAa,CACb,SAAS,CACbwG,OAAO,CAAE,CAAClG,kBAAkB,EAAIoD,QAAQ,CAACpD,kBAAkB,CAAC,EAAII,WAAW,CAACV,iBAAiB,CACzF,GAAG,CACH,CACN,CAAE,CAAAmD,QAAA,CACH,8BAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,EACH,CAAC,CACH,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAA3E,sBAAsB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
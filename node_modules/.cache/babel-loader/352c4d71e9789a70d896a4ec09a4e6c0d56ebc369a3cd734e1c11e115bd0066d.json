{"ast":null,"code":"// src/components/VehicleMaintenanceModule.js\nimport React,{useState,useEffect,useCallback}from'react';import{pdfExportService}from'../services/pdfExportService';import{database,storage,auth}from'../config/firebase';import{ref as databaseRef,push,update,onValue,off,set as databaseSet,get,remove}from'firebase/database';import{ref as storageRef,uploadBytes,getDownloadURL,deleteObject}from'firebase/storage';import{cloudinaryConfig}from'../config/cloudinary';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const VehicleMaintenanceModule=_ref=>{let{vehiculos,currentUser,isMobile}=_ref;// Estados principales\nconst[searchPatente,setSearchPatente]=useState('');const[searchFechaDesde,setSearchFechaDesde]=useState('');const[searchFechaHasta,setSearchFechaHasta]=useState('');const[filteredHistory,setFilteredHistory]=useState([]);const[selectedVehicle,setSelectedVehicle]=useState(null);const[maintenanceHistory,setMaintenanceHistory]=useState([]);const[showMaintenanceForm,setShowMaintenanceForm]=useState(false);const[loading,setLoading]=useState(false);const[message,setMessage]=useState({type:'',text:''});const[uploadingPhotos,setUploadingPhotos]=useState(false);const[uploadProgress,setUploadProgress]=useState(0);// Estados para gestiÃ³n de elementos dinÃ¡micos\nconst[inspectionItems,setInspectionItems]=useState([]);const[workItems,setWorkItems]=useState([]);const[showElementsManager,setShowElementsManager]=useState(false);const[activeTab,setActiveTab]=useState('inspection');// 'inspection' o 'works'\nconst[elementFilter,setElementFilter]=useState('');const[showNewElementForm,setShowNewElementForm]=useState(false);// Estado para nuevo elemento\nconst[newElement,setNewElement]=useState({code:'',name:'',detail:'',type:'inspection',// 'inspection' o 'work'\nrequiresObservation:true});// Estado del formulario de mantenimiento\nconst[maintenanceForm,setMaintenanceForm]=useState({fecha:new Date().toISOString().split('T')[0],hora:new Date().toTimeString().slice(0,5),tipoMantenimiento:'preventivo',kilometraje:'',horasUso:'',observacionesGenerales:'',proximoMantenimientoKm:'',proximoMantenimientoFecha:'',realizadoPor:currentUser.name||currentUser.email,tallerResponsable:'',costoMantenimiento:0,fotos:[],inspectionData:{},// Datos dinÃ¡micos de inspecciÃ³n\nworkData:{},// Datos dinÃ¡micos de trabajos\nserviciosCatalogo:[],presupuestoId:'',// ID del presupuesto asociado\npresupuestoData:null// Datos del presupuesto asociado\n});// Estado para presupuestos disponibles\nconst[presupuestosDisponibles,setPresupuestosDisponibles]=useState([]);// Cargar elementos de configuraciÃ³n al iniciar\nuseEffect(()=>{loadConfigElements();loadPresupuestos();},[selectedVehicle]);// Cargar presupuestos disponibles para el vehÃ­culo seleccionado\n// Cargar presupuestos disponibles para el vehÃ­culo seleccionado\nconst loadPresupuestos=async()=>{if(!selectedVehicle||!selectedVehicle.patente)return;try{const presupuestosRef=databaseRef(database,'mantenimientos');onValue(presupuestosRef,snapshot=>{const data=snapshot.val();if(data){const presupuestos=Object.entries(data).map(_ref2=>{let[id,presupuesto]=_ref2;return{id,...presupuesto};})// Filtrar por patente en vez de ID\n.filter(p=>p.vehiculoPatente===selectedVehicle.patente).sort((a,b)=>new Date(b.fechaSolicitud||b.fechaMantenimiento)-new Date(a.fechaSolicitud||a.fechaMantenimiento));setPresupuestosDisponibles(presupuestos);}else{setPresupuestosDisponibles([]);}});}catch(error){console.error('Error al cargar presupuestos:',error);}};// Manejar la selecciÃ³n de un presupuesto\nconst handlePresupuestoSelect=presupuestoId=>{const presupuestoSeleccionado=presupuestosDisponibles.find(p=>p.id===presupuestoId);if(presupuestoSeleccionado){// Autocompletar datos del formulario con la informaciÃ³n del presupuesto\nsetMaintenanceForm(prev=>{var _presupuestoSeleccion;return{...prev,presupuestoId:presupuestoId,presupuestoData:presupuestoSeleccionado,costoMantenimiento:((_presupuestoSeleccion=presupuestoSeleccionado.totales)===null||_presupuestoSeleccion===void 0?void 0:_presupuestoSeleccion.total)||0,serviciosCatalogo:presupuestoSeleccionado.serviciosPreventivos||[],tipoMantenimiento:'preventivo'// Por defecto si viene de presupuesto\n};});setMessage({type:'success',text:`âœ… Presupuesto #${presupuestoId.substring(0,8).toUpperCase()} asociado correctamente`});}};// Cargar elementos de inspecciÃ³n y trabajo desde Firebase\nconst loadConfigElements=async()=>{try{// Cargar elementos de inspecciÃ³n\nconst inspectionRef=databaseRef(database,'configuracion/elementosInspeccion');onValue(inspectionRef,snapshot=>{const data=snapshot.val();if(data){const items=Object.entries(data).map(_ref3=>{let[id,item]=_ref3;return{id,...item};});setInspectionItems(items);}});// Cargar elementos de trabajo\nconst workRef=databaseRef(database,'configuracion/elementosTrabajo');onValue(workRef,snapshot=>{const data=snapshot.val();if(data){const items=Object.entries(data).map(_ref4=>{let[id,item]=_ref4;return{id,...item};});setWorkItems(items);}});}catch(error){console.error('Error al cargar elementos de configuraciÃ³n:',error);}};// Guardar nuevo elemento\nconst handleSaveNewElement=async()=>{if(!newElement.code||!newElement.name){setMessage({type:'error',text:'âŒ El cÃ³digo y nombre son obligatorios'});return;}try{const elementData={code:newElement.code.toUpperCase(),name:newElement.name,detail:newElement.detail,requiresObservation:newElement.type==='inspection'?newElement.requiresObservation:false,createdBy:currentUser.uid,createdAt:new Date().toISOString()};const refPath=newElement.type==='inspection'?'configuracion/elementosInspeccion':'configuracion/elementosTrabajo';const elementRef=databaseRef(database,refPath);await push(elementRef,elementData);setMessage({type:'success',text:`âœ… Elemento ${newElement.name} creado exitosamente`});// Resetear formulario\nsetNewElement({code:'',name:'',detail:'',type:activeTab==='inspection'?'inspection':'work',requiresObservation:true});setShowNewElementForm(false);}catch(error){console.error('Error al guardar elemento:',error);setMessage({type:'error',text:'âŒ Error al guardar el elemento'});}};// Eliminar elemento\nconst handleDeleteElement=async(elementId,type)=>{if(!window.confirm('Â¿EstÃ¡ seguro de eliminar este elemento?')){return;}try{const refPath=type==='inspection'?`configuracion/elementosInspeccion/${elementId}`:`configuracion/elementosTrabajo/${elementId}`;await remove(databaseRef(database,refPath));setMessage({type:'success',text:'âœ… Elemento eliminado exitosamente'});}catch(error){console.error('Error al eliminar elemento:',error);setMessage({type:'error',text:'âŒ Error al eliminar el elemento'});}};// Filtrar elementos\nconst getFilteredElements=()=>{const elements=activeTab==='inspection'?inspectionItems:workItems;if(!elementFilter)return elements;return elements.filter(item=>item.name.toLowerCase().includes(elementFilter.toLowerCase())||item.code.toLowerCase().includes(elementFilter.toLowerCase())||item.detail&&item.detail.toLowerCase().includes(elementFilter.toLowerCase()));};// Actualizar datos del formulario cuando se marcan elementos\nconst handleInspectionChange=(itemCode,field,value)=>{setMaintenanceForm(prev=>({...prev,inspectionData:{...prev.inspectionData,[`${itemCode}_${field}`]:value}}));};const handleWorkChange=(itemCode,checked)=>{setMaintenanceForm(prev=>({...prev,workData:{...prev.workData,[itemCode]:checked}}));};useEffect(()=>{let filtered=[...maintenanceHistory];if(searchPatente){filtered=filtered.filter(m=>{var _m$vehiculoPatente,_m$vehiculoNombre;return((_m$vehiculoPatente=m.vehiculoPatente)===null||_m$vehiculoPatente===void 0?void 0:_m$vehiculoPatente.toLowerCase().includes(searchPatente.toLowerCase()))||((_m$vehiculoNombre=m.vehiculoNombre)===null||_m$vehiculoNombre===void 0?void 0:_m$vehiculoNombre.toLowerCase().includes(searchPatente.toLowerCase()));});}if(searchFechaDesde){filtered=filtered.filter(m=>new Date(m.fecha)>=new Date(searchFechaDesde));}if(searchFechaHasta){filtered=filtered.filter(m=>new Date(m.fecha)<=new Date(searchFechaHasta));}setFilteredHistory(filtered);},[maintenanceHistory,searchPatente,searchFechaDesde,searchFechaHasta,selectedVehicle]);useEffect(()=>{if(selectedVehicle){loadMaintenanceHistory(selectedVehicle.id);setSearchPatente('');setSearchFechaDesde('');setSearchFechaHasta('');}},[selectedVehicle]);const loadMaintenanceHistory=vehicleId=>{const historyRef=databaseRef(database,`mantenimientos/${vehicleId}`);const unsubscribe=onValue(historyRef,snapshot=>{const data=snapshot.val();if(data){const historyArray=Object.entries(data).map(_ref5=>{let[id,maintenance]=_ref5;return{id,...maintenance};}).sort((a,b)=>new Date(b.fecha)-new Date(a.fecha));setMaintenanceHistory(historyArray);setFilteredHistory(historyArray);}else{setMaintenanceHistory([]);setFilteredHistory([]);}});return()=>off(historyRef);};const handlePhotoUpload=async files=>{if(!files||files.length===0)return;setUploadingPhotos(true);const uploadedPhotos=[];try{for(let i=0;i<files.length;i++){const file=files[i];if(!file.type.startsWith('image/')){setMessage({type:'error',text:`El archivo ${file.name} no es una imagen vÃ¡lida`});continue;}if(file.size>10*1024*1024){setMessage({type:'error',text:`El archivo ${file.name} excede el lÃ­mite de 10MB`});continue;}const formData=new FormData();formData.append('file',file);formData.append('upload_preset','vehiculos_docs');const vehicleId=selectedVehicle.id;const timestamp=Date.now();const cleanFileName=file.name.split('.')[0].replace(/[^a-zA-Z0-9_-]/g,'_');formData.append('folder',`municipalidad/mantenimientos/${vehicleId}/${timestamp}`);formData.append('public_id',`${timestamp}_${cleanFileName}`);setUploadProgress(Math.round((i+1)/files.length*100));const response=await fetch(`https://api.cloudinary.com/v1_1/${cloudinaryConfig.cloudName}/image/upload`,{method:'POST',body:formData});const data=await response.json();uploadedPhotos.push({url:data.secure_url,publicId:data.public_id,nombre:file.name,fecha:new Date().toISOString(),tamaÃ±o:file.size});}setMaintenanceForm(prev=>({...prev,fotos:[...prev.fotos,...uploadedPhotos]}));setMessage({type:'success',text:`âœ… ${uploadedPhotos.length} foto(s) subidas exitosamente`});}catch(error){console.error('Error al subir fotos:',error);setMessage({type:'error',text:'âŒ Error al subir las fotos'});}finally{setUploadingPhotos(false);setUploadProgress(0);}};const handleDeletePhoto=index=>{setMaintenanceForm(prev=>({...prev,fotos:prev.fotos.filter((_,i)=>i!==index)}));};const handleSaveMaintenance=async e=>{e.preventDefault();setLoading(true);try{const fechaHoraCompleta=`${maintenanceForm.fecha}T${maintenanceForm.hora}:00`;const maintenanceData={...maintenanceForm,fechaCompleta:fechaHoraCompleta,vehiculoId:selectedVehicle.id,vehiculoNombre:selectedVehicle.nombre,vehiculoPatente:selectedVehicle.patente,fechaRegistro:new Date().toISOString(),registradoPor:currentUser.uid,registradoPorNombre:currentUser.name||currentUser.email,serviciosCatalogo:maintenanceForm.serviciosCatalogo||[],costoTotal:maintenanceForm.costoMantenimiento,presupuestoId:maintenanceForm.presupuestoId||null,// Guardar ID del presupuesto\npresupuestoAsociado:maintenanceForm.presupuestoId?true:false// Indicador\n};const maintenanceRef=databaseRef(database,`mantenimientos/${selectedVehicle.id}`);const newMaintenanceRef=push(maintenanceRef);await databaseSet(newMaintenanceRef,maintenanceData);const vehicleRef=databaseRef(database,`vehiculos/${selectedVehicle.id}`);await update(vehicleRef,{ultimoMantenimiento:maintenanceForm.fecha,kilometrajeUltimoMantenimiento:maintenanceForm.kilometraje||selectedVehicle.kilometraje,proximoMantenimiento:maintenanceForm.proximoMantenimientoFecha,kilometrajeProximoMantenimiento:maintenanceForm.proximoMantenimientoKm,ultimaActualizacion:new Date().toISOString()});setMessage({type:'success',text:'âœ… Mantenimiento registrado exitosamente'});resetForm();setShowMaintenanceForm(false);}catch(error){console.error('Error al guardar mantenimiento:',error);setMessage({type:'error',text:'âŒ Error al guardar el mantenimiento'});}finally{setLoading(false);}};const resetForm=()=>{setMaintenanceForm({fecha:new Date().toISOString().split('T')[0],hora:new Date().toTimeString().slice(0,5),tipoMantenimiento:'preventivo',kilometraje:'',horasUso:'',observacionesGenerales:'',proximoMantenimientoKm:'',proximoMantenimientoFecha:'',realizadoPor:currentUser.name||currentUser.email,tallerResponsable:'',costoMantenimiento:0,fotos:[],inspectionData:{},workData:{}});};const handleExportPDF=()=>{if(!selectedVehicle){setMessage({type:'error',text:'No hay vehÃ­culo seleccionado'});return;}if(maintenanceHistory.length===0){setMessage({type:'warning',text:'No hay historial de mantenimiento para exportar'});return;}try{pdfExportService.exportMaintenanceHistory(selectedVehicle,maintenanceHistory,currentUser);setMessage({type:'success',text:'PDF generado exitosamente'});}catch(error){console.error('Error al generar PDF:',error);setMessage({type:'error',text:'Error al generar el PDF'});}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:isMobile?'15px':'30px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'30px',display:'flex',justifyContent:'space-between',alignItems:'center',flexWrap:'wrap',gap:'15px'},children:/*#__PURE__*/_jsx(\"h1\",{style:{margin:0,color:'#1e293b',fontSize:isMobile?'24px':'28px',fontWeight:'600'},children:\"\\uD83D\\uDD27 M\\xF3dulo de Mantenimiento Vehicular\"})}),message.text&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'12px',borderRadius:'8px',marginBottom:'20px',background:message.type==='success'?'#dcfce7':message.type==='error'?'#fee2e2':'#dbeafe',border:`1px solid ${message.type==='success'?'#86efac':message.type==='error'?'#fecaca':'#93c5fd'}`,color:message.type==='success'?'#166534':message.type==='error'?'#991b1b':'#1e40af'},children:message.text}),showElementsManager&&/*#__PURE__*/_jsx(ElementsManagerModal,{show:showElementsManager,onClose:()=>setShowElementsManager(false),inspectionItems:inspectionItems,workItems:workItems,activeTab:activeTab,setActiveTab:setActiveTab,elementFilter:elementFilter,setElementFilter:setElementFilter,showNewElementForm:showNewElementForm,setShowNewElementForm:setShowNewElementForm,newElement:newElement,setNewElement:setNewElement,handleSaveNewElement:handleSaveNewElement,handleDeleteElement:handleDeleteElement,getFilteredElements:getFilteredElements,isMobile:isMobile}),!selectedVehicle?/*#__PURE__*/_jsx(VehicleSelectionGrid,{vehiculos:vehiculos,onSelectVehicle:setSelectedVehicle,isMobile:isMobile}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(VehicleInfoCard,{vehicle:selectedVehicle,isMobile:isMobile}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginBottom:'20px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowMaintenanceForm(!showMaintenanceForm),style:{padding:'12px 24px',background:'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',fontWeight:'500',cursor:'pointer',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},children:showMaintenanceForm?'âœ– Cancelar':'âž• Registrar Mantenimiento'}),/*#__PURE__*/_jsx(\"button\",{onClick:handleExportPDF,style:{padding:'12px 24px',background:'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',fontWeight:'500',cursor:'pointer',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},children:\"\\uD83D\\uDCC4 Exportar Historial PDF\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'10px',marginBottom:'20px',flexWrap:'wrap'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowElementsManager(true),style:{padding:'12px 24px',background:'linear-gradient(135deg, #6b7280 0%, #4b5563 100%)',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',fontWeight:'500',cursor:'pointer',boxShadow:'0 2px 4px rgba(0,0,0,0.1)'},children:\"\\u2699\\uFE0F Gesti\\xF3n de Elementos\"})}),showMaintenanceForm&&/*#__PURE__*/_jsx(MaintenanceForm,{form:maintenanceForm,setForm:setMaintenanceForm,onSubmit:handleSaveMaintenance,onPhotoUpload:handlePhotoUpload,onDeletePhoto:handleDeletePhoto,uploadingPhotos:uploadingPhotos,uploadProgress:uploadProgress,loading:loading,isMobile:isMobile,vehicle:selectedVehicle,currentUser:currentUser,inspectionItems:inspectionItems,workItems:workItems,handleInspectionChange:handleInspectionChange,handleWorkChange:handleWorkChange,presupuestosDisponibles:presupuestosDisponibles,handlePresupuestoSelect:handlePresupuestoSelect,setMessage:setMessage}),maintenanceHistory.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:'20px',marginBottom:'20px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 15px 0',fontSize:'18px',color:'#1f2937'},children:\"\\uD83D\\uDD0D Filtros de B\\xFAsqueda\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(4, 1fr)',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'13px',color:'#6b7280'},children:\"Buscar por Patente\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Ej: XX-XX-99\",value:searchPatente,onChange:e=>setSearchPatente(e.target.value),style:{width:'100%',padding:'8px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'13px',color:'#6b7280'},children:\"Fecha Desde\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:searchFechaDesde,onChange:e=>setSearchFechaDesde(e.target.value),style:{width:'100%',padding:'8px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'13px',color:'#6b7280'},children:\"Fecha Hasta\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:searchFechaHasta,onChange:e=>setSearchFechaHasta(e.target.value),style:{width:'100%',padding:'8px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'flex-end'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearchPatente('');setSearchFechaDesde('');setSearchFechaHasta('');},style:{width:'100%',padding:'8px',background:'#6b7280',color:'white',border:'none',borderRadius:'6px',fontSize:'14px',cursor:'pointer'},children:\"Limpiar Filtros\"})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'15px',padding:'10px',background:'#f9fafb',borderRadius:'6px',fontSize:'13px',color:'#6b7280'},children:[\"Mostrando \",filteredHistory.length,\" de \",maintenanceHistory.length,\" registros\"]})]}),/*#__PURE__*/_jsx(MaintenanceHistory,{history:filteredHistory,isMobile:isMobile,vehicle:selectedVehicle,currentUser:currentUser,inspectionItems:inspectionItems,workItems:workItems})]})]});};// Modal de GestiÃ³n de Elementos\nconst ElementsManagerModal=_ref6=>{let{show,onClose,inspectionItems,workItems,activeTab,setActiveTab,elementFilter,setElementFilter,showNewElementForm,setShowNewElementForm,newElement,setNewElement,handleSaveNewElement,handleDeleteElement,getFilteredElements,isMobile}=_ref6;const[editingElement,setEditingElement]=useState(null);const[editForm,setEditForm]=useState({code:'',name:'',detail:'',requiresObservation:false});if(!show)return null;// FunciÃ³n para iniciar ediciÃ³n\nconst startEditing=item=>{setEditingElement(item.id);setEditForm({code:item.code,name:item.name,detail:item.detail||'',requiresObservation:item.requiresObservation||false});setShowNewElementForm(false);};const handleSaveEdit=async itemId=>{if(!editForm.code||!editForm.name){alert('El cÃ³digo y nombre son obligatorios');return;}try{const refPath=activeTab==='inspection'?`configuracion/elementosInspeccion/${itemId}`:`configuracion/elementosTrabajo/${itemId}`;const elementRef=databaseRef(database,refPath);await update(elementRef,{code:editForm.code.toUpperCase(),name:editForm.name,detail:editForm.detail,requiresObservation:activeTab==='inspection'?editForm.requiresObservation:false,updatedAt:new Date().toISOString()});setEditingElement(null);setEditForm({code:'',name:'',detail:'',requiresObservation:false});}catch(error){console.error('Error al actualizar elemento:',error);alert('Error al actualizar el elemento');}};// FunciÃ³n para cancelar ediciÃ³n\nconst cancelEdit=()=>{setEditingElement(null);setEditForm({code:'',name:'',detail:'',requiresObservation:false});};if(!show)return null;return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0, 0, 0, 0.5)',zIndex:1000,display:'flex',justifyContent:'center',alignItems:'center',padding:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',maxWidth:'900px',width:'100%',maxHeight:'90vh',overflow:'hidden',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',borderBottom:'1px solid #e5e7eb',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:'20px',color:'#1f2937'},children:\"\\u2699\\uFE0F Gesti\\xF3n de Elementos de Mantenimiento\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{padding:'8px 12px',background:'#6b7280',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'14px'},children:\"\\u2715 Cerrar\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',borderBottom:'1px solid #e5e7eb',padding:'0 20px'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setActiveTab('inspection');setNewElement(prev=>({...prev,type:'inspection'}));},style:{padding:'12px 24px',background:'none',border:'none',borderBottom:activeTab==='inspection'?'2px solid #3b82f6':'2px solid transparent',color:activeTab==='inspection'?'#3b82f6':'#6b7280',fontSize:'14px',fontWeight:activeTab==='inspection'?'600':'400',cursor:'pointer'},children:[\"\\uD83D\\uDD0D Elementos de Inspecci\\xF3n (\",inspectionItems.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setActiveTab('works');setNewElement(prev=>({...prev,type:'work'}));},style:{padding:'12px 24px',background:'none',border:'none',borderBottom:activeTab==='works'?'2px solid #3b82f6':'2px solid transparent',color:activeTab==='works'?'#3b82f6':'#6b7280',fontSize:'14px',fontWeight:activeTab==='works'?'600':'400',cursor:'pointer'},children:[\"\\u2705 Trabajos Realizados (\",workItems.length,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,overflow:'auto',padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar por c\\xF3digo, nombre o detalle...\",value:elementFilter,onChange:e=>setElementFilter(e.target.value),style:{flex:1,padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewElementForm(!showNewElementForm),style:{padding:'10px 20px',background:'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',color:'white',border:'none',borderRadius:'6px',fontSize:'14px',cursor:'pointer'},children:showNewElementForm?'âœ– Cancelar':'âž• Nuevo Elemento'})]}),showNewElementForm&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',background:'#f9fafb',borderRadius:'8px',marginBottom:'20px'},children:[/*#__PURE__*/_jsxs(\"h4\",{style:{margin:'0 0 15px 0',fontSize:'16px',color:'#374151'},children:[\"Crear Nuevo Elemento de \",activeTab==='inspection'?'InspecciÃ³n':'Trabajo']}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'1fr 2fr',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'13px',color:'#374151'},children:\"C\\xF3digo *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newElement.code,onChange:e=>setNewElement(prev=>({...prev,code:e.target.value})),placeholder:\"Ej: INSP001\",style:{width:'100%',padding:'8px',border:'1px solid #d1d5db',borderRadius:'4px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'13px',color:'#374151'},children:\"Nombre *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newElement.name,onChange:e=>setNewElement(prev=>({...prev,name:e.target.value})),placeholder:\"Ej: Revisi\\xF3n de frenos delanteros\",style:{width:'100%',padding:'8px',border:'1px solid #d1d5db',borderRadius:'4px',fontSize:'14px'}})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'13px',color:'#374151'},children:\"Detalle (opcional)\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newElement.detail,onChange:e=>setNewElement(prev=>({...prev,detail:e.target.value})),placeholder:\"Descripci\\xF3n detallada del elemento...\",rows:3,style:{width:'100%',padding:'8px',border:'1px solid #d1d5db',borderRadius:'4px',fontSize:'14px',resize:'none'}})]}),activeTab==='inspection'&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'15px'},children:/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:'8px',cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:newElement.requiresObservation,onChange:e=>setNewElement(prev=>({...prev,requiresObservation:e.target.checked}))}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'14px',color:'#374151'},children:\"Requiere observaciones cuando hay problemas\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveNewElement,style:{marginTop:'15px',padding:'10px 20px',background:'#3b82f6',color:'white',border:'none',borderRadius:'6px',fontSize:'14px',cursor:'pointer'},children:\"\\uD83D\\uDCBE Guardar Elemento\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:'10px'},children:getFilteredElements().length===0?/*#__PURE__*/_jsxs(\"div\",{style:{padding:'40px',textAlign:'center',color:'#6b7280'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'32px',marginBottom:'10px'},children:activeTab==='inspection'?'ðŸ”':'âœ…'}),/*#__PURE__*/_jsxs(\"p\",{children:[\"No hay elementos \",activeTab==='inspection'?'de inspecciÃ³n':'de trabajo',\" configurados\"]}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'14px'},children:\"Crea tu primer elemento usando el bot\\xF3n de arriba\"})]}):getFilteredElements().map(item=>/*#__PURE__*/_jsx(\"div\",{style:{padding:'15px',background:editingElement===item.id?'#f0f9ff':'white',border:'1px solid',borderColor:editingElement===item.id?'#3b82f6':'#e5e7eb',borderRadius:'8px'},children:editingElement===item.id?/*#__PURE__*/// Modo ediciÃ³n\n_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'150px 1fr',gap:'10px',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.code,onChange:e=>setEditForm({...editForm,code:e.target.value}),placeholder:\"C\\xF3digo\",style:{padding:'6px',border:'1px solid #d1d5db',borderRadius:'4px',fontSize:'14px'}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editForm.name,onChange:e=>setEditForm({...editForm,name:e.target.value}),placeholder:\"Nombre\",style:{padding:'6px',border:'1px solid #d1d5db',borderRadius:'4px',fontSize:'14px'}})]}),/*#__PURE__*/_jsx(\"textarea\",{value:editForm.detail,onChange:e=>setEditForm({...editForm,detail:e.target.value}),placeholder:\"Detalle (opcional)\",rows:2,style:{width:'100%',padding:'6px',border:'1px solid #d1d5db',borderRadius:'4px',fontSize:'13px',resize:'none',marginBottom:'10px'}}),activeTab==='inspection'&&/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:'8px',marginBottom:'10px',cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:editForm.requiresObservation,onChange:e=>setEditForm({...editForm,requiresObservation:e.target.checked})}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px',color:'#374151'},children:\"Requiere observaciones\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSaveEdit(item.id),style:{padding:'6px 12px',background:'#22c55e',color:'white',border:'none',borderRadius:'4px',fontSize:'12px',cursor:'pointer'},children:\"\\uD83D\\uDCBE Guardar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,style:{padding:'6px 12px',background:'#6b7280',color:'white',border:'none',borderRadius:'4px',fontSize:'12px',cursor:'pointer'},children:\"Cancelar\"})]})]}):/*#__PURE__*/// Modo visualizaciÃ³n\n_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',background:'#dbeafe',color:'#1e40af',borderRadius:'4px',fontSize:'12px',fontWeight:'600'},children:item.code}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'15px',fontWeight:'500',color:'#1f2937'},children:item.name}),item.requiresObservation&&/*#__PURE__*/_jsx(\"span\",{style:{padding:'2px 6px',background:'#fef3c7',color:'#92400e',borderRadius:'4px',fontSize:'11px'},children:\"Requiere obs.\"})]}),item.detail&&/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'13px',color:'#6b7280',lineHeight:'1.4'},children:item.detail})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEditing(item),style:{padding:'6px 12px',background:'#3b82f6',color:'white',border:'none',borderRadius:'4px',fontSize:'12px',cursor:'pointer'},children:\"\\u270F\\uFE0F Editar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteElement(item.id,activeTab==='inspection'?'inspection':'work'),style:{padding:'6px 12px',background:'#ef4444',color:'white',border:'none',borderRadius:'4px',fontSize:'12px',cursor:'pointer'},children:\"\\uD83D\\uDDD1\\uFE0F Eliminar\"})]})]})},item.id))})]})]})});};// Componente para selecciÃ³n de vehÃ­culo (sin cambios)\nconst VehicleSelectionGrid=_ref7=>{let{vehiculos,onSelectVehicle,isMobile}=_ref7;const[searchTerm,setSearchTerm]=useState('');const[filterStatus,setFilterStatus]=useState('todos');const getMaintenanceStatus=vehicle=>{if(!vehicle.proximoMantenimiento)return'sin_programar';const hoy=new Date();const proximaFecha=new Date(vehicle.proximoMantenimiento);const diasRestantes=Math.ceil((proximaFecha-hoy)/(1000*60*60*24));if(diasRestantes<0)return'vencido';if(diasRestantes<=7)return'urgente';if(diasRestantes<=30)return'proximo';return'ok';};const filteredVehiculos=vehiculos.filter(vehicle=>{var _vehicle$nombre,_vehicle$patente,_vehicle$marca,_vehicle$modelo;const matchesSearch=((_vehicle$nombre=vehicle.nombre)===null||_vehicle$nombre===void 0?void 0:_vehicle$nombre.toLowerCase().includes(searchTerm.toLowerCase()))||((_vehicle$patente=vehicle.patente)===null||_vehicle$patente===void 0?void 0:_vehicle$patente.toLowerCase().includes(searchTerm.toLowerCase()))||((_vehicle$marca=vehicle.marca)===null||_vehicle$marca===void 0?void 0:_vehicle$marca.toLowerCase().includes(searchTerm.toLowerCase()))||((_vehicle$modelo=vehicle.modelo)===null||_vehicle$modelo===void 0?void 0:_vehicle$modelo.toLowerCase().includes(searchTerm.toLowerCase()));const status=getMaintenanceStatus(vehicle);const matchesStatus=filterStatus==='todos'||filterStatus==='vencido'&&status==='vencido'||filterStatus==='urgente'&&status==='urgente'||filterStatus==='proximo'&&status==='proximo'||filterStatus==='ok'&&status==='ok';return matchesSearch&&matchesStatus;});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:'20px',marginBottom:'20px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 15px 0',fontSize:'18px',color:'#1f2937'},children:\"\\uD83D\\uDD0D Buscar Veh\\xEDculo\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'2fr 1fr 150px',gap:'15px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar por nombre, patente, marca o modelo...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}}),/*#__PURE__*/_jsxs(\"select\",{value:filterStatus,onChange:e=>setFilterStatus(e.target.value),style:{padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"todos\",children:\"Todos los estados\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vencido\",children:\"\\u26A0\\uFE0F Mantenimiento vencido\"}),/*#__PURE__*/_jsx(\"option\",{value:\"urgente\",children:\"\\u23F0 Mantenimiento urgente\"}),/*#__PURE__*/_jsx(\"option\",{value:\"proximo\",children:\"\\uD83D\\uDCC5 Mantenimiento pr\\xF3ximo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ok\",children:\"\\u2705 Mantenimiento al d\\xEDa\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearchTerm('');setFilterStatus('todos');},style:{padding:'10px',background:'#6b7280',color:'white',border:'none',borderRadius:'6px',fontSize:'14px',cursor:'pointer'},children:\"Limpiar\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',fontSize:'13px',color:'#6b7280'},children:[\"Mostrando \",filteredVehiculos.length,\" de \",vehiculos.length,\" veh\\xEDculos\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:`repeat(auto-fill, minmax(${isMobile?'100%':'300px'}, 1fr))`,gap:'20px'},children:filteredVehiculos.length===0?/*#__PURE__*/_jsxs(\"div\",{style:{gridColumn:'1 / -1',padding:'40px',textAlign:'center',background:'white',borderRadius:'12px',color:'#6b7280'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'10px'},children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'16px'},children:\"No se encontraron veh\\xEDculos\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'14px'},children:\"Intenta con otros t\\xE9rminos de b\\xFAsqueda\"})]}):filteredVehiculos.map(vehicle=>{const status=getMaintenanceStatus(vehicle);return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>onSelectVehicle(vehicle),style:{background:'white',borderRadius:'12px',padding:'20px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',cursor:'pointer',transition:'all 0.3s',border:'2px solid',borderColor:status==='vencido'?'#ef4444':status==='urgente'?'#f59e0b':status==='proximo'?'#3b82f6':'#e5e7eb'},onMouseEnter:e=>{e.currentTarget.style.transform='translateY(-2px)';e.currentTarget.style.boxShadow='0 4px 12px rgba(0,0,0,0.1)';},onMouseLeave:e=>{e.currentTarget.style.transform='translateY(0)';e.currentTarget.style.boxShadow='0 2px 8px rgba(0,0,0,0.05)';},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'start',marginBottom:'12px'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'18px',color:'#1f2937'},children:[\"\\uD83D\\uDE9B \",vehicle.nombre]}),status==='vencido'&&/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',background:'#fee2e2',color:'#991b1b',borderRadius:'4px',fontSize:'12px',fontWeight:'600'},children:\"\\u26A0\\uFE0F VENCIDO\"}),status==='urgente'&&/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',background:'#fef3c7',color:'#92400e',borderRadius:'4px',fontSize:'12px',fontWeight:'600'},children:\"\\u23F0 URGENTE\"}),status==='proximo'&&/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',background:'#dbeafe',color:'#1e40af',borderRadius:'4px',fontSize:'12px',fontWeight:'600'},children:\"\\uD83D\\uDCC5 PR\\xD3XIMO\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',color:'#6b7280',lineHeight:'1.6'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCCD \",vehicle.marca,\" \",vehicle.modelo]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDD22 Patente: \",vehicle.patente]}),vehicle.kilometraje&&/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCCF \",vehicle.kilometraje.toLocaleString(),\" km\"]}),vehicle.ultimoMantenimiento&&/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDD27 \\xDAltimo: \",new Date(vehicle.ultimoMantenimiento).toLocaleDateString('es-CL')]}),vehicle.proximoMantenimiento&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'8px',padding:'8px',background:'#f9fafb',borderRadius:'4px',fontSize:'13px'},children:[\"\\uD83D\\uDCC6 Pr\\xF3ximo: \",new Date(vehicle.proximoMantenimiento).toLocaleDateString('es-CL'),vehicle.kilometrajeProximoMantenimiento&&/*#__PURE__*/_jsxs(\"span\",{children:[\" o \",vehicle.kilometrajeProximoMantenimiento.toLocaleString(),\" km\"]})]})]})]},vehicle.id);})})]});};// Componente de informaciÃ³n del vehÃ­culo\nconst VehicleInfoCard=_ref8=>{var _vehicle$kilometraje;let{vehicle,isMobile}=_ref8;return/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:'20px',marginBottom:'20px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{margin:'0 0 15px 0',fontSize:'20px',color:'#1f2937'},children:[\"\\uD83D\\uDE9B \",vehicle.nombre]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fit, minmax(200px, 1fr))',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"Marca/Modelo\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'15px',fontWeight:'500'},children:[vehicle.marca,\" \",vehicle.modelo]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"Patente\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'15px',fontWeight:'500'},children:vehicle.patente})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"Kilometraje Actual\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'15px',fontWeight:'500'},children:[((_vehicle$kilometraje=vehicle.kilometraje)===null||_vehicle$kilometraje===void 0?void 0:_vehicle$kilometraje.toLocaleString())||0,\" km\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'13px'},children:\"Estado\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'15px',fontWeight:'500'},children:/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',borderRadius:'4px',fontSize:'12px',background:vehicle.estado==='disponible'?'#dcfce7':vehicle.estado==='en_uso'?'#dbeafe':vehicle.estado==='mantenimiento'?'#fef3c7':'#fee2e2',color:vehicle.estado==='disponible'?'#15803d':vehicle.estado==='en_uso'?'#1e40af':vehicle.estado==='mantenimiento'?'#92400e':'#991b1b'},children:vehicle.estado==='disponible'?'âœ… Disponible':vehicle.estado==='en_uso'?'ðŸ”§ En Uso':vehicle.estado==='mantenimiento'?'ðŸ”§ Mantenimiento':'âŒ Fuera Servicio'})})]})]})]});};// Componente del formulario de mantenimiento modificado\nconst MaintenanceForm=_ref9=>{var _form$presupuestoData,_form$presupuestoData2,_form$presupuestoData3;let{form,setForm,onSubmit,onPhotoUpload,onDeletePhoto,uploadingPhotos,uploadProgress,loading,isMobile,vehicle,currentUser,inspectionItems,workItems,handleInspectionChange,handleWorkChange,presupuestosDisponibles,handlePresupuestoSelect,setMessage}=_ref9;const[inspectionFilter,setInspectionFilter]=useState('');const[workFilter,setWorkFilter]=useState('');// Funciones de filtrado\nconst getFilteredInspectionItems=()=>{if(!inspectionFilter)return inspectionItems;return inspectionItems.filter(item=>item.name.toLowerCase().includes(inspectionFilter.toLowerCase())||item.code.toLowerCase().includes(inspectionFilter.toLowerCase())||item.detail&&item.detail.toLowerCase().includes(inspectionFilter.toLowerCase()));};const getFilteredWorkItems=()=>{if(!workFilter)return workItems;return workItems.filter(item=>item.name.toLowerCase().includes(workFilter.toLowerCase())||item.code.toLowerCase().includes(workFilter.toLowerCase())||item.detail&&item.detail.toLowerCase().includes(workFilter.toLowerCase()));};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,style:{background:'white',borderRadius:'12px',padding:'30px',marginBottom:'30px',boxShadow:'0 4px 20px rgba(0,0,0,0.08)'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 25px 0',fontSize:'20px',color:'#1f2937'},children:\"\\uD83D\\uDCDD Registrar Nuevo Mantenimiento\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'25px',paddingBottom:'20px',borderBottom:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 15px 0',fontSize:'16px',color:'#374151'},children:\"\\uD83D\\uDCCB Informaci\\xF3n General\"}),presupuestosDisponibles&&presupuestosDisponibles.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px',padding:'15px',background:'#f0f9ff',borderRadius:'8px',border:'2px solid #0ea5e9'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 10px 0',fontSize:'14px',color:'#0c4a6e',fontWeight:'600'},children:\"\\uD83D\\uDCB0 Asociar con Presupuesto Previo (Opcional)\"}),/*#__PURE__*/_jsxs(\"select\",{value:form.presupuestoId,onChange:e=>handlePresupuestoSelect(e.target.value),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px',background:'white'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Seleccionar presupuesto --\"}),presupuestosDisponibles.map(presupuesto=>{var _presupuesto$totales,_presupuesto$totales$,_presupuesto$servicio;return/*#__PURE__*/_jsxs(\"option\",{value:presupuesto.id,children:[\"#\",presupuesto.id.substring(0,8).toUpperCase(),\" - Patente: \",presupuesto.vehiculoPatente,\" -\",new Date(presupuesto.fechaSolicitud||presupuesto.fechaMantenimiento).toLocaleDateString('es-CL'),\" - $\",((_presupuesto$totales=presupuesto.totales)===null||_presupuesto$totales===void 0?void 0:(_presupuesto$totales$=_presupuesto$totales.total)===null||_presupuesto$totales$===void 0?void 0:_presupuesto$totales$.toLocaleString())||0,\" -\",((_presupuesto$servicio=presupuesto.serviciosPreventivos)===null||_presupuesto$servicio===void 0?void 0:_presupuesto$servicio.length)||0,\" servicio(s)\"]},presupuesto.id);})]}),form.presupuestoData&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',padding:'10px',background:'#dcfce7',borderRadius:'6px',fontSize:'13px',color:'#15803d'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u2705 Presupuesto asociado:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'5px'},children:[\"\\u2022 Fecha: \",new Date(form.presupuestoData.fechaSolicitud||form.presupuestoData.fechaMantenimiento).toLocaleDateString('es-CL'),/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Total: $\",((_form$presupuestoData=form.presupuestoData.totales)===null||_form$presupuestoData===void 0?void 0:(_form$presupuestoData2=_form$presupuestoData.total)===null||_form$presupuestoData2===void 0?void 0:_form$presupuestoData2.toLocaleString())||0,/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Servicios: \",((_form$presupuestoData3=form.presupuestoData.serviciosPreventivos)===null||_form$presupuestoData3===void 0?void 0:_form$presupuestoData3.length)||0,/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 Tipo repuestos: \",form.presupuestoData.tipoRepuesto==='original'?'Originales':'Alternativos']}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setForm(prev=>({...prev,presupuestoId:'',presupuestoData:null,costoMantenimiento:0,serviciosCatalogo:[]}));setMessage({type:'info',text:'Presupuesto desvinculado'});},style:{marginTop:'8px',padding:'6px 12px',background:'#ef4444',color:'white',border:'none',borderRadius:'6px',fontSize:'12px',cursor:'pointer'},children:\"Desvincular Presupuesto\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fit, minmax(250px, 1fr))',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Fecha del Mantenimiento *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",required:true,value:form.fecha,onChange:e=>setForm({...form,fecha:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Hora del Mantenimiento *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",required:true,value:form.hora,onChange:e=>setForm({...form,hora:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Tipo de Mantenimiento *\"}),/*#__PURE__*/_jsxs(\"select\",{required:true,value:form.tipoMantenimiento,onChange:e=>setForm({...form,tipoMantenimiento:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"preventivo\",children:\"Preventivo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"correctivo\",children:\"Correctivo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"emergencia\",children:\"Emergencia\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inspeccion\",children:\"Inspecci\\xF3n\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Kilometraje Actual\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:form.kilometraje,onChange:e=>setForm({...form,kilometraje:e.target.value}),placeholder:vehicle.kilometraje||'0',style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Realizado Por *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:form.realizadoPor,onChange:e=>setForm({...form,realizadoPor:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Taller/Lugar\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:form.tallerResponsable,onChange:e=>setForm({...form,tallerResponsable:e.target.value}),placeholder:\"Nombre del taller o lugar\",style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Costo (CLP)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:form.costoMantenimiento,onChange:e=>setForm({...form,costoMantenimiento:e.target.value}),placeholder:\"0\",style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]})]})]}),inspectionItems.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'25px',paddingBottom:'20px',borderBottom:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 15px 0',fontSize:'16px',color:'#374151'},children:\"\\uD83D\\uDD0D Elementos de Inspecci\\xF3n de Seguridad\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px',display:'flex',gap:'10px',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar elemento de inspecci\\xF3n...\",value:inspectionFilter,onChange:e=>setInspectionFilter(e.target.value),style:{flex:1,padding:'8px 12px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}}),inspectionFilter&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setInspectionFilter(''),style:{padding:'8px 12px',background:'#6b7280',color:'white',border:'none',borderRadius:'6px',fontSize:'13px',cursor:'pointer'},children:\"Limpiar\"}),/*#__PURE__*/_jsxs(\"span\",{style:{padding:'6px 12px',background:'#f3f4f6',borderRadius:'6px',fontSize:'13px',color:'#6b7280',minWidth:'60px',textAlign:'center'},children:[getFilteredInspectionItems().length,\" / \",inspectionItems.length]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:'15px'},children:getFilteredInspectionItems().map(item=>/*#__PURE__*/_jsx(DynamicInspectionItem,{item:item,value:form.inspectionData[`${item.code}_status`]||'no_aplica',observations:form.inspectionData[`${item.code}_observations`]||'',onChange:(field,value)=>handleInspectionChange(item.code,field,value)},item.code))})]}),workItems.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'25px',paddingBottom:'20px',borderBottom:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 15px 0',fontSize:'16px',color:'#374151'},children:\"\\u2705 Trabajos Realizados\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px',display:'flex',gap:'10px',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar trabajo...\",value:workFilter,onChange:e=>setWorkFilter(e.target.value),style:{flex:1,padding:'8px 12px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}}),workFilter&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setWorkFilter(''),style:{padding:'8px 12px',background:'#6b7280',color:'white',border:'none',borderRadius:'6px',fontSize:'13px',cursor:'pointer'},children:\"Limpiar\"}),/*#__PURE__*/_jsxs(\"span\",{style:{padding:'6px 12px',background:'#f3f4f6',borderRadius:'6px',fontSize:'13px',color:'#6b7280',minWidth:'60px',textAlign:'center'},children:[getFilteredWorkItems().length,\" / \",workItems.length]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fit, minmax(250px, 1fr))',gap:'10px'},children:getFilteredWorkItems().map(item=>/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:'8px',padding:'8px',background:form.workData[item.code]?'#dcfce7':'#f9fafb',borderRadius:'6px',cursor:'pointer',transition:'all 0.2s'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:form.workData[item.code]||false,onChange:e=>handleWorkChange(item.code,e.target.checked),style:{width:'18px',height:'18px',cursor:'pointer'}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'14px',color:'#374151',fontWeight:'500'},children:item.name}),item.detail&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',color:'#6b7280',marginTop:'2px'},children:item.detail})]}),/*#__PURE__*/_jsx(\"span\",{style:{padding:'2px 6px',background:'#dbeafe',color:'#1e40af',borderRadius:'4px',fontSize:'10px'},children:item.code})]},item.code))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'25px',paddingBottom:'20px',borderBottom:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 15px 0',fontSize:'16px',color:'#374151'},children:\"\\uD83D\\uDCDD Observaciones y Pr\\xF3ximo Mantenimiento\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Observaciones Generales\"}),/*#__PURE__*/_jsx(\"textarea\",{value:form.observacionesGenerales,onChange:e=>setForm({...form,observacionesGenerales:e.target.value}),placeholder:\"Detalle cualquier observaci\\xF3n adicional...\",rows:4,style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px',resize:'none'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'1fr 1fr',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Pr\\xF3ximo Mantenimiento (Fecha)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:form.proximoMantenimientoFecha,onChange:e=>setForm({...form,proximoMantenimientoFecha:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Pr\\xF3ximo Mantenimiento (Kilometraje)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:form.proximoMantenimientoKm,onChange:e=>setForm({...form,proximoMantenimientoKm:e.target.value}),placeholder:\"Ej: 15000\",style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'25px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 15px 0',fontSize:'16px',color:'#374151'},children:\"\\uD83D\\uDCF7 Fotos del Mantenimiento\"}),form.fotos&&form.fotos.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(150px, 1fr))',gap:'10px',marginBottom:'15px'},children:form.fotos.map((foto,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',background:'#f9fafb',borderRadius:'8px',padding:'10px',border:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"img\",{src:foto.url,alt:`Foto ${index+1}`,style:{width:'100%',height:'120px',objectFit:'cover',borderRadius:'4px',marginBottom:'8px'}}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>onDeletePhoto(index),style:{position:'absolute',top:'5px',right:'5px',padding:'4px 8px',background:'#ef4444',color:'white',border:'none',borderRadius:'4px',fontSize:'12px',cursor:'pointer'},children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',color:'#6b7280',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:foto.nombre})]},index))}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"maintenance-photos\",multiple:true,accept:\"image/*\",onChange:e=>onPhotoUpload(e.target.files),style:{display:'none'},disabled:uploadingPhotos}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"maintenance-photos\",style:{display:'inline-block',padding:'10px 20px',background:uploadingPhotos?'#9ca3af':'#3b82f6',color:'white',borderRadius:'6px',cursor:uploadingPhotos?'not-allowed':'pointer',fontSize:'14px',fontWeight:'500'},children:uploadingPhotos?`â³ Subiendo... ${uploadProgress}%`:'ðŸ“¤ Agregar Fotos'})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'10px'},children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:{padding:'12px 24px',background:loading?'#9ca3af':'#22c55e',color:'white',border:'none',borderRadius:'6px',fontSize:'16px',fontWeight:'500',cursor:loading?'not-allowed':'pointer'},children:loading?'â³ Guardando...':'âœ… Guardar Mantenimiento'})})]});};// Componente para items de inspecciÃ³n dinÃ¡micos\nconst DynamicInspectionItem=_ref0=>{let{item,value,observations,onChange}=_ref0;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'15px',background:'#f9fafb',borderRadius:'8px',border:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:observations?'10px':'0'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'14px',fontWeight:'500',color:'#374151'},children:item.name}),/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'8px',padding:'2px 6px',background:'#dbeafe',color:'#1e40af',borderRadius:'4px',fontSize:'10px'},children:item.code}),item.detail&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#6b7280',marginTop:'4px'},children:item.detail})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginLeft:'10px'},children:[/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:'5px',cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:item.code,value:\"bueno\",checked:value==='bueno',onChange:()=>onChange('status','bueno')}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px'},children:\"\\u2705 Bueno\"})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:'5px',cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:item.code,value:\"requiere_atencion\",checked:value==='requiere_atencion',onChange:()=>onChange('status','requiere_atencion')}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px'},children:\"\\u26A0\\uFE0F Atenci\\xF3n\"})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:'5px',cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:item.code,value:\"malo\",checked:value==='malo',onChange:()=>onChange('status','malo')}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px'},children:\"\\u274C Malo\"})]}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'flex',alignItems:'center',gap:'5px',cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:item.code,value:\"no_aplica\",checked:value==='no_aplica',onChange:()=>onChange('status','no_aplica')}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px'},children:\"N/A\"})]})]})]}),item.requiresObservation&&(value==='requiere_atencion'||value==='malo')&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:observations,onChange:e=>onChange('observations',e.target.value),placeholder:\"Especifique el problema...\",style:{width:'100%',padding:'8px',border:'1px solid #d1d5db',borderRadius:'4px',fontSize:'13px'}})]});};// Componente para el historial\nconst MaintenanceHistory=_ref1=>{let{history,isMobile,vehicle,currentUser,inspectionItems,workItems}=_ref1;if(history.length===0){return/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:'40px',textAlign:'center',color:'#6b7280'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'10px'},children:\"\\uD83D\\uDCCB\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'16px'},children:\"No hay mantenimientos registrados\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'14px'},children:\"Registra el primer mantenimiento usando el formulario\"})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',boxShadow:'0 4px 20px rgba(0,0,0,0.08)',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',borderBottom:'1px solid #e5e7eb'},children:/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'20px',color:'#1f2937'},children:[\"\\uD83D\\uDCDA Historial de Mantenimientos (\",history.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px'},children:history.map((maintenance,index)=>/*#__PURE__*/_jsx(MaintenanceCard,{maintenance:maintenance,isLast:index===history.length-1,isMobile:isMobile,vehicle:vehicle,currentUser:currentUser,inspectionItems:inspectionItems,workItems:workItems},maintenance.id))})]});};// Componente para cada tarjeta de mantenimiento\nconst MaintenanceCard=_ref10=>{var _maintenance$costoTot,_maintenance$costoMan;let{maintenance,isLast,isMobile,vehicle,currentUser,inspectionItems,workItems}=_ref10;const[expanded,setExpanded]=useState(false);const handleExportSingle=()=>{if(!vehicle){console.error('Error: No se encontrÃ³ informaciÃ³n del vehÃ­culo');alert('Error: No se puede exportar el PDF. Falta informaciÃ³n del vehÃ­culo.');return;}if(!currentUser){console.error('Error: No se encontrÃ³ informaciÃ³n del usuario');alert('Error: No se puede exportar el PDF. Falta informaciÃ³n del usuario.');return;}try{const maintenanceWithVehicle={...maintenance,vehiculoNombre:maintenance.vehiculoNombre||vehicle.nombre,vehiculoPatente:maintenance.vehiculoPatente||vehicle.patente};pdfExportService.exportSingleMaintenanceRecord(maintenanceWithVehicle,vehicle,currentUser);}catch(error){console.error('Error al exportar PDF:',error);alert('Error al generar el PDF. Por favor, intente nuevamente.');}};return/*#__PURE__*/_jsxs(\"div\",{style:{paddingBottom:isLast?'0':'20px',marginBottom:isLast?'0':'20px',borderBottom:isLast?'none':'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"div\",{onClick:()=>setExpanded(!expanded),style:{cursor:'pointer',padding:'15px',background:'#f9fafb',borderRadius:'8px',transition:'all 0.2s'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'start'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px',marginBottom:'8px'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'16px',fontWeight:'600',color:'#1f2937'},children:[new Date(maintenance.fecha).toLocaleDateString('es-CL'),maintenance.hora&&/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'10px',fontSize:'14px',color:'#6b7280'},children:[maintenance.hora,\" hrs\"]})]}),/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',background:maintenance.tipoMantenimiento==='preventivo'?'#dcfce7':maintenance.tipoMantenimiento==='correctivo'?'#fef3c7':'#fee2e2',color:maintenance.tipoMantenimiento==='preventivo'?'#15803d':maintenance.tipoMantenimiento==='correctivo'?'#92400e':'#991b1b',borderRadius:'4px',fontSize:'12px',fontWeight:'500'},children:maintenance.tipoMantenimiento.toUpperCase()})]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',color:'#6b7280'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDC64 \",maintenance.realizadoPor]}),maintenance.kilometraje&&/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCCF \",maintenance.kilometraje.toLocaleString(),\" km\"]}),maintenance.costoMantenimiento>0&&/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCB0 $\",maintenance.costoMantenimiento.toLocaleString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleExportSingle();},style:{padding:'6px 12px',background:'#ef4444',color:'white',border:'none',borderRadius:'6px',fontSize:'12px',cursor:'pointer',display:'flex',alignItems:'center',gap:'4px'},children:\"\\uD83D\\uDCC4 PDF\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'20px',transform:expanded?'rotate(180deg)':'rotate(0)',transition:'transform 0.2s'},children:\"\\u25BC\"})]})]})}),expanded&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'15px',padding:'15px',background:'white',borderRadius:'8px',border:'1px solid #e5e7eb'},children:[maintenance.serviciosCatalogo&&maintenance.serviciosCatalogo.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 10px 0',fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"Servicios Realizados:\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'13px',color:'#6b7280'},children:maintenance.serviciosCatalogo.map((servicio,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:'6px',background:'#f9fafb',borderRadius:'4px',marginBottom:'4px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:servicio.codigo}),\" - \",servicio.descripcion,/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'10px'},children:[\"(Cantidad: \",servicio.cantidadServicio,\") - Total: $\",servicio.totales.total.toLocaleString()]})]},idx))}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'8px',paddingTop:'8px',borderTop:'1px solid #e5e7eb',fontWeight:'600'},children:[\"Total Servicios: $\",((_maintenance$costoTot=maintenance.costoTotal)===null||_maintenance$costoTot===void 0?void 0:_maintenance$costoTot.toLocaleString())||((_maintenance$costoMan=maintenance.costoMantenimiento)===null||_maintenance$costoMan===void 0?void 0:_maintenance$costoMan.toLocaleString())||'0']})]}),maintenance.observacionesGenerales&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 10px 0',fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"Observaciones:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'13px',color:'#6b7280',lineHeight:'1.5'},children:maintenance.observacionesGenerales})]}),(maintenance.proximoMantenimientoFecha||maintenance.proximoMantenimientoKm)&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'15px',padding:'10px',background:'#f0f9ff',borderRadius:'6px',fontSize:'13px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCC5 Pr\\xF3ximo Mantenimiento:\"}),maintenance.proximoMantenimientoFecha&&/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'10px'},children:new Date(maintenance.proximoMantenimientoFecha).toLocaleDateString('es-CL')}),maintenance.proximoMantenimientoKm&&/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'10px'},children:[\"o \",maintenance.proximoMantenimientoKm.toLocaleString(),\" km\"]})]})]})]});};export default VehicleMaintenanceModule;","map":{"version":3,"names":["React","useState","useEffect","useCallback","pdfExportService","database","storage","auth","ref","databaseRef","push","update","onValue","off","set","databaseSet","get","remove","storageRef","uploadBytes","getDownloadURL","deleteObject","cloudinaryConfig","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","VehicleMaintenanceModule","_ref","vehiculos","currentUser","isMobile","searchPatente","setSearchPatente","searchFechaDesde","setSearchFechaDesde","searchFechaHasta","setSearchFechaHasta","filteredHistory","setFilteredHistory","selectedVehicle","setSelectedVehicle","maintenanceHistory","setMaintenanceHistory","showMaintenanceForm","setShowMaintenanceForm","loading","setLoading","message","setMessage","type","text","uploadingPhotos","setUploadingPhotos","uploadProgress","setUploadProgress","inspectionItems","setInspectionItems","workItems","setWorkItems","showElementsManager","setShowElementsManager","activeTab","setActiveTab","elementFilter","setElementFilter","showNewElementForm","setShowNewElementForm","newElement","setNewElement","code","name","detail","requiresObservation","maintenanceForm","setMaintenanceForm","fecha","Date","toISOString","split","hora","toTimeString","slice","tipoMantenimiento","kilometraje","horasUso","observacionesGenerales","proximoMantenimientoKm","proximoMantenimientoFecha","realizadoPor","email","tallerResponsable","costoMantenimiento","fotos","inspectionData","workData","serviciosCatalogo","presupuestoId","presupuestoData","presupuestosDisponibles","setPresupuestosDisponibles","loadConfigElements","loadPresupuestos","patente","presupuestosRef","snapshot","data","val","presupuestos","Object","entries","map","_ref2","id","presupuesto","filter","p","vehiculoPatente","sort","a","b","fechaSolicitud","fechaMantenimiento","error","console","handlePresupuestoSelect","presupuestoSeleccionado","find","prev","_presupuestoSeleccion","totales","total","serviciosPreventivos","substring","toUpperCase","inspectionRef","items","_ref3","item","workRef","_ref4","handleSaveNewElement","elementData","createdBy","uid","createdAt","refPath","elementRef","handleDeleteElement","elementId","window","confirm","getFilteredElements","elements","toLowerCase","includes","handleInspectionChange","itemCode","field","value","handleWorkChange","checked","filtered","m","_m$vehiculoPatente","_m$vehiculoNombre","vehiculoNombre","loadMaintenanceHistory","vehicleId","historyRef","unsubscribe","historyArray","_ref5","maintenance","handlePhotoUpload","files","length","uploadedPhotos","i","file","startsWith","size","formData","FormData","append","timestamp","now","cleanFileName","replace","Math","round","response","fetch","cloudName","method","body","json","url","secure_url","publicId","public_id","nombre","tamaÃ±o","handleDeletePhoto","index","_","handleSaveMaintenance","e","preventDefault","fechaHoraCompleta","maintenanceData","fechaCompleta","vehiculoId","fechaRegistro","registradoPor","registradoPorNombre","costoTotal","presupuestoAsociado","maintenanceRef","newMaintenanceRef","vehicleRef","ultimoMantenimiento","kilometrajeUltimoMantenimiento","proximoMantenimiento","kilometrajeProximoMantenimiento","ultimaActualizacion","resetForm","handleExportPDF","exportMaintenanceHistory","style","padding","children","marginBottom","display","justifyContent","alignItems","flexWrap","gap","margin","color","fontSize","fontWeight","borderRadius","background","border","ElementsManagerModal","show","onClose","VehicleSelectionGrid","onSelectVehicle","VehicleInfoCard","vehicle","onClick","cursor","boxShadow","MaintenanceForm","form","setForm","onSubmit","onPhotoUpload","onDeletePhoto","gridTemplateColumns","placeholder","onChange","target","width","marginTop","MaintenanceHistory","history","_ref6","editingElement","setEditingElement","editForm","setEditForm","startEditing","handleSaveEdit","itemId","alert","updatedAt","cancelEdit","position","top","left","right","bottom","zIndex","maxWidth","maxHeight","overflow","flexDirection","borderBottom","flex","rows","resize","textAlign","borderColor","lineHeight","_ref7","searchTerm","setSearchTerm","filterStatus","setFilterStatus","getMaintenanceStatus","hoy","proximaFecha","diasRestantes","ceil","filteredVehiculos","_vehicle$nombre","_vehicle$patente","_vehicle$marca","_vehicle$modelo","matchesSearch","marca","modelo","status","matchesStatus","gridColumn","transition","onMouseEnter","currentTarget","transform","onMouseLeave","toLocaleString","toLocaleDateString","_ref8","_vehicle$kilometraje","estado","_ref9","_form$presupuestoData","_form$presupuestoData2","_form$presupuestoData3","inspectionFilter","setInspectionFilter","workFilter","setWorkFilter","getFilteredInspectionItems","getFilteredWorkItems","paddingBottom","_presupuesto$totales","_presupuesto$totales$","_presupuesto$servicio","tipoRepuesto","required","minWidth","DynamicInspectionItem","observations","height","foto","src","alt","objectFit","textOverflow","whiteSpace","multiple","accept","disabled","htmlFor","_ref0","marginLeft","_ref1","MaintenanceCard","isLast","_ref10","_maintenance$costoTot","_maintenance$costoMan","expanded","setExpanded","handleExportSingle","maintenanceWithVehicle","exportSingleMaintenanceRecord","stopPropagation","servicio","idx","codigo","descripcion","cantidadServicio","paddingTop","borderTop"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/VehicleMaintenanceModule.js"],"sourcesContent":["// src/components/VehicleMaintenanceModule.js\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { pdfExportService } from '../services/pdfExportService';\r\nimport {\r\n    database,\r\n    storage,\r\n    auth\r\n} from '../config/firebase';\r\nimport {\r\n    ref as databaseRef,\r\n    push,\r\n    update,\r\n    onValue,\r\n    off,\r\n    set as databaseSet,\r\n    get,\r\n    remove\r\n} from 'firebase/database';\r\nimport {\r\n    ref as storageRef,\r\n    uploadBytes,\r\n    getDownloadURL,\r\n    deleteObject\r\n} from 'firebase/storage';\r\nimport { cloudinaryConfig } from '../config/cloudinary';\r\n\r\nconst VehicleMaintenanceModule = ({\r\n    vehiculos,\r\n    currentUser,\r\n    isMobile\r\n}) => {\r\n\r\n    // Estados principales\r\n    const [searchPatente, setSearchPatente] = useState('');\r\n    const [searchFechaDesde, setSearchFechaDesde] = useState('');\r\n    const [searchFechaHasta, setSearchFechaHasta] = useState('');\r\n    const [filteredHistory, setFilteredHistory] = useState([]);\r\n    const [selectedVehicle, setSelectedVehicle] = useState(null);\r\n    const [maintenanceHistory, setMaintenanceHistory] = useState([]);\r\n    const [showMaintenanceForm, setShowMaintenanceForm] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [message, setMessage] = useState({ type: '', text: '' });\r\n    const [uploadingPhotos, setUploadingPhotos] = useState(false);\r\n    const [uploadProgress, setUploadProgress] = useState(0);\r\n\r\n\r\n    // Estados para gestiÃ³n de elementos dinÃ¡micos\r\n    const [inspectionItems, setInspectionItems] = useState([]);\r\n    const [workItems, setWorkItems] = useState([]);\r\n    const [showElementsManager, setShowElementsManager] = useState(false);\r\n    const [activeTab, setActiveTab] = useState('inspection'); // 'inspection' o 'works'\r\n    const [elementFilter, setElementFilter] = useState('');\r\n    const [showNewElementForm, setShowNewElementForm] = useState(false);\r\n\r\n    // Estado para nuevo elemento\r\n    const [newElement, setNewElement] = useState({\r\n        code: '',\r\n        name: '',\r\n        detail: '',\r\n        type: 'inspection', // 'inspection' o 'work'\r\n        requiresObservation: true\r\n    });\r\n\r\n    // Estado del formulario de mantenimiento\r\n    const [maintenanceForm, setMaintenanceForm] = useState({\r\n        fecha: new Date().toISOString().split('T')[0],\r\n        hora: new Date().toTimeString().slice(0, 5),\r\n        tipoMantenimiento: 'preventivo',\r\n        kilometraje: '',\r\n        horasUso: '',\r\n        observacionesGenerales: '',\r\n        proximoMantenimientoKm: '',\r\n        proximoMantenimientoFecha: '',\r\n        realizadoPor: currentUser.name || currentUser.email,\r\n        tallerResponsable: '',\r\n        costoMantenimiento: 0,\r\n        fotos: [],\r\n        inspectionData: {}, // Datos dinÃ¡micos de inspecciÃ³n\r\n        workData: {}, // Datos dinÃ¡micos de trabajos\r\n        serviciosCatalogo: [],\r\n        presupuestoId: '', // ID del presupuesto asociado\r\n        presupuestoData: null // Datos del presupuesto asociado\r\n\r\n    });\r\n    // Estado para presupuestos disponibles\r\n\r\n    const [presupuestosDisponibles, setPresupuestosDisponibles] = useState([]);\r\n\r\n    // Cargar elementos de configuraciÃ³n al iniciar\r\n    useEffect(() => {\r\n        loadConfigElements();\r\n        loadPresupuestos();\r\n    }, [selectedVehicle]);\r\n    // Cargar presupuestos disponibles para el vehÃ­culo seleccionado\r\n    // Cargar presupuestos disponibles para el vehÃ­culo seleccionado\r\n    const loadPresupuestos = async () => {\r\n        if (!selectedVehicle || !selectedVehicle.patente) return;\r\n\r\n        try {\r\n            const presupuestosRef = databaseRef(database, 'mantenimientos');\r\n            onValue(presupuestosRef, (snapshot) => {\r\n                const data = snapshot.val();\r\n                if (data) {\r\n                    const presupuestos = Object.entries(data)\r\n                        .map(([id, presupuesto]) => ({\r\n                            id,\r\n                            ...presupuesto\r\n                        }))\r\n                        // Filtrar por patente en vez de ID\r\n                        .filter(p => p.vehiculoPatente === selectedVehicle.patente)\r\n                        .sort((a, b) => new Date(b.fechaSolicitud || b.fechaMantenimiento) - new Date(a.fechaSolicitud || a.fechaMantenimiento));\r\n                    setPresupuestosDisponibles(presupuestos);\r\n                } else {\r\n                    setPresupuestosDisponibles([]);\r\n                }\r\n            });\r\n        } catch (error) {\r\n            console.error('Error al cargar presupuestos:', error);\r\n        }\r\n    };\r\n    // Manejar la selecciÃ³n de un presupuesto\r\n    const handlePresupuestoSelect = (presupuestoId) => {\r\n        const presupuestoSeleccionado = presupuestosDisponibles.find(p => p.id === presupuestoId);\r\n\r\n        if (presupuestoSeleccionado) {\r\n            // Autocompletar datos del formulario con la informaciÃ³n del presupuesto\r\n            setMaintenanceForm(prev => ({\r\n                ...prev,\r\n                presupuestoId: presupuestoId,\r\n                presupuestoData: presupuestoSeleccionado,\r\n                costoMantenimiento: presupuestoSeleccionado.totales?.total || 0,\r\n                serviciosCatalogo: presupuestoSeleccionado.serviciosPreventivos || [],\r\n                tipoMantenimiento: 'preventivo' // Por defecto si viene de presupuesto\r\n            }));\r\n\r\n            setMessage({\r\n                type: 'success',\r\n                text: `âœ… Presupuesto #${presupuestoId.substring(0, 8).toUpperCase()} asociado correctamente`\r\n            });\r\n        }\r\n    };\r\n\r\n    // Cargar elementos de inspecciÃ³n y trabajo desde Firebase\r\n    const loadConfigElements = async () => {\r\n        try {\r\n            // Cargar elementos de inspecciÃ³n\r\n            const inspectionRef = databaseRef(database, 'configuracion/elementosInspeccion');\r\n            onValue(inspectionRef, (snapshot) => {\r\n                const data = snapshot.val();\r\n                if (data) {\r\n                    const items = Object.entries(data).map(([id, item]) => ({\r\n                        id,\r\n                        ...item\r\n                    }));\r\n                    setInspectionItems(items);\r\n                }\r\n            });\r\n\r\n            // Cargar elementos de trabajo\r\n            const workRef = databaseRef(database, 'configuracion/elementosTrabajo');\r\n            onValue(workRef, (snapshot) => {\r\n                const data = snapshot.val();\r\n                if (data) {\r\n                    const items = Object.entries(data).map(([id, item]) => ({\r\n                        id,\r\n                        ...item\r\n                    }));\r\n                    setWorkItems(items);\r\n                }\r\n            });\r\n        } catch (error) {\r\n            console.error('Error al cargar elementos de configuraciÃ³n:', error);\r\n        }\r\n    };\r\n\r\n    // Guardar nuevo elemento\r\n    const handleSaveNewElement = async () => {\r\n        if (!newElement.code || !newElement.name) {\r\n            setMessage({\r\n                type: 'error',\r\n                text: 'âŒ El cÃ³digo y nombre son obligatorios'\r\n            });\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const elementData = {\r\n                code: newElement.code.toUpperCase(),\r\n                name: newElement.name,\r\n                detail: newElement.detail,\r\n                requiresObservation: newElement.type === 'inspection' ? newElement.requiresObservation : false,\r\n                createdBy: currentUser.uid,\r\n                createdAt: new Date().toISOString()\r\n            };\r\n\r\n            const refPath = newElement.type === 'inspection'\r\n                ? 'configuracion/elementosInspeccion'\r\n                : 'configuracion/elementosTrabajo';\r\n\r\n            const elementRef = databaseRef(database, refPath);\r\n            await push(elementRef, elementData);\r\n\r\n            setMessage({\r\n                type: 'success',\r\n                text: `âœ… Elemento ${newElement.name} creado exitosamente`\r\n            });\r\n\r\n            // Resetear formulario\r\n            setNewElement({\r\n                code: '',\r\n                name: '',\r\n                detail: '',\r\n                type: activeTab === 'inspection' ? 'inspection' : 'work',\r\n                requiresObservation: true\r\n            });\r\n            setShowNewElementForm(false);\r\n        } catch (error) {\r\n            console.error('Error al guardar elemento:', error);\r\n            setMessage({\r\n                type: 'error',\r\n                text: 'âŒ Error al guardar el elemento'\r\n            });\r\n        }\r\n    };\r\n\r\n    // Eliminar elemento\r\n    const handleDeleteElement = async (elementId, type) => {\r\n        if (!window.confirm('Â¿EstÃ¡ seguro de eliminar este elemento?')) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const refPath = type === 'inspection'\r\n                ? `configuracion/elementosInspeccion/${elementId}`\r\n                : `configuracion/elementosTrabajo/${elementId}`;\r\n\r\n            await remove(databaseRef(database, refPath));\r\n\r\n            setMessage({\r\n                type: 'success',\r\n                text: 'âœ… Elemento eliminado exitosamente'\r\n            });\r\n        } catch (error) {\r\n            console.error('Error al eliminar elemento:', error);\r\n            setMessage({\r\n                type: 'error',\r\n                text: 'âŒ Error al eliminar el elemento'\r\n            });\r\n        }\r\n    };\r\n\r\n    // Filtrar elementos\r\n    const getFilteredElements = () => {\r\n        const elements = activeTab === 'inspection' ? inspectionItems : workItems;\r\n\r\n        if (!elementFilter) return elements;\r\n\r\n        return elements.filter(item =>\r\n            item.name.toLowerCase().includes(elementFilter.toLowerCase()) ||\r\n            item.code.toLowerCase().includes(elementFilter.toLowerCase()) ||\r\n            (item.detail && item.detail.toLowerCase().includes(elementFilter.toLowerCase()))\r\n        );\r\n    };\r\n\r\n    // Actualizar datos del formulario cuando se marcan elementos\r\n    const handleInspectionChange = (itemCode, field, value) => {\r\n        setMaintenanceForm(prev => ({\r\n            ...prev,\r\n            inspectionData: {\r\n                ...prev.inspectionData,\r\n                [`${itemCode}_${field}`]: value\r\n            }\r\n        }));\r\n    };\r\n\r\n    const handleWorkChange = (itemCode, checked) => {\r\n        setMaintenanceForm(prev => ({\r\n            ...prev,\r\n            workData: {\r\n                ...prev.workData,\r\n                [itemCode]: checked\r\n            }\r\n        }));\r\n    };\r\n\r\n    useEffect(() => {\r\n        let filtered = [...maintenanceHistory];\r\n\r\n        if (searchPatente) {\r\n            filtered = filtered.filter(m =>\r\n                m.vehiculoPatente?.toLowerCase().includes(searchPatente.toLowerCase()) ||\r\n                m.vehiculoNombre?.toLowerCase().includes(searchPatente.toLowerCase())\r\n            );\r\n        }\r\n\r\n        if (searchFechaDesde) {\r\n            filtered = filtered.filter(m =>\r\n                new Date(m.fecha) >= new Date(searchFechaDesde)\r\n            );\r\n        }\r\n\r\n        if (searchFechaHasta) {\r\n            filtered = filtered.filter(m =>\r\n                new Date(m.fecha) <= new Date(searchFechaHasta)\r\n            );\r\n        }\r\n\r\n        setFilteredHistory(filtered);\r\n    }, [maintenanceHistory, searchPatente, searchFechaDesde, searchFechaHasta, selectedVehicle]);\r\n\r\n    useEffect(() => {\r\n        if (selectedVehicle) {\r\n            loadMaintenanceHistory(selectedVehicle.id);\r\n            setSearchPatente('');\r\n            setSearchFechaDesde('');\r\n            setSearchFechaHasta('');\r\n        }\r\n    }, [selectedVehicle]);\r\n\r\n    const loadMaintenanceHistory = (vehicleId) => {\r\n        const historyRef = databaseRef(database, `mantenimientos/${vehicleId}`);\r\n\r\n        const unsubscribe = onValue(historyRef, (snapshot) => {\r\n            const data = snapshot.val();\r\n            if (data) {\r\n                const historyArray = Object.entries(data)\r\n                    .map(([id, maintenance]) => ({\r\n                        id,\r\n                        ...maintenance\r\n                    }))\r\n                    .sort((a, b) => new Date(b.fecha) - new Date(a.fecha));\r\n                setMaintenanceHistory(historyArray);\r\n                setFilteredHistory(historyArray);\r\n            } else {\r\n                setMaintenanceHistory([]);\r\n                setFilteredHistory([]);\r\n            }\r\n        });\r\n\r\n        return () => off(historyRef);\r\n    };\r\n\r\n    const handlePhotoUpload = async (files) => {\r\n        if (!files || files.length === 0) return;\r\n\r\n        setUploadingPhotos(true);\r\n        const uploadedPhotos = [];\r\n\r\n        try {\r\n            for (let i = 0; i < files.length; i++) {\r\n                const file = files[i];\r\n\r\n                if (!file.type.startsWith('image/')) {\r\n                    setMessage({\r\n                        type: 'error',\r\n                        text: `El archivo ${file.name} no es una imagen vÃ¡lida`\r\n                    });\r\n                    continue;\r\n                }\r\n\r\n                if (file.size > 10 * 1024 * 1024) {\r\n                    setMessage({\r\n                        type: 'error',\r\n                        text: `El archivo ${file.name} excede el lÃ­mite de 10MB`\r\n                    });\r\n                    continue;\r\n                }\r\n\r\n                const formData = new FormData();\r\n                formData.append('file', file);\r\n                formData.append('upload_preset', 'vehiculos_docs');\r\n\r\n                const vehicleId = selectedVehicle.id;\r\n                const timestamp = Date.now();\r\n                const cleanFileName = file.name.split('.')[0].replace(/[^a-zA-Z0-9_-]/g, '_');\r\n\r\n                formData.append('folder', `municipalidad/mantenimientos/${vehicleId}/${timestamp}`);\r\n                formData.append('public_id', `${timestamp}_${cleanFileName}`);\r\n\r\n                setUploadProgress(Math.round(((i + 1) / files.length) * 100));\r\n\r\n                const response = await fetch(\r\n                    `https://api.cloudinary.com/v1_1/${cloudinaryConfig.cloudName}/image/upload`,\r\n                    {\r\n                        method: 'POST',\r\n                        body: formData\r\n                    }\r\n                );\r\n\r\n                const data = await response.json();\r\n\r\n                uploadedPhotos.push({\r\n                    url: data.secure_url,\r\n                    publicId: data.public_id,\r\n                    nombre: file.name,\r\n                    fecha: new Date().toISOString(),\r\n                    tamaÃ±o: file.size\r\n                });\r\n            }\r\n\r\n            setMaintenanceForm(prev => ({\r\n                ...prev,\r\n                fotos: [...prev.fotos, ...uploadedPhotos]\r\n            }));\r\n\r\n            setMessage({\r\n                type: 'success',\r\n                text: `âœ… ${uploadedPhotos.length} foto(s) subidas exitosamente`\r\n            });\r\n\r\n        } catch (error) {\r\n            console.error('Error al subir fotos:', error);\r\n            setMessage({\r\n                type: 'error',\r\n                text: 'âŒ Error al subir las fotos'\r\n            });\r\n        } finally {\r\n            setUploadingPhotos(false);\r\n            setUploadProgress(0);\r\n        }\r\n    };\r\n\r\n    const handleDeletePhoto = (index) => {\r\n        setMaintenanceForm(prev => ({\r\n            ...prev,\r\n            fotos: prev.fotos.filter((_, i) => i !== index)\r\n        }));\r\n    };\r\n\r\n    const handleSaveMaintenance = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        try {\r\n            const fechaHoraCompleta = `${maintenanceForm.fecha}T${maintenanceForm.hora}:00`;\r\n\r\n            const maintenanceData = {\r\n                ...maintenanceForm,\r\n                fechaCompleta: fechaHoraCompleta,\r\n                vehiculoId: selectedVehicle.id,\r\n                vehiculoNombre: selectedVehicle.nombre,\r\n                vehiculoPatente: selectedVehicle.patente,\r\n                fechaRegistro: new Date().toISOString(),\r\n                registradoPor: currentUser.uid,\r\n                registradoPorNombre: currentUser.name || currentUser.email,\r\n                serviciosCatalogo: maintenanceForm.serviciosCatalogo || [],\r\n                costoTotal: maintenanceForm.costoMantenimiento,\r\n                presupuestoId: maintenanceForm.presupuestoId || null, // Guardar ID del presupuesto\r\n                presupuestoAsociado: maintenanceForm.presupuestoId ? true : false // Indicador\r\n            };\r\n\r\n            const maintenanceRef = databaseRef(database, `mantenimientos/${selectedVehicle.id}`);\r\n            const newMaintenanceRef = push(maintenanceRef);\r\n            await databaseSet(newMaintenanceRef, maintenanceData);\r\n\r\n            const vehicleRef = databaseRef(database, `vehiculos/${selectedVehicle.id}`);\r\n            await update(vehicleRef, {\r\n                ultimoMantenimiento: maintenanceForm.fecha,\r\n                kilometrajeUltimoMantenimiento: maintenanceForm.kilometraje || selectedVehicle.kilometraje,\r\n                proximoMantenimiento: maintenanceForm.proximoMantenimientoFecha,\r\n                kilometrajeProximoMantenimiento: maintenanceForm.proximoMantenimientoKm,\r\n                ultimaActualizacion: new Date().toISOString()\r\n            });\r\n\r\n            setMessage({\r\n                type: 'success',\r\n                text: 'âœ… Mantenimiento registrado exitosamente'\r\n            });\r\n\r\n            resetForm();\r\n            setShowMaintenanceForm(false);\r\n\r\n        } catch (error) {\r\n            console.error('Error al guardar mantenimiento:', error);\r\n            setMessage({\r\n                type: 'error',\r\n                text: 'âŒ Error al guardar el mantenimiento'\r\n            });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const resetForm = () => {\r\n        setMaintenanceForm({\r\n            fecha: new Date().toISOString().split('T')[0],\r\n            hora: new Date().toTimeString().slice(0, 5),\r\n            tipoMantenimiento: 'preventivo',\r\n            kilometraje: '',\r\n            horasUso: '',\r\n            observacionesGenerales: '',\r\n            proximoMantenimientoKm: '',\r\n            proximoMantenimientoFecha: '',\r\n            realizadoPor: currentUser.name || currentUser.email,\r\n            tallerResponsable: '',\r\n            costoMantenimiento: 0,\r\n            fotos: [],\r\n            inspectionData: {},\r\n            workData: {}\r\n        });\r\n    };\r\n\r\n    const handleExportPDF = () => {\r\n        if (!selectedVehicle) {\r\n            setMessage({\r\n                type: 'error',\r\n                text: 'No hay vehÃ­culo seleccionado'\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (maintenanceHistory.length === 0) {\r\n            setMessage({\r\n                type: 'warning',\r\n                text: 'No hay historial de mantenimiento para exportar'\r\n            });\r\n            return;\r\n        }\r\n\r\n        try {\r\n            pdfExportService.exportMaintenanceHistory(\r\n                selectedVehicle,\r\n                maintenanceHistory,\r\n                currentUser\r\n            );\r\n\r\n            setMessage({\r\n                type: 'success',\r\n                text: 'PDF generado exitosamente'\r\n            });\r\n        } catch (error) {\r\n            console.error('Error al generar PDF:', error);\r\n            setMessage({\r\n                type: 'error',\r\n                text: 'Error al generar el PDF'\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: isMobile ? '15px' : '30px' }}>\r\n            {/* Header */}\r\n            <div style={{\r\n                marginBottom: '30px',\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n                flexWrap: 'wrap',\r\n                gap: '15px'\r\n            }}>\r\n                <h1 style={{\r\n                    margin: 0,\r\n                    color: '#1e293b',\r\n                    fontSize: isMobile ? '24px' : '28px',\r\n                    fontWeight: '600'\r\n                }}>\r\n                    ðŸ”§ MÃ³dulo de Mantenimiento Vehicular\r\n                </h1>\r\n            </div>\r\n\r\n            {/* Mensajes */}\r\n            {message.text && (\r\n                <div style={{\r\n                    padding: '12px',\r\n                    borderRadius: '8px',\r\n                    marginBottom: '20px',\r\n                    background: message.type === 'success' ? '#dcfce7' :\r\n                        message.type === 'error' ? '#fee2e2' : '#dbeafe',\r\n                    border: `1px solid ${message.type === 'success' ? '#86efac' :\r\n                        message.type === 'error' ? '#fecaca' : '#93c5fd'\r\n                        }`,\r\n                    color: message.type === 'success' ? '#166534' :\r\n                        message.type === 'error' ? '#991b1b' : '#1e40af'\r\n                }}>\r\n                    {message.text}\r\n                </div>\r\n            )}\r\n\r\n            {/* Modal de GestiÃ³n de Elementos */}\r\n            {showElementsManager && (\r\n                <ElementsManagerModal\r\n                    show={showElementsManager}\r\n                    onClose={() => setShowElementsManager(false)}\r\n                    inspectionItems={inspectionItems}\r\n                    workItems={workItems}\r\n                    activeTab={activeTab}\r\n                    setActiveTab={setActiveTab}\r\n                    elementFilter={elementFilter}\r\n                    setElementFilter={setElementFilter}\r\n                    showNewElementForm={showNewElementForm}\r\n                    setShowNewElementForm={setShowNewElementForm}\r\n                    newElement={newElement}\r\n                    setNewElement={setNewElement}\r\n                    handleSaveNewElement={handleSaveNewElement}\r\n                    handleDeleteElement={handleDeleteElement}\r\n                    getFilteredElements={getFilteredElements}\r\n                    isMobile={isMobile}\r\n                />\r\n            )}\r\n\r\n            {!selectedVehicle ? (\r\n                <VehicleSelectionGrid\r\n                    vehiculos={vehiculos}\r\n                    onSelectVehicle={setSelectedVehicle}\r\n                    isMobile={isMobile}\r\n                />\r\n            ) : (\r\n                <>\r\n                    <VehicleInfoCard\r\n                        vehicle={selectedVehicle}\r\n                        isMobile={isMobile}\r\n                    />\r\n\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        gap: '10px',\r\n                        marginBottom: '20px',\r\n                        flexWrap: 'wrap'\r\n                    }}>\r\n                        <button\r\n                            onClick={() => setShowMaintenanceForm(!showMaintenanceForm)}\r\n                            style={{\r\n                                padding: '12px 24px',\r\n                                background: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\r\n                                color: 'white',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                fontSize: '16px',\r\n                                fontWeight: '500',\r\n                                cursor: 'pointer',\r\n                                boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n                            }}\r\n                        >\r\n                            {showMaintenanceForm ? 'âœ– Cancelar' : 'âž• Registrar Mantenimiento'}\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={handleExportPDF}\r\n                            style={{\r\n                                padding: '12px 24px',\r\n                                background: 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',\r\n                                color: 'white',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                fontSize: '16px',\r\n                                fontWeight: '500',\r\n                                cursor: 'pointer',\r\n                                boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n                            }}\r\n                        >\r\n                            ðŸ“„ Exportar Historial PDF\r\n                        </button>\r\n\r\n                    </div>\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        gap: '10px',\r\n                        marginBottom: '20px',\r\n                        flexWrap: 'wrap'\r\n                    }}>\r\n\r\n                        {/* AGREGAR ESTE BOTÃ“N */}\r\n                        <button\r\n                            onClick={() => setShowElementsManager(true)}\r\n                            style={{\r\n                                padding: '12px 24px',\r\n                                background: 'linear-gradient(135deg, #6b7280 0%, #4b5563 100%)',\r\n                                color: 'white',\r\n                                border: 'none',\r\n                                borderRadius: '8px',\r\n                                fontSize: '16px',\r\n                                fontWeight: '500',\r\n                                cursor: 'pointer',\r\n                                boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n                            }}\r\n                        >\r\n                            âš™ï¸ GestiÃ³n de Elementos\r\n                        </button>\r\n                    </div>\r\n\r\n                    {showMaintenanceForm && (\r\n                        <MaintenanceForm\r\n                            form={maintenanceForm}\r\n                            setForm={setMaintenanceForm}\r\n                            onSubmit={handleSaveMaintenance}\r\n                            onPhotoUpload={handlePhotoUpload}\r\n                            onDeletePhoto={handleDeletePhoto}\r\n                            uploadingPhotos={uploadingPhotos}\r\n                            uploadProgress={uploadProgress}\r\n                            loading={loading}\r\n                            isMobile={isMobile}\r\n                            vehicle={selectedVehicle}\r\n                            currentUser={currentUser}\r\n                            inspectionItems={inspectionItems}\r\n                            workItems={workItems}\r\n                            handleInspectionChange={handleInspectionChange}\r\n                            handleWorkChange={handleWorkChange}\r\n                            presupuestosDisponibles={presupuestosDisponibles}\r\n                            handlePresupuestoSelect={handlePresupuestoSelect}\r\n                            setMessage={setMessage}\r\n\r\n                        />\r\n                    )}\r\n\r\n                    {maintenanceHistory.length > 0 && (\r\n                        <div style={{\r\n                            background: 'white',\r\n                            borderRadius: '12px',\r\n                            padding: '20px',\r\n                            marginBottom: '20px',\r\n                            boxShadow: '0 2px 8px rgba(0,0,0,0.05)'\r\n                        }}>\r\n                            <h3 style={{\r\n                                margin: '0 0 15px 0',\r\n                                fontSize: '18px',\r\n                                color: '#1f2937'\r\n                            }}>\r\n                                ðŸ” Filtros de BÃºsqueda\r\n                            </h3>\r\n\r\n                            <div style={{\r\n                                display: 'grid',\r\n                                gridTemplateColumns: isMobile ? '1fr' : 'repeat(4, 1fr)',\r\n                                gap: '15px'\r\n                            }}>\r\n                                <div>\r\n                                    <label style={{\r\n                                        display: 'block',\r\n                                        marginBottom: '6px',\r\n                                        fontSize: '13px',\r\n                                        color: '#6b7280'\r\n                                    }}>\r\n                                        Buscar por Patente\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Ej: XX-XX-99\"\r\n                                        value={searchPatente}\r\n                                        onChange={(e) => setSearchPatente(e.target.value)}\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            padding: '8px',\r\n                                            border: '1px solid #d1d5db',\r\n                                            borderRadius: '6px',\r\n                                            fontSize: '14px'\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label style={{\r\n                                        display: 'block',\r\n                                        marginBottom: '6px',\r\n                                        fontSize: '13px',\r\n                                        color: '#6b7280'\r\n                                    }}>\r\n                                        Fecha Desde\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"date\"\r\n                                        value={searchFechaDesde}\r\n                                        onChange={(e) => setSearchFechaDesde(e.target.value)}\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            padding: '8px',\r\n                                            border: '1px solid #d1d5db',\r\n                                            borderRadius: '6px',\r\n                                            fontSize: '14px'\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label style={{\r\n                                        display: 'block',\r\n                                        marginBottom: '6px',\r\n                                        fontSize: '13px',\r\n                                        color: '#6b7280'\r\n                                    }}>\r\n                                        Fecha Hasta\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"date\"\r\n                                        value={searchFechaHasta}\r\n                                        onChange={(e) => setSearchFechaHasta(e.target.value)}\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            padding: '8px',\r\n                                            border: '1px solid #d1d5db',\r\n                                            borderRadius: '6px',\r\n                                            fontSize: '14px'\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div style={{\r\n                                    display: 'flex',\r\n                                    alignItems: 'flex-end'\r\n                                }}>\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            setSearchPatente('');\r\n                                            setSearchFechaDesde('');\r\n                                            setSearchFechaHasta('');\r\n                                        }}\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            padding: '8px',\r\n                                            background: '#6b7280',\r\n                                            color: 'white',\r\n                                            border: 'none',\r\n                                            borderRadius: '6px',\r\n                                            fontSize: '14px',\r\n                                            cursor: 'pointer'\r\n                                        }}\r\n                                    >\r\n                                        Limpiar Filtros\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div style={{\r\n                                marginTop: '15px',\r\n                                padding: '10px',\r\n                                background: '#f9fafb',\r\n                                borderRadius: '6px',\r\n                                fontSize: '13px',\r\n                                color: '#6b7280'\r\n                            }}>\r\n                                Mostrando {filteredHistory.length} de {maintenanceHistory.length} registros\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <MaintenanceHistory\r\n                        history={filteredHistory}\r\n                        isMobile={isMobile}\r\n                        vehicle={selectedVehicle}\r\n                        currentUser={currentUser}\r\n                        inspectionItems={inspectionItems}\r\n                        workItems={workItems}\r\n                    />\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// Modal de GestiÃ³n de Elementos\r\nconst ElementsManagerModal = ({\r\n    show,\r\n    onClose,\r\n    inspectionItems,\r\n    workItems,\r\n    activeTab,\r\n    setActiveTab,\r\n    elementFilter,\r\n    setElementFilter,\r\n    showNewElementForm,\r\n    setShowNewElementForm,\r\n    newElement,\r\n    setNewElement,\r\n    handleSaveNewElement,\r\n    handleDeleteElement,\r\n    getFilteredElements,\r\n    isMobile\r\n}) => {\r\n    const [editingElement, setEditingElement] = useState(null);\r\n    const [editForm, setEditForm] = useState({\r\n        code: '',\r\n        name: '',\r\n        detail: '',\r\n        requiresObservation: false\r\n    });\r\n    if (!show) return null;\r\n\r\n    // FunciÃ³n para iniciar ediciÃ³n\r\n    const startEditing = (item) => {\r\n        setEditingElement(item.id);\r\n        setEditForm({\r\n            code: item.code,\r\n            name: item.name,\r\n            detail: item.detail || '',\r\n            requiresObservation: item.requiresObservation || false\r\n        });\r\n        setShowNewElementForm(false);\r\n    };\r\n    const handleSaveEdit = async (itemId) => {\r\n        if (!editForm.code || !editForm.name) {\r\n            alert('El cÃ³digo y nombre son obligatorios');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const refPath = activeTab === 'inspection'\r\n                ? `configuracion/elementosInspeccion/${itemId}`\r\n                : `configuracion/elementosTrabajo/${itemId}`;\r\n\r\n            const elementRef = databaseRef(database, refPath);\r\n\r\n            await update(elementRef, {\r\n                code: editForm.code.toUpperCase(),\r\n                name: editForm.name,\r\n                detail: editForm.detail,\r\n                requiresObservation: activeTab === 'inspection' ? editForm.requiresObservation : false,\r\n                updatedAt: new Date().toISOString()\r\n            });\r\n\r\n            setEditingElement(null);\r\n            setEditForm({\r\n                code: '',\r\n                name: '',\r\n                detail: '',\r\n                requiresObservation: false\r\n            });\r\n        } catch (error) {\r\n            console.error('Error al actualizar elemento:', error);\r\n            alert('Error al actualizar el elemento');\r\n        }\r\n    };\r\n    // FunciÃ³n para cancelar ediciÃ³n\r\n    const cancelEdit = () => {\r\n        setEditingElement(null);\r\n        setEditForm({\r\n            code: '',\r\n            name: '',\r\n            detail: '',\r\n            requiresObservation: false\r\n        });\r\n    };\r\n\r\n    if (!show) return null;\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(0, 0, 0, 0.5)',\r\n            zIndex: 1000,\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            padding: '20px'\r\n        }}>\r\n            <div style={{\r\n                background: 'white',\r\n                borderRadius: '12px',\r\n                maxWidth: '900px',\r\n                width: '100%',\r\n                maxHeight: '90vh',\r\n                overflow: 'hidden',\r\n                display: 'flex',\r\n                flexDirection: 'column'\r\n            }}>\r\n                {/* Header del Modal */}\r\n                <div style={{\r\n                    padding: '20px',\r\n                    borderBottom: '1px solid #e5e7eb',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center'\r\n                }}>\r\n                    <h2 style={{\r\n                        margin: 0,\r\n                        fontSize: '20px',\r\n                        color: '#1f2937'\r\n                    }}>\r\n                        âš™ï¸ GestiÃ³n de Elementos de Mantenimiento\r\n                    </h2>\r\n                    <button\r\n                        onClick={onClose}\r\n                        style={{\r\n                            padding: '8px 12px',\r\n                            background: '#6b7280',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            borderRadius: '6px',\r\n                            cursor: 'pointer',\r\n                            fontSize: '14px'\r\n                        }}\r\n                    >\r\n                        âœ• Cerrar\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Tabs */}\r\n                <div style={{\r\n                    display: 'flex',\r\n                    borderBottom: '1px solid #e5e7eb',\r\n                    padding: '0 20px'\r\n                }}>\r\n                    <button\r\n                        onClick={() => {\r\n                            setActiveTab('inspection');\r\n                            setNewElement(prev => ({ ...prev, type: 'inspection' }));\r\n                        }}\r\n                        style={{\r\n                            padding: '12px 24px',\r\n                            background: 'none',\r\n                            border: 'none',\r\n                            borderBottom: activeTab === 'inspection' ? '2px solid #3b82f6' : '2px solid transparent',\r\n                            color: activeTab === 'inspection' ? '#3b82f6' : '#6b7280',\r\n                            fontSize: '14px',\r\n                            fontWeight: activeTab === 'inspection' ? '600' : '400',\r\n                            cursor: 'pointer'\r\n                        }}\r\n                    >\r\n                        ðŸ” Elementos de InspecciÃ³n ({inspectionItems.length})\r\n                    </button>\r\n                    <button\r\n                        onClick={() => {\r\n                            setActiveTab('works');\r\n                            setNewElement(prev => ({ ...prev, type: 'work' }));\r\n                        }}\r\n                        style={{\r\n                            padding: '12px 24px',\r\n                            background: 'none',\r\n                            border: 'none',\r\n                            borderBottom: activeTab === 'works' ? '2px solid #3b82f6' : '2px solid transparent',\r\n                            color: activeTab === 'works' ? '#3b82f6' : '#6b7280',\r\n                            fontSize: '14px',\r\n                            fontWeight: activeTab === 'works' ? '600' : '400',\r\n                            cursor: 'pointer'\r\n                        }}\r\n                    >\r\n                        âœ… Trabajos Realizados ({workItems.length})\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Contenido del Tab */}\r\n                <div style={{\r\n                    flex: 1,\r\n                    overflow: 'auto',\r\n                    padding: '20px'\r\n                }}>\r\n                    {/* Barra de bÃºsqueda y botÃ³n de nuevo */}\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        gap: '10px',\r\n                        marginBottom: '20px'\r\n                    }}>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Buscar por cÃ³digo, nombre o detalle...\"\r\n                            value={elementFilter}\r\n                            onChange={(e) => setElementFilter(e.target.value)}\r\n                            style={{\r\n                                flex: 1,\r\n                                padding: '10px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '6px',\r\n                                fontSize: '14px'\r\n                            }}\r\n                        />\r\n                        <button\r\n                            onClick={() => setShowNewElementForm(!showNewElementForm)}\r\n                            style={{\r\n                                padding: '10px 20px',\r\n                                background: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\r\n                                color: 'white',\r\n                                border: 'none',\r\n                                borderRadius: '6px',\r\n                                fontSize: '14px',\r\n                                cursor: 'pointer'\r\n                            }}\r\n                        >\r\n                            {showNewElementForm ? 'âœ– Cancelar' : 'âž• Nuevo Elemento'}\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Formulario de nuevo elemento */}\r\n                    {showNewElementForm && (\r\n                        <div style={{\r\n                            padding: '20px',\r\n                            background: '#f9fafb',\r\n                            borderRadius: '8px',\r\n                            marginBottom: '20px'\r\n                        }}>\r\n                            <h4 style={{\r\n                                margin: '0 0 15px 0',\r\n                                fontSize: '16px',\r\n                                color: '#374151'\r\n                            }}>\r\n                                Crear Nuevo Elemento de {activeTab === 'inspection' ? 'InspecciÃ³n' : 'Trabajo'}\r\n                            </h4>\r\n\r\n                            <div style={{\r\n                                display: 'grid',\r\n                                gridTemplateColumns: isMobile ? '1fr' : '1fr 2fr',\r\n                                gap: '15px'\r\n                            }}>\r\n                                <div>\r\n                                    <label style={{\r\n                                        display: 'block',\r\n                                        marginBottom: '6px',\r\n                                        fontSize: '13px',\r\n                                        color: '#374151'\r\n                                    }}>\r\n                                        CÃ³digo *\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={newElement.code}\r\n                                        onChange={(e) => setNewElement(prev => ({ ...prev, code: e.target.value }))}\r\n                                        placeholder=\"Ej: INSP001\"\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            padding: '8px',\r\n                                            border: '1px solid #d1d5db',\r\n                                            borderRadius: '4px',\r\n                                            fontSize: '14px'\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label style={{\r\n                                        display: 'block',\r\n                                        marginBottom: '6px',\r\n                                        fontSize: '13px',\r\n                                        color: '#374151'\r\n                                    }}>\r\n                                        Nombre *\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={newElement.name}\r\n                                        onChange={(e) => setNewElement(prev => ({ ...prev, name: e.target.value }))}\r\n                                        placeholder=\"Ej: RevisiÃ³n de frenos delanteros\"\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            padding: '8px',\r\n                                            border: '1px solid #d1d5db',\r\n                                            borderRadius: '4px',\r\n                                            fontSize: '14px'\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div style={{ marginTop: '15px' }}>\r\n                                <label style={{\r\n                                    display: 'block',\r\n                                    marginBottom: '6px',\r\n                                    fontSize: '13px',\r\n                                    color: '#374151'\r\n                                }}>\r\n                                    Detalle (opcional)\r\n                                </label>\r\n                                <textarea\r\n                                    value={newElement.detail}\r\n                                    onChange={(e) => setNewElement(prev => ({ ...prev, detail: e.target.value }))}\r\n                                    placeholder=\"DescripciÃ³n detallada del elemento...\"\r\n                                    rows={3}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '8px',\r\n                                        border: '1px solid #d1d5db',\r\n                                        borderRadius: '4px',\r\n                                        fontSize: '14px',\r\n                                        resize: 'none'\r\n                                    }}\r\n                                />\r\n                            </div>\r\n\r\n                            {activeTab === 'inspection' && (\r\n                                <div style={{ marginTop: '15px' }}>\r\n                                    <label style={{\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: '8px',\r\n                                        cursor: 'pointer'\r\n                                    }}>\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            checked={newElement.requiresObservation}\r\n                                            onChange={(e) => setNewElement(prev => ({ ...prev, requiresObservation: e.target.checked }))}\r\n                                        />\r\n                                        <span style={{ fontSize: '14px', color: '#374151' }}>\r\n                                            Requiere observaciones cuando hay problemas\r\n                                        </span>\r\n                                    </label>\r\n                                </div>\r\n                            )}\r\n\r\n                            <button\r\n                                onClick={handleSaveNewElement}\r\n                                style={{\r\n                                    marginTop: '15px',\r\n                                    padding: '10px 20px',\r\n                                    background: '#3b82f6',\r\n                                    color: 'white',\r\n                                    border: 'none',\r\n                                    borderRadius: '6px',\r\n                                    fontSize: '14px',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            >\r\n                                ðŸ’¾ Guardar Elemento\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Lista de elementos */}\r\n                    <div style={{\r\n                        display: 'grid',\r\n                        gap: '10px'\r\n                    }}>\r\n                        {getFilteredElements().length === 0 ? (\r\n                            <div style={{\r\n                                padding: '40px',\r\n                                textAlign: 'center',\r\n                                color: '#6b7280'\r\n                            }}>\r\n                                <div style={{ fontSize: '32px', marginBottom: '10px' }}>\r\n                                    {activeTab === 'inspection' ? 'ðŸ”' : 'âœ…'}\r\n                                </div>\r\n                                <p>No hay elementos {activeTab === 'inspection' ? 'de inspecciÃ³n' : 'de trabajo'} configurados</p>\r\n                                <p style={{ fontSize: '14px' }}>Crea tu primer elemento usando el botÃ³n de arriba</p>\r\n                            </div>\r\n                        ) : (\r\n                            getFilteredElements().map(item => (\r\n                                <div key={item.id} style={{\r\n                                    padding: '15px',\r\n                                    background: editingElement === item.id ? '#f0f9ff' : 'white',\r\n                                    border: '1px solid',\r\n                                    borderColor: editingElement === item.id ? '#3b82f6' : '#e5e7eb',\r\n                                    borderRadius: '8px'\r\n                                }}>\r\n                                    {editingElement === item.id ? (\r\n                                        // Modo ediciÃ³n\r\n                                        <div>\r\n                                            <div style={{\r\n                                                display: 'grid',\r\n                                                gridTemplateColumns: isMobile ? '1fr' : '150px 1fr',\r\n                                                gap: '10px',\r\n                                                marginBottom: '10px'\r\n                                            }}>\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={editForm.code}\r\n                                                    onChange={(e) => setEditForm({ ...editForm, code: e.target.value })}\r\n                                                    placeholder=\"CÃ³digo\"\r\n                                                    style={{\r\n                                                        padding: '6px',\r\n                                                        border: '1px solid #d1d5db',\r\n                                                        borderRadius: '4px',\r\n                                                        fontSize: '14px'\r\n                                                    }}\r\n                                                />\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={editForm.name}\r\n                                                    onChange={(e) => setEditForm({ ...editForm, name: e.target.value })}\r\n                                                    placeholder=\"Nombre\"\r\n                                                    style={{\r\n                                                        padding: '6px',\r\n                                                        border: '1px solid #d1d5db',\r\n                                                        borderRadius: '4px',\r\n                                                        fontSize: '14px'\r\n                                                    }}\r\n                                                />\r\n                                            </div>\r\n                                            <textarea\r\n                                                value={editForm.detail}\r\n                                                onChange={(e) => setEditForm({ ...editForm, detail: e.target.value })}\r\n                                                placeholder=\"Detalle (opcional)\"\r\n                                                rows={2}\r\n                                                style={{\r\n                                                    width: '100%',\r\n                                                    padding: '6px',\r\n                                                    border: '1px solid #d1d5db',\r\n                                                    borderRadius: '4px',\r\n                                                    fontSize: '13px',\r\n                                                    resize: 'none',\r\n                                                    marginBottom: '10px'\r\n                                                }}\r\n                                            />\r\n                                            {activeTab === 'inspection' && (\r\n                                                <label style={{\r\n                                                    display: 'flex',\r\n                                                    alignItems: 'center',\r\n                                                    gap: '8px',\r\n                                                    marginBottom: '10px',\r\n                                                    cursor: 'pointer'\r\n                                                }}>\r\n                                                    <input\r\n                                                        type=\"checkbox\"\r\n                                                        checked={editForm.requiresObservation}\r\n                                                        onChange={(e) => setEditForm({ ...editForm, requiresObservation: e.target.checked })}\r\n                                                    />\r\n                                                    <span style={{ fontSize: '13px', color: '#374151' }}>\r\n                                                        Requiere observaciones\r\n                                                    </span>\r\n                                                </label>\r\n                                            )}\r\n                                            <div style={{ display: 'flex', gap: '8px' }}>\r\n                                                <button\r\n                                                    onClick={() => handleSaveEdit(item.id)}\r\n                                                    style={{\r\n                                                        padding: '6px 12px',\r\n                                                        background: '#22c55e',\r\n                                                        color: 'white',\r\n                                                        border: 'none',\r\n                                                        borderRadius: '4px',\r\n                                                        fontSize: '12px',\r\n                                                        cursor: 'pointer'\r\n                                                    }}\r\n                                                >\r\n                                                    ðŸ’¾ Guardar\r\n                                                </button>\r\n                                                <button\r\n                                                    onClick={cancelEdit}\r\n                                                    style={{\r\n                                                        padding: '6px 12px',\r\n                                                        background: '#6b7280',\r\n                                                        color: 'white',\r\n                                                        border: 'none',\r\n                                                        borderRadius: '4px',\r\n                                                        fontSize: '12px',\r\n                                                        cursor: 'pointer'\r\n                                                    }}\r\n                                                >\r\n                                                    Cancelar\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    ) : (\r\n                                        // Modo visualizaciÃ³n\r\n                                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                                            <div style={{ flex: 1 }}>\r\n                                                <div style={{\r\n                                                    display: 'flex',\r\n                                                    alignItems: 'center',\r\n                                                    gap: '10px',\r\n                                                    marginBottom: '8px'\r\n                                                }}>\r\n                                                    <span style={{\r\n                                                        padding: '4px 8px',\r\n                                                        background: '#dbeafe',\r\n                                                        color: '#1e40af',\r\n                                                        borderRadius: '4px',\r\n                                                        fontSize: '12px',\r\n                                                        fontWeight: '600'\r\n                                                    }}>\r\n                                                        {item.code}\r\n                                                    </span>\r\n                                                    <span style={{\r\n                                                        fontSize: '15px',\r\n                                                        fontWeight: '500',\r\n                                                        color: '#1f2937'\r\n                                                    }}>\r\n                                                        {item.name}\r\n                                                    </span>\r\n                                                    {item.requiresObservation && (\r\n                                                        <span style={{\r\n                                                            padding: '2px 6px',\r\n                                                            background: '#fef3c7',\r\n                                                            color: '#92400e',\r\n                                                            borderRadius: '4px',\r\n                                                            fontSize: '11px'\r\n                                                        }}>\r\n                                                            Requiere obs.\r\n                                                        </span>\r\n                                                    )}\r\n                                                </div>\r\n                                                {item.detail && (\r\n                                                    <p style={{\r\n                                                        margin: 0,\r\n                                                        fontSize: '13px',\r\n                                                        color: '#6b7280',\r\n                                                        lineHeight: '1.4'\r\n                                                    }}>\r\n                                                        {item.detail}\r\n                                                    </p>\r\n                                                )}\r\n                                            </div>\r\n                                            <div style={{ display: 'flex', gap: '8px' }}>\r\n                                                <button\r\n                                                    onClick={() => startEditing(item)}\r\n                                                    style={{\r\n                                                        padding: '6px 12px',\r\n                                                        background: '#3b82f6',\r\n                                                        color: 'white',\r\n                                                        border: 'none',\r\n                                                        borderRadius: '4px',\r\n                                                        fontSize: '12px',\r\n                                                        cursor: 'pointer'\r\n                                                    }}\r\n                                                >\r\n                                                    âœï¸ Editar\r\n                                                </button>\r\n                                                <button\r\n                                                    onClick={() => handleDeleteElement(item.id, activeTab === 'inspection' ? 'inspection' : 'work')}\r\n                                                    style={{\r\n                                                        padding: '6px 12px',\r\n                                                        background: '#ef4444',\r\n                                                        color: 'white',\r\n                                                        border: 'none',\r\n                                                        borderRadius: '4px',\r\n                                                        fontSize: '12px',\r\n                                                        cursor: 'pointer'\r\n                                                    }}\r\n                                                >\r\n                                                    ðŸ—‘ï¸ Eliminar\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Componente para selecciÃ³n de vehÃ­culo (sin cambios)\r\nconst VehicleSelectionGrid = ({ vehiculos, onSelectVehicle, isMobile }) => {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [filterStatus, setFilterStatus] = useState('todos');\r\n\r\n    const getMaintenanceStatus = (vehicle) => {\r\n        if (!vehicle.proximoMantenimiento) return 'sin_programar';\r\n\r\n        const hoy = new Date();\r\n        const proximaFecha = new Date(vehicle.proximoMantenimiento);\r\n        const diasRestantes = Math.ceil((proximaFecha - hoy) / (1000 * 60 * 60 * 24));\r\n\r\n        if (diasRestantes < 0) return 'vencido';\r\n        if (diasRestantes <= 7) return 'urgente';\r\n        if (diasRestantes <= 30) return 'proximo';\r\n        return 'ok';\r\n    };\r\n\r\n    const filteredVehiculos = vehiculos.filter(vehicle => {\r\n        const matchesSearch =\r\n            vehicle.nombre?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            vehicle.patente?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            vehicle.marca?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            vehicle.modelo?.toLowerCase().includes(searchTerm.toLowerCase());\r\n\r\n        const status = getMaintenanceStatus(vehicle);\r\n        const matchesStatus =\r\n            filterStatus === 'todos' ||\r\n            (filterStatus === 'vencido' && status === 'vencido') ||\r\n            (filterStatus === 'urgente' && status === 'urgente') ||\r\n            (filterStatus === 'proximo' && status === 'proximo') ||\r\n            (filterStatus === 'ok' && status === 'ok');\r\n\r\n        return matchesSearch && matchesStatus;\r\n    });\r\n\r\n    return (\r\n        <div>\r\n            <div style={{\r\n                background: 'white',\r\n                borderRadius: '12px',\r\n                padding: '20px',\r\n                marginBottom: '20px',\r\n                boxShadow: '0 2px 8px rgba(0,0,0,0.05)'\r\n            }}>\r\n                <h3 style={{\r\n                    margin: '0 0 15px 0',\r\n                    fontSize: '18px',\r\n                    color: '#1f2937'\r\n                }}>\r\n                    ðŸ” Buscar VehÃ­culo\r\n                </h3>\r\n\r\n                <div style={{\r\n                    display: 'grid',\r\n                    gridTemplateColumns: isMobile ? '1fr' : '2fr 1fr 150px',\r\n                    gap: '15px'\r\n                }}>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Buscar por nombre, patente, marca o modelo...\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                        style={{\r\n                            padding: '10px',\r\n                            border: '1px solid #d1d5db',\r\n                            borderRadius: '6px',\r\n                            fontSize: '14px'\r\n                        }}\r\n                    />\r\n\r\n                    <select\r\n                        value={filterStatus}\r\n                        onChange={(e) => setFilterStatus(e.target.value)}\r\n                        style={{\r\n                            padding: '10px',\r\n                            border: '1px solid #d1d5db',\r\n                            borderRadius: '6px',\r\n                            fontSize: '14px'\r\n                        }}\r\n                    >\r\n                        <option value=\"todos\">Todos los estados</option>\r\n                        <option value=\"vencido\">âš ï¸ Mantenimiento vencido</option>\r\n                        <option value=\"urgente\">â° Mantenimiento urgente</option>\r\n                        <option value=\"proximo\">ðŸ“… Mantenimiento prÃ³ximo</option>\r\n                        <option value=\"ok\">âœ… Mantenimiento al dÃ­a</option>\r\n                    </select>\r\n\r\n                    <button\r\n                        onClick={() => {\r\n                            setSearchTerm('');\r\n                            setFilterStatus('todos');\r\n                        }}\r\n                        style={{\r\n                            padding: '10px',\r\n                            background: '#6b7280',\r\n                            color: 'white',\r\n                            border: 'none',\r\n                            borderRadius: '6px',\r\n                            fontSize: '14px',\r\n                            cursor: 'pointer'\r\n                        }}\r\n                    >\r\n                        Limpiar\r\n                    </button>\r\n                </div>\r\n\r\n                <div style={{\r\n                    marginTop: '10px',\r\n                    fontSize: '13px',\r\n                    color: '#6b7280'\r\n                }}>\r\n                    Mostrando {filteredVehiculos.length} de {vehiculos.length} vehÃ­culos\r\n                </div>\r\n            </div>\r\n\r\n            <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: `repeat(auto-fill, minmax(${isMobile ? '100%' : '300px'}, 1fr))`,\r\n                gap: '20px'\r\n            }}>\r\n                {filteredVehiculos.length === 0 ? (\r\n                    <div style={{\r\n                        gridColumn: '1 / -1',\r\n                        padding: '40px',\r\n                        textAlign: 'center',\r\n                        background: 'white',\r\n                        borderRadius: '12px',\r\n                        color: '#6b7280'\r\n                    }}>\r\n                        <div style={{ fontSize: '48px', marginBottom: '10px' }}>ðŸ”</div>\r\n                        <p style={{ fontSize: '16px' }}>No se encontraron vehÃ­culos</p>\r\n                        <p style={{ fontSize: '14px' }}>Intenta con otros tÃ©rminos de bÃºsqueda</p>\r\n                    </div>\r\n                ) : (\r\n                    filteredVehiculos.map(vehicle => {\r\n                        const status = getMaintenanceStatus(vehicle);\r\n\r\n                        return (\r\n                            <div\r\n                                key={vehicle.id}\r\n                                onClick={() => onSelectVehicle(vehicle)}\r\n                                style={{\r\n                                    background: 'white',\r\n                                    borderRadius: '12px',\r\n                                    padding: '20px',\r\n                                    boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n                                    cursor: 'pointer',\r\n                                    transition: 'all 0.3s',\r\n                                    border: '2px solid',\r\n                                    borderColor: status === 'vencido' ? '#ef4444' :\r\n                                        status === 'urgente' ? '#f59e0b' :\r\n                                            status === 'proximo' ? '#3b82f6' : '#e5e7eb'\r\n                                }}\r\n                                onMouseEnter={(e) => {\r\n                                    e.currentTarget.style.transform = 'translateY(-2px)';\r\n                                    e.currentTarget.style.boxShadow = '0 4px 12px rgba(0,0,0,0.1)';\r\n                                }}\r\n                                onMouseLeave={(e) => {\r\n                                    e.currentTarget.style.transform = 'translateY(0)';\r\n                                    e.currentTarget.style.boxShadow = '0 2px 8px rgba(0,0,0,0.05)';\r\n                                }}\r\n                            >\r\n                                <div style={{\r\n                                    display: 'flex',\r\n                                    justifyContent: 'space-between',\r\n                                    alignItems: 'start',\r\n                                    marginBottom: '12px'\r\n                                }}>\r\n                                    <h3 style={{\r\n                                        margin: 0,\r\n                                        fontSize: '18px',\r\n                                        color: '#1f2937'\r\n                                    }}>\r\n                                        ðŸš› {vehicle.nombre}\r\n                                    </h3>\r\n\r\n                                    {status === 'vencido' && (\r\n                                        <span style={{\r\n                                            padding: '4px 8px',\r\n                                            background: '#fee2e2',\r\n                                            color: '#991b1b',\r\n                                            borderRadius: '4px',\r\n                                            fontSize: '12px',\r\n                                            fontWeight: '600'\r\n                                        }}>\r\n                                            âš ï¸ VENCIDO\r\n                                        </span>\r\n                                    )}\r\n                                    {status === 'urgente' && (\r\n                                        <span style={{\r\n                                            padding: '4px 8px',\r\n                                            background: '#fef3c7',\r\n                                            color: '#92400e',\r\n                                            borderRadius: '4px',\r\n                                            fontSize: '12px',\r\n                                            fontWeight: '600'\r\n                                        }}>\r\n                                            â° URGENTE\r\n                                        </span>\r\n                                    )}\r\n                                    {status === 'proximo' && (\r\n                                        <span style={{\r\n                                            padding: '4px 8px',\r\n                                            background: '#dbeafe',\r\n                                            color: '#1e40af',\r\n                                            borderRadius: '4px',\r\n                                            fontSize: '12px',\r\n                                            fontWeight: '600'\r\n                                        }}>\r\n                                            ðŸ“… PRÃ“XIMO\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <div style={{\r\n                                    fontSize: '14px',\r\n                                    color: '#6b7280',\r\n                                    lineHeight: '1.6'\r\n                                }}>\r\n                                    <div>ðŸ“ {vehicle.marca} {vehicle.modelo}</div>\r\n                                    <div>ðŸ”¢ Patente: {vehicle.patente}</div>\r\n                                    {vehicle.kilometraje && (\r\n                                        <div>ðŸ“ {vehicle.kilometraje.toLocaleString()} km</div>\r\n                                    )}\r\n                                    {vehicle.ultimoMantenimiento && (\r\n                                        <div>\r\n                                            ðŸ”§ Ãšltimo: {new Date(vehicle.ultimoMantenimiento).toLocaleDateString('es-CL')}\r\n                                        </div>\r\n                                    )}\r\n                                    {vehicle.proximoMantenimiento && (\r\n                                        <div style={{\r\n                                            marginTop: '8px',\r\n                                            padding: '8px',\r\n                                            background: '#f9fafb',\r\n                                            borderRadius: '4px',\r\n                                            fontSize: '13px'\r\n                                        }}>\r\n                                            ðŸ“† PrÃ³ximo: {new Date(vehicle.proximoMantenimiento).toLocaleDateString('es-CL')}\r\n                                            {vehicle.kilometrajeProximoMantenimiento && (\r\n                                                <span> o {vehicle.kilometrajeProximoMantenimiento.toLocaleString()} km</span>\r\n                                            )}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Componente de informaciÃ³n del vehÃ­culo\r\nconst VehicleInfoCard = ({ vehicle, isMobile }) => (\r\n    <div style={{\r\n        background: 'white',\r\n        borderRadius: '12px',\r\n        padding: '20px',\r\n        marginBottom: '20px',\r\n        boxShadow: '0 2px 8px rgba(0,0,0,0.05)'\r\n    }}>\r\n        <h2 style={{\r\n            margin: '0 0 15px 0',\r\n            fontSize: '20px',\r\n            color: '#1f2937'\r\n        }}>\r\n            ðŸš› {vehicle.nombre}\r\n        </h2>\r\n\r\n        <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fit, minmax(200px, 1fr))',\r\n            gap: '15px'\r\n        }}>\r\n            <div>\r\n                <span style={{ color: '#6b7280', fontSize: '13px' }}>Marca/Modelo</span>\r\n                <div style={{ fontSize: '15px', fontWeight: '500' }}>\r\n                    {vehicle.marca} {vehicle.modelo}\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <span style={{ color: '#6b7280', fontSize: '13px' }}>Patente</span>\r\n                <div style={{ fontSize: '15px', fontWeight: '500' }}>\r\n                    {vehicle.patente}\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <span style={{ color: '#6b7280', fontSize: '13px' }}>Kilometraje Actual</span>\r\n                <div style={{ fontSize: '15px', fontWeight: '500' }}>\r\n                    {vehicle.kilometraje?.toLocaleString() || 0} km\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <span style={{ color: '#6b7280', fontSize: '13px' }}>Estado</span>\r\n                <div style={{ fontSize: '15px', fontWeight: '500' }}>\r\n                    <span style={{\r\n                        padding: '4px 8px',\r\n                        borderRadius: '4px',\r\n                        fontSize: '12px',\r\n                        background: vehicle.estado === 'disponible' ? '#dcfce7' :\r\n                            vehicle.estado === 'en_uso' ? '#dbeafe' :\r\n                                vehicle.estado === 'mantenimiento' ? '#fef3c7' : '#fee2e2',\r\n                        color: vehicle.estado === 'disponible' ? '#15803d' :\r\n                            vehicle.estado === 'en_uso' ? '#1e40af' :\r\n                                vehicle.estado === 'mantenimiento' ? '#92400e' : '#991b1b'\r\n                    }}>\r\n                        {vehicle.estado === 'disponible' ? 'âœ… Disponible' :\r\n                            vehicle.estado === 'en_uso' ? 'ðŸ”§ En Uso' :\r\n                                vehicle.estado === 'mantenimiento' ? 'ðŸ”§ Mantenimiento' : 'âŒ Fuera Servicio'}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n);\r\n// Componente del formulario de mantenimiento modificado\r\nconst MaintenanceForm = ({\r\n    form,\r\n    setForm,\r\n    onSubmit,\r\n    onPhotoUpload,\r\n    onDeletePhoto,\r\n    uploadingPhotos,\r\n    uploadProgress,\r\n    loading,\r\n    isMobile,\r\n    vehicle,\r\n    currentUser,\r\n    inspectionItems,\r\n    workItems,\r\n    handleInspectionChange,\r\n    handleWorkChange,\r\n    presupuestosDisponibles,\r\n    handlePresupuestoSelect,\r\n    setMessage\r\n\r\n}) => {\r\n    const [inspectionFilter, setInspectionFilter] = useState('');\r\n    const [workFilter, setWorkFilter] = useState('');\r\n\r\n    // Funciones de filtrado\r\n    const getFilteredInspectionItems = () => {\r\n        if (!inspectionFilter) return inspectionItems;\r\n\r\n        return inspectionItems.filter(item =>\r\n            item.name.toLowerCase().includes(inspectionFilter.toLowerCase()) ||\r\n            item.code.toLowerCase().includes(inspectionFilter.toLowerCase()) ||\r\n            (item.detail && item.detail.toLowerCase().includes(inspectionFilter.toLowerCase()))\r\n        );\r\n    };\r\n\r\n    const getFilteredWorkItems = () => {\r\n        if (!workFilter) return workItems;\r\n\r\n        return workItems.filter(item =>\r\n            item.name.toLowerCase().includes(workFilter.toLowerCase()) ||\r\n            item.code.toLowerCase().includes(workFilter.toLowerCase()) ||\r\n            (item.detail && item.detail.toLowerCase().includes(workFilter.toLowerCase()))\r\n        );\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={onSubmit} style={{\r\n            background: 'white',\r\n            borderRadius: '12px',\r\n            padding: '30px',\r\n            marginBottom: '30px',\r\n            boxShadow: '0 4px 20px rgba(0,0,0,0.08)'\r\n        }}>\r\n            <h3 style={{\r\n                margin: '0 0 25px 0',\r\n                fontSize: '20px',\r\n                color: '#1f2937'\r\n            }}>\r\n                ðŸ“ Registrar Nuevo Mantenimiento\r\n            </h3>\r\n\r\n            {/* InformaciÃ³n bÃ¡sica */}\r\n            <div style={{\r\n                marginBottom: '25px',\r\n                paddingBottom: '20px',\r\n                borderBottom: '1px solid #e5e7eb'\r\n            }}>\r\n                <h4 style={{\r\n                    margin: '0 0 15px 0',\r\n                    fontSize: '16px',\r\n                    color: '#374151'\r\n                }}>\r\n                    ðŸ“‹ InformaciÃ³n General\r\n                </h4>\r\n\r\n                {/* SecciÃ³n para asociar presupuesto */}\r\n                {presupuestosDisponibles && presupuestosDisponibles.length > 0 && (\r\n                    <div style={{\r\n                        marginBottom: '20px',\r\n                        padding: '15px',\r\n                        background: '#f0f9ff',\r\n                        borderRadius: '8px',\r\n                        border: '2px solid #0ea5e9'\r\n                    }}>\r\n                        <h5 style={{\r\n                            margin: '0 0 10px 0',\r\n                            fontSize: '14px',\r\n                            color: '#0c4a6e',\r\n                            fontWeight: '600'\r\n                        }}>\r\n                            ðŸ’° Asociar con Presupuesto Previo (Opcional)\r\n                        </h5>\r\n\r\n                        <select\r\n                            value={form.presupuestoId}\r\n                            onChange={(e) => handlePresupuestoSelect(e.target.value)}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '10px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '6px',\r\n                                fontSize: '14px',\r\n                                background: 'white'\r\n                            }}\r\n                        >\r\n                            <option value=\"\">-- Seleccionar presupuesto --</option>\r\n                            {presupuestosDisponibles.map(presupuesto => (\r\n                                <option key={presupuesto.id} value={presupuesto.id}>\r\n                                    #{presupuesto.id.substring(0, 8).toUpperCase()} -\r\n                                    Patente: {presupuesto.vehiculoPatente} -\r\n                                    {new Date(presupuesto.fechaSolicitud || presupuesto.fechaMantenimiento).toLocaleDateString('es-CL')} -\r\n                                    ${presupuesto.totales?.total?.toLocaleString() || 0} -\r\n                                    {presupuesto.serviciosPreventivos?.length || 0} servicio(s)\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n\r\n                        {form.presupuestoData && (\r\n                            <div style={{\r\n                                marginTop: '10px',\r\n                                padding: '10px',\r\n                                background: '#dcfce7',\r\n                                borderRadius: '6px',\r\n                                fontSize: '13px',\r\n                                color: '#15803d'\r\n                            }}>\r\n                                <strong>âœ… Presupuesto asociado:</strong>\r\n                                <div style={{ marginTop: '5px' }}>\r\n                                    â€¢ Fecha: {new Date(form.presupuestoData.fechaSolicitud || form.presupuestoData.fechaMantenimiento).toLocaleDateString('es-CL')}<br />\r\n                                    â€¢ Total: ${form.presupuestoData.totales?.total?.toLocaleString() || 0}<br />\r\n                                    â€¢ Servicios: {form.presupuestoData.serviciosPreventivos?.length || 0}<br />\r\n                                    â€¢ Tipo repuestos: {form.presupuestoData.tipoRepuesto === 'original' ? 'Originales' : 'Alternativos'}\r\n                                </div>\r\n\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => {\r\n                                        setForm(prev => ({\r\n                                            ...prev,\r\n                                            presupuestoId: '',\r\n                                            presupuestoData: null,\r\n                                            costoMantenimiento: 0,\r\n                                            serviciosCatalogo: []\r\n                                        }));\r\n                                        setMessage({ type: 'info', text: 'Presupuesto desvinculado' });\r\n                                    }}\r\n                                    style={{\r\n                                        marginTop: '8px',\r\n                                        padding: '6px 12px',\r\n                                        background: '#ef4444',\r\n                                        color: 'white',\r\n                                        border: 'none',\r\n                                        borderRadius: '6px',\r\n                                        fontSize: '12px',\r\n                                        cursor: 'pointer'\r\n                                    }}\r\n                                >\r\n                                    Desvincular Presupuesto\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n                <div style={{\r\n                    display: 'grid',\r\n                    gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fit, minmax(250px, 1fr))',\r\n                    gap: '15px'\r\n                }}>\r\n                    <div>\r\n                        <label style={{\r\n                            display: 'block',\r\n                            marginBottom: '6px',\r\n                            fontSize: '14px',\r\n                            fontWeight: '500',\r\n                            color: '#374151'\r\n                        }}>\r\n                            Fecha del Mantenimiento *\r\n                        </label>\r\n                        <input\r\n                            type=\"date\"\r\n                            required\r\n                            value={form.fecha}\r\n                            onChange={(e) => setForm({ ...form, fecha: e.target.value })}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '10px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '6px',\r\n                                fontSize: '14px'\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label style={{\r\n                            display: 'block',\r\n                            marginBottom: '6px',\r\n                            fontSize: '14px',\r\n                            fontWeight: '500',\r\n                            color: '#374151'\r\n                        }}>\r\n                            Hora del Mantenimiento *\r\n                        </label>\r\n                        <input\r\n                            type=\"time\"\r\n                            required\r\n                            value={form.hora}\r\n                            onChange={(e) => setForm({ ...form, hora: e.target.value })}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '10px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '6px',\r\n                                fontSize: '14px'\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label style={{\r\n                            display: 'block',\r\n                            marginBottom: '6px',\r\n                            fontSize: '14px',\r\n                            fontWeight: '500',\r\n                            color: '#374151'\r\n                        }}>\r\n                            Tipo de Mantenimiento *\r\n                        </label>\r\n                        <select\r\n                            required\r\n                            value={form.tipoMantenimiento}\r\n                            onChange={(e) => setForm({ ...form, tipoMantenimiento: e.target.value })}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '10px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '6px',\r\n                                fontSize: '14px'\r\n                            }}\r\n                        >\r\n                            <option value=\"preventivo\">Preventivo</option>\r\n                            <option value=\"correctivo\">Correctivo</option>\r\n                            <option value=\"emergencia\">Emergencia</option>\r\n                            <option value=\"inspeccion\">InspecciÃ³n</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label style={{\r\n                            display: 'block',\r\n                            marginBottom: '6px',\r\n                            fontSize: '14px',\r\n                            fontWeight: '500',\r\n                            color: '#374151'\r\n                        }}>\r\n                            Kilometraje Actual\r\n                        </label>\r\n                        <input\r\n                            type=\"number\"\r\n                            value={form.kilometraje}\r\n                            onChange={(e) => setForm({ ...form, kilometraje: e.target.value })}\r\n                            placeholder={vehicle.kilometraje || '0'}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '10px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '6px',\r\n                                fontSize: '14px'\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label style={{\r\n                            display: 'block',\r\n                            marginBottom: '6px',\r\n                            fontSize: '14px',\r\n                            fontWeight: '500',\r\n                            color: '#374151'\r\n                        }}>\r\n                            Realizado Por *\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            required\r\n                            value={form.realizadoPor}\r\n                            onChange={(e) => setForm({ ...form, realizadoPor: e.target.value })}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '10px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '6px',\r\n                                fontSize: '14px'\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label style={{\r\n                            display: 'block',\r\n                            marginBottom: '6px',\r\n                            fontSize: '14px',\r\n                            fontWeight: '500',\r\n                            color: '#374151'\r\n                        }}>\r\n                            Taller/Lugar\r\n                        </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={form.tallerResponsable}\r\n                            onChange={(e) => setForm({ ...form, tallerResponsable: e.target.value })}\r\n                            placeholder=\"Nombre del taller o lugar\"\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '10px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '6px',\r\n                                fontSize: '14px'\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label style={{\r\n                            display: 'block',\r\n                            marginBottom: '6px',\r\n                            fontSize: '14px',\r\n                            fontWeight: '500',\r\n                            color: '#374151'\r\n                        }}>\r\n                            Costo (CLP)\r\n                        </label>\r\n                        <input\r\n                            type=\"number\"\r\n                            value={form.costoMantenimiento}\r\n                            onChange={(e) => setForm({ ...form, costoMantenimiento: e.target.value })}\r\n                            placeholder=\"0\"\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '10px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '6px',\r\n                                fontSize: '14px'\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Checklist de inspecciÃ³n de seguridad - DINÃMICO */}\r\n            {inspectionItems.length > 0 && (\r\n                <div style={{\r\n                    marginBottom: '25px',\r\n                    paddingBottom: '20px',\r\n                    borderBottom: '1px solid #e5e7eb'\r\n                }}>\r\n                    <h4 style={{\r\n                        margin: '0 0 15px 0',\r\n                        fontSize: '16px',\r\n                        color: '#374151'\r\n                    }}>\r\n                        ðŸ” Elementos de InspecciÃ³n de Seguridad\r\n                    </h4>\r\n\r\n                    {/* Barra de bÃºsqueda para inspecciÃ³n */}\r\n                    <div style={{\r\n                        marginBottom: '15px',\r\n                        display: 'flex',\r\n                        gap: '10px',\r\n                        alignItems: 'center'\r\n                    }}>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Buscar elemento de inspecciÃ³n...\"\r\n                            value={inspectionFilter}\r\n                            onChange={(e) => setInspectionFilter(e.target.value)}\r\n                            style={{\r\n                                flex: 1,\r\n                                padding: '8px 12px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '6px',\r\n                                fontSize: '14px'\r\n                            }}\r\n                        />\r\n                        {inspectionFilter && (\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setInspectionFilter('')}\r\n                                style={{\r\n                                    padding: '8px 12px',\r\n                                    background: '#6b7280',\r\n                                    color: 'white',\r\n                                    border: 'none',\r\n                                    borderRadius: '6px',\r\n                                    fontSize: '13px',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            >\r\n                                Limpiar\r\n                            </button>\r\n                        )}\r\n                        <span style={{\r\n                            padding: '6px 12px',\r\n                            background: '#f3f4f6',\r\n                            borderRadius: '6px',\r\n                            fontSize: '13px',\r\n                            color: '#6b7280',\r\n                            minWidth: '60px',\r\n                            textAlign: 'center'\r\n                        }}>\r\n                            {getFilteredInspectionItems().length} / {inspectionItems.length}\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div style={{\r\n                        display: 'grid',\r\n                        gap: '15px'\r\n                    }}>\r\n                        {getFilteredInspectionItems().map(item => (\r\n                            <DynamicInspectionItem\r\n                                key={item.code}\r\n                                item={item}\r\n                                value={form.inspectionData[`${item.code}_status`] || 'no_aplica'}\r\n                                observations={form.inspectionData[`${item.code}_observations`] || ''}\r\n                                onChange={(field, value) => handleInspectionChange(item.code, field, value)}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Trabajos realizados - DINÃMICO */}\r\n            {workItems.length > 0 && (\r\n                <div style={{\r\n                    marginBottom: '25px',\r\n                    paddingBottom: '20px',\r\n                    borderBottom: '1px solid #e5e7eb'\r\n                }}>\r\n                    <h4 style={{\r\n                        margin: '0 0 15px 0',\r\n                        fontSize: '16px',\r\n                        color: '#374151'\r\n                    }}>\r\n                        âœ… Trabajos Realizados\r\n                    </h4>\r\n\r\n                    {/* Barra de bÃºsqueda para trabajos */}\r\n                    <div style={{\r\n                        marginBottom: '15px',\r\n                        display: 'flex',\r\n                        gap: '10px',\r\n                        alignItems: 'center'\r\n                    }}>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Buscar trabajo...\"\r\n                            value={workFilter}\r\n                            onChange={(e) => setWorkFilter(e.target.value)}\r\n                            style={{\r\n                                flex: 1,\r\n                                padding: '8px 12px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '6px',\r\n                                fontSize: '14px'\r\n                            }}\r\n                        />\r\n                        {workFilter && (\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setWorkFilter('')}\r\n                                style={{\r\n                                    padding: '8px 12px',\r\n                                    background: '#6b7280',\r\n                                    color: 'white',\r\n                                    border: 'none',\r\n                                    borderRadius: '6px',\r\n                                    fontSize: '13px',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                            >\r\n                                Limpiar\r\n                            </button>\r\n                        )}\r\n                        <span style={{\r\n                            padding: '6px 12px',\r\n                            background: '#f3f4f6',\r\n                            borderRadius: '6px',\r\n                            fontSize: '13px',\r\n                            color: '#6b7280',\r\n                            minWidth: '60px',\r\n                            textAlign: 'center'\r\n                        }}>\r\n                            {getFilteredWorkItems().length} / {workItems.length}\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div style={{\r\n                        display: 'grid',\r\n                        gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fit, minmax(250px, 1fr))',\r\n                        gap: '10px'\r\n                    }}>\r\n                        {getFilteredWorkItems().map(item => (\r\n                            <label key={item.code} style={{\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '8px',\r\n                                padding: '8px',\r\n                                background: form.workData[item.code] ? '#dcfce7' : '#f9fafb',\r\n                                borderRadius: '6px',\r\n                                cursor: 'pointer',\r\n                                transition: 'all 0.2s'\r\n                            }}>\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={form.workData[item.code] || false}\r\n                                    onChange={(e) => handleWorkChange(item.code, e.target.checked)}\r\n                                    style={{\r\n                                        width: '18px',\r\n                                        height: '18px',\r\n                                        cursor: 'pointer'\r\n                                    }}\r\n                                />\r\n                                <div style={{ flex: 1 }}>\r\n                                    <span style={{\r\n                                        fontSize: '14px',\r\n                                        color: '#374151',\r\n                                        fontWeight: '500'\r\n                                    }}>\r\n                                        {item.name}\r\n                                    </span>\r\n                                    {item.detail && (\r\n                                        <div style={{\r\n                                            fontSize: '11px',\r\n                                            color: '#6b7280',\r\n                                            marginTop: '2px'\r\n                                        }}>\r\n                                            {item.detail}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                <span style={{\r\n                                    padding: '2px 6px',\r\n                                    background: '#dbeafe',\r\n                                    color: '#1e40af',\r\n                                    borderRadius: '4px',\r\n                                    fontSize: '10px'\r\n                                }}>\r\n                                    {item.code}\r\n                                </span>\r\n                            </label>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Resto del formulario continÃºa igual... */}\r\n            {/* Observaciones generales */}\r\n            <div style={{\r\n                marginBottom: '25px',\r\n                paddingBottom: '20px',\r\n                borderBottom: '1px solid #e5e7eb'\r\n            }}>\r\n                <h4 style={{\r\n                    margin: '0 0 15px 0',\r\n                    fontSize: '16px',\r\n                    color: '#374151'\r\n                }}>\r\n                    ðŸ“ Observaciones y PrÃ³ximo Mantenimiento\r\n                </h4>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                    <label style={{\r\n                        display: 'block',\r\n                        marginBottom: '6px',\r\n                        fontSize: '14px',\r\n                        fontWeight: '500',\r\n                        color: '#374151'\r\n                    }}>\r\n                        Observaciones Generales\r\n                    </label>\r\n                    <textarea\r\n                        value={form.observacionesGenerales}\r\n                        onChange={(e) => setForm({ ...form, observacionesGenerales: e.target.value })}\r\n                        placeholder=\"Detalle cualquier observaciÃ³n adicional...\"\r\n                        rows={4}\r\n                        style={{\r\n                            width: '100%',\r\n                            padding: '10px',\r\n                            border: '1px solid #d1d5db',\r\n                            borderRadius: '6px',\r\n                            fontSize: '14px',\r\n                            resize: 'none'\r\n                        }}\r\n                    />\r\n                </div>\r\n\r\n                <div style={{\r\n                    display: 'grid',\r\n                    gridTemplateColumns: isMobile ? '1fr' : '1fr 1fr',\r\n                    gap: '15px'\r\n                }}>\r\n                    <div>\r\n                        <label style={{\r\n                            display: 'block',\r\n                            marginBottom: '6px',\r\n                            fontSize: '14px',\r\n                            fontWeight: '500',\r\n                            color: '#374151'\r\n                        }}>\r\n                            PrÃ³ximo Mantenimiento (Fecha)\r\n                        </label>\r\n                        <input\r\n                            type=\"date\"\r\n                            value={form.proximoMantenimientoFecha}\r\n                            onChange={(e) => setForm({ ...form, proximoMantenimientoFecha: e.target.value })}\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '10px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '6px',\r\n                                fontSize: '14px'\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label style={{\r\n                            display: 'block',\r\n                            marginBottom: '6px',\r\n                            fontSize: '14px',\r\n                            fontWeight: '500',\r\n                            color: '#374151'\r\n                        }}>\r\n                            PrÃ³ximo Mantenimiento (Kilometraje)\r\n                        </label>\r\n                        <input\r\n                            type=\"number\"\r\n                            value={form.proximoMantenimientoKm}\r\n                            onChange={(e) => setForm({ ...form, proximoMantenimientoKm: e.target.value })}\r\n                            placeholder=\"Ej: 15000\"\r\n                            style={{\r\n                                width: '100%',\r\n                                padding: '10px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '6px',\r\n                                fontSize: '14px'\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* SecciÃ³n de fotos */}\r\n            <div style={{ marginBottom: '25px' }}>\r\n                <h4 style={{\r\n                    margin: '0 0 15px 0',\r\n                    fontSize: '16px',\r\n                    color: '#374151'\r\n                }}>\r\n                    ðŸ“· Fotos del Mantenimiento\r\n                </h4>\r\n\r\n                {form.fotos && form.fotos.length > 0 && (\r\n                    <div style={{\r\n                        display: 'grid',\r\n                        gridTemplateColumns: 'repeat(auto-fill, minmax(150px, 1fr))',\r\n                        gap: '10px',\r\n                        marginBottom: '15px'\r\n                    }}>\r\n                        {form.fotos.map((foto, index) => (\r\n                            <div key={index} style={{\r\n                                position: 'relative',\r\n                                background: '#f9fafb',\r\n                                borderRadius: '8px',\r\n                                padding: '10px',\r\n                                border: '1px solid #e5e7eb'\r\n                            }}>\r\n                                <img\r\n                                    src={foto.url}\r\n                                    alt={`Foto ${index + 1}`}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        height: '120px',\r\n                                        objectFit: 'cover',\r\n                                        borderRadius: '4px',\r\n                                        marginBottom: '8px'\r\n                                    }}\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => onDeletePhoto(index)}\r\n                                    style={{\r\n                                        position: 'absolute',\r\n                                        top: '5px',\r\n                                        right: '5px',\r\n                                        padding: '4px 8px',\r\n                                        background: '#ef4444',\r\n                                        color: 'white',\r\n                                        border: 'none',\r\n                                        borderRadius: '4px',\r\n                                        fontSize: '12px',\r\n                                        cursor: 'pointer'\r\n                                    }}\r\n                                >\r\n                                    âœ•\r\n                                </button>\r\n                                <div style={{\r\n                                    fontSize: '11px',\r\n                                    color: '#6b7280',\r\n                                    overflow: 'hidden',\r\n                                    textOverflow: 'ellipsis',\r\n                                    whiteSpace: 'nowrap'\r\n                                }}>\r\n                                    {foto.nombre}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                <div>\r\n                    <input\r\n                        type=\"file\"\r\n                        id=\"maintenance-photos\"\r\n                        multiple\r\n                        accept=\"image/*\"\r\n                        onChange={(e) => onPhotoUpload(e.target.files)}\r\n                        style={{ display: 'none' }}\r\n                        disabled={uploadingPhotos}\r\n                    />\r\n                    <label\r\n                        htmlFor=\"maintenance-photos\"\r\n                        style={{\r\n                            display: 'inline-block',\r\n                            padding: '10px 20px',\r\n                            background: uploadingPhotos ? '#9ca3af' : '#3b82f6',\r\n                            color: 'white',\r\n                            borderRadius: '6px',\r\n                            cursor: uploadingPhotos ? 'not-allowed' : 'pointer',\r\n                            fontSize: '14px',\r\n                            fontWeight: '500'\r\n                        }}\r\n                    >\r\n                        {uploadingPhotos ? `â³ Subiendo... ${uploadProgress}%` : 'ðŸ“¤ Agregar Fotos'}\r\n                    </label>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Botones de acciÃ³n */}\r\n            <div style={{ display: 'flex', gap: '10px' }}>\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={loading}\r\n                    style={{\r\n                        padding: '12px 24px',\r\n                        background: loading ? '#9ca3af' : '#22c55e',\r\n                        color: 'white',\r\n                        border: 'none',\r\n                        borderRadius: '6px',\r\n                        fontSize: '16px',\r\n                        fontWeight: '500',\r\n                        cursor: loading ? 'not-allowed' : 'pointer'\r\n                    }}\r\n                >\r\n                    {loading ? 'â³ Guardando...' : 'âœ… Guardar Mantenimiento'}\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n// Componente para items de inspecciÃ³n dinÃ¡micos\r\nconst DynamicInspectionItem = ({\r\n    item,\r\n    value,\r\n    observations,\r\n    onChange\r\n}) => {\r\n    return (\r\n        <div style={{\r\n            padding: '15px',\r\n            background: '#f9fafb',\r\n            borderRadius: '8px',\r\n            border: '1px solid #e5e7eb'\r\n        }}>\r\n            <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                marginBottom: observations ? '10px' : '0'\r\n            }}>\r\n                <div style={{ flex: 1 }}>\r\n                    <span style={{\r\n                        fontSize: '14px',\r\n                        fontWeight: '500',\r\n                        color: '#374151'\r\n                    }}>\r\n                        {item.name}\r\n                    </span>\r\n                    <span style={{\r\n                        marginLeft: '8px',\r\n                        padding: '2px 6px',\r\n                        background: '#dbeafe',\r\n                        color: '#1e40af',\r\n                        borderRadius: '4px',\r\n                        fontSize: '10px'\r\n                    }}>\r\n                        {item.code}\r\n                    </span>\r\n                    {item.detail && (\r\n                        <div style={{\r\n                            fontSize: '12px',\r\n                            color: '#6b7280',\r\n                            marginTop: '4px'\r\n                        }}>\r\n                            {item.detail}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div style={{ display: 'flex', gap: '10px', marginLeft: '10px' }}>\r\n                    <label style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '5px',\r\n                        cursor: 'pointer'\r\n                    }}>\r\n                        <input\r\n                            type=\"radio\"\r\n                            name={item.code}\r\n                            value=\"bueno\"\r\n                            checked={value === 'bueno'}\r\n                            onChange={() => onChange('status', 'bueno')}\r\n                        />\r\n                        <span style={{ fontSize: '13px' }}>âœ… Bueno</span>\r\n                    </label>\r\n\r\n                    <label style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '5px',\r\n                        cursor: 'pointer'\r\n                    }}>\r\n                        <input\r\n                            type=\"radio\"\r\n                            name={item.code}\r\n                            value=\"requiere_atencion\"\r\n                            checked={value === 'requiere_atencion'}\r\n                            onChange={() => onChange('status', 'requiere_atencion')}\r\n                        />\r\n                        <span style={{ fontSize: '13px' }}>âš ï¸ AtenciÃ³n</span>\r\n                    </label>\r\n\r\n                    <label style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '5px',\r\n                        cursor: 'pointer'\r\n                    }}>\r\n                        <input\r\n                            type=\"radio\"\r\n                            name={item.code}\r\n                            value=\"malo\"\r\n                            checked={value === 'malo'}\r\n                            onChange={() => onChange('status', 'malo')}\r\n                        />\r\n                        <span style={{ fontSize: '13px' }}>âŒ Malo</span>\r\n                    </label>\r\n\r\n                    <label style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: '5px',\r\n                        cursor: 'pointer'\r\n                    }}>\r\n                        <input\r\n                            type=\"radio\"\r\n                            name={item.code}\r\n                            value=\"no_aplica\"\r\n                            checked={value === 'no_aplica'}\r\n                            onChange={() => onChange('status', 'no_aplica')}\r\n                        />\r\n                        <span style={{ fontSize: '13px' }}>N/A</span>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n\r\n            {item.requiresObservation && (value === 'requiere_atencion' || value === 'malo') && (\r\n                <input\r\n                    type=\"text\"\r\n                    value={observations}\r\n                    onChange={(e) => onChange('observations', e.target.value)}\r\n                    placeholder=\"Especifique el problema...\"\r\n                    style={{\r\n                        width: '100%',\r\n                        padding: '8px',\r\n                        border: '1px solid #d1d5db',\r\n                        borderRadius: '4px',\r\n                        fontSize: '13px'\r\n                    }}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// Componente para el historial\r\nconst MaintenanceHistory = ({ history, isMobile, vehicle, currentUser, inspectionItems, workItems }) => {\r\n    if (history.length === 0) {\r\n        return (\r\n            <div style={{\r\n                background: 'white',\r\n                borderRadius: '12px',\r\n                padding: '40px',\r\n                textAlign: 'center',\r\n                color: '#6b7280'\r\n            }}>\r\n                <div style={{ fontSize: '48px', marginBottom: '10px' }}>ðŸ“‹</div>\r\n                <p style={{ fontSize: '16px' }}>No hay mantenimientos registrados</p>\r\n                <p style={{ fontSize: '14px' }}>Registra el primer mantenimiento usando el formulario</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{\r\n            background: 'white',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 4px 20px rgba(0,0,0,0.08)',\r\n            overflow: 'hidden'\r\n        }}>\r\n            <div style={{\r\n                padding: '20px',\r\n                borderBottom: '1px solid #e5e7eb'\r\n            }}>\r\n                <h3 style={{\r\n                    margin: 0,\r\n                    fontSize: '20px',\r\n                    color: '#1f2937'\r\n                }}>\r\n                    ðŸ“š Historial de Mantenimientos ({history.length})\r\n                </h3>\r\n            </div>\r\n\r\n            <div style={{ padding: '20px' }}>\r\n                {history.map((maintenance, index) => (\r\n                    <MaintenanceCard\r\n                        key={maintenance.id}\r\n                        maintenance={maintenance}\r\n                        isLast={index === history.length - 1}\r\n                        isMobile={isMobile}\r\n                        vehicle={vehicle}\r\n                        currentUser={currentUser}\r\n                        inspectionItems={inspectionItems}\r\n                        workItems={workItems}\r\n                    />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Componente para cada tarjeta de mantenimiento\r\nconst MaintenanceCard = ({ maintenance, isLast, isMobile, vehicle, currentUser, inspectionItems, workItems }) => {\r\n    const [expanded, setExpanded] = useState(false);\r\n\r\n\r\n    const handleExportSingle = () => {\r\n        if (!vehicle) {\r\n            console.error('Error: No se encontrÃ³ informaciÃ³n del vehÃ­culo');\r\n            alert('Error: No se puede exportar el PDF. Falta informaciÃ³n del vehÃ­culo.');\r\n            return;\r\n        }\r\n\r\n        if (!currentUser) {\r\n            console.error('Error: No se encontrÃ³ informaciÃ³n del usuario');\r\n            alert('Error: No se puede exportar el PDF. Falta informaciÃ³n del usuario.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const maintenanceWithVehicle = {\r\n                ...maintenance,\r\n                vehiculoNombre: maintenance.vehiculoNombre || vehicle.nombre,\r\n                vehiculoPatente: maintenance.vehiculoPatente || vehicle.patente\r\n            };\r\n\r\n            pdfExportService.exportSingleMaintenanceRecord(\r\n                maintenanceWithVehicle,\r\n                vehicle,\r\n                currentUser\r\n            );\r\n        } catch (error) {\r\n            console.error('Error al exportar PDF:', error);\r\n            alert('Error al generar el PDF. Por favor, intente nuevamente.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{\r\n            paddingBottom: isLast ? '0' : '20px',\r\n            marginBottom: isLast ? '0' : '20px',\r\n            borderBottom: isLast ? 'none' : '1px solid #e5e7eb'\r\n        }}>\r\n            <div\r\n                onClick={() => setExpanded(!expanded)}\r\n                style={{\r\n                    cursor: 'pointer',\r\n                    padding: '15px',\r\n                    background: '#f9fafb',\r\n                    borderRadius: '8px',\r\n                    transition: 'all 0.2s'\r\n                }}\r\n            >\r\n                <div style={{\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'start'\r\n                }}>\r\n                    <div>\r\n                        <div style={{\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '10px',\r\n                            marginBottom: '8px'\r\n                        }}>\r\n                            <span style={{\r\n                                fontSize: '16px',\r\n                                fontWeight: '600',\r\n                                color: '#1f2937'\r\n                            }}>\r\n                                {new Date(maintenance.fecha).toLocaleDateString('es-CL')}\r\n                                {maintenance.hora && (\r\n                                    <span style={{ marginLeft: '10px', fontSize: '14px', color: '#6b7280' }}>\r\n                                        {maintenance.hora} hrs\r\n                                    </span>\r\n                                )}\r\n                            </span>\r\n                            <span style={{\r\n                                padding: '4px 8px',\r\n                                background: maintenance.tipoMantenimiento === 'preventivo' ? '#dcfce7' :\r\n                                    maintenance.tipoMantenimiento === 'correctivo' ? '#fef3c7' : '#fee2e2',\r\n                                color: maintenance.tipoMantenimiento === 'preventivo' ? '#15803d' :\r\n                                    maintenance.tipoMantenimiento === 'correctivo' ? '#92400e' : '#991b1b',\r\n                                borderRadius: '4px',\r\n                                fontSize: '12px',\r\n                                fontWeight: '500'\r\n                            }}>\r\n                                {maintenance.tipoMantenimiento.toUpperCase()}\r\n                            </span>\r\n                        </div>\r\n\r\n                        <div style={{\r\n                            fontSize: '14px',\r\n                            color: '#6b7280'\r\n                        }}>\r\n                            <div>ðŸ‘¤ {maintenance.realizadoPor}</div>\r\n                            {maintenance.kilometraje && (\r\n                                <div>ðŸ“ {maintenance.kilometraje.toLocaleString()} km</div>\r\n                            )}\r\n                            {maintenance.costoMantenimiento > 0 && (\r\n                                <div>ðŸ’° ${maintenance.costoMantenimiento.toLocaleString()}</div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                        <button\r\n                            onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                handleExportSingle();\r\n                            }}\r\n                            style={{\r\n                                padding: '6px 12px',\r\n                                background: '#ef4444',\r\n                                color: 'white',\r\n                                border: 'none',\r\n                                borderRadius: '6px',\r\n                                fontSize: '12px',\r\n                                cursor: 'pointer',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '4px'\r\n                            }}\r\n                        >\r\n                            ðŸ“„ PDF\r\n                        </button>\r\n\r\n                        <span style={{\r\n                            fontSize: '20px',\r\n                            transform: expanded ? 'rotate(180deg)' : 'rotate(0)',\r\n                            transition: 'transform 0.2s'\r\n                        }}>\r\n                            â–¼\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {expanded && (\r\n                <div style={{\r\n                    marginTop: '15px',\r\n                    padding: '15px',\r\n                    background: 'white',\r\n                    borderRadius: '8px',\r\n                    border: '1px solid #e5e7eb'\r\n                }}>\r\n                    {/* Mostrar servicios del catÃ¡logo si existen */}\r\n                    {maintenance.serviciosCatalogo && maintenance.serviciosCatalogo.length > 0 && (\r\n                        <div style={{ marginBottom: '15px' }}>\r\n                            <h5 style={{\r\n                                margin: '0 0 10px 0',\r\n                                fontSize: '14px',\r\n                                fontWeight: '600',\r\n                                color: '#374151'\r\n                            }}>\r\n                                Servicios Realizados:\r\n                            </h5>\r\n                            <div style={{ fontSize: '13px', color: '#6b7280' }}>\r\n                                {maintenance.serviciosCatalogo.map((servicio, idx) => (\r\n                                    <div key={idx} style={{\r\n                                        padding: '6px',\r\n                                        background: '#f9fafb',\r\n                                        borderRadius: '4px',\r\n                                        marginBottom: '4px'\r\n                                    }}>\r\n                                        <strong>{servicio.codigo}</strong> - {servicio.descripcion}\r\n                                        <span style={{ marginLeft: '10px' }}>\r\n                                            (Cantidad: {servicio.cantidadServicio}) -\r\n                                            Total: ${servicio.totales.total.toLocaleString()}\r\n                                        </span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                            <div style={{\r\n                                marginTop: '8px',\r\n                                paddingTop: '8px',\r\n                                borderTop: '1px solid #e5e7eb',\r\n                                fontWeight: '600'\r\n                            }}>\r\n                                Total Servicios: ${maintenance.costoTotal?.toLocaleString() ||\r\n                                    maintenance.costoMantenimiento?.toLocaleString() || '0'}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    {/* Contenido expandido del mantenimiento */}\r\n                    {maintenance.observacionesGenerales && (\r\n                        <div style={{ marginBottom: '15px' }}>\r\n                            <h5 style={{\r\n                                margin: '0 0 10px 0',\r\n                                fontSize: '14px',\r\n                                fontWeight: '600',\r\n                                color: '#374151'\r\n                            }}>\r\n                                Observaciones:\r\n                            </h5>\r\n                            <p style={{\r\n                                margin: 0,\r\n                                fontSize: '13px',\r\n                                color: '#6b7280',\r\n                                lineHeight: '1.5'\r\n                            }}>\r\n                                {maintenance.observacionesGenerales}\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* PrÃ³ximo mantenimiento */}\r\n                    {(maintenance.proximoMantenimientoFecha || maintenance.proximoMantenimientoKm) && (\r\n                        <div style={{\r\n                            marginTop: '15px',\r\n                            padding: '10px',\r\n                            background: '#f0f9ff',\r\n                            borderRadius: '6px',\r\n                            fontSize: '13px'\r\n                        }}>\r\n                            <strong>ðŸ“… PrÃ³ximo Mantenimiento:</strong>\r\n                            {maintenance.proximoMantenimientoFecha && (\r\n                                <span style={{ marginLeft: '10px' }}>\r\n                                    {new Date(maintenance.proximoMantenimientoFecha).toLocaleDateString('es-CL')}\r\n                                </span>\r\n                            )}\r\n                            {maintenance.proximoMantenimientoKm && (\r\n                                <span style={{ marginLeft: '10px' }}>\r\n                                    o {maintenance.proximoMantenimientoKm.toLocaleString()} km\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\nexport default VehicleMaintenanceModule;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
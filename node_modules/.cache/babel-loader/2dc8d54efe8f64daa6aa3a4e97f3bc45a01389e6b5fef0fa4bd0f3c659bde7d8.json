{"ast":null,"code":"// src/components/ZonesManagement.js\nimport React,{useState,useEffect,useRef}from'react';import{database}from'../config/firebase';import{ref,push,set,update,remove,onValue}from'firebase/database';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ZonesManagement=_ref=>{var _newZona$lat2,_newZona$lng2;let{currentUser,onLogout,onViewChange,currentView='zones'}=_ref;const mapRef=useRef(null);const[map,setMap]=useState(null);const[zonas,setZonas]=useState([]);const[trabajadores,setTrabajadores]=useState([]);const[selectedZona,setSelectedZona]=useState(null);const[isCreatingZona,setIsCreatingZona]=useState(false);const[showZonaForm,setShowZonaForm]=useState(false);const[mapLoaded,setMapLoaded]=useState(false);const[isMobile,setIsMobile]=useState(false);const[showPanel,setShowPanel]=useState(true);const[filterStatus,setFilterStatus]=useState('all');// all, pendiente, en_progreso, completado\nconst[showCompletedZones,setShowCompletedZones]=useState(false);const[mobileFormView,setMobileFormView]=useState(false);// Form states\nconst[newZona,setNewZona]=useState({nombre:'',descripcion:'',direccion:'',lat:null,lng:null,trabajadorAsignado:'',prioridad:'normal',fechaLimite:'',estado:'pendiente'});const markersRef=useRef({});const mapClickListenerRef=useRef(null);const API_KEY='AIzaSyA7DrdL36n5cx-RNzuXGAQggFeGCheHDbY';// Detectar si es móvil\nuseEffect(()=>{const checkMobile=()=>{setIsMobile(window.innerWidth<=768);if(window.innerWidth<=768){setShowPanel(false);// Ocultar panel por defecto en móvil\n}};checkMobile();window.addEventListener('resize',checkMobile);return()=>window.removeEventListener('resize',checkMobile);},[]);// Cargar Google Maps\nuseEffect(()=>{const loadGoogleMaps=()=>{return new Promise(resolve=>{if(window.google&&window.google.maps){resolve(window.google.maps);return;}const existingScript=document.querySelector('script[src*=\"maps.googleapis.com\"]');if(existingScript){existingScript.addEventListener('load',()=>{resolve(window.google.maps);});return;}const script=document.createElement('script');script.src=`https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry&v=weekly`;script.async=true;script.defer=true;script.onload=()=>resolve(window.google.maps);document.head.appendChild(script);});};const initMap=async()=>{const maps=await loadGoogleMaps();if(!mapRef.current)return;const mapInstance=new maps.Map(mapRef.current,{center:{lat:-36.7333,lng:-72.4667},zoom:13,mapTypeId:'roadmap',zoomControl:!isMobile,mapTypeControl:false,streetViewControl:false,fullscreenControl:true,gestureHandling:isMobile?'greedy':'auto'});// Agregar botón de ubicación actual\nconst locationButton=document.createElement('button');locationButton.innerHTML=`\n        <div style=\"\n          background: white;\n          border-radius: 50%;\n          width: 40px;\n          height: 40px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n          cursor: pointer;\n        \">\n          <span style=\"font-size: 20px;\">📍</span>\n        </div>\n      `;locationButton.style.cssText='border: none; background: none; padding: 5px; margin: 10px;';locationButton.title='Mi ubicación';mapInstance.controls[maps.ControlPosition.RIGHT_BOTTOM].push(locationButton);locationButton.addEventListener('click',()=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{const pos={lat:position.coords.latitude,lng:position.coords.longitude};mapInstance.setCenter(pos);mapInstance.setZoom(15);});}});setMap(mapInstance);setMapLoaded(true);};initMap();},[isMobile]);// Verificar si hay datos de solicitud pendiente\nuseEffect(()=>{const solicitudData=localStorage.getItem('solicitudParaZona');if(solicitudData){const solicitud=JSON.parse(solicitudData);setNewZona({nombre:solicitud.nombre,descripcion:solicitud.descripcion,direccion:solicitud.direccion,lat:solicitud.lat,lng:solicitud.lng,trabajadorAsignado:'',prioridad:solicitud.prioridad||'normal',fechaLimite:solicitud.fechaLimite||'',estado:'pendiente'});setShowZonaForm(true);setShowPanel(true);if(map&&window.google){const tempMarker=new window.google.maps.Marker({position:{lat:solicitud.lat,lng:solicitud.lng},map:map,title:'Nueva zona desde solicitud',icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:'#ef4444',fillOpacity:0.8,strokeColor:'#ffffff',strokeWeight:2},temp:true});markersRef.current.temp=tempMarker;map.setCenter({lat:solicitud.lat,lng:solicitud.lng});map.setZoom(16);}localStorage.removeItem('solicitudParaZona');}},[map]);// Cargar zonas y trabajadores desde Firebase\nuseEffect(()=>{const zonasRef=ref(database,'zonas_asignadas');const unsubZonas=onValue(zonasRef,snapshot=>{const data=snapshot.val();if(data){const zonasArray=Object.entries(data).map(_ref2=>{let[id,zona]=_ref2;return{id,...zona};});setZonas(zonasArray);}else{setZonas([]);}});const trabajadoresRef=ref(database,'trabajadores');const unsubTrabajadores=onValue(trabajadoresRef,snapshot=>{const data=snapshot.val();if(data){const trabajadoresArray=Object.entries(data).map(_ref3=>{let[id,trabajador]=_ref3;return{id,...trabajador};});setTrabajadores(trabajadoresArray);}else{setTrabajadores([]);}});return()=>{unsubZonas();unsubTrabajadores();};},[]);// Actualizar marcadores en el mapa\nuseEffect(()=>{if(!map||!window.google)return;// Limpiar marcadores anteriores\nObject.values(markersRef.current).forEach(marker=>{if(marker&&!marker.temp)marker.setMap(null);});const newMarkers={};// Filtrar zonas según el estado seleccionado\nconst zonasToShow=zonas.filter(zona=>{if(filterStatus==='all'){return!zona.estado||zona.estado!=='completado'||showCompletedZones;}if(filterStatus==='completado'){return zona.estado==='completado';}return zona.estado===filterStatus;});// Crear marcadores para cada zona\nzonasToShow.forEach(zona=>{var _trabajadores$find;const isCompleted=zona.estado==='completado';const opacity=isCompleted&&!showCompletedZones?0.5:1;const marker=new window.google.maps.Marker({position:{lat:zona.lat,lng:zona.lng},map:map,title:zona.nombre,opacity:opacity,icon:{path:'M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z',fillColor:zona.estado==='completado'?'#22c55e':zona.estado==='en_progreso'?'#3b82f6':zona.prioridad==='urgente'?'#ef4444':zona.prioridad==='alta'?'#f97316':'#f59e0b',fillOpacity:opacity,strokeColor:'#ffffff',strokeWeight:2,scale:2,anchor:new window.google.maps.Point(12,24)}});const infoWindow=new window.google.maps.InfoWindow({content:`\n          <div style=\"padding: 10px; min-width: 200px;\">\n            <h3 style=\"margin: 0 0 10px 0;\">${zona.nombre}</h3>\n            <p style=\"margin: 5px 0;\"><strong>Dirección:</strong> ${zona.direccion}</p>\n            <p style=\"margin: 5px 0;\"><strong>Descripción:</strong> ${zona.descripcion||'Sin descripción'}</p>\n            <p style=\"margin: 5px 0;\"><strong>Trabajador:</strong> ${zona.trabajadorAsignado?((_trabajadores$find=trabajadores.find(t=>t.id===zona.trabajadorAsignado))===null||_trabajadores$find===void 0?void 0:_trabajadores$find.nombre)||'Sin asignar':'Sin asignar'}</p>\n            <p style=\"margin: 5px 0;\"><strong>Estado:</strong> ${zona.estado||'pendiente'}</p>\n            <p style=\"margin: 5px 0;\"><strong>Prioridad:</strong> ${zona.prioridad||'normal'}</p>\n          </div>\n        `});marker.addListener('click',()=>{infoWindow.open(map,marker);setSelectedZona(zona);});newMarkers[zona.id]=marker;});// Mantener el marcador temporal si existe\nif(markersRef.current.temp){newMarkers.temp=markersRef.current.temp;}markersRef.current=newMarkers;},[map,zonas,trabajadores,filterStatus,showCompletedZones]);// Activar modo creación de zona\nconst startCreatingZona=()=>{if(!map)return;setIsCreatingZona(true);setShowPanel(false);// Ocultar panel para tener más espacio en el mapa\nmap.setOptions({draggableCursor:'crosshair'});// Mostrar mensaje de instrucciones\nconst instructionDiv=document.createElement('div');instructionDiv.id='map-instruction';instructionDiv.style.cssText=`\n    position: absolute;\n    top: 20px;\n    left: 50%;\n    transform: translateX(-50%);\n    background: white;\n    padding: 12px 20px;\n    border-radius: 8px;\n    box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n    z-index: 1000;\n    font-size: 14px;\n    font-weight: 500;\n  `;instructionDiv.innerHTML='📍 Haz clic en el mapa para seleccionar la ubicación';map.getDiv().appendChild(instructionDiv);// Crear una función handler que se pueda remover\nconst handleMapClick=event=>{const lat=event.latLng.lat();const lng=event.latLng.lng();// Remover el listener inmediatamente\nif(mapClickListenerRef.current){window.google.maps.event.removeListener(mapClickListenerRef.current);mapClickListenerRef.current=null;}// Restaurar cursor normal\nmap.setOptions({draggableCursor:null});// Remover instrucciones anteriores\nconst instruction=document.getElementById('map-instruction');if(instruction){instruction.remove();}// Crear marcador temporal\nif(markersRef.current.temp){markersRef.current.temp.setMap(null);}const tempMarker=new window.google.maps.Marker({position:{lat,lng},map:map,title:'Nueva zona',icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:'#ef4444',fillOpacity:0.8,strokeColor:'#ffffff',strokeWeight:2},temp:true,draggable:true});markersRef.current.temp=tempMarker;// Actualizar coordenadas\nsetNewZona(prev=>({...prev,lat,lng,direccion:`${lat.toFixed(6)}, ${lng.toFixed(6)}`}));// Crear botón de confirmación flotante\nconst confirmDiv=document.createElement('div');confirmDiv.id='confirm-location';confirmDiv.style.cssText=`\n      position: absolute;\n      bottom: ${isMobile?'80px':'30px'};\n      left: 50%;\n      transform: translateX(-50%);\n      background: white;\n      padding: 15px;\n      border-radius: 12px;\n      box-shadow: 0 4px 20px rgba(0,0,0,0.2);\n      z-index: 1000;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      gap: 10px;\n    `;confirmDiv.innerHTML=`\n      <div style=\"font-size: 14px; font-weight: 500; color: #374151; margin-bottom: 5px;\">\n        📍 Ubicación seleccionada\n      </div>\n      <div style=\"display: flex; gap: 10px;\">\n        <button id=\"confirm-btn\" style=\"\n          padding: 10px 20px;\n          background: #22c55e;\n          color: white;\n          border: none;\n          border-radius: 6px;\n          font-size: 14px;\n          font-weight: 600;\n          cursor: pointer;\n        \">\n          ✅ Confirmar y Continuar\n        </button>\n        <button id=\"cancel-btn\" style=\"\n          padding: 10px 20px;\n          background: #ef4444;\n          color: white;\n          border: none;\n          border-radius: 6px;\n          font-size: 14px;\n          font-weight: 600;\n          cursor: pointer;\n        \">\n          ❌ Cancelar\n        </button>\n      </div>\n    `;map.getDiv().appendChild(confirmDiv);// En el evento del botón confirmar, cambia esta parte:\ndocument.getElementById('confirm-btn').addEventListener('click',()=>{// Remover el div de confirmación\nconfirmDiv.remove();// Establecer que ya no estamos creando\nsetIsCreatingZona(false);// Obtener dirección\nconst geocoder=new window.google.maps.Geocoder();geocoder.geocode({location:{lat,lng}},(results,status)=>{if(status==='OK'&&results[0]){setNewZona(prev=>({...prev,direccion:results[0].formatted_address}));}});// Si es móvil, mostrar vista de formulario completa\nif(isMobile){setMobileFormView(true);}else{// Desktop: mostrar normal\nsetShowZonaForm(true);setShowPanel(true);}});document.getElementById('cancel-btn').addEventListener('click',()=>{// Limpiar todo\nconfirmDiv.remove();if(markersRef.current.temp){markersRef.current.temp.setMap(null);delete markersRef.current.temp;}setIsCreatingZona(false);setShowPanel(true);});};// Agregar el listener\nmapClickListenerRef.current=map.addListener('click',handleMapClick);};// Cancelar modo creación\nconst cancelCreatingZona=()=>{setIsCreatingZona(false);if(map){map.setOptions({draggableCursor:null});// Asegurarse de remover el listener\nif(mapClickListenerRef.current){window.google.maps.event.removeListener(mapClickListenerRef.current);mapClickListenerRef.current=null;}// Remover instrucciones\nconst instructionDiv=document.getElementById('map-instruction');if(instructionDiv){instructionDiv.remove();}}};// Guardar nueva zona\nconst saveZona=async()=>{if(!newZona.nombre||!newZona.lat||!newZona.lng){alert('Por favor completa todos los campos requeridos');return;}try{const zonaData={...newZona,createdBy:currentUser.uid,createdAt:new Date().toISOString(),ultimaActualizacion:new Date().toISOString()};const zonasRef=ref(database,'zonas_asignadas');const newZonaRef=push(zonasRef);await set(newZonaRef,zonaData);// Si hay un trabajador asignado, notificarle\nif(newZona.trabajadorAsignado){const notificacionData={tipo:'nueva_zona',mensaje:`Se te ha asignado una nueva zona: ${newZona.nombre}`,zonaId:newZonaRef.key,trabajadorId:newZona.trabajadorAsignado,timestamp:new Date().toISOString(),leido:false};const notifRef=ref(database,'notificaciones');await push(notifRef,notificacionData);}// Limpiar formulario\nsetNewZona({nombre:'',descripcion:'',direccion:'',lat:null,lng:null,trabajadorAsignado:'',prioridad:'normal',fechaLimite:'',estado:'pendiente'});// Limpiar marcador temporal\nif(markersRef.current.temp){markersRef.current.temp.setMap(null);delete markersRef.current.temp;}setShowZonaForm(false);alert('✅ Zona creada exitosamente');}catch(error){console.error('Error al crear zona:',error);alert('❌ Error al crear la zona');}};// Eliminar zona\nconst deleteZona=async zonaId=>{if(window.confirm('¿Estás seguro de eliminar esta zona?')){try{await remove(ref(database,`zonas_asignadas/${zonaId}`));alert('✅ Zona eliminada');}catch(error){console.error('Error al eliminar zona:',error);alert('❌ Error al eliminar la zona');}}};// Actualizar estado de zona\nconst updateZonaStatus=async(zonaId,newStatus)=>{try{const zona=zonas.find(z=>z.id===zonaId);await update(ref(database,`zonas_asignadas/${zonaId}`),{estado:newStatus,ultimaActualizacion:new Date().toISOString()});if(newStatus==='completado'&&zona&&zona.solicitudId){await update(ref(database,`solicitudes_maquinaria/${zona.solicitudId}`),{estado:'completada',fechaCompletado:new Date().toISOString(),completadoPor:currentUser.uid});}}catch(error){console.error('Error al actualizar estado:',error);}};// Filtrar zonas para mostrar en el panel\nconst getFilteredZonas=()=>{return zonas.filter(zona=>{if(filterStatus==='all'){return!showCompletedZones?zona.estado!=='completado':true;}return zona.estado===filterStatus;});};const filteredZonas=getFilteredZonas();const styles={container:{display:'flex',height:'100vh',position:'relative',flexDirection:'column'},header:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white',padding:isMobile?'10px':'12px 20px',boxShadow:'0 2px 10px rgba(0,0,0,0.2)',zIndex:1003},headerContent:{display:'flex',justifyContent:'space-between',alignItems:'center',gap:'10px',flexWrap:isMobile?'wrap':'nowrap'},title:{margin:0,fontSize:isMobile?'16px':'20px',fontWeight:'600',display:'flex',alignItems:'center',gap:'8px'},navigationButtons:{display:'flex',gap:'8px',alignItems:'center',flexWrap:'wrap'},navButton:{padding:isMobile?'6px 10px':'6px 12px',background:'rgba(255,255,255,0.1)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'5px',cursor:'pointer',fontSize:isMobile?'11px':'13px',fontWeight:'400',whiteSpace:'nowrap'},navButtonActive:{background:'rgba(255,255,255,0.25)',fontWeight:'600'},logoutButton:{padding:isMobile?'6px 10px':'6px 14px',background:'#ef4444',color:'white',border:'none',borderRadius:'5px',cursor:'pointer',fontSize:isMobile?'12px':'13px',fontWeight:'600'},mainContent:{display:'flex',flex:1,position:'relative',overflow:'hidden'},panel:{width:isMobile?'100%':'400px',background:'white',borderRight:'1px solid #e5e7eb',overflowY:'auto',display:showPanel?'flex':'none',flexDirection:'column',position:isMobile?'fixed':'relative',height:isMobile&&showZonaForm?'100vh':'100%',// Pantalla completa cuando hay formulario\nzIndex:isMobile?9999:1001,top:isMobile?'0':'auto',left:isMobile?'0':'auto',right:isMobile?'0':'auto',// Agregar right 0 para móvil\nbottom:isMobile?'0':'auto',// Agregar bottom 0 para móvil\ntransition:'transform 0.3s'},panelHeader:{padding:isMobile?'15px':'20px',borderBottom:'1px solid #e5e7eb',background:'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',color:'white'},createButton:{width:'100%',padding:isMobile?'10px':'10px',background:isCreatingZona?'#9ca3af':'white',color:isCreatingZona?'white':'#22c55e',border:'none',borderRadius:'6px',fontSize:isMobile?'13px':'14px',fontWeight:'500',cursor:isCreatingZona?'not-allowed':'pointer',display:'flex',alignItems:'center',justifyContent:'center',gap:'8px'},filterContainer:{padding:isMobile?'10px':'15px',borderBottom:'1px solid #e5e7eb',background:'#f9fafb'},filterButtons:{display:'flex',gap:'8px',marginBottom:'10px',flexWrap:'wrap'},filterButton:{flex:1,minWidth:isMobile?'70px':'auto',padding:isMobile?'6px':'8px 12px',background:'white',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:isMobile?'11px':'12px',cursor:'pointer',transition:'all 0.3s'},filterButtonActive:{background:'#667eea',color:'white',borderColor:'#667eea'},toggleCompletedButton:{width:'100%',padding:isMobile?'8px':'10px',background:showCompletedZones?'#10b981':'#f3f4f6',color:showCompletedZones?'white':'#6b7280',border:'1px solid',borderColor:showCompletedZones?'#10b981':'#d1d5db',borderRadius:'6px',fontSize:isMobile?'11px':'12px',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',gap:'6px'},form:{padding:isMobile?'15px':'20px',background:'white',// Cambiar a blanco sólido\nborderBottom:'2px solid #3b82f6',position:'relative',// Agregar position relative\nzIndex:10000// Agregar z-index alto\n},formTitle:{margin:'0 0 15px 0',color:'#1e40af',fontSize:isMobile?'16px':'18px'},formGroup:{marginBottom:'12px'},label:{display:'block',marginBottom:'4px',fontSize:isMobile?'12px':'13px',fontWeight:'500',color:'#374151'},input:{width:'100%',padding:isMobile?'6px':'8px',border:'1px solid #d1d5db',borderRadius:'4px',fontSize:isMobile?'13px':'14px'},textarea:{width:'100%',padding:isMobile?'6px':'8px',border:'1px solid #d1d5db',borderRadius:'4px',fontSize:isMobile?'13px':'14px',minHeight:'60px',resize:'vertical'},select:{width:'100%',padding:isMobile?'6px':'8px',border:'1px solid #d1d5db',borderRadius:'4px',fontSize:isMobile?'13px':'14px',background:'white'},gridTwoColumns:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'12px',marginBottom:'12px'},locationInfo:{padding:'8px',background:'#e0e7ff',borderRadius:'4px',marginBottom:'12px',fontSize:isMobile?'11px':'12px'},formButtons:{display:'flex',gap:'8px'},saveButton:{flex:1,padding:isMobile?'8px':'10px',background:'#22c55e',color:'white',border:'none',borderRadius:'6px',fontSize:isMobile?'13px':'14px',fontWeight:'500',cursor:'pointer'},cancelButton:{flex:1,padding:isMobile?'8px':'10px',background:'#ef4444',color:'white',border:'none',borderRadius:'6px',fontSize:isMobile?'13px':'14px',fontWeight:'500',cursor:'pointer'},zonasList:{flex:1,padding:isMobile?'15px':'20px',overflowY:'auto'},listHeader:{margin:'0 0 15px 0',fontSize:isMobile?'14px':'16px',color:'#1f2937',fontWeight:'600'},zonaCard:{padding:isMobile?'10px':'12px',border:'1px solid #e5e7eb',borderRadius:'8px',marginBottom:'12px',cursor:'pointer',transition:'all 0.2s'},zonaCardHover:{boxShadow:'0 2px 8px rgba(0,0,0,0.1)',transform:'translateY(-1px)'},zonaHeader:{display:'flex',justifyContent:'space-between',alignItems:'start',marginBottom:'8px'},zonaTitle:{margin:'0 0 4px 0',fontSize:isMobile?'13px':'14px',fontWeight:'600',color:'#1f2937'},zonaAddress:{margin:'0 0 4px 0',fontSize:isMobile?'11px':'12px',color:'#6b7280'},zonaWorker:{margin:'0 0 4px 0',fontSize:isMobile?'11px':'12px',color:'#6b7280'},zonaTags:{display:'flex',gap:'6px',marginTop:'6px',flexWrap:'wrap'},tag:{padding:'2px 6px',borderRadius:'4px',fontSize:isMobile?'10px':'11px',fontWeight:'500'},zonaActions:{display:'flex',gap:'4px'},actionSelect:{padding:'4px',border:'1px solid #d1d5db',borderRadius:'4px',fontSize:'11px',cursor:'pointer',background:'white'},deleteButton:{padding:'4px 8px',background:'#ef4444',color:'white',border:'none',borderRadius:'4px',fontSize:'11px',cursor:'pointer'},emptyState:{textAlign:'center',padding:'40px 20px',color:'#6b7280'},map:{flex:1,position:'relative'// NO agregar display none\n},togglePanelButton:{position:'absolute',left:'10px',top:'10px',background:'white',border:'none',borderRadius:'8px',padding:'10px',boxShadow:'0 2px 8px rgba(0,0,0,0.15)',cursor:'pointer',zIndex:1000,display:'flex',alignItems:'center',justifyContent:'center'},mobileBottomNav:{position:'fixed',bottom:0,left:0,right:0,background:'white',borderTop:'1px solid #e5e7eb',display:'flex',padding:'8px',gap:'8px',zIndex:1000},mobileNavButton:{flex:1,padding:'8px',background:'#f3f4f6',border:'none',borderRadius:'6px',fontSize:'11px',cursor:'pointer',display:'flex',flexDirection:'column',alignItems:'center',gap:'2px'}};// Función para manejar click en el formulario\nconst handleFormClick=e=>{e.stopPropagation();};// Vista móvil del formulario (agregar ANTES del return principal)\nif(isMobile&&mobileFormView){var _newZona$lat,_newZona$lng;return/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'white',zIndex:10000,overflowY:'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',color:'white',padding:'15px',position:'sticky',top:0,zIndex:100,display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:'18px'},children:\"\\uD83D\\uDCCD Nueva Zona de Trabajo\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setMobileFormView(false);setShowPanel(true);setShowZonaForm(false);},style:{background:'rgba(255,255,255,0.2)',border:'1px solid rgba(255,255,255,0.3)',color:'white',padding:'8px 12px',borderRadius:'6px',fontSize:'14px'},children:\"\\u2716 Cerrar\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'#e0e7ff',padding:'10px',borderRadius:'6px',marginBottom:'15px',fontSize:'13px'},children:[\"\\uD83D\\uDCCD Ubicaci\\xF3n: \",(_newZona$lat=newZona.lat)===null||_newZona$lat===void 0?void 0:_newZona$lat.toFixed(6),\", \",(_newZona$lng=newZona.lng)===null||_newZona$lng===void 0?void 0:_newZona$lng.toFixed(6)]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Nombre de la zona *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newZona.nombre,onChange:e=>setNewZona({...newZona,nombre:e.target.value}),style:{width:'100%',padding:'12px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'16px'},placeholder:\"Ej: Reparaci\\xF3n Calle Principal\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newZona.descripcion,onChange:e=>setNewZona({...newZona,descripcion:e.target.value}),style:{width:'100%',padding:'12px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'16px',minHeight:'80px'},placeholder:\"Detalles del trabajo...\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Direcci\\xF3n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newZona.direccion,onChange:e=>setNewZona({...newZona,direccion:e.target.value}),style:{width:'100%',padding:'12px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'16px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Asignar a trabajador\"}),/*#__PURE__*/_jsxs(\"select\",{value:newZona.trabajadorAsignado,onChange:e=>setNewZona({...newZona,trabajadorAsignado:e.target.value}),style:{width:'100%',padding:'12px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'16px',background:'white'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Sin asignar --\"}),trabajadores.map(trabajador=>/*#__PURE__*/_jsx(\"option\",{value:trabajador.id,children:trabajador.nombre||trabajador.email},trabajador.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'10px',marginBottom:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Prioridad\"}),/*#__PURE__*/_jsxs(\"select\",{value:newZona.prioridad,onChange:e=>setNewZona({...newZona,prioridad:e.target.value}),style:{width:'100%',padding:'12px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'16px',background:'white'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"baja\",children:\"\\uD83D\\uDFE2 Baja\"}),/*#__PURE__*/_jsx(\"option\",{value:\"normal\",children:\"\\uD83D\\uDFE1 Normal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"alta\",children:\"\\uD83D\\uDFE0 Alta\"}),/*#__PURE__*/_jsx(\"option\",{value:\"urgente\",children:\"\\uD83D\\uDD34 Urgente\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"Fecha l\\xEDmite\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:newZona.fechaLimite,onChange:e=>setNewZona({...newZona,fechaLimite:e.target.value}),style:{width:'100%',padding:'12px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'16px'}})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{if(!newZona.nombre||!newZona.lat||!newZona.lng){alert('Por favor completa todos los campos requeridos');return;}try{const zonaData={...newZona,createdBy:currentUser.uid,createdAt:new Date().toISOString(),ultimaActualizacion:new Date().toISOString()};const zonasRef=ref(database,'zonas_asignadas');const newZonaRef=push(zonasRef);await set(newZonaRef,zonaData);// Si hay un trabajador asignado, notificarle\nif(newZona.trabajadorAsignado){const notificacionData={tipo:'nueva_zona',mensaje:`Se te ha asignado una nueva zona: ${newZona.nombre}`,zonaId:newZonaRef.key,trabajadorId:newZona.trabajadorAsignado,timestamp:new Date().toISOString(),leido:false};const notifRef=ref(database,'notificaciones');await push(notifRef,notificacionData);}// Limpiar formulario\nsetNewZona({nombre:'',descripcion:'',direccion:'',lat:null,lng:null,trabajadorAsignado:'',prioridad:'normal',fechaLimite:'',estado:'pendiente'});// Limpiar marcador temporal\nif(markersRef.current.temp){markersRef.current.temp.setMap(null);delete markersRef.current.temp;}setMobileFormView(false);setShowPanel(true);alert('✅ Zona creada exitosamente');}catch(error){console.error('Error al crear zona:',error);alert('❌ Error al crear la zona');}},style:{flex:1,padding:'14px',background:'#22c55e',color:'white',border:'none',borderRadius:'6px',fontSize:'16px',fontWeight:'600'},children:\"\\u2705 Guardar Zona\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setMobileFormView(false);setShowPanel(true);setShowZonaForm(false);setNewZona({nombre:'',descripcion:'',direccion:'',lat:null,lng:null,trabajadorAsignado:'',prioridad:'normal',fechaLimite:'',estado:'pendiente'});if(markersRef.current.temp){markersRef.current.temp.setMap(null);delete markersRef.current.temp;}},style:{flex:1,padding:'14px',background:'#ef4444',color:'white',border:'none',borderRadius:'6px',fontSize:'16px',fontWeight:'600'},children:\"\\u274C Cancelar\"})]})]})]});}return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.header,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.headerContent,children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px'},children:[isMobile&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPanel(!showPanel),style:{padding:'6px',background:'rgba(255,255,255,0.2)',border:'none',borderRadius:'4px',color:'white',cursor:'pointer',fontSize:'20px'},children:\"\\u2630\"}),/*#__PURE__*/_jsx(\"h1\",{style:styles.title,children:\"\\uD83D\\uDDFA\\uFE0F Gesti\\xF3n de Zonas\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.navigationButtons,children:[!isMobile&&onViewChange&&/*#__PURE__*/_jsxs(_Fragment,{children:[(currentUser===null||currentUser===void 0?void 0:currentUser.role)==='superadmin'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('admin'),style:styles.navButton,children:\"\\uD83D\\uDD10 Panel Admin\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('dashboard'),style:styles.navButton,children:\"\\uD83D\\uDCCA Dashboard GPS\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('fleet'),style:styles.navButton,children:\"\\uD83D\\uDE9B Panel Flota\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,style:styles.logoutButton,children:isMobile?'🚪':'🚪 Salir'})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mainContent,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.panel,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.panelHeader,children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:'0 0 10px 0',fontSize:isMobile?'16px':'18px'},children:\"\\uD83D\\uDCCD Crear y Administrar Zonas\"}),/*#__PURE__*/_jsx(\"button\",{onClick:startCreatingZona,disabled:isCreatingZona,style:styles.createButton,children:isCreatingZona?'📍 Haz clic en el mapa...':'➕ Crear Nueva Zona'})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.filterContainer,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.filterButtons,children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilterStatus('all'),style:{...styles.filterButton,...(filterStatus==='all'?styles.filterButtonActive:{})},children:\"Todas\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilterStatus('pendiente'),style:{...styles.filterButton,...(filterStatus==='pendiente'?styles.filterButtonActive:{})},children:\"\\u23F3 Pendientes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilterStatus('en_progreso'),style:{...styles.filterButton,...(filterStatus==='en_progreso'?styles.filterButtonActive:{})},children:\"\\uD83D\\uDD27 En Progreso\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilterStatus('completado'),style:{...styles.filterButton,...(filterStatus==='completado'?styles.filterButtonActive:{})},children:\"\\u2705 Completadas\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCompletedZones(!showCompletedZones),style:styles.toggleCompletedButton,children:[showCompletedZones?'👁️ Ocultar':'👁️‍🗨️ Mostrar',\" Completadas en Mapa\"]})]}),showZonaForm&&/*#__PURE__*/_jsxs(\"div\",{style:styles.form,onClick:handleFormClick,onMouseDown:handleFormClick,onTouchStart:handleFormClick,children:[/*#__PURE__*/_jsx(\"h3\",{style:styles.formTitle,children:\"Nueva Zona de Trabajo\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Nombre de la zona *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newZona.nombre,onChange:e=>setNewZona({...newZona,nombre:e.target.value}),style:styles.input,placeholder:\"Ej: Reparaci\\xF3n Calle Principal\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newZona.descripcion,onChange:e=>setNewZona({...newZona,descripcion:e.target.value}),style:styles.textarea,placeholder:\"Detalles del trabajo...\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Direcci\\xF3n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newZona.direccion,onChange:e=>setNewZona({...newZona,direccion:e.target.value}),style:styles.input})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Asignar a trabajador\"}),/*#__PURE__*/_jsxs(\"select\",{value:newZona.trabajadorAsignado,onChange:e=>setNewZona({...newZona,trabajadorAsignado:e.target.value}),style:styles.select,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Sin asignar --\"}),trabajadores.map(trabajador=>/*#__PURE__*/_jsx(\"option\",{value:trabajador.id,children:trabajador.nombre||trabajador.email},trabajador.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.gridTwoColumns,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Prioridad\"}),/*#__PURE__*/_jsxs(\"select\",{value:newZona.prioridad,onChange:e=>setNewZona({...newZona,prioridad:e.target.value}),style:styles.select,children:[/*#__PURE__*/_jsx(\"option\",{value:\"baja\",children:\"\\uD83D\\uDFE2 Baja\"}),/*#__PURE__*/_jsx(\"option\",{value:\"normal\",children:\"\\uD83D\\uDFE1 Normal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"alta\",children:\"\\uD83D\\uDFE0 Alta\"}),/*#__PURE__*/_jsx(\"option\",{value:\"urgente\",children:\"\\uD83D\\uDD34 Urgente\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Fecha l\\xEDmite\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:newZona.fechaLimite,onChange:e=>setNewZona({...newZona,fechaLimite:e.target.value}),style:styles.input})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.locationInfo,children:[\"\\uD83D\\uDCCD \",/*#__PURE__*/_jsx(\"strong\",{children:\"Ubicaci\\xF3n:\"}),\" \",(_newZona$lat2=newZona.lat)===null||_newZona$lat2===void 0?void 0:_newZona$lat2.toFixed(6),\", \",(_newZona$lng2=newZona.lng)===null||_newZona$lng2===void 0?void 0:_newZona$lng2.toFixed(6)]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formButtons,children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveZona,style:styles.saveButton,children:\"\\u2705 Guardar Zona\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{if(!newZona.nombre||!newZona.lat||!newZona.lng){alert('Por favor completa todos los campos requeridos');return;}try{const zonaData={...newZona,createdBy:currentUser.uid,createdAt:new Date().toISOString(),ultimaActualizacion:new Date().toISOString()};const zonasRef=ref(database,'zonas_asignadas');const newZonaRef=push(zonasRef);await set(newZonaRef,zonaData);// Si hay un trabajador asignado, notificarle\nif(newZona.trabajadorAsignado){const notificacionData={tipo:'nueva_zona',mensaje:`Se te ha asignado una nueva zona: ${newZona.nombre}`,zonaId:newZonaRef.key,trabajadorId:newZona.trabajadorAsignado,timestamp:new Date().toISOString(),leido:false};const notifRef=ref(database,'notificaciones');await push(notifRef,notificacionData);}// Guardar temporalmente la ubicación de la nueva zona\nconst newZonaLocation={lat:newZona.lat,lng:newZona.lng};// Limpiar formulario\nsetNewZona({nombre:'',descripcion:'',direccion:'',lat:null,lng:null,trabajadorAsignado:'',prioridad:'normal',fechaLimite:'',estado:'pendiente'});// Limpiar marcador temporal\nif(markersRef.current.temp){markersRef.current.temp.setMap(null);delete markersRef.current.temp;}// Cerrar vista móvil del formulario\nsetMobileFormView(false);// NO mostrar el panel, ir directo al mapa\nsetShowPanel(false);// Centrar el mapa en la nueva zona después de un pequeño delay\nsetTimeout(()=>{if(map&&newZonaLocation){map.setCenter(newZonaLocation);map.setZoom(16);}},100);// Mostrar mensaje de éxito\nalert('✅ Zona creada exitosamente');}catch(error){console.error('Error al crear zona:',error);alert('❌ Error al crear la zona');}},style:styles.cancelButton,children:\"\\u274C Cancelar\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.zonasList,children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'15px'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{...styles.listHeader,margin:0},children:[\"\\uD83D\\uDCCB Zonas Activas (\",filteredZonas.length,\")\"]}),isMobile&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('dashboard'),style:{padding:'8px 12px',background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white',border:'none',borderRadius:'6px',fontSize:'12px',fontWeight:'600',cursor:'pointer',display:'flex',alignItems:'center',gap:'5px'},children:\"\\uD83D\\uDCCA Ver Mapa\"})]}),filteredZonas.length===0?/*#__PURE__*/_jsxs(\"div\",{style:styles.emptyState,children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"No hay zonas \",filterStatus!=='all'?filterStatus.replace('_',' '):'']}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:isMobile?'11px':'12px',marginTop:'8px'},children:\"Haz clic en \\\"Crear Nueva Zona\\\" para comenzar\"})]}):/*#__PURE__*/_jsx(\"div\",{children:filteredZonas.map(zona=>{const trabajador=trabajadores.find(t=>t.id===zona.trabajadorAsignado);return/*#__PURE__*/_jsx(\"div\",{style:{...styles.zonaCard,background:(selectedZona===null||selectedZona===void 0?void 0:selectedZona.id)===zona.id?'#f0f9ff':'white'},onClick:()=>{setSelectedZona(zona);if(map&&markersRef.current[zona.id]){map.panTo({lat:zona.lat,lng:zona.lng});map.setZoom(16);window.google.maps.event.trigger(markersRef.current[zona.id],'click');}},children:/*#__PURE__*/_jsxs(\"div\",{style:styles.zonaHeader,children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h4\",{style:styles.zonaTitle,children:zona.nombre}),/*#__PURE__*/_jsxs(\"p\",{style:styles.zonaAddress,children:[\"\\uD83D\\uDCCD \",zona.direccion]}),/*#__PURE__*/_jsxs(\"p\",{style:styles.zonaWorker,children:[\"\\uD83D\\uDC77 \",trabajador?trabajador.nombre:'Sin asignar']}),/*#__PURE__*/_jsxs(\"div\",{style:styles.zonaTags,children:[/*#__PURE__*/_jsx(\"span\",{style:{...styles.tag,background:zona.estado==='completado'?'#dcfce7':zona.estado==='en_progreso'?'#dbeafe':'#fef3c7',color:zona.estado==='completado'?'#166534':zona.estado==='en_progreso'?'#1e40af':'#92400e'},children:zona.estado==='completado'?'✅ Completado':zona.estado==='en_progreso'?'🔧 En progreso':'⏳ Pendiente'}),/*#__PURE__*/_jsx(\"span\",{style:{...styles.tag,background:zona.prioridad==='urgente'?'#fee2e2':zona.prioridad==='alta'?'#fed7aa':zona.prioridad==='normal'?'#fef3c7':'#dcfce7',color:zona.prioridad==='urgente'?'#991b1b':zona.prioridad==='alta'?'#9a3412':zona.prioridad==='normal'?'#92400e':'#166534'},children:zona.prioridad==='urgente'?'🔴 Urgente':zona.prioridad==='alta'?'🟠 Alta':zona.prioridad==='normal'?'🟡 Normal':'🟢 Baja'})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.zonaActions,children:[zona.estado!=='completado'&&/*#__PURE__*/_jsxs(\"select\",{value:zona.estado,onChange:e=>{e.stopPropagation();updateZonaStatus(zona.id,e.target.value);},onClick:e=>e.stopPropagation(),style:styles.actionSelect,children:[/*#__PURE__*/_jsx(\"option\",{value:\"pendiente\",children:\"\\u23F3 Pendiente\"}),/*#__PURE__*/_jsx(\"option\",{value:\"en_progreso\",children:\"\\uD83D\\uDD27 En progreso\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completado\",children:\"\\u2705 Completado\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();deleteZona(zona.id);},style:styles.deleteButton,children:\"\\uD83D\\uDDD1\\uFE0F\"})]})]})},zona.id);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.map,children:[/*#__PURE__*/_jsx(\"div\",{ref:mapRef,style:{width:'100%',height:'100%'}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPanel(!showPanel),style:styles.togglePanelButton,children:/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'20px'},children:showPanel?'◀':'☰'})}),!mapLoaded&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'50px',height:'50px',border:'4px solid #f3f3f3',borderTop:'4px solid #667eea',borderRadius:'50%',animation:'spin 1s linear infinite'}}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'10px',color:'#666'},children:\"Cargando mapa...\"})]})]})]}),isMobile&&onViewChange&&/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileBottomNav,children:[(currentUser===null||currentUser===void 0?void 0:currentUser.role)==='superadmin'&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onViewChange('admin'),style:styles.mobileNavButton,children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'16px'},children:\"\\uD83D\\uDD10\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Admin\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onViewChange('dashboard'),style:styles.mobileNavButton,children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'16px'},children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Dashboard\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onViewChange('zones'),style:{...styles.mobileNavButton,background:'#667eea',color:'white'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'16px'},children:\"\\uD83D\\uDDFA\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Zonas\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onViewChange('fleet'),style:styles.mobileNavButton,children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'16px'},children:\"\\uD83D\\uDE9B\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Flota\"})]})]}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `})]});};export default ZonesManagement;","map":{"version":3,"names":["React","useState","useEffect","useRef","database","ref","push","set","update","remove","onValue","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ZonesManagement","_ref","_newZona$lat2","_newZona$lng2","currentUser","onLogout","onViewChange","currentView","mapRef","map","setMap","zonas","setZonas","trabajadores","setTrabajadores","selectedZona","setSelectedZona","isCreatingZona","setIsCreatingZona","showZonaForm","setShowZonaForm","mapLoaded","setMapLoaded","isMobile","setIsMobile","showPanel","setShowPanel","filterStatus","setFilterStatus","showCompletedZones","setShowCompletedZones","mobileFormView","setMobileFormView","newZona","setNewZona","nombre","descripcion","direccion","lat","lng","trabajadorAsignado","prioridad","fechaLimite","estado","markersRef","mapClickListenerRef","API_KEY","checkMobile","window","innerWidth","addEventListener","removeEventListener","loadGoogleMaps","Promise","resolve","google","maps","existingScript","document","querySelector","script","createElement","src","async","defer","onload","head","appendChild","initMap","current","mapInstance","Map","center","zoom","mapTypeId","zoomControl","mapTypeControl","streetViewControl","fullscreenControl","gestureHandling","locationButton","innerHTML","style","cssText","title","controls","ControlPosition","RIGHT_BOTTOM","navigator","geolocation","getCurrentPosition","position","pos","coords","latitude","longitude","setCenter","setZoom","solicitudData","localStorage","getItem","solicitud","JSON","parse","tempMarker","Marker","icon","path","SymbolPath","CIRCLE","scale","fillColor","fillOpacity","strokeColor","strokeWeight","temp","removeItem","zonasRef","unsubZonas","snapshot","data","val","zonasArray","Object","entries","_ref2","id","zona","trabajadoresRef","unsubTrabajadores","trabajadoresArray","_ref3","trabajador","values","forEach","marker","newMarkers","zonasToShow","filter","_trabajadores$find","isCompleted","opacity","anchor","Point","infoWindow","InfoWindow","content","find","t","addListener","open","startCreatingZona","setOptions","draggableCursor","instructionDiv","getDiv","handleMapClick","event","latLng","removeListener","instruction","getElementById","draggable","prev","toFixed","confirmDiv","geocoder","Geocoder","geocode","location","results","status","formatted_address","cancelCreatingZona","saveZona","alert","zonaData","createdBy","uid","createdAt","Date","toISOString","ultimaActualizacion","newZonaRef","notificacionData","tipo","mensaje","zonaId","key","trabajadorId","timestamp","leido","notifRef","error","console","deleteZona","confirm","updateZonaStatus","newStatus","z","solicitudId","fechaCompletado","completadoPor","getFilteredZonas","filteredZonas","styles","container","display","height","flexDirection","header","background","color","padding","boxShadow","zIndex","headerContent","justifyContent","alignItems","gap","flexWrap","margin","fontSize","fontWeight","navigationButtons","navButton","border","borderRadius","cursor","whiteSpace","navButtonActive","logoutButton","mainContent","flex","overflow","panel","width","borderRight","overflowY","top","left","right","bottom","transition","panelHeader","borderBottom","createButton","filterContainer","filterButtons","marginBottom","filterButton","minWidth","filterButtonActive","borderColor","toggleCompletedButton","form","formTitle","formGroup","label","input","textarea","minHeight","resize","select","gridTwoColumns","gridTemplateColumns","locationInfo","formButtons","saveButton","cancelButton","zonasList","listHeader","zonaCard","zonaCardHover","transform","zonaHeader","zonaTitle","zonaAddress","zonaWorker","zonaTags","marginTop","tag","zonaActions","actionSelect","deleteButton","emptyState","textAlign","togglePanelButton","mobileBottomNav","borderTop","mobileNavButton","handleFormClick","e","stopPropagation","_newZona$lat","_newZona$lng","children","onClick","type","value","onChange","target","placeholder","email","role","disabled","onMouseDown","onTouchStart","newZonaLocation","setTimeout","length","replace","panTo","trigger","animation"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/ZonesManagement.js"],"sourcesContent":["// src/components/ZonesManagement.js\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { database } from '../config/firebase';\r\nimport { ref, push, set, update, remove, onValue } from 'firebase/database';\r\n\r\nconst ZonesManagement = ({ currentUser, onLogout, onViewChange, currentView = 'zones' }) => {\r\n  const mapRef = useRef(null);\r\n  const [map, setMap] = useState(null);\r\n  const [zonas, setZonas] = useState([]);\r\n  const [trabajadores, setTrabajadores] = useState([]);\r\n  const [selectedZona, setSelectedZona] = useState(null);\r\n  const [isCreatingZona, setIsCreatingZona] = useState(false);\r\n  const [showZonaForm, setShowZonaForm] = useState(false);\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [showPanel, setShowPanel] = useState(true);\r\n  const [filterStatus, setFilterStatus] = useState('all'); // all, pendiente, en_progreso, completado\r\n  const [showCompletedZones, setShowCompletedZones] = useState(false);\r\n  const [mobileFormView, setMobileFormView] = useState(false);\r\n\r\n  // Form states\r\n  const [newZona, setNewZona] = useState({\r\n    nombre: '',\r\n    descripcion: '',\r\n    direccion: '',\r\n    lat: null,\r\n    lng: null,\r\n    trabajadorAsignado: '',\r\n    prioridad: 'normal',\r\n    fechaLimite: '',\r\n    estado: 'pendiente'\r\n  });\r\n\r\n  const markersRef = useRef({});\r\n  const mapClickListenerRef = useRef(null);\r\n  const API_KEY = 'AIzaSyA7DrdL36n5cx-RNzuXGAQggFeGCheHDbY';\r\n\r\n  // Detectar si es móvil\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth <= 768);\r\n      if (window.innerWidth <= 768) {\r\n        setShowPanel(false); // Ocultar panel por defecto en móvil\r\n      }\r\n    };\r\n\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n\r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n\r\n  // Cargar Google Maps\r\n  useEffect(() => {\r\n    const loadGoogleMaps = () => {\r\n      return new Promise((resolve) => {\r\n        if (window.google && window.google.maps) {\r\n          resolve(window.google.maps);\r\n          return;\r\n        }\r\n\r\n        const existingScript = document.querySelector('script[src*=\"maps.googleapis.com\"]');\r\n        if (existingScript) {\r\n          existingScript.addEventListener('load', () => {\r\n            resolve(window.google.maps);\r\n          });\r\n          return;\r\n        }\r\n\r\n        const script = document.createElement('script');\r\n        script.src = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry&v=weekly`;\r\n        script.async = true;\r\n        script.defer = true;\r\n        script.onload = () => resolve(window.google.maps);\r\n        document.head.appendChild(script);\r\n      });\r\n    };\r\n\r\n    const initMap = async () => {\r\n      const maps = await loadGoogleMaps();\r\n\r\n      if (!mapRef.current) return;\r\n\r\n      const mapInstance = new maps.Map(mapRef.current, {\r\n        center: { lat: -36.7333, lng: -72.4667 },\r\n        zoom: 13,\r\n        mapTypeId: 'roadmap',\r\n        zoomControl: !isMobile,\r\n        mapTypeControl: false,\r\n        streetViewControl: false,\r\n        fullscreenControl: true,\r\n        gestureHandling: isMobile ? 'greedy' : 'auto'\r\n      });\r\n\r\n      // Agregar botón de ubicación actual\r\n      const locationButton = document.createElement('button');\r\n      locationButton.innerHTML = `\r\n        <div style=\"\r\n          background: white;\r\n          border-radius: 50%;\r\n          width: 40px;\r\n          height: 40px;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          box-shadow: 0 2px 6px rgba(0,0,0,0.3);\r\n          cursor: pointer;\r\n        \">\r\n          <span style=\"font-size: 20px;\">📍</span>\r\n        </div>\r\n      `;\r\n      locationButton.style.cssText = 'border: none; background: none; padding: 5px; margin: 10px;';\r\n      locationButton.title = 'Mi ubicación';\r\n\r\n      mapInstance.controls[maps.ControlPosition.RIGHT_BOTTOM].push(locationButton);\r\n\r\n      locationButton.addEventListener('click', () => {\r\n        if (navigator.geolocation) {\r\n          navigator.geolocation.getCurrentPosition(\r\n            (position) => {\r\n              const pos = {\r\n                lat: position.coords.latitude,\r\n                lng: position.coords.longitude\r\n              };\r\n              mapInstance.setCenter(pos);\r\n              mapInstance.setZoom(15);\r\n            }\r\n          );\r\n        }\r\n      });\r\n\r\n      setMap(mapInstance);\r\n      setMapLoaded(true);\r\n    };\r\n\r\n    initMap();\r\n  }, [isMobile]);\r\n\r\n  // Verificar si hay datos de solicitud pendiente\r\n  useEffect(() => {\r\n    const solicitudData = localStorage.getItem('solicitudParaZona');\r\n    if (solicitudData) {\r\n      const solicitud = JSON.parse(solicitudData);\r\n\r\n      setNewZona({\r\n        nombre: solicitud.nombre,\r\n        descripcion: solicitud.descripcion,\r\n        direccion: solicitud.direccion,\r\n        lat: solicitud.lat,\r\n        lng: solicitud.lng,\r\n        trabajadorAsignado: '',\r\n        prioridad: solicitud.prioridad || 'normal',\r\n        fechaLimite: solicitud.fechaLimite || '',\r\n        estado: 'pendiente'\r\n      });\r\n\r\n      setShowZonaForm(true);\r\n      setShowPanel(true);\r\n\r\n      if (map && window.google) {\r\n        const tempMarker = new window.google.maps.Marker({\r\n          position: { lat: solicitud.lat, lng: solicitud.lng },\r\n          map: map,\r\n          title: 'Nueva zona desde solicitud',\r\n          icon: {\r\n            path: window.google.maps.SymbolPath.CIRCLE,\r\n            scale: 10,\r\n            fillColor: '#ef4444',\r\n            fillOpacity: 0.8,\r\n            strokeColor: '#ffffff',\r\n            strokeWeight: 2\r\n          },\r\n          temp: true\r\n        });\r\n\r\n        markersRef.current.temp = tempMarker;\r\n        map.setCenter({ lat: solicitud.lat, lng: solicitud.lng });\r\n        map.setZoom(16);\r\n      }\r\n\r\n      localStorage.removeItem('solicitudParaZona');\r\n    }\r\n  }, [map]);\r\n\r\n  // Cargar zonas y trabajadores desde Firebase\r\n  useEffect(() => {\r\n    const zonasRef = ref(database, 'zonas_asignadas');\r\n    const unsubZonas = onValue(zonasRef, (snapshot) => {\r\n      const data = snapshot.val();\r\n      if (data) {\r\n        const zonasArray = Object.entries(data).map(([id, zona]) => ({\r\n          id,\r\n          ...zona\r\n        }));\r\n        setZonas(zonasArray);\r\n      } else {\r\n        setZonas([]);\r\n      }\r\n    });\r\n\r\n    const trabajadoresRef = ref(database, 'trabajadores');\r\n    const unsubTrabajadores = onValue(trabajadoresRef, (snapshot) => {\r\n      const data = snapshot.val();\r\n      if (data) {\r\n        const trabajadoresArray = Object.entries(data).map(([id, trabajador]) => ({\r\n          id,\r\n          ...trabajador\r\n        }));\r\n        setTrabajadores(trabajadoresArray);\r\n      } else {\r\n        setTrabajadores([]);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      unsubZonas();\r\n      unsubTrabajadores();\r\n    };\r\n  }, []);\r\n\r\n  // Actualizar marcadores en el mapa\r\n  useEffect(() => {\r\n    if (!map || !window.google) return;\r\n\r\n    // Limpiar marcadores anteriores\r\n    Object.values(markersRef.current).forEach(marker => {\r\n      if (marker && !marker.temp) marker.setMap(null);\r\n    });\r\n\r\n    const newMarkers = {};\r\n\r\n    // Filtrar zonas según el estado seleccionado\r\n    const zonasToShow = zonas.filter(zona => {\r\n      if (filterStatus === 'all') {\r\n        return !zona.estado || zona.estado !== 'completado' || showCompletedZones;\r\n      }\r\n      if (filterStatus === 'completado') {\r\n        return zona.estado === 'completado';\r\n      }\r\n      return zona.estado === filterStatus;\r\n    });\r\n\r\n    // Crear marcadores para cada zona\r\n    zonasToShow.forEach(zona => {\r\n      const isCompleted = zona.estado === 'completado';\r\n      const opacity = isCompleted && !showCompletedZones ? 0.5 : 1;\r\n\r\n      const marker = new window.google.maps.Marker({\r\n        position: { lat: zona.lat, lng: zona.lng },\r\n        map: map,\r\n        title: zona.nombre,\r\n        opacity: opacity,\r\n        icon: {\r\n          path: 'M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z',\r\n          fillColor: zona.estado === 'completado' ? '#22c55e' :\r\n            zona.estado === 'en_progreso' ? '#3b82f6' :\r\n              zona.prioridad === 'urgente' ? '#ef4444' :\r\n                zona.prioridad === 'alta' ? '#f97316' : '#f59e0b',\r\n          fillOpacity: opacity,\r\n          strokeColor: '#ffffff',\r\n          strokeWeight: 2,\r\n          scale: 2,\r\n          anchor: new window.google.maps.Point(12, 24)\r\n        }\r\n      });\r\n\r\n      const infoWindow = new window.google.maps.InfoWindow({\r\n        content: `\r\n          <div style=\"padding: 10px; min-width: 200px;\">\r\n            <h3 style=\"margin: 0 0 10px 0;\">${zona.nombre}</h3>\r\n            <p style=\"margin: 5px 0;\"><strong>Dirección:</strong> ${zona.direccion}</p>\r\n            <p style=\"margin: 5px 0;\"><strong>Descripción:</strong> ${zona.descripcion || 'Sin descripción'}</p>\r\n            <p style=\"margin: 5px 0;\"><strong>Trabajador:</strong> ${zona.trabajadorAsignado ?\r\n            trabajadores.find(t => t.id === zona.trabajadorAsignado)?.nombre || 'Sin asignar' :\r\n            'Sin asignar'\r\n          }</p>\r\n            <p style=\"margin: 5px 0;\"><strong>Estado:</strong> ${zona.estado || 'pendiente'}</p>\r\n            <p style=\"margin: 5px 0;\"><strong>Prioridad:</strong> ${zona.prioridad || 'normal'}</p>\r\n          </div>\r\n        `\r\n      });\r\n\r\n      marker.addListener('click', () => {\r\n        infoWindow.open(map, marker);\r\n        setSelectedZona(zona);\r\n      });\r\n\r\n      newMarkers[zona.id] = marker;\r\n    });\r\n\r\n    // Mantener el marcador temporal si existe\r\n    if (markersRef.current.temp) {\r\n      newMarkers.temp = markersRef.current.temp;\r\n    }\r\n\r\n    markersRef.current = newMarkers;\r\n  }, [map, zonas, trabajadores, filterStatus, showCompletedZones]);\r\n\r\n  // Activar modo creación de zona\r\n  const startCreatingZona = () => {\r\n    if (!map) return;\r\n\r\n    setIsCreatingZona(true);\r\n    setShowPanel(false); // Ocultar panel para tener más espacio en el mapa\r\n    map.setOptions({ draggableCursor: 'crosshair' });\r\n\r\n    // Mostrar mensaje de instrucciones\r\n    const instructionDiv = document.createElement('div');\r\n    instructionDiv.id = 'map-instruction';\r\n    instructionDiv.style.cssText = `\r\n    position: absolute;\r\n    top: 20px;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    background: white;\r\n    padding: 12px 20px;\r\n    border-radius: 8px;\r\n    box-shadow: 0 4px 20px rgba(0,0,0,0.15);\r\n    z-index: 1000;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n  `;\r\n    instructionDiv.innerHTML = '📍 Haz clic en el mapa para seleccionar la ubicación';\r\n    map.getDiv().appendChild(instructionDiv);\r\n\r\n    // Crear una función handler que se pueda remover\r\n    const handleMapClick = (event) => {\r\n      const lat = event.latLng.lat();\r\n      const lng = event.latLng.lng();\r\n\r\n      // Remover el listener inmediatamente\r\n      if (mapClickListenerRef.current) {\r\n        window.google.maps.event.removeListener(mapClickListenerRef.current);\r\n        mapClickListenerRef.current = null;\r\n      }\r\n\r\n      // Restaurar cursor normal\r\n      map.setOptions({ draggableCursor: null });\r\n\r\n      // Remover instrucciones anteriores\r\n      const instruction = document.getElementById('map-instruction');\r\n      if (instruction) {\r\n        instruction.remove();\r\n      }\r\n\r\n      // Crear marcador temporal\r\n      if (markersRef.current.temp) {\r\n        markersRef.current.temp.setMap(null);\r\n      }\r\n\r\n      const tempMarker = new window.google.maps.Marker({\r\n        position: { lat, lng },\r\n        map: map,\r\n        title: 'Nueva zona',\r\n        icon: {\r\n          path: window.google.maps.SymbolPath.CIRCLE,\r\n          scale: 10,\r\n          fillColor: '#ef4444',\r\n          fillOpacity: 0.8,\r\n          strokeColor: '#ffffff',\r\n          strokeWeight: 2\r\n        },\r\n        temp: true,\r\n        draggable: true\r\n      });\r\n\r\n      markersRef.current.temp = tempMarker;\r\n\r\n      // Actualizar coordenadas\r\n      setNewZona(prev => ({\r\n        ...prev,\r\n        lat,\r\n        lng,\r\n        direccion: `${lat.toFixed(6)}, ${lng.toFixed(6)}`\r\n      }));\r\n\r\n      // Crear botón de confirmación flotante\r\n      const confirmDiv = document.createElement('div');\r\n      confirmDiv.id = 'confirm-location';\r\n      confirmDiv.style.cssText = `\r\n      position: absolute;\r\n      bottom: ${isMobile ? '80px' : '30px'};\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n      background: white;\r\n      padding: 15px;\r\n      border-radius: 12px;\r\n      box-shadow: 0 4px 20px rgba(0,0,0,0.2);\r\n      z-index: 1000;\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      gap: 10px;\r\n    `;\r\n\r\n      confirmDiv.innerHTML = `\r\n      <div style=\"font-size: 14px; font-weight: 500; color: #374151; margin-bottom: 5px;\">\r\n        📍 Ubicación seleccionada\r\n      </div>\r\n      <div style=\"display: flex; gap: 10px;\">\r\n        <button id=\"confirm-btn\" style=\"\r\n          padding: 10px 20px;\r\n          background: #22c55e;\r\n          color: white;\r\n          border: none;\r\n          border-radius: 6px;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n        \">\r\n          ✅ Confirmar y Continuar\r\n        </button>\r\n        <button id=\"cancel-btn\" style=\"\r\n          padding: 10px 20px;\r\n          background: #ef4444;\r\n          color: white;\r\n          border: none;\r\n          border-radius: 6px;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n          cursor: pointer;\r\n        \">\r\n          ❌ Cancelar\r\n        </button>\r\n      </div>\r\n    `;\r\n\r\n      map.getDiv().appendChild(confirmDiv);\r\n\r\n      // En el evento del botón confirmar, cambia esta parte:\r\n      document.getElementById('confirm-btn').addEventListener('click', () => {\r\n        // Remover el div de confirmación\r\n        confirmDiv.remove();\r\n\r\n        // Establecer que ya no estamos creando\r\n        setIsCreatingZona(false);\r\n\r\n        // Obtener dirección\r\n        const geocoder = new window.google.maps.Geocoder();\r\n        geocoder.geocode({ location: { lat, lng } }, (results, status) => {\r\n          if (status === 'OK' && results[0]) {\r\n            setNewZona(prev => ({\r\n              ...prev,\r\n              direccion: results[0].formatted_address\r\n            }));\r\n          }\r\n        });\r\n\r\n        // Si es móvil, mostrar vista de formulario completa\r\n        if (isMobile) {\r\n          setMobileFormView(true);\r\n        } else {\r\n          // Desktop: mostrar normal\r\n          setShowZonaForm(true);\r\n          setShowPanel(true);\r\n        }\r\n      });\r\n\r\n      document.getElementById('cancel-btn').addEventListener('click', () => {\r\n        // Limpiar todo\r\n        confirmDiv.remove();\r\n        if (markersRef.current.temp) {\r\n          markersRef.current.temp.setMap(null);\r\n          delete markersRef.current.temp;\r\n        }\r\n        setIsCreatingZona(false);\r\n        setShowPanel(true);\r\n      });\r\n    };\r\n\r\n    // Agregar el listener\r\n    mapClickListenerRef.current = map.addListener('click', handleMapClick);\r\n  };\r\n\r\n  // Cancelar modo creación\r\n  const cancelCreatingZona = () => {\r\n    setIsCreatingZona(false);\r\n    if (map) {\r\n      map.setOptions({ draggableCursor: null });\r\n\r\n      // Asegurarse de remover el listener\r\n      if (mapClickListenerRef.current) {\r\n        window.google.maps.event.removeListener(mapClickListenerRef.current);\r\n        mapClickListenerRef.current = null;\r\n      }\r\n\r\n      // Remover instrucciones\r\n      const instructionDiv = document.getElementById('map-instruction');\r\n      if (instructionDiv) {\r\n        instructionDiv.remove();\r\n      }\r\n    }\r\n  };\r\n\r\n  // Guardar nueva zona\r\n  const saveZona = async () => {\r\n    if (!newZona.nombre || !newZona.lat || !newZona.lng) {\r\n      alert('Por favor completa todos los campos requeridos');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const zonaData = {\r\n        ...newZona,\r\n        createdBy: currentUser.uid,\r\n        createdAt: new Date().toISOString(),\r\n        ultimaActualizacion: new Date().toISOString()\r\n      };\r\n\r\n      const zonasRef = ref(database, 'zonas_asignadas');\r\n      const newZonaRef = push(zonasRef);\r\n      await set(newZonaRef, zonaData);\r\n\r\n      // Si hay un trabajador asignado, notificarle\r\n      if (newZona.trabajadorAsignado) {\r\n        const notificacionData = {\r\n          tipo: 'nueva_zona',\r\n          mensaje: `Se te ha asignado una nueva zona: ${newZona.nombre}`,\r\n          zonaId: newZonaRef.key,\r\n          trabajadorId: newZona.trabajadorAsignado,\r\n          timestamp: new Date().toISOString(),\r\n          leido: false\r\n        };\r\n\r\n        const notifRef = ref(database, 'notificaciones');\r\n        await push(notifRef, notificacionData);\r\n      }\r\n\r\n      // Limpiar formulario\r\n      setNewZona({\r\n        nombre: '',\r\n        descripcion: '',\r\n        direccion: '',\r\n        lat: null,\r\n        lng: null,\r\n        trabajadorAsignado: '',\r\n        prioridad: 'normal',\r\n        fechaLimite: '',\r\n        estado: 'pendiente'\r\n      });\r\n\r\n      // Limpiar marcador temporal\r\n      if (markersRef.current.temp) {\r\n        markersRef.current.temp.setMap(null);\r\n        delete markersRef.current.temp;\r\n      }\r\n\r\n      setShowZonaForm(false);\r\n      alert('✅ Zona creada exitosamente');\r\n    } catch (error) {\r\n      console.error('Error al crear zona:', error);\r\n      alert('❌ Error al crear la zona');\r\n    }\r\n  };\r\n\r\n  // Eliminar zona\r\n  const deleteZona = async (zonaId) => {\r\n    if (window.confirm('¿Estás seguro de eliminar esta zona?')) {\r\n      try {\r\n        await remove(ref(database, `zonas_asignadas/${zonaId}`));\r\n        alert('✅ Zona eliminada');\r\n      } catch (error) {\r\n        console.error('Error al eliminar zona:', error);\r\n        alert('❌ Error al eliminar la zona');\r\n      }\r\n    }\r\n  };\r\n\r\n  // Actualizar estado de zona\r\n  const updateZonaStatus = async (zonaId, newStatus) => {\r\n    try {\r\n      const zona = zonas.find(z => z.id === zonaId);\r\n\r\n      await update(ref(database, `zonas_asignadas/${zonaId}`), {\r\n        estado: newStatus,\r\n        ultimaActualizacion: new Date().toISOString()\r\n      });\r\n\r\n      if (newStatus === 'completado' && zona && zona.solicitudId) {\r\n        await update(ref(database, `solicitudes_maquinaria/${zona.solicitudId}`), {\r\n          estado: 'completada',\r\n          fechaCompletado: new Date().toISOString(),\r\n          completadoPor: currentUser.uid\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al actualizar estado:', error);\r\n    }\r\n  };\r\n\r\n  // Filtrar zonas para mostrar en el panel\r\n  const getFilteredZonas = () => {\r\n    return zonas.filter(zona => {\r\n      if (filterStatus === 'all') {\r\n        return !showCompletedZones ? zona.estado !== 'completado' : true;\r\n      }\r\n      return zona.estado === filterStatus;\r\n    });\r\n  };\r\n\r\n  const filteredZonas = getFilteredZonas();\r\n\r\n  const styles = {\r\n    container: {\r\n      display: 'flex',\r\n      height: '100vh',\r\n      position: 'relative',\r\n      flexDirection: 'column'\r\n    },\r\n    header: {\r\n      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n      color: 'white',\r\n      padding: isMobile ? '10px' : '12px 20px',\r\n      boxShadow: '0 2px 10px rgba(0,0,0,0.2)',\r\n      zIndex: 1003\r\n    },\r\n    headerContent: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      gap: '10px',\r\n      flexWrap: isMobile ? 'wrap' : 'nowrap'\r\n    },\r\n    title: {\r\n      margin: 0,\r\n      fontSize: isMobile ? '16px' : '20px',\r\n      fontWeight: '600',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '8px'\r\n    },\r\n    navigationButtons: {\r\n      display: 'flex',\r\n      gap: '8px',\r\n      alignItems: 'center',\r\n      flexWrap: 'wrap'\r\n    },\r\n    navButton: {\r\n      padding: isMobile ? '6px 10px' : '6px 12px',\r\n      background: 'rgba(255,255,255,0.1)',\r\n      color: 'white',\r\n      border: '1px solid rgba(255,255,255,0.3)',\r\n      borderRadius: '5px',\r\n      cursor: 'pointer',\r\n      fontSize: isMobile ? '11px' : '13px',\r\n      fontWeight: '400',\r\n      whiteSpace: 'nowrap'\r\n    },\r\n    navButtonActive: {\r\n      background: 'rgba(255,255,255,0.25)',\r\n      fontWeight: '600'\r\n    },\r\n    logoutButton: {\r\n      padding: isMobile ? '6px 10px' : '6px 14px',\r\n      background: '#ef4444',\r\n      color: 'white',\r\n      border: 'none',\r\n      borderRadius: '5px',\r\n      cursor: 'pointer',\r\n      fontSize: isMobile ? '12px' : '13px',\r\n      fontWeight: '600'\r\n    },\r\n    mainContent: {\r\n      display: 'flex',\r\n      flex: 1,\r\n      position: 'relative',\r\n      overflow: 'hidden'\r\n    },\r\n    panel: {\r\n      width: isMobile ? '100%' : '400px',\r\n      background: 'white',\r\n      borderRight: '1px solid #e5e7eb',\r\n      overflowY: 'auto',\r\n      display: showPanel ? 'flex' : 'none',\r\n      flexDirection: 'column',\r\n      position: isMobile ? 'fixed' : 'relative',\r\n      height: isMobile && showZonaForm ? '100vh' : '100%', // Pantalla completa cuando hay formulario\r\n      zIndex: isMobile ? 9999 : 1001,\r\n      top: isMobile ? '0' : 'auto',\r\n      left: isMobile ? '0' : 'auto',\r\n      right: isMobile ? '0' : 'auto', // Agregar right 0 para móvil\r\n      bottom: isMobile ? '0' : 'auto', // Agregar bottom 0 para móvil\r\n      transition: 'transform 0.3s'\r\n    },\r\n    panelHeader: {\r\n      padding: isMobile ? '15px' : '20px',\r\n      borderBottom: '1px solid #e5e7eb',\r\n      background: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\r\n      color: 'white'\r\n    },\r\n    createButton: {\r\n      width: '100%',\r\n      padding: isMobile ? '10px' : '10px',\r\n      background: isCreatingZona ? '#9ca3af' : 'white',\r\n      color: isCreatingZona ? 'white' : '#22c55e',\r\n      border: 'none',\r\n      borderRadius: '6px',\r\n      fontSize: isMobile ? '13px' : '14px',\r\n      fontWeight: '500',\r\n      cursor: isCreatingZona ? 'not-allowed' : 'pointer',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      gap: '8px'\r\n    },\r\n    filterContainer: {\r\n      padding: isMobile ? '10px' : '15px',\r\n      borderBottom: '1px solid #e5e7eb',\r\n      background: '#f9fafb'\r\n    },\r\n    filterButtons: {\r\n      display: 'flex',\r\n      gap: '8px',\r\n      marginBottom: '10px',\r\n      flexWrap: 'wrap'\r\n    },\r\n    filterButton: {\r\n      flex: 1,\r\n      minWidth: isMobile ? '70px' : 'auto',\r\n      padding: isMobile ? '6px' : '8px 12px',\r\n      background: 'white',\r\n      border: '1px solid #d1d5db',\r\n      borderRadius: '6px',\r\n      fontSize: isMobile ? '11px' : '12px',\r\n      cursor: 'pointer',\r\n      transition: 'all 0.3s'\r\n    },\r\n    filterButtonActive: {\r\n      background: '#667eea',\r\n      color: 'white',\r\n      borderColor: '#667eea'\r\n    },\r\n    toggleCompletedButton: {\r\n      width: '100%',\r\n      padding: isMobile ? '8px' : '10px',\r\n      background: showCompletedZones ? '#10b981' : '#f3f4f6',\r\n      color: showCompletedZones ? 'white' : '#6b7280',\r\n      border: '1px solid',\r\n      borderColor: showCompletedZones ? '#10b981' : '#d1d5db',\r\n      borderRadius: '6px',\r\n      fontSize: isMobile ? '11px' : '12px',\r\n      cursor: 'pointer',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      gap: '6px'\r\n    },\r\n    form: {\r\n      padding: isMobile ? '15px' : '20px',\r\n      background: 'white', // Cambiar a blanco sólido\r\n      borderBottom: '2px solid #3b82f6',\r\n      position: 'relative', // Agregar position relative\r\n      zIndex: 10000 // Agregar z-index alto\r\n    },\r\n    formTitle: {\r\n      margin: '0 0 15px 0',\r\n      color: '#1e40af',\r\n      fontSize: isMobile ? '16px' : '18px'\r\n    },\r\n    formGroup: {\r\n      marginBottom: '12px'\r\n    },\r\n    label: {\r\n      display: 'block',\r\n      marginBottom: '4px',\r\n      fontSize: isMobile ? '12px' : '13px',\r\n      fontWeight: '500',\r\n      color: '#374151'\r\n    },\r\n    input: {\r\n      width: '100%',\r\n      padding: isMobile ? '6px' : '8px',\r\n      border: '1px solid #d1d5db',\r\n      borderRadius: '4px',\r\n      fontSize: isMobile ? '13px' : '14px'\r\n    },\r\n    textarea: {\r\n      width: '100%',\r\n      padding: isMobile ? '6px' : '8px',\r\n      border: '1px solid #d1d5db',\r\n      borderRadius: '4px',\r\n      fontSize: isMobile ? '13px' : '14px',\r\n      minHeight: '60px',\r\n      resize: 'vertical'\r\n    },\r\n    select: {\r\n      width: '100%',\r\n      padding: isMobile ? '6px' : '8px',\r\n      border: '1px solid #d1d5db',\r\n      borderRadius: '4px',\r\n      fontSize: isMobile ? '13px' : '14px',\r\n      background: 'white'\r\n    },\r\n    gridTwoColumns: {\r\n      display: 'grid',\r\n      gridTemplateColumns: '1fr 1fr',\r\n      gap: '12px',\r\n      marginBottom: '12px'\r\n    },\r\n    locationInfo: {\r\n      padding: '8px',\r\n      background: '#e0e7ff',\r\n      borderRadius: '4px',\r\n      marginBottom: '12px',\r\n      fontSize: isMobile ? '11px' : '12px'\r\n    },\r\n    formButtons: {\r\n      display: 'flex',\r\n      gap: '8px'\r\n    },\r\n    saveButton: {\r\n      flex: 1,\r\n      padding: isMobile ? '8px' : '10px',\r\n      background: '#22c55e',\r\n      color: 'white',\r\n      border: 'none',\r\n      borderRadius: '6px',\r\n      fontSize: isMobile ? '13px' : '14px',\r\n      fontWeight: '500',\r\n      cursor: 'pointer'\r\n    },\r\n    cancelButton: {\r\n      flex: 1,\r\n      padding: isMobile ? '8px' : '10px',\r\n      background: '#ef4444',\r\n      color: 'white',\r\n      border: 'none',\r\n      borderRadius: '6px',\r\n      fontSize: isMobile ? '13px' : '14px',\r\n      fontWeight: '500',\r\n      cursor: 'pointer'\r\n    },\r\n    zonasList: {\r\n      flex: 1,\r\n      padding: isMobile ? '15px' : '20px',\r\n      overflowY: 'auto'\r\n    },\r\n    listHeader: {\r\n      margin: '0 0 15px 0',\r\n      fontSize: isMobile ? '14px' : '16px',\r\n      color: '#1f2937',\r\n      fontWeight: '600'\r\n    },\r\n    zonaCard: {\r\n      padding: isMobile ? '10px' : '12px',\r\n      border: '1px solid #e5e7eb',\r\n      borderRadius: '8px',\r\n      marginBottom: '12px',\r\n      cursor: 'pointer',\r\n      transition: 'all 0.2s'\r\n    },\r\n    zonaCardHover: {\r\n      boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n      transform: 'translateY(-1px)'\r\n    },\r\n    zonaHeader: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'start',\r\n      marginBottom: '8px'\r\n    },\r\n    zonaTitle: {\r\n      margin: '0 0 4px 0',\r\n      fontSize: isMobile ? '13px' : '14px',\r\n      fontWeight: '600',\r\n      color: '#1f2937'\r\n    },\r\n    zonaAddress: {\r\n      margin: '0 0 4px 0',\r\n      fontSize: isMobile ? '11px' : '12px',\r\n      color: '#6b7280'\r\n    },\r\n    zonaWorker: {\r\n      margin: '0 0 4px 0',\r\n      fontSize: isMobile ? '11px' : '12px',\r\n      color: '#6b7280'\r\n    },\r\n    zonaTags: {\r\n      display: 'flex',\r\n      gap: '6px',\r\n      marginTop: '6px',\r\n      flexWrap: 'wrap'\r\n    },\r\n    tag: {\r\n      padding: '2px 6px',\r\n      borderRadius: '4px',\r\n      fontSize: isMobile ? '10px' : '11px',\r\n      fontWeight: '500'\r\n    },\r\n    zonaActions: {\r\n      display: 'flex',\r\n      gap: '4px'\r\n    },\r\n    actionSelect: {\r\n      padding: '4px',\r\n      border: '1px solid #d1d5db',\r\n      borderRadius: '4px',\r\n      fontSize: '11px',\r\n      cursor: 'pointer',\r\n      background: 'white'\r\n    },\r\n    deleteButton: {\r\n      padding: '4px 8px',\r\n      background: '#ef4444',\r\n      color: 'white',\r\n      border: 'none',\r\n      borderRadius: '4px',\r\n      fontSize: '11px',\r\n      cursor: 'pointer'\r\n    },\r\n    emptyState: {\r\n      textAlign: 'center',\r\n      padding: '40px 20px',\r\n      color: '#6b7280'\r\n    },\r\n    map: {\r\n      flex: 1,\r\n      position: 'relative'\r\n      // NO agregar display none\r\n    },\r\n    togglePanelButton: {\r\n      position: 'absolute',\r\n      left: '10px',\r\n      top: '10px',\r\n      background: 'white',\r\n      border: 'none',\r\n      borderRadius: '8px',\r\n      padding: '10px',\r\n      boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\r\n      cursor: 'pointer',\r\n      zIndex: 1000,\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center'\r\n    },\r\n    mobileBottomNav: {\r\n      position: 'fixed',\r\n      bottom: 0,\r\n      left: 0,\r\n      right: 0,\r\n      background: 'white',\r\n      borderTop: '1px solid #e5e7eb',\r\n      display: 'flex',\r\n      padding: '8px',\r\n      gap: '8px',\r\n      zIndex: 1000\r\n    },\r\n    mobileNavButton: {\r\n      flex: 1,\r\n      padding: '8px',\r\n      background: '#f3f4f6',\r\n      border: 'none',\r\n      borderRadius: '6px',\r\n      fontSize: '11px',\r\n      cursor: 'pointer',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      gap: '2px'\r\n    }\r\n  };\r\n\r\n  // Función para manejar click en el formulario\r\n  const handleFormClick = (e) => {\r\n    e.stopPropagation();\r\n  };\r\n  // Vista móvil del formulario (agregar ANTES del return principal)\r\n  if (isMobile && mobileFormView) {\r\n    return (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'white',\r\n        zIndex: 10000,\r\n        overflowY: 'auto'\r\n      }}>\r\n        <div style={{\r\n          background: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\r\n          color: 'white',\r\n          padding: '15px',\r\n          position: 'sticky',\r\n          top: 0,\r\n          zIndex: 100,\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center'\r\n        }}>\r\n          <h2 style={{ margin: 0, fontSize: '18px' }}>\r\n            📍 Nueva Zona de Trabajo\r\n          </h2>\r\n          <button\r\n            onClick={() => {\r\n              setMobileFormView(false);\r\n              setShowPanel(true);\r\n              setShowZonaForm(false);\r\n            }}\r\n            style={{\r\n              background: 'rgba(255,255,255,0.2)',\r\n              border: '1px solid rgba(255,255,255,0.3)',\r\n              color: 'white',\r\n              padding: '8px 12px',\r\n              borderRadius: '6px',\r\n              fontSize: '14px'\r\n            }}\r\n          >\r\n            ✖ Cerrar\r\n          </button>\r\n        </div>\r\n\r\n        <div style={{ padding: '20px' }}>\r\n          <div style={{\r\n            background: '#e0e7ff',\r\n            padding: '10px',\r\n            borderRadius: '6px',\r\n            marginBottom: '15px',\r\n            fontSize: '13px'\r\n          }}>\r\n            📍 Ubicación: {newZona.lat?.toFixed(6)}, {newZona.lng?.toFixed(6)}\r\n          </div>\r\n\r\n          <div style={{ marginBottom: '15px' }}>\r\n            <label style={{\r\n              display: 'block',\r\n              marginBottom: '5px',\r\n              fontSize: '14px',\r\n              fontWeight: '500',\r\n              color: '#374151'\r\n            }}>\r\n              Nombre de la zona *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newZona.nombre}\r\n              onChange={(e) => setNewZona({ ...newZona, nombre: e.target.value })}\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '6px',\r\n                fontSize: '16px'\r\n              }}\r\n              placeholder=\"Ej: Reparación Calle Principal\"\r\n            />\r\n          </div>\r\n\r\n          <div style={{ marginBottom: '15px' }}>\r\n            <label style={{\r\n              display: 'block',\r\n              marginBottom: '5px',\r\n              fontSize: '14px',\r\n              fontWeight: '500',\r\n              color: '#374151'\r\n            }}>\r\n              Descripción\r\n            </label>\r\n            <textarea\r\n              value={newZona.descripcion}\r\n              onChange={(e) => setNewZona({ ...newZona, descripcion: e.target.value })}\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '6px',\r\n                fontSize: '16px',\r\n                minHeight: '80px'\r\n              }}\r\n              placeholder=\"Detalles del trabajo...\"\r\n            />\r\n          </div>\r\n\r\n          <div style={{ marginBottom: '15px' }}>\r\n            <label style={{\r\n              display: 'block',\r\n              marginBottom: '5px',\r\n              fontSize: '14px',\r\n              fontWeight: '500',\r\n              color: '#374151'\r\n            }}>\r\n              Dirección\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={newZona.direccion}\r\n              onChange={(e) => setNewZona({ ...newZona, direccion: e.target.value })}\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '6px',\r\n                fontSize: '16px'\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ marginBottom: '15px' }}>\r\n            <label style={{\r\n              display: 'block',\r\n              marginBottom: '5px',\r\n              fontSize: '14px',\r\n              fontWeight: '500',\r\n              color: '#374151'\r\n            }}>\r\n              Asignar a trabajador\r\n            </label>\r\n            <select\r\n              value={newZona.trabajadorAsignado}\r\n              onChange={(e) => setNewZona({ ...newZona, trabajadorAsignado: e.target.value })}\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '6px',\r\n                fontSize: '16px',\r\n                background: 'white'\r\n              }}\r\n            >\r\n              <option value=\"\">-- Sin asignar --</option>\r\n              {trabajadores.map(trabajador => (\r\n                <option key={trabajador.id} value={trabajador.id}>\r\n                  {trabajador.nombre || trabajador.email}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '10px', marginBottom: '15px' }}>\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                marginBottom: '5px',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                color: '#374151'\r\n              }}>\r\n                Prioridad\r\n              </label>\r\n              <select\r\n                value={newZona.prioridad}\r\n                onChange={(e) => setNewZona({ ...newZona, prioridad: e.target.value })}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '12px',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '6px',\r\n                  fontSize: '16px',\r\n                  background: 'white'\r\n                }}\r\n              >\r\n                <option value=\"baja\">🟢 Baja</option>\r\n                <option value=\"normal\">🟡 Normal</option>\r\n                <option value=\"alta\">🟠 Alta</option>\r\n                <option value=\"urgente\">🔴 Urgente</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                marginBottom: '5px',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                color: '#374151'\r\n              }}>\r\n                Fecha límite\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                value={newZona.fechaLimite}\r\n                onChange={(e) => setNewZona({ ...newZona, fechaLimite: e.target.value })}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '12px',\r\n                  border: '1px solid #d1d5db',\r\n                  borderRadius: '6px',\r\n                  fontSize: '16px'\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ display: 'flex', gap: '10px', marginTop: '20px' }}>\r\n            <button\r\n              onClick={async () => {\r\n                if (!newZona.nombre || !newZona.lat || !newZona.lng) {\r\n                  alert('Por favor completa todos los campos requeridos');\r\n                  return;\r\n                }\r\n\r\n                try {\r\n                  const zonaData = {\r\n                    ...newZona,\r\n                    createdBy: currentUser.uid,\r\n                    createdAt: new Date().toISOString(),\r\n                    ultimaActualizacion: new Date().toISOString()\r\n                  };\r\n\r\n                  const zonasRef = ref(database, 'zonas_asignadas');\r\n                  const newZonaRef = push(zonasRef);\r\n                  await set(newZonaRef, zonaData);\r\n\r\n                  // Si hay un trabajador asignado, notificarle\r\n                  if (newZona.trabajadorAsignado) {\r\n                    const notificacionData = {\r\n                      tipo: 'nueva_zona',\r\n                      mensaje: `Se te ha asignado una nueva zona: ${newZona.nombre}`,\r\n                      zonaId: newZonaRef.key,\r\n                      trabajadorId: newZona.trabajadorAsignado,\r\n                      timestamp: new Date().toISOString(),\r\n                      leido: false\r\n                    };\r\n\r\n                    const notifRef = ref(database, 'notificaciones');\r\n                    await push(notifRef, notificacionData);\r\n                  }\r\n\r\n                  // Limpiar formulario\r\n                  setNewZona({\r\n                    nombre: '',\r\n                    descripcion: '',\r\n                    direccion: '',\r\n                    lat: null,\r\n                    lng: null,\r\n                    trabajadorAsignado: '',\r\n                    prioridad: 'normal',\r\n                    fechaLimite: '',\r\n                    estado: 'pendiente'\r\n                  });\r\n\r\n                  // Limpiar marcador temporal\r\n                  if (markersRef.current.temp) {\r\n                    markersRef.current.temp.setMap(null);\r\n                    delete markersRef.current.temp;\r\n                  }\r\n\r\n                  setMobileFormView(false);\r\n                  setShowPanel(true);\r\n                  alert('✅ Zona creada exitosamente');\r\n                } catch (error) {\r\n                  console.error('Error al crear zona:', error);\r\n                  alert('❌ Error al crear la zona');\r\n                }\r\n              }}\r\n              style={{\r\n                flex: 1,\r\n                padding: '14px',\r\n                background: '#22c55e',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                fontSize: '16px',\r\n                fontWeight: '600'\r\n              }}\r\n            >\r\n              ✅ Guardar Zona\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => {\r\n                setMobileFormView(false);\r\n                setShowPanel(true);\r\n                setShowZonaForm(false);\r\n                setNewZona({\r\n                  nombre: '',\r\n                  descripcion: '',\r\n                  direccion: '',\r\n                  lat: null,\r\n                  lng: null,\r\n                  trabajadorAsignado: '',\r\n                  prioridad: 'normal',\r\n                  fechaLimite: '',\r\n                  estado: 'pendiente'\r\n                });\r\n                if (markersRef.current.temp) {\r\n                  markersRef.current.temp.setMap(null);\r\n                  delete markersRef.current.temp;\r\n                }\r\n              }}\r\n              style={{\r\n                flex: 1,\r\n                padding: '14px',\r\n                background: '#ef4444',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                fontSize: '16px',\r\n                fontWeight: '600'\r\n              }}\r\n            >\r\n              ❌ Cancelar\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div style={styles.container}>\r\n      {/* Header */}\r\n      <div style={styles.header}>\r\n        <div style={styles.headerContent}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n            {isMobile && (\r\n              <button\r\n                onClick={() => setShowPanel(!showPanel)}\r\n                style={{\r\n                  padding: '6px',\r\n                  background: 'rgba(255,255,255,0.2)',\r\n                  border: 'none',\r\n                  borderRadius: '4px',\r\n                  color: 'white',\r\n                  cursor: 'pointer',\r\n                  fontSize: '20px'\r\n                }}\r\n              >\r\n                ☰\r\n              </button>\r\n            )}\r\n            <h1 style={styles.title}>\r\n              🗺️ Gestión de Zonas\r\n            </h1>\r\n          </div>\r\n\r\n          <div style={styles.navigationButtons}>\r\n            {!isMobile && onViewChange && (\r\n              <>\r\n                {currentUser?.role === 'superadmin' && (\r\n                  <button\r\n                    onClick={() => onViewChange('admin')}\r\n                    style={styles.navButton}\r\n                  >\r\n                    🔐 Panel Admin\r\n                  </button>\r\n                )}\r\n                <button\r\n                  onClick={() => onViewChange('dashboard')}\r\n                  style={styles.navButton}\r\n                >\r\n                  📊 Dashboard GPS\r\n                </button>\r\n                <button\r\n                  onClick={() => onViewChange('fleet')}\r\n                  style={styles.navButton}\r\n                >\r\n                  🚛 Panel Flota\r\n                </button>\r\n              </>\r\n            )}\r\n            <button onClick={onLogout} style={styles.logoutButton}>\r\n              {isMobile ? '🚪' : '🚪 Salir'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Contenido principal */}\r\n      <div style={styles.mainContent}>\r\n        {/* Panel lateral */}\r\n        <div style={styles.panel}>\r\n          {/* Header del panel */}\r\n          <div style={styles.panelHeader}>\r\n            <h2 style={{ margin: '0 0 10px 0', fontSize: isMobile ? '16px' : '18px' }}>\r\n              📍 Crear y Administrar Zonas\r\n            </h2>\r\n            <button\r\n              onClick={startCreatingZona}\r\n              disabled={isCreatingZona}\r\n              style={styles.createButton}\r\n            >\r\n              {isCreatingZona ? '📍 Haz clic en el mapa...' : '➕ Crear Nueva Zona'}\r\n            </button>\r\n          </div>\r\n\r\n          {/* Filtros */}\r\n          <div style={styles.filterContainer}>\r\n            <div style={styles.filterButtons}>\r\n              <button\r\n                onClick={() => setFilterStatus('all')}\r\n                style={{\r\n                  ...styles.filterButton,\r\n                  ...(filterStatus === 'all' ? styles.filterButtonActive : {})\r\n                }}\r\n              >\r\n                Todas\r\n              </button>\r\n              <button\r\n                onClick={() => setFilterStatus('pendiente')}\r\n                style={{\r\n                  ...styles.filterButton,\r\n                  ...(filterStatus === 'pendiente' ? styles.filterButtonActive : {})\r\n                }}\r\n              >\r\n                ⏳ Pendientes\r\n              </button>\r\n              <button\r\n                onClick={() => setFilterStatus('en_progreso')}\r\n                style={{\r\n                  ...styles.filterButton,\r\n                  ...(filterStatus === 'en_progreso' ? styles.filterButtonActive : {})\r\n                }}\r\n              >\r\n                🔧 En Progreso\r\n              </button>\r\n              <button\r\n                onClick={() => setFilterStatus('completado')}\r\n                style={{\r\n                  ...styles.filterButton,\r\n                  ...(filterStatus === 'completado' ? styles.filterButtonActive : {})\r\n                }}\r\n              >\r\n                ✅ Completadas\r\n              </button>\r\n            </div>\r\n\r\n            <button\r\n              onClick={() => setShowCompletedZones(!showCompletedZones)}\r\n              style={styles.toggleCompletedButton}\r\n            >\r\n              {showCompletedZones ? '👁️ Ocultar' : '👁️‍🗨️ Mostrar'} Completadas en Mapa\r\n            </button>\r\n          </div>\r\n\r\n          {/* Formulario de nueva zona - CORREGIDO */}\r\n          {showZonaForm && (\r\n            <div\r\n              style={styles.form}\r\n              onClick={handleFormClick}\r\n              onMouseDown={handleFormClick}\r\n              onTouchStart={handleFormClick}\r\n            >\r\n\r\n              <h3 style={styles.formTitle}>\r\n\r\n                Nueva Zona de Trabajo\r\n\r\n              </h3>\r\n\r\n\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>\r\n                  Nombre de la zona *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={newZona.nombre}\r\n                  onChange={(e) => setNewZona({ ...newZona, nombre: e.target.value })}\r\n                  style={styles.input}\r\n                  placeholder=\"Ej: Reparación Calle Principal\"\r\n                />\r\n              </div>\r\n\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>\r\n                  Descripción\r\n                </label>\r\n                <textarea\r\n                  value={newZona.descripcion}\r\n                  onChange={(e) => setNewZona({ ...newZona, descripcion: e.target.value })}\r\n                  style={styles.textarea}\r\n                  placeholder=\"Detalles del trabajo...\"\r\n                />\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>\r\n                  Dirección\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={newZona.direccion}\r\n                  onChange={(e) => setNewZona({ ...newZona, direccion: e.target.value })}\r\n                  style={styles.input}\r\n                />\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>\r\n                  Asignar a trabajador\r\n                </label>\r\n                <select\r\n                  value={newZona.trabajadorAsignado}\r\n                  onChange={(e) => setNewZona({ ...newZona, trabajadorAsignado: e.target.value })}\r\n                  style={styles.select}\r\n                >\r\n                  <option value=\"\">-- Sin asignar --</option>\r\n                  {trabajadores.map(trabajador => (\r\n                    <option key={trabajador.id} value={trabajador.id}>\r\n                      {trabajador.nombre || trabajador.email}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div style={styles.gridTwoColumns}>\r\n                <div>\r\n                  <label style={styles.label}>\r\n                    Prioridad\r\n                  </label>\r\n                  <select\r\n                    value={newZona.prioridad}\r\n                    onChange={(e) => setNewZona({ ...newZona, prioridad: e.target.value })}\r\n                    style={styles.select}\r\n                  >\r\n                    <option value=\"baja\">🟢 Baja</option>\r\n                    <option value=\"normal\">🟡 Normal</option>\r\n                    <option value=\"alta\">🟠 Alta</option>\r\n                    <option value=\"urgente\">🔴 Urgente</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div>\r\n                  <label style={styles.label}>\r\n                    Fecha límite\r\n                  </label>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={newZona.fechaLimite}\r\n                    onChange={(e) => setNewZona({ ...newZona, fechaLimite: e.target.value })}\r\n                    style={styles.input}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div style={styles.locationInfo}>\r\n                📍 <strong>Ubicación:</strong> {newZona.lat?.toFixed(6)}, {newZona.lng?.toFixed(6)}\r\n              </div>\r\n\r\n              <div style={styles.formButtons}>\r\n                <button\r\n                  onClick={saveZona}\r\n                  style={styles.saveButton}\r\n                >\r\n                  ✅ Guardar Zona\r\n                </button>\r\n                <button\r\n                  onClick={async () => {\r\n                    if (!newZona.nombre || !newZona.lat || !newZona.lng) {\r\n                      alert('Por favor completa todos los campos requeridos');\r\n                      return;\r\n                    }\r\n\r\n                    try {\r\n                      const zonaData = {\r\n                        ...newZona,\r\n                        createdBy: currentUser.uid,\r\n                        createdAt: new Date().toISOString(),\r\n                        ultimaActualizacion: new Date().toISOString()\r\n                      };\r\n\r\n                      const zonasRef = ref(database, 'zonas_asignadas');\r\n                      const newZonaRef = push(zonasRef);\r\n                      await set(newZonaRef, zonaData);\r\n\r\n                      // Si hay un trabajador asignado, notificarle\r\n                      if (newZona.trabajadorAsignado) {\r\n                        const notificacionData = {\r\n                          tipo: 'nueva_zona',\r\n                          mensaje: `Se te ha asignado una nueva zona: ${newZona.nombre}`,\r\n                          zonaId: newZonaRef.key,\r\n                          trabajadorId: newZona.trabajadorAsignado,\r\n                          timestamp: new Date().toISOString(),\r\n                          leido: false\r\n                        };\r\n\r\n                        const notifRef = ref(database, 'notificaciones');\r\n                        await push(notifRef, notificacionData);\r\n                      }\r\n\r\n                      // Guardar temporalmente la ubicación de la nueva zona\r\n                      const newZonaLocation = { lat: newZona.lat, lng: newZona.lng };\r\n\r\n                      // Limpiar formulario\r\n                      setNewZona({\r\n                        nombre: '',\r\n                        descripcion: '',\r\n                        direccion: '',\r\n                        lat: null,\r\n                        lng: null,\r\n                        trabajadorAsignado: '',\r\n                        prioridad: 'normal',\r\n                        fechaLimite: '',\r\n                        estado: 'pendiente'\r\n                      });\r\n\r\n                      // Limpiar marcador temporal\r\n                      if (markersRef.current.temp) {\r\n                        markersRef.current.temp.setMap(null);\r\n                        delete markersRef.current.temp;\r\n                      }\r\n\r\n                      // Cerrar vista móvil del formulario\r\n                      setMobileFormView(false);\r\n\r\n                      // NO mostrar el panel, ir directo al mapa\r\n                      setShowPanel(false);\r\n\r\n                      // Centrar el mapa en la nueva zona después de un pequeño delay\r\n                      setTimeout(() => {\r\n                        if (map && newZonaLocation) {\r\n                          map.setCenter(newZonaLocation);\r\n                          map.setZoom(16);\r\n                        }\r\n                      }, 100);\r\n\r\n                      // Mostrar mensaje de éxito\r\n                      alert('✅ Zona creada exitosamente');\r\n\r\n                    } catch (error) {\r\n                      console.error('Error al crear zona:', error);\r\n                      alert('❌ Error al crear la zona');\r\n                    }\r\n                  }}\r\n                  style={styles.cancelButton}\r\n                >\r\n                  ❌ Cancelar\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Lista de zonas */}\r\n          {/* Lista de zonas */}\r\n          <div style={styles.zonasList}>\r\n            <div style={{\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              alignItems: 'center',\r\n              marginBottom: '15px'\r\n            }}>\r\n              <h3 style={{ ...styles.listHeader, margin: 0 }}>\r\n                📋 Zonas Activas ({filteredZonas.length})\r\n              </h3>\r\n              {isMobile && (\r\n                <button\r\n                  onClick={() => onViewChange('dashboard')}\r\n                  style={{\r\n                    padding: '8px 12px',\r\n                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '6px',\r\n                    fontSize: '12px',\r\n                    fontWeight: '600',\r\n                    cursor: 'pointer',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '5px'\r\n                  }}\r\n                >\r\n                  📊 Ver Mapa\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {filteredZonas.length === 0 ? (\r\n              <div style={styles.emptyState}>\r\n                <p>No hay zonas {filterStatus !== 'all' ? filterStatus.replace('_', ' ') : ''}</p>\r\n                <p style={{ fontSize: isMobile ? '11px' : '12px', marginTop: '8px' }}>\r\n                  Haz clic en \"Crear Nueva Zona\" para comenzar\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div>\r\n                {filteredZonas.map(zona => {\r\n                  const trabajador = trabajadores.find(t => t.id === zona.trabajadorAsignado);\r\n                  return (\r\n                    <div\r\n                      key={zona.id}\r\n                      style={{\r\n                        ...styles.zonaCard,\r\n                        background: selectedZona?.id === zona.id ? '#f0f9ff' : 'white'\r\n                      }}\r\n                      onClick={() => {\r\n                        setSelectedZona(zona);\r\n                        if (map && markersRef.current[zona.id]) {\r\n                          map.panTo({ lat: zona.lat, lng: zona.lng });\r\n                          map.setZoom(16);\r\n                          window.google.maps.event.trigger(markersRef.current[zona.id], 'click');\r\n                        }\r\n                      }}\r\n                    >\r\n                      <div style={styles.zonaHeader}>\r\n                        <div style={{ flex: 1 }}>\r\n                          <h4 style={styles.zonaTitle}>\r\n                            {zona.nombre}\r\n                          </h4>\r\n                          <p style={styles.zonaAddress}>\r\n                            📍 {zona.direccion}\r\n                          </p>\r\n                          <p style={styles.zonaWorker}>\r\n                            👷 {trabajador ? trabajador.nombre : 'Sin asignar'}\r\n                          </p>\r\n                          <div style={styles.zonaTags}>\r\n                            <span style={{\r\n                              ...styles.tag,\r\n                              background: zona.estado === 'completado' ? '#dcfce7' :\r\n                                zona.estado === 'en_progreso' ? '#dbeafe' :\r\n                                  '#fef3c7',\r\n                              color: zona.estado === 'completado' ? '#166534' :\r\n                                zona.estado === 'en_progreso' ? '#1e40af' :\r\n                                  '#92400e'\r\n                            }}>\r\n                              {zona.estado === 'completado' ? '✅ Completado' :\r\n                                zona.estado === 'en_progreso' ? '🔧 En progreso' :\r\n                                  '⏳ Pendiente'}\r\n                            </span>\r\n                            <span style={{\r\n                              ...styles.tag,\r\n                              background: zona.prioridad === 'urgente' ? '#fee2e2' :\r\n                                zona.prioridad === 'alta' ? '#fed7aa' :\r\n                                  zona.prioridad === 'normal' ? '#fef3c7' :\r\n                                    '#dcfce7',\r\n                              color: zona.prioridad === 'urgente' ? '#991b1b' :\r\n                                zona.prioridad === 'alta' ? '#9a3412' :\r\n                                  zona.prioridad === 'normal' ? '#92400e' :\r\n                                    '#166534'\r\n                            }}>\r\n                              {zona.prioridad === 'urgente' ? '🔴 Urgente' :\r\n                                zona.prioridad === 'alta' ? '🟠 Alta' :\r\n                                  zona.prioridad === 'normal' ? '🟡 Normal' :\r\n                                    '🟢 Baja'}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                        <div style={styles.zonaActions}>\r\n                          {zona.estado !== 'completado' && (\r\n                            <select\r\n                              value={zona.estado}\r\n                              onChange={(e) => {\r\n                                e.stopPropagation();\r\n                                updateZonaStatus(zona.id, e.target.value);\r\n                              }}\r\n                              onClick={(e) => e.stopPropagation()}\r\n                              style={styles.actionSelect}\r\n                            >\r\n                              <option value=\"pendiente\">⏳ Pendiente</option>\r\n                              <option value=\"en_progreso\">🔧 En progreso</option>\r\n                              <option value=\"completado\">✅ Completado</option>\r\n                            </select>\r\n                          )}\r\n                          <button\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              deleteZona(zona.id);\r\n                            }}\r\n                            style={styles.deleteButton}\r\n                          >\r\n                            🗑️\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Mapa */}\r\n        <div style={styles.map}>\r\n          <div ref={mapRef} style={{ width: '100%', height: '100%' }} />\r\n\r\n          {/* Botón toggle panel */}\r\n\r\n          <button\r\n            onClick={() => setShowPanel(!showPanel)}\r\n            style={styles.togglePanelButton}\r\n          >\r\n            <span style={{ fontSize: '20px' }}>\r\n              {showPanel ? '◀' : '☰'}\r\n            </span>\r\n          </button>\r\n\r\n\r\n          {!mapLoaded && (\r\n            <div style={{\r\n              position: 'absolute',\r\n              top: '50%',\r\n              left: '50%',\r\n              transform: 'translate(-50%, -50%)',\r\n              textAlign: 'center'\r\n            }}>\r\n              <div style={{\r\n                width: '50px',\r\n                height: '50px',\r\n                border: '4px solid #f3f3f3',\r\n                borderTop: '4px solid #667eea',\r\n                borderRadius: '50%',\r\n                animation: 'spin 1s linear infinite'\r\n              }}></div>\r\n              <p style={{ marginTop: '10px', color: '#666' }}>Cargando mapa...</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navegación inferior móvil */}\r\n      {isMobile && onViewChange && (\r\n        <div style={styles.mobileBottomNav}>\r\n          {currentUser?.role === 'superadmin' && (\r\n            <button\r\n              onClick={() => onViewChange('admin')}\r\n              style={styles.mobileNavButton}\r\n            >\r\n              <span style={{ fontSize: '16px' }}>🔐</span>\r\n              <span>Admin</span>\r\n            </button>\r\n          )}\r\n          <button\r\n            onClick={() => onViewChange('dashboard')}\r\n            style={styles.mobileNavButton}\r\n          >\r\n            <span style={{ fontSize: '16px' }}>📊</span>\r\n            <span>Dashboard</span>\r\n          </button>\r\n          <button\r\n            onClick={() => onViewChange('zones')}\r\n            style={{\r\n              ...styles.mobileNavButton,\r\n              background: '#667eea',\r\n              color: 'white'\r\n            }}\r\n          >\r\n            <span style={{ fontSize: '16px' }}>🗺️</span>\r\n            <span>Zonas</span>\r\n          </button>\r\n          <button\r\n            onClick={() => onViewChange('fleet')}\r\n            style={styles.mobileNavButton}\r\n          >\r\n            <span style={{ fontSize: '16px' }}>🚛</span>\r\n            <span>Flota</span>\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      <style jsx>{`\r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ZonesManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
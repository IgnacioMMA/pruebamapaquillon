{"ast":null,"code":"// src/components/SistemaTrabajadoresFirebase.js\nimport React,{useEffect,useRef,useState}from'react';import{trabajadoresService}from'../services/firebaseservices';import{database}from'../config/firebase';import{ref,onValue,update,set,push}from'firebase/database';import TrabajadorVehiclePanel from'./TrabajadorVehiclePanel';import{cloudinaryConfig}from'../config/cloudinary';// NUEVO IMPORT\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SistemaTrabajadoresFirebase=_ref=>{let{currentUser,onLogout,onViewChange}=_ref;// Estados principales\nconst[showVehiclePanel,setShowVehiclePanel]=useState(false);const mapRef=useRef(null);const[map,setMap]=useState(null);const[userPosition,setUserPosition]=useState(null);const[selectedZona,setSelectedZona]=useState(null);const[isTracking,setIsTracking]=useState(false);const[isNavigating,setIsNavigating]=useState(false);const[workStatus,setWorkStatus]=useState('idle');const[workLog,setWorkLog]=useState({startTime:null,arrivalTime:null,endTime:null,zona:null});// Estados para zonas y notificaciones\nconst[zonasAsignadas,setZonasAsignadas]=useState([]);const[notificaciones,setNotificaciones]=useState([]);const[showPanel,setShowPanel]=useState(true);const[isMobile,setIsMobile]=useState(false);const[showNotifications,setShowNotifications]=useState(false);const[toastNotification,setToastNotification]=useState(null);const[successMessage,setSuccessMessage]=useState(null);// NUEVOS ESTADOS PARA DOCUMENTOS\nconst[showDocumentsModal,setShowDocumentsModal]=useState(false);const[uploadingFile,setUploadingFile]=useState(false);const[uploadProgress,setUploadProgress]=useState({});const[documentos,setDocumentos]=useState({licenciaConducir:{url:'',nombre:'',fecha:'',vencimiento:''},certificadoOperador:{url:'',nombre:'',fecha:'',vencimiento:''},certificados:[]// Array para mÃºltiples certificados\n});const[message,setMessage]=useState({type:'',text:''});// Referencias para marcadores y servicios\nconst userMarkerRef=useRef(null);const zonaMarkerRef=useRef(null);const directionsServiceRef=useRef(null);const directionsRendererRef=useRef(null);const watchIdRef=useRef(null);const lastUpdateRef=useRef(null);const toastTimeoutRef=useRef(null);// Estados de UI\nconst[mapLoaded,setMapLoaded]=useState(false);const[error,setError]=useState(null);const[distance,setDistance]=useState(null);const[duration,setDuration]=useState(null);const[showWorkLog,setShowWorkLog]=useState(false);const[gpsStatus,setGpsStatus]=useState('inactive');const API_KEY='AIzaSyA7DrdL36n5cx-RNzuXGAQggFeGCheHDbY';// ========== NUEVAS FUNCIONES PARA MANEJO DE DOCUMENTOS ==========\nconst handleFileUpload=async(file,tipoDocumento)=>{if(!file)return;// Rechazar PDFs\nif(file.type==='application/pdf'){setMessage({type:'error',text:'âŒ NO se permiten PDFs. Por favor, sube una FOTO o IMAGEN del documento (JPG/PNG).'});alert('ðŸ“¸ ALTERNATIVAS PARA SUBIR TU DOCUMENTO:\\n\\n'+'1. Toma una FOTO con tu celular\\n'+'2. Haz una CAPTURA DE PANTALLA del PDF\\n'+'3. Usa un escÃ¡ner que guarde como JPG\\n'+'4. Convierte el PDF a imagen en: https://www.ilovepdf.com/pdf_to_jpg');return;}// Solo aceptar imÃ¡genes\nconst allowedTypes=['image/jpeg','image/png','image/jpg'];if(!allowedTypes.includes(file.type)){setMessage({type:'error',text:'âŒ Solo se permiten imÃ¡genes JPG y PNG'});return;}// Validar tamaÃ±o\nif(file.size>10*1024*1024){setMessage({type:'error',text:'âŒ El archivo no puede superar los 10MB'});return;}setUploadingFile(true);setUploadProgress({[tipoDocumento]:0});try{const formData=new FormData();formData.append('file',file);formData.append('upload_preset','vehiculos_docs');// Usar el mismo preset\nconst trabajadorId=currentUser.uid||`temp_${Date.now()}`;const timestamp=Date.now();const cleanFileName=file.name.split('.')[0].replace(/[^a-zA-Z0-9_-]/g,'_');formData.append('folder',`municipalidad/trabajadores/${trabajadorId}/${tipoDocumento}`);formData.append('public_id',`${timestamp}_${cleanFileName}`);setUploadProgress({[tipoDocumento]:30});const response=await fetch(`https://api.cloudinary.com/v1_1/${cloudinaryConfig.cloudName}/image/upload`,{method:'POST',body:formData});setUploadProgress({[tipoDocumento]:60});const data=await response.json();console.log('âœ… Imagen subida:',data);setUploadProgress({[tipoDocumento]:90});const documentData={url:data.secure_url,publicId:data.public_id,nombre:file.name,fecha:new Date().toISOString(),tamaÃ±o:file.size,tipo:file.type};// Actualizar estado segÃºn tipo de documento\nif(tipoDocumento==='certificados'){setDocumentos(prev=>({...prev,certificados:[...(prev.certificados||[]),documentData]}));}else{setDocumentos(prev=>({...prev,[tipoDocumento]:documentData}));}// Guardar en Firebase\nawait guardarDocumentosEnFirebase(tipoDocumento,documentData);setUploadProgress({[tipoDocumento]:100});setMessage({type:'success',text:`âœ… ${file.name} subido exitosamente`});showToast('âœ… Documento subido exitosamente','success');setTimeout(()=>setUploadProgress({}),1000);}catch(error){console.error('Error:',error);setMessage({type:'error',text:'âŒ Error al subir la imagen'});showToast('âŒ Error al subir el documento','error');}finally{setUploadingFile(false);}};const handleDeleteDocument=async function(tipoDocumento){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!window.confirm('Â¿EstÃ¡s seguro de eliminar este documento?'))return;try{if(tipoDocumento==='certificados'&&index!==null){// Eliminar del array de certificados\nsetDocumentos(prev=>({...prev,certificados:prev.certificados.filter((_,i)=>i!==index)}));}else{// Limpiar documento especÃ­fico\nsetDocumentos(prev=>({...prev,[tipoDocumento]:{url:'',nombre:'',fecha:'',vencimiento:''}}));}// Actualizar en Firebase\nawait eliminarDocumentoDeFirebase(tipoDocumento,index);setMessage({type:'success',text:'âœ… Documento eliminado'});showToast('âœ… Documento eliminado','success');}catch(error){console.error('Error al eliminar documento:',error);setMessage({type:'error',text:'âŒ Error al eliminar el documento'});}};const guardarDocumentosEnFirebase=async(tipoDocumento,documentData)=>{try{const trabajadorRef=ref(database,`trabajadores/${currentUser.uid}/documentos/${tipoDocumento}`);if(tipoDocumento==='certificados'){// Para certificados, usar push para crear una lista\nconst certificadosRef=ref(database,`trabajadores/${currentUser.uid}/documentos/certificados`);const newCertRef=push(certificadosRef);await set(newCertRef,documentData);}else{// Para licencia y certificado de operador, sobrescribir\nawait set(trabajadorRef,documentData);}console.log('âœ… Documento guardado en Firebase');}catch(error){console.error('âŒ Error al guardar en Firebase:',error);}};const eliminarDocumentoDeFirebase=async(tipoDocumento,index)=>{try{if(tipoDocumento==='certificados'&&index!==null){// Para certificados, necesitamos el ID especÃ­fico\nconst certificadosRef=ref(database,`trabajadores/${currentUser.uid}/documentos/certificados`);await set(certificadosRef,documentos.certificados.filter((_,i)=>i!==index));}else{const trabajadorRef=ref(database,`trabajadores/${currentUser.uid}/documentos/${tipoDocumento}`);await set(trabajadorRef,null);}console.log('âœ… Documento eliminado de Firebase');}catch(error){console.error('âŒ Error al eliminar de Firebase:',error);}};const formatFileSize=bytes=>{if(bytes===0)return'0 Bytes';const k=1024;const sizes=['Bytes','KB','MB','GB'];const i=Math.floor(Math.log(bytes)/Math.log(k));return Math.round(bytes/Math.pow(k,i)*100)/100+' '+sizes[i];};const cargarDocumentosDesdeFirebase=async()=>{try{const docsRef=ref(database,`trabajadores/${currentUser.uid}/documentos`);onValue(docsRef,snapshot=>{const data=snapshot.val();if(data){setDocumentos({licenciaConducir:data.licenciaConducir||{url:'',nombre:'',fecha:'',vencimiento:''},certificadoOperador:data.certificadoOperador||{url:'',nombre:'',fecha:'',vencimiento:''},certificados:data.certificados?Object.values(data.certificados):[]});}});}catch(error){console.error('Error al cargar documentos:',error);}};// Cargar documentos al iniciar\nuseEffect(()=>{if(currentUser&&currentUser.uid){cargarDocumentosDesdeFirebase();}},[currentUser]);// FunciÃ³n para navegar al dashboard\nconst navigateToDashboard=()=>{if(onViewChange){onViewChange('dashboard-trabajador');}};// FunciÃ³n para mostrar notificaciones tipo toast\nconst showToast=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';let duration=arguments.length>2&&arguments[2]!==undefined?arguments[2]:4000;if(toastTimeoutRef.current){clearTimeout(toastTimeoutRef.current);}setToastNotification({message,type});toastTimeoutRef.current=setTimeout(()=>{setToastNotification(null);},duration);};// FunciÃ³n para mostrar mensaje de Ã©xito\nconst showSuccess=function(title,message){let duration=arguments.length>2&&arguments[2]!==undefined?arguments[2]:3000;setSuccessMessage({title,message});setTimeout(()=>{setSuccessMessage(null);},duration);};// Detectar si es mÃ³vil\nuseEffect(()=>{const checkMobile=()=>{setIsMobile(window.innerWidth<=768);};checkMobile();window.addEventListener('resize',checkMobile);return()=>window.removeEventListener('resize',checkMobile);},[]);// Cargar zonas asignadas desde Firebase\nuseEffect(()=>{if(currentUser&&currentUser.uid){console.log('ðŸ”„ Cargando zonas asignadas para trabajador:',currentUser.uid);// Escuchar zonas asignadas al trabajador\nconst zonasRef=ref(database,'zonas_asignadas');const unsubZonas=onValue(zonasRef,snapshot=>{const data=snapshot.val();console.log('ðŸ“¦ Datos de zonas recibidos:',data);if(data){const zonasArray=Object.entries(data).filter(_ref2=>{let[id,zona]=_ref2;console.log(`Zona ${id}: asignada a ${zona.trabajadorAsignado}, yo soy ${currentUser.uid}`);return zona.trabajadorAsignado===currentUser.uid&&zona.estado!=='completado';}).map(_ref3=>{let[id,zona]=_ref3;return{id,...zona};});console.log('âœ… Zonas asignadas filtradas:',zonasArray);// Mostrar notificaciÃ³n si hay nuevas zonas\nif(zonasArray.length>zonasAsignadas.length){showToast('ðŸ“ Nueva zona asignada','success');}setZonasAsignadas(zonasArray);}else{console.log('âš ï¸ No hay zonas en Firebase');setZonasAsignadas([]);}});// Escuchar notificaciones\nconst notifRef=ref(database,'notificaciones');const unsubNotif=onValue(notifRef,snapshot=>{const data=snapshot.val();if(data){const notifArray=Object.entries(data).filter(_ref4=>{let[id,notif]=_ref4;return notif.trabajadorId===currentUser.uid&&!notif.leido;}).map(_ref5=>{let[id,notif]=_ref5;return{id,...notif};}).sort((a,b)=>new Date(b.timestamp)-new Date(a.timestamp));// Mostrar toast para nuevas notificaciones\nif(notifArray.length>notificaciones.length){const newNotif=notifArray[0];showToast(newNotif.mensaje,'info');}setNotificaciones(notifArray);}});return()=>{unsubZonas();unsubNotif();};}},[currentUser,zonasAsignadas.length,notificaciones.length]);// Registrar trabajador al montar el componente\nuseEffect(()=>{if(currentUser&&currentUser.uid){console.log('ðŸ”„ Registrando trabajador al iniciar...');trabajadoresService.createOrUpdateTrabajador(currentUser.uid,{nombre:currentUser.name||currentUser.email||'Trabajador',email:currentUser.email,telefono:currentUser.phone||'',vehicleId:currentUser.vehicleId||null,estado:'inactivo',rol:'trabajador',ubicacion:null,createdAt:new Date().toISOString(),ultimaActualizacion:new Date().toISOString()}).then(()=>{console.log('âœ… Trabajador registrado en Realtime Database al iniciar');}).catch(error=>{console.error('âŒ Error al registrar trabajador al iniciar:',error);});}},[currentUser]);// FunciÃ³n para cargar Google Maps\nuseEffect(()=>{const loadGoogleMaps=()=>{return new Promise((resolve,reject)=>{if(window.google&&window.google.maps){resolve(window.google.maps);return;}const existingScript=document.querySelector('script[src*=\"maps.googleapis.com\"]');if(existingScript){existingScript.addEventListener('load',()=>{if(window.google&&window.google.maps){resolve(window.google.maps);}else{reject(new Error('Google Maps no disponible'));}});return;}const script=document.createElement('script');script.src=`https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry&v=weekly`;script.async=true;script.defer=true;script.onload=()=>{if(window.google&&window.google.maps){resolve(window.google.maps);}else{reject(new Error('Google Maps no disponible'));}};script.onerror=()=>{reject(new Error('Error al cargar Google Maps'));};document.head.appendChild(script);});};const initMap=async()=>{try{const maps=await loadGoogleMaps();if(!mapRef.current)return;const mapInstance=new maps.Map(mapRef.current,{center:{lat:-36.7333,lng:-72.4667},zoom:13,mapTypeId:'roadmap',zoomControl:!isMobile,mapTypeControl:false,scaleControl:false,streetViewControl:false,rotateControl:false,fullscreenControl:true,gestureHandling:'greedy'});setMap(mapInstance);// Inicializar servicios de direcciones\ndirectionsServiceRef.current=new maps.DirectionsService();directionsRendererRef.current=new maps.DirectionsRenderer({map:mapInstance,suppressMarkers:false,polylineOptions:{strokeColor:'#4285F4',strokeWeight:6,strokeOpacity:0.8},preserveViewport:false});setMapLoaded(true);}catch(err){setError('Error al cargar el mapa: '+err.message);}};initMap();},[isMobile]);// Actualizar posiciÃ³n del usuario\nconst updateUserPosition=position=>{console.log('ðŸ”„ Actualizando posiciÃ³n:',position);setUserPosition(position);const ahora=Date.now();if(!lastUpdateRef.current||ahora-lastUpdateRef.current>5000){console.log('ðŸ“ Enviando ubicaciÃ³n a Firebase:',position);if(currentUser&&currentUser.uid){trabajadoresService.updateTrabajadorLocation(currentUser.uid,{lat:position.lat,lng:position.lng,timestamp:new Date().toISOString(),accuracy:position.accuracy||null}).then(()=>{console.log('âœ… UbicaciÃ³n enviada a Firebase exitosamente');}).catch(error=>{console.error('âŒ Error al enviar ubicaciÃ³n a Firebase:',error);});const estadoActual=workStatus==='traveling'?'en_camino':workStatus==='working'?'trabajando':'disponible';trabajadoresService.updateTrabajadorData(currentUser.uid,{nombre:currentUser.name||currentUser.email,email:currentUser.email,estado:estadoActual,zonaDestino:selectedZona?selectedZona.nombre:null,ultimaActualizacion:new Date().toISOString()});lastUpdateRef.current=ahora;}}if(!map||!window.google)return;if(!userMarkerRef.current){userMarkerRef.current=new window.google.maps.Marker({position:position,map:map,title:'Tu ubicaciÃ³n',icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:'#4285F4',fillOpacity:1,strokeColor:'#ffffff',strokeWeight:3},zIndex:1000});map.setCenter(position);map.setZoom(15);}else{userMarkerRef.current.setPosition(position);}if(isNavigating&&selectedZona){const distance=window.google.maps.geometry.spherical.computeDistanceBetween(new window.google.maps.LatLng(position.lat,position.lng),new window.google.maps.LatLng(selectedZona.lat,selectedZona.lng));console.log('ðŸ“ Distancia a la zona:',Math.round(distance),'metros');}};// FunciÃ³n para activar/desactivar GPS\nconst toggleGPS=()=>{if(isTracking){if(watchIdRef.current){navigator.geolocation.clearWatch(watchIdRef.current);watchIdRef.current=null;}setIsTracking(false);setGpsStatus('inactive');if(userMarkerRef.current){userMarkerRef.current.setMap(null);userMarkerRef.current=null;}showToast('ðŸ“ GPS desactivado','warning');if(currentUser&&currentUser.uid){trabajadoresService.updateTrabajadorData(currentUser.uid,{estado:'inactivo',ultimaActualizacion:new Date().toISOString()});}}else{if(!navigator.geolocation){showToast('âŒ Tu navegador no soporta geolocalizaciÃ³n','error');setGpsStatus('error');return;}console.log('ðŸ”„ Iniciando GPS...');setIsTracking(true);setGpsStatus('activating');showToast('ðŸ”„ Activando GPS...','info');navigator.geolocation.getCurrentPosition(position=>{const pos={lat:position.coords.latitude,lng:position.coords.longitude,accuracy:position.coords.accuracy};updateUserPosition(pos);setGpsStatus('active');showToast('âœ… GPS activado correctamente','success');},error=>{console.warn('âš ï¸ Error al obtener ubicaciÃ³n:',error.message);if(error.code===error.PERMISSION_DENIED){showToast('âŒ Permisos de ubicaciÃ³n denegados','error');setIsTracking(false);setGpsStatus('error');return;}},{enableHighAccuracy:true,timeout:15000,maximumAge:0});const gpsWatchId=navigator.geolocation.watchPosition(position=>{if(position.coords.accuracy<=150){const pos={lat:position.coords.latitude,lng:position.coords.longitude,accuracy:position.coords.accuracy};updateUserPosition(pos);setGpsStatus('active');}},error=>{console.log('â±ï¸ Esperando seÃ±al GPS...',error.message);},{enableHighAccuracy:true,timeout:30000,maximumAge:0,distanceFilter:5});watchIdRef.current=gpsWatchId;}};// Seleccionar zona de trabajo\nconst selectZona=zona=>{setSelectedZona(zona);showToast(`ðŸ“ Zona seleccionada: ${zona.nombre}`,'info');if(!map||!window.google)return;if(zonaMarkerRef.current){zonaMarkerRef.current.setMap(null);}zonaMarkerRef.current=new window.google.maps.Marker({position:{lat:zona.lat,lng:zona.lng},map:map,title:zona.nombre,icon:{path:window.google.maps.SymbolPath.BACKWARD_CLOSED_ARROW,scale:8,fillColor:'#22c55e',fillOpacity:1,strokeColor:'#ffffff',strokeWeight:2}});if(userPosition){const bounds=new window.google.maps.LatLngBounds();bounds.extend(userPosition);bounds.extend({lat:zona.lat,lng:zona.lng});map.fitBounds(bounds,100);}else{map.setCenter({lat:zona.lat,lng:zona.lng});map.setZoom(15);}};// Iniciar navegaciÃ³n\nconst startNavigation=async()=>{if(!selectedZona||!userPosition){showToast('âš ï¸ Activa el GPS y selecciona una zona primero','warning');return;}setIsNavigating(true);setWorkStatus('traveling');setWorkLog({...workLog,startTime:new Date().toISOString(),zona:selectedZona});showToast('ðŸš— Iniciando recorrido...','success');try{await trabajadoresService.updateTrabajadorData(currentUser.uid,{estado:'en_camino',zonaDestino:selectedZona.nombre,recorridoInicio:new Date().toISOString()});if(selectedZona.id){await update(ref(database,`zonas_asignadas/${selectedZona.id}`),{estado:'en_progreso',ultimaActualizacion:new Date().toISOString()});}console.log('âœ… Estado actualizado a \"en_camino\" en Firebase');}catch(error){console.error('Error al actualizar estado en Firebase:',error);}const request={origin:new window.google.maps.LatLng(userPosition.lat,userPosition.lng),destination:new window.google.maps.LatLng(selectedZona.lat,selectedZona.lng),travelMode:window.google.maps.TravelMode.DRIVING,unitSystem:window.google.maps.UnitSystem.METRIC,region:'CL'};directionsServiceRef.current.route(request,(result,status)=>{if(status==='OK'){directionsRendererRef.current.setDirections(result);const route=result.routes[0];const leg=route.legs[0];setDistance(leg.distance.text);setDuration(leg.duration.text);}else{mostrarLineaDirecta();}});};// FunciÃ³n auxiliar para mostrar lÃ­nea directa\nconst mostrarLineaDirecta=()=>{if(!window.google||!map||!userPosition||!selectedZona)return;const distanceInMeters=window.google.maps.geometry.spherical.computeDistanceBetween(new window.google.maps.LatLng(userPosition.lat,userPosition.lng),new window.google.maps.LatLng(selectedZona.lat,selectedZona.lng));const distanceInKm=(distanceInMeters/1000).toFixed(2);setDistance(`~${distanceInKm} km`);setDuration('Calculando...');showToast('ðŸ“ Mostrando ruta directa','info');};// Manejar llegada a la zona\nconst handleArrival=async()=>{setWorkStatus('working');const arrivalTime=new Date().toISOString();setWorkLog({...workLog,arrivalTime:arrivalTime});showToast('âœ… Has llegado a la zona de trabajo','success');try{await trabajadoresService.updateTrabajadorData(currentUser.uid,{estado:'trabajando',horaLlegada:arrivalTime});}catch(error){console.error('Error al registrar llegada:',error);}if(directionsRendererRef.current){directionsRendererRef.current.setDirections({routes:[]});}};// Finalizar trabajo\nconst finishWork=async()=>{const endTime=new Date().toISOString();const tiempoTrabajado=workLog.arrivalTime?Math.floor((new Date(endTime)-new Date(workLog.arrivalTime))/60000):0;const finalLog={...workLog,endTime:endTime,tiempoTrabajadoMinutos:tiempoTrabajado};setWorkLog(finalLog);setWorkStatus('completed');setIsNavigating(false);if(directionsRendererRef.current){directionsRendererRef.current.setDirections({routes:[]});}try{await trabajadoresService.updateTrabajadorData(currentUser.uid,{estado:'disponible',zonaDestino:null});if(selectedZona.id){await update(ref(database,`zonas_asignadas/${selectedZona.id}`),{estado:'completado',fechaCompletado:endTime,tiempoTrabajadoMinutos:tiempoTrabajado,completadoPor:currentUser.uid,ultimaActualizacion:new Date().toISOString()});}// Mostrar mensaje de Ã©xito personalizado\nshowSuccess('Â¡Excelente trabajo!','La tarea ha sido marcada como completada.');// Mostrar resumen despuÃ©s de un delay\nsetTimeout(()=>{setShowWorkLog(true);},500);}catch(error){console.error('Error al registrar finalizaciÃ³n:',error);showToast('âš ï¸ Error al guardar. Intenta nuevamente.','error');}};// Cancelar navegaciÃ³n\nconst cancelNavigation=async()=>{setIsNavigating(false);setWorkStatus('idle');setDistance(null);setDuration(null);if(directionsRendererRef.current){directionsRendererRef.current.setDirections({routes:[]});}showToast('âŒ Recorrido cancelado','warning');try{await trabajadoresService.updateTrabajadorData(currentUser.uid,{estado:'disponible',zonaDestino:null});if(selectedZona&&selectedZona.id&&workStatus!=='idle'){await update(ref(database,`zonas_asignadas/${selectedZona.id}`),{estado:'pendiente',ultimaActualizacion:new Date().toISOString()});}}catch(error){console.error('Error al cancelar recorrido:',error);}};// Resetear para nuevo trabajo\nconst resetWork=()=>{setSelectedZona(null);setWorkStatus('idle');setWorkLog({startTime:null,arrivalTime:null,endTime:null,zona:null});setIsNavigating(false);setDistance(null);setDuration(null);setShowWorkLog(false);if(zonaMarkerRef.current){zonaMarkerRef.current.setMap(null);zonaMarkerRef.current=null;}if(directionsRendererRef.current){directionsRendererRef.current.setDirections({routes:[]});}showToast('ðŸ”„ Listo para un nuevo trabajo','info');};// Marcar notificaciÃ³n como leÃ­da\nconst markNotificationAsRead=async notifId=>{try{const notifRef=ref(database,`notificaciones/${notifId}`);await update(notifRef,{leido:true,fechaLeido:new Date().toISOString()});}catch(error){console.error('Error al marcar notificaciÃ³n:',error);}};// Limpiar todas las notificaciones\nconst clearAllNotifications=async()=>{try{const updates={};notificaciones.forEach(notif=>{updates[`notificaciones/${notif.id}/leido`]=true;updates[`notificaciones/${notif.id}/fechaLeido`]=new Date().toISOString();});await update(ref(database),updates);setShowNotifications(false);showToast('âœ… Notificaciones limpiadas','success');}catch(error){console.error('Error al limpiar notificaciones:',error);}};// Formatear tiempo\nconst formatTime=isoString=>{if(!isoString)return'--:--';const date=new Date(isoString);return date.toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit',hour12:false});};// Calcular duraciÃ³n\nconst calculateDuration=(start,end)=>{if(!start||!end)return'--';const diff=new Date(end)-new Date(start);const hours=Math.floor(diff/3600000);const minutes=Math.floor(diff%3600000/60000);return`${hours}h ${minutes}m`;};// Limpiar al desmontar\nuseEffect(()=>{return()=>{if(watchIdRef.current){navigator.geolocation.clearWatch(watchIdRef.current);}if(toastTimeoutRef.current){clearTimeout(toastTimeoutRef.current);}};},[]);// ========== MODAL DE DOCUMENTOS ==========\nconst DocumentosModal=()=>{var _documentos$licenciaC,_documentos$licenciaC2,_documentos$licenciaC3,_documentos$certifica,_documentos$certifica2,_documentos$certifica3,_documentos$certifica4;if(!showDocumentsModal)return null;return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:3000,padding:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',maxWidth:'900px',width:'100%',maxHeight:'90vh',overflow:'auto',padding:'30px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'25px'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,color:'#1f2937',fontSize:'24px'},children:\"\\uD83D\\uDCC4 Mis Documentos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDocumentsModal(false),style:{padding:'8px',background:'#6b7280',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'18px'},children:\"\\u2716\"})]}),message.text&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'12px',borderRadius:'8px',marginBottom:'20px',background:message.type==='success'?'#dcfce7':'#fee2e2',border:`1px solid ${message.type==='success'?'#86efac':'#fecaca'}`,color:message.type==='success'?'#166534':'#991b1b'},children:message.text}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'15px',background:'#fef3c7',border:'2px solid #f59e0b',borderRadius:'8px',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 10px 0',color:'#92400e',fontSize:'16px'},children:\"\\uD83D\\uDCF8 IMPORTANTE: Solo se aceptan IM\\xC1GENES\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 0 10px 0',fontSize:'14px',color:'#78350f'},children:\"Los archivos PDF no est\\xE1n soportados. Si tienes documentos en PDF:\"}),/*#__PURE__*/_jsxs(\"ol\",{style:{margin:'0',paddingLeft:'20px',fontSize:'14px',color:'#78350f'},children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"\\uD83D\\uDCF1 Toma una \",/*#__PURE__*/_jsx(\"strong\",{children:\"FOTO\"}),\" del documento con tu celular\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\uD83D\\uDCBB Haz una \",/*#__PURE__*/_jsx(\"strong\",{children:\"CAPTURA DE PANTALLA\"}),\" del PDF\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\uD83D\\uDD04 Convierte el PDF a JPG en: \",/*#__PURE__*/_jsx(\"a\",{href:\"https://www.ilovepdf.com/pdf_to_jpg\",target:\"_blank\",rel:\"noopener noreferrer\",style:{color:'#f59e0b'},children:\"iLovePDF.com\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fit, minmax(280px, 1fr))',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'8px',padding:'15px',background:(_documentos$licenciaC=documentos.licenciaConducir)!==null&&_documentos$licenciaC!==void 0&&_documentos$licenciaC.url?'#f0fdf4':'white'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:0,fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"\\uD83D\\uDE97 Licencia de Conducir\"}),((_documentos$licenciaC2=documentos.licenciaConducir)===null||_documentos$licenciaC2===void 0?void 0:_documentos$licenciaC2.url)&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'10px',padding:'2px 6px',background:'#22c55e',color:'white',borderRadius:'4px'},children:\"\\u2713 Cargado\"})]}),(_documentos$licenciaC3=documentos.licenciaConducir)!==null&&_documentos$licenciaC3!==void 0&&_documentos$licenciaC3.url?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px',background:'#f9fafb',borderRadius:'6px',marginBottom:'8px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',color:'#1f2937',marginBottom:'3px',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:documentos.licenciaConducir.nombre}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'11px'},children:new Date(documentos.licenciaConducir.fecha).toLocaleDateString('es-CL')})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"a\",{href:documentos.licenciaConducir.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{flex:1,padding:'6px',background:'#3b82f6',color:'white',textAlign:'center',borderRadius:'6px',textDecoration:'none',fontSize:'12px'},children:\"\\uD83D\\uDC41\\uFE0F Ver\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleDeleteDocument('licenciaConducir'),style:{flex:1,padding:'6px',background:'#ef4444',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'12px'},children:\"\\uD83D\\uDDD1\\uFE0F Eliminar\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"licenciaConducir\",accept:\".jpg,.jpeg,.png\",onChange:e=>handleFileUpload(e.target.files[0],'licenciaConducir'),style:{display:'none'}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"licenciaConducir\",style:{display:'block',padding:'20px 10px',background:'#f9fafb',border:'2px dashed #d1d5db',borderRadius:'6px',textAlign:'center',cursor:'pointer',fontSize:'12px',color:'#6b7280',transition:'all 0.2s'},onMouseEnter:e=>{e.currentTarget.style.borderColor='#3b82f6';e.currentTarget.style.background='#eff6ff';},onMouseLeave:e=>{e.currentTarget.style.borderColor='#d1d5db';e.currentTarget.style.background='#f9fafb';},children:uploadProgress.licenciaConducir?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'5px'},children:[\"Subiendo... \",uploadProgress.licenciaConducir,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'4px',background:'#e5e7eb',borderRadius:'2px',overflow:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{width:`${uploadProgress.licenciaConducir}%`,height:'100%',background:'#3b82f6',transition:'width 0.3s'}})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'20px',marginBottom:'5px'},children:\"\\uD83D\\uDCE4\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Click para subir\"})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'8px',padding:'15px',background:(_documentos$certifica=documentos.certificadoOperador)!==null&&_documentos$certifica!==void 0&&_documentos$certifica.url?'#f0fdf4':'white'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:0,fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"\\uD83C\\uDFD7\\uFE0F Certificado de Operador\"}),((_documentos$certifica2=documentos.certificadoOperador)===null||_documentos$certifica2===void 0?void 0:_documentos$certifica2.url)&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'10px',padding:'2px 6px',background:'#22c55e',color:'white',borderRadius:'4px'},children:\"\\u2713 Cargado\"})]}),(_documentos$certifica3=documentos.certificadoOperador)!==null&&_documentos$certifica3!==void 0&&_documentos$certifica3.url?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px',background:'#f9fafb',borderRadius:'6px',marginBottom:'8px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',color:'#1f2937',marginBottom:'3px',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:documentos.certificadoOperador.nombre}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'11px'},children:new Date(documentos.certificadoOperador.fecha).toLocaleDateString('es-CL')})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"a\",{href:documentos.certificadoOperador.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{flex:1,padding:'6px',background:'#3b82f6',color:'white',textAlign:'center',borderRadius:'6px',textDecoration:'none',fontSize:'12px'},children:\"\\uD83D\\uDC41\\uFE0F Ver\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleDeleteDocument('certificadoOperador'),style:{flex:1,padding:'6px',background:'#ef4444',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'12px'},children:\"\\uD83D\\uDDD1\\uFE0F Eliminar\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"certificadoOperador\",accept:\".jpg,.jpeg,.png\",onChange:e=>handleFileUpload(e.target.files[0],'certificadoOperador'),style:{display:'none'}}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"certificadoOperador\",style:{display:'block',padding:'20px 10px',background:'#f9fafb',border:'2px dashed #d1d5db',borderRadius:'6px',textAlign:'center',cursor:'pointer',fontSize:'12px',color:'#6b7280',transition:'all 0.2s'},onMouseEnter:e=>{e.currentTarget.style.borderColor='#3b82f6';e.currentTarget.style.background='#eff6ff';},onMouseLeave:e=>{e.currentTarget.style.borderColor='#d1d5db';e.currentTarget.style.background='#f9fafb';},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'20px',marginBottom:'5px'},children:\"\\uD83D\\uDCE4\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Click para subir\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'30px',padding:'20px',background:'#f9fafb',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 15px 0',fontSize:'16px',fontWeight:'600',color:'#374151'},children:\"\\uD83D\\uDCDA Certificados de Capacitaci\\xF3n\"}),((_documentos$certifica4=documentos.certificados)===null||_documentos$certifica4===void 0?void 0:_documentos$certifica4.length)>0&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'15px'},children:documentos.certificados.map((cert,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px',background:'white',borderRadius:'6px',marginBottom:'8px',display:'flex',justifyContent:'space-between',alignItems:'center',border:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,minWidth:0},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'500',fontSize:'13px',color:'#1f2937',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:[\"\\uD83D\\uDCDC \",cert.nombre]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#6b7280',fontSize:'11px',marginTop:'2px'},children:[formatFileSize(cert.tamaÃ±o),\" \\u2022 \",new Date(cert.fecha).toLocaleDateString('es-CL')]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'6px',marginLeft:'10px'},children:[/*#__PURE__*/_jsx(\"a\",{href:cert.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{padding:'4px 8px',background:'#3b82f6',color:'white',borderRadius:'4px',textDecoration:'none',fontSize:'11px'},children:\"Ver\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleDeleteDocument('certificados',index),style:{padding:'4px 8px',background:'#ef4444',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'11px'},children:\"Eliminar\"})]})]},index))}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"certificados\",accept:\".jpg,.jpeg,.png\",onChange:e=>handleFileUpload(e.target.files[0],'certificados'),style:{display:'none'},disabled:uploadingFile}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"certificados\",style:{display:'inline-block',padding:'10px 16px',background:uploadingFile?'#9ca3af':'#10b981',color:'white',borderRadius:'6px',cursor:uploadingFile?'not-allowed':'pointer',fontSize:'14px',fontWeight:'500'},children:uploadingFile?'â³ Subiendo...':'âž• Agregar Certificado'})]})]})]})});};// Estilos mejorados\nconst styles={container:{width:'100%',height:'100vh',position:'relative',overflow:'hidden',background:'#f8fafc'},header:{position:'fixed',top:0,left:0,right:0,background:'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',color:'white',padding:isMobile?'12px 16px':'16px 24px',zIndex:1002,boxShadow:'0 4px 20px rgba(0,0,0,0.15)',backdropFilter:'blur(10px)'},headerContent:{display:'flex',justifyContent:'space-between',alignItems:'center',width:'100%'},headerLeft:{display:'flex',alignItems:'center',gap:'12px',flex:1},headerInfo:{display:'flex',flexDirection:'column'},headerTitle:{margin:0,fontSize:isMobile?'18px':'20px',fontWeight:'700',letterSpacing:'-0.5px'},headerActions:{display:'flex',gap:'8px',alignItems:'center'},togglePanelBtn:{padding:'8px',background:'rgba(255,255,255,0.2)',backdropFilter:'blur(10px)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'8px',cursor:'pointer',fontSize:'20px',transition:'all 0.3s ease',transform:showPanel?'rotate(0deg)':'rotate(180deg)'},dashboardBtn:{padding:'8px 14px',background:'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'600',display:'flex',alignItems:'center',gap:'6px',transition:'all 0.3s ease'},vehicleBtn:{padding:'8px 14px',background:'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'600',display:'flex',alignItems:'center',gap:'6px',transition:'all 0.3s ease'},documentsBtn:{padding:'8px 14px',background:'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'600',display:'flex',alignItems:'center',gap:'6px',transition:'all 0.3s ease'},notificationBtn:{padding:'8px',background:'rgba(255,255,255,0.2)',backdropFilter:'blur(10px)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'8px',cursor:'pointer',fontSize:'16px',position:'relative',transition:'all 0.3s ease'},notificationBadge:{position:'absolute',top:'-4px',right:'-4px',background:'#ef4444',color:'white',borderRadius:'50%',width:'18px',height:'18px',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'10px',fontWeight:'bold',animation:'pulse 2s infinite'},logoutBtn:{padding:'8px 14px',background:'rgba(255,255,255,0.2)',backdropFilter:'blur(10px)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'600'},gpsIndicator:{display:'inline-flex',alignItems:'center',gap:'6px',marginTop:'4px',padding:'2px 8px',background:'rgba(255,255,255,0.2)',borderRadius:'12px',fontSize:'12px'},gpsActiveDot:{width:'6px',height:'6px',background:'#4ade80',borderRadius:'50%',animation:'pulse 2s infinite'},mainContent:{position:'relative',width:'100%',height:'100vh',paddingTop:isMobile?'64px':'72px'},panel:{position:'fixed',top:isMobile?'64px':'72px',left:showPanel?'0':'-100%',width:isMobile?'100%':'420px',maxWidth:'100%',height:`calc(100vh - ${isMobile?'64px':'72px'})`,background:'linear-gradient(180deg, #ffffff 0%, #f8fafc 100%)',boxShadow:'4px 0 20px rgba(0,0,0,0.1)',overflowY:'auto',overflowX:'hidden',transition:'left 0.4s cubic-bezier(0.4, 0, 0.2, 1)',zIndex:1001,borderRight:'1px solid rgba(0,0,0,0.05)'},panelContent:{padding:isMobile?'16px':'20px'},gpsButton:{width:'100%',padding:isMobile?'14px':'13px',fontSize:isMobile?'15px':'14px',border:'none',borderRadius:'10px',fontWeight:'600',cursor:'pointer',marginBottom:'12px',transition:'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',boxShadow:'0 2px 8px rgba(0,0,0,0.1)',position:'relative',overflow:'hidden',background:isTracking?'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)':'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',color:'white'},map:{width:'100%',height:'100%',position:'absolute',top:0,left:0},card:{background:'white',borderRadius:'12px',padding:isMobile?'14px':'16px',marginBottom:'16px',boxShadow:'0 2px 12px rgba(0,0,0,0.06)',border:'1px solid rgba(0,0,0,0.04)',transition:'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)'},toast:{position:'fixed',top:'80px',right:'20px',padding:'12px 20px',borderRadius:'10px',boxShadow:'0 4px 20px rgba(0,0,0,0.15)',display:'flex',alignItems:'center',gap:'12px',zIndex:2000,animation:'slideInRight 0.3s ease',maxWidth:'350px',backdropFilter:'blur(10px)'},successModal:{position:'fixed',top:'50%',left:'50%',transform:'translate(-50%, -50%)',background:'white',borderRadius:'20px',padding:'30px',boxShadow:'0 20px 60px rgba(0,0,0,0.3)',zIndex:3000,textAlign:'center',animation:'zoomIn 0.3s ease',minWidth:'300px'}};return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.header,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.headerContent,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.headerLeft,children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPanel(!showPanel),style:styles.togglePanelBtn,children:showPanel?'â—€':'â–¶'}),/*#__PURE__*/_jsxs(\"div\",{style:styles.headerInfo,children:[/*#__PURE__*/_jsxs(\"h1\",{style:styles.headerTitle,children:[\"\\uD83D\\uDC77\\u200D\\u2642\\uFE0F \",currentUser.name||'Trabajador']}),gpsStatus==='active'&&/*#__PURE__*/_jsxs(\"div\",{style:styles.gpsIndicator,children:[/*#__PURE__*/_jsx(\"span\",{style:styles.gpsActiveDot}),\"GPS Activo\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.headerActions,children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDocumentsModal(true),style:styles.documentsBtn,onMouseEnter:e=>{e.currentTarget.style.transform='scale(1.05)';e.currentTarget.style.boxShadow='0 4px 12px rgba(245, 158, 11, 0.4)';},onMouseLeave:e=>{e.currentTarget.style.transform='scale(1)';e.currentTarget.style.boxShadow='none';},children:\"\\uD83D\\uDCC4 Mis Documentos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowVehiclePanel(true),style:styles.vehicleBtn,onMouseEnter:e=>{e.currentTarget.style.transform='scale(1.05)';e.currentTarget.style.boxShadow='0 4px 12px rgba(139, 92, 246, 0.4)';},onMouseLeave:e=>{e.currentTarget.style.transform='scale(1)';e.currentTarget.style.boxShadow='none';},children:\"\\uD83D\\uDE9B Mi Veh\\xEDculo\"}),/*#__PURE__*/_jsx(\"button\",{onClick:navigateToDashboard,style:styles.dashboardBtn,onMouseEnter:e=>{e.currentTarget.style.transform='scale(1.05)';e.currentTarget.style.boxShadow='0 4px 12px rgba(59, 130, 246, 0.4)';},onMouseLeave:e=>{e.currentTarget.style.transform='scale(1)';e.currentTarget.style.boxShadow='none';},children:\"\\uD83D\\uDCCA Dashboard\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowNotifications(!showNotifications),style:styles.notificationBtn,children:[\"\\uD83D\\uDD14\",notificaciones.length>0&&/*#__PURE__*/_jsx(\"span\",{style:styles.notificationBadge,children:notificaciones.length})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,style:styles.logoutBtn,children:\"Salir\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mainContent,children:[/*#__PURE__*/_jsx(\"div\",{ref:mapRef,style:styles.map}),/*#__PURE__*/_jsx(\"div\",{style:styles.panel,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.panelContent,children:[showNotifications&&/*#__PURE__*/_jsxs(\"div\",{style:{...styles.card,background:notificaciones.length>0?'linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%)':'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',border:notificaciones.length>0?'2px solid #fbbf24':'2px solid #d1d5db',marginBottom:'20px',animation:'slideIn 0.3s ease'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:notificaciones.length>0?'12px':'0'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:0,fontSize:'15px',color:notificaciones.length>0?'#92400e':'#6b7280',fontWeight:'700'},children:\"\\uD83D\\uDD14 Notificaciones\"}),notificaciones.length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:clearAllNotifications,style:{padding:'4px 8px',background:'#dc2626',color:'white',border:'none',borderRadius:'6px',fontSize:'12px',cursor:'pointer',fontWeight:'600',transition:'all 0.2s ease'},children:\"Limpiar todas\"})]}),notificaciones.length>0?/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:'200px',overflowY:'auto'},children:notificaciones.map(notif=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px',background:'rgba(255,255,255,0.9)',borderRadius:'8px',marginBottom:'8px',fontSize:'13px',display:'flex',justifyContent:'space-between',alignItems:'start',gap:'8px',cursor:'pointer',transition:'all 0.2s ease',border:'1px solid rgba(0,0,0,0.05)'},onMouseEnter:e=>{e.currentTarget.style.transform='translateX(-2px)';e.currentTarget.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)';},onMouseLeave:e=>{e.currentTarget.style.transform='translateX(0)';e.currentTarget.style.boxShadow='none';},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'600',marginBottom:'4px',color:'#1f2937'},children:notif.mensaje}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',color:'#6b7280'},children:new Date(notif.timestamp).toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit'})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();markNotificationAsRead(notif.id);},style:{padding:'4px',background:'transparent',border:'none',color:'#dc2626',cursor:'pointer',fontSize:'16px',transition:'all 0.2s ease',borderRadius:'4px'},onMouseEnter:e=>{e.target.style.background='rgba(220, 38, 38, 0.1)';},onMouseLeave:e=>{e.target.style.background='transparent';},children:\"\\u2715\"})]},notif.id))}):/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',textAlign:'center',color:'#6b7280',fontSize:'14px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'32px',marginBottom:'8px',opacity:0.5},children:\"\\uD83D\\uDCED\"}),\"No tienes notificaciones nuevas\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleGPS,style:styles.gpsButton,children:isTracking?'ðŸ“ Desactivar GPS':'ðŸ“ Activar GPS'}),isTracking&&workStatus==='idle'&&/*#__PURE__*/_jsxs(\"div\",{style:styles.card,children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'10px',fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"\\uD83C\\uDFD7\\uFE0F Selecciona tu zona de trabajo\"}),zonasAsignadas.length>0?/*#__PURE__*/_jsxs(\"select\",{value:(selectedZona===null||selectedZona===void 0?void 0:selectedZona.id)||'',onChange:e=>{const zona=zonasAsignadas.find(z=>z.id===e.target.value);if(zona)selectZona(zona);},style:{width:'100%',padding:'12px',borderRadius:'8px',border:'2px solid #e5e7eb',fontSize:'14px',background:'white'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Seleccionar zona --\"}),zonasAsignadas.map(zona=>/*#__PURE__*/_jsx(\"option\",{value:zona.id,children:zona.nombre},zona.id))]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'16px',background:'#f3f4f6',borderRadius:'8px',textAlign:'center',fontSize:'14px',color:'#6b7280'},children:\"No tienes zonas asignadas\"})]}),selectedZona&&workStatus==='idle'&&/*#__PURE__*/_jsxs(\"div\",{style:{...styles.card,background:'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)',border:'2px solid #3b82f6'},children:[/*#__PURE__*/_jsxs(\"h4\",{style:{margin:'0 0 10px 0',color:'#1e40af',fontSize:'15px'},children:[\"\\uD83D\\uDCCD \",selectedZona.nombre]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'13px',color:'#1e3a8a'},children:selectedZona.direccion})]}),workStatus==='idle'&&selectedZona&&userPosition&&/*#__PURE__*/_jsx(\"button\",{onClick:startNavigation,style:{...styles.gpsButton,background:'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',color:'white'},children:\"\\uD83D\\uDE97 Iniciar Recorrido\"}),workStatus==='traveling'&&/*#__PURE__*/_jsxs(\"div\",{style:styles.card,children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',margin:'-16px -16px 16px -16px',padding:'16px',borderRadius:'12px 12px 0 0'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'17px',fontWeight:'700',color:'#92400e'},children:\"\\uD83D\\uDE97 En camino a la zona\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',marginTop:'6px',color:'#78350f'},children:[\"\\uD83D\\uDCCD \",selectedZona===null||selectedZona===void 0?void 0:selectedZona.nombre]}),distance&&duration&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'12px',padding:'8px',background:'rgba(255,255,255,0.8)',borderRadius:'6px',fontSize:'14px',display:'flex',gap:'16px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uD83D\\uDCCF \",distance]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u23F1\\uFE0F \",duration]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleArrival,style:{...styles.gpsButton,background:'linear-gradient(135deg, #10b981 0%, #059669 100%)',color:'white',marginBottom:'12px'},children:\"\\uD83D\\uDCCD Ya llegu\\xE9 a la zona\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(window.confirm('Â¿Cancelar el recorrido?')){cancelNavigation();}},style:{...styles.gpsButton,background:'white',color:'#ef4444',border:'2px solid #ef4444',marginBottom:0},children:\"\\u274C Cancelar\"})]}),workStatus==='working'&&/*#__PURE__*/_jsxs(\"div\",{style:styles.card,children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)',margin:'-16px -16px 16px -16px',padding:'20px',borderRadius:'12px 12px 0 0',border:'2px solid #22c55e'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'17px',fontWeight:'700',color:'#14532d',animation:'pulse 2s infinite'},children:\"\\uD83D\\uDD27 TRABAJANDO EN ZONA\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'15px',color:'#166534',marginTop:'8px'},children:[\"\\uD83D\\uDCCD \",selectedZona===null||selectedZona===void 0?void 0:selectedZona.nombre]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'13px',marginTop:'10px',color:'#166534'},children:[\"\\u23F0 Llegada: \",formatTime(workLog.arrivalTime)]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(window.confirm('Â¿Confirmas que has completado la tarea?')){finishWork();}},style:{...styles.gpsButton,background:'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',color:'white',fontSize:'16px',fontWeight:'700',marginBottom:'12px'},children:\"\\u2705 COMPLETAR TAREA\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(window.confirm('Â¿Cancelar el trabajo?')){cancelNavigation();}},style:{...styles.gpsButton,background:'white',color:'#ef4444',border:'2px solid #ef4444',marginBottom:0},children:\"\\u274C Cancelar\"})]}),workStatus==='completed'&&/*#__PURE__*/_jsxs(\"div\",{style:{...styles.card,background:'linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%)',border:'2px solid #6366f1'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'17px',fontWeight:'700',color:'#312e81',textAlign:'center',marginBottom:'16px'},children:\"\\u2705 Trabajo Completado\"}),/*#__PURE__*/_jsx(\"button\",{onClick:resetWork,style:{...styles.gpsButton,background:'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',color:'white',marginBottom:0},children:\"\\uD83D\\uDD04 Nuevo Trabajo\"})]})]})})]}),toastNotification&&/*#__PURE__*/_jsxs(\"div\",{style:{...styles.toast,background:toastNotification.type==='success'?'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)':toastNotification.type==='error'?'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)':toastNotification.type==='warning'?'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)':'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',color:'white'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'18px'},children:toastNotification.type==='success'?'âœ…':toastNotification.type==='error'?'âŒ':toastNotification.type==='warning'?'âš ï¸':'â„¹ï¸'}),/*#__PURE__*/_jsx(\"span\",{style:{flex:1,fontSize:'14px',fontWeight:'500'},children:toastNotification.message})]}),showVehiclePanel&&/*#__PURE__*/_jsx(TrabajadorVehiclePanel,{currentUser:currentUser,onClose:()=>setShowVehiclePanel(false)}),/*#__PURE__*/_jsx(DocumentosModal,{}),successMessage&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.5)',zIndex:2999,animation:'fadeIn 0.3s ease'},children:/*#__PURE__*/_jsxs(\"div\",{style:styles.successModal,children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'60px',marginBottom:'20px',animation:'bounce 0.5s ease'},children:\"\\u2705\"}),/*#__PURE__*/_jsx(\"h2\",{style:{margin:'0 0 10px 0',fontSize:'24px',color:'#16a34a'},children:successMessage.title}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,fontSize:'16px',color:'#6b7280'},children:successMessage.message})]})}),/*#__PURE__*/_jsx(\"style\",{children:`\n        @keyframes slideInRight {\n          from {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n        \n        @keyframes slideIn {\n          from {\n            transform: translateY(-10px);\n            opacity: 0;\n          }\n          to {\n            transform: translateY(0);\n            opacity: 1;\n          }\n        }\n        \n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        \n        @keyframes zoomIn {\n          from {\n            transform: translate(-50%, -50%) scale(0.8);\n            opacity: 0;\n          }\n          to {\n            transform: translate(-50%, -50%) scale(1);\n            opacity: 1;\n          }\n        }\n        \n        @keyframes bounce {\n          0%, 100% { transform: scale(1); }\n          50% { transform: scale(1.2); }\n        }\n        \n        @keyframes pulse {\n          0% {\n            box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);\n          }\n          50% {\n            box-shadow: 0 0 0 10px rgba(34, 197, 94, 0);\n          }\n          100% {\n            box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);\n          }\n        }\n      `})]});};export default SistemaTrabajadoresFirebase;","map":{"version":3,"names":["React","useEffect","useRef","useState","trabajadoresService","database","ref","onValue","update","set","push","TrabajadorVehiclePanel","cloudinaryConfig","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SistemaTrabajadoresFirebase","_ref","currentUser","onLogout","onViewChange","showVehiclePanel","setShowVehiclePanel","mapRef","map","setMap","userPosition","setUserPosition","selectedZona","setSelectedZona","isTracking","setIsTracking","isNavigating","setIsNavigating","workStatus","setWorkStatus","workLog","setWorkLog","startTime","arrivalTime","endTime","zona","zonasAsignadas","setZonasAsignadas","notificaciones","setNotificaciones","showPanel","setShowPanel","isMobile","setIsMobile","showNotifications","setShowNotifications","toastNotification","setToastNotification","successMessage","setSuccessMessage","showDocumentsModal","setShowDocumentsModal","uploadingFile","setUploadingFile","uploadProgress","setUploadProgress","documentos","setDocumentos","licenciaConducir","url","nombre","fecha","vencimiento","certificadoOperador","certificados","message","setMessage","type","text","userMarkerRef","zonaMarkerRef","directionsServiceRef","directionsRendererRef","watchIdRef","lastUpdateRef","toastTimeoutRef","mapLoaded","setMapLoaded","error","setError","distance","setDistance","duration","setDuration","showWorkLog","setShowWorkLog","gpsStatus","setGpsStatus","API_KEY","handleFileUpload","file","tipoDocumento","alert","allowedTypes","includes","size","formData","FormData","append","trabajadorId","uid","Date","now","timestamp","cleanFileName","name","split","replace","response","fetch","cloudName","method","body","data","json","console","log","documentData","secure_url","publicId","public_id","toISOString","tamaÃ±o","tipo","prev","guardarDocumentosEnFirebase","showToast","setTimeout","handleDeleteDocument","index","arguments","length","undefined","window","confirm","filter","_","i","eliminarDocumentoDeFirebase","trabajadorRef","certificadosRef","newCertRef","formatFileSize","bytes","k","sizes","Math","floor","round","pow","cargarDocumentosDesdeFirebase","docsRef","snapshot","val","Object","values","navigateToDashboard","current","clearTimeout","showSuccess","title","checkMobile","innerWidth","addEventListener","removeEventListener","zonasRef","unsubZonas","zonasArray","entries","_ref2","id","trabajadorAsignado","estado","_ref3","notifRef","unsubNotif","notifArray","_ref4","notif","leido","_ref5","sort","a","b","newNotif","mensaje","createOrUpdateTrabajador","email","telefono","phone","vehicleId","rol","ubicacion","createdAt","ultimaActualizacion","then","catch","loadGoogleMaps","Promise","resolve","reject","google","maps","existingScript","document","querySelector","Error","script","createElement","src","async","defer","onload","onerror","head","appendChild","initMap","mapInstance","Map","center","lat","lng","zoom","mapTypeId","zoomControl","mapTypeControl","scaleControl","streetViewControl","rotateControl","fullscreenControl","gestureHandling","DirectionsService","DirectionsRenderer","suppressMarkers","polylineOptions","strokeColor","strokeWeight","strokeOpacity","preserveViewport","err","updateUserPosition","position","ahora","updateTrabajadorLocation","accuracy","estadoActual","updateTrabajadorData","zonaDestino","Marker","icon","path","SymbolPath","CIRCLE","scale","fillColor","fillOpacity","zIndex","setCenter","setZoom","setPosition","geometry","spherical","computeDistanceBetween","LatLng","toggleGPS","navigator","geolocation","clearWatch","getCurrentPosition","pos","coords","latitude","longitude","warn","code","PERMISSION_DENIED","enableHighAccuracy","timeout","maximumAge","gpsWatchId","watchPosition","distanceFilter","selectZona","BACKWARD_CLOSED_ARROW","bounds","LatLngBounds","extend","fitBounds","startNavigation","recorridoInicio","request","origin","destination","travelMode","TravelMode","DRIVING","unitSystem","UnitSystem","METRIC","region","route","result","status","setDirections","routes","leg","legs","mostrarLineaDirecta","distanceInMeters","distanceInKm","toFixed","handleArrival","horaLlegada","finishWork","tiempoTrabajado","finalLog","tiempoTrabajadoMinutos","fechaCompletado","completadoPor","cancelNavigation","resetWork","markNotificationAsRead","notifId","fechaLeido","clearAllNotifications","updates","forEach","formatTime","isoString","date","toLocaleTimeString","hour","minute","hour12","calculateDuration","start","end","diff","hours","minutes","DocumentosModal","_documentos$licenciaC","_documentos$licenciaC2","_documentos$licenciaC3","_documentos$certifica","_documentos$certifica2","_documentos$certifica3","_documentos$certifica4","style","top","left","right","bottom","background","display","justifyContent","alignItems","padding","children","borderRadius","maxWidth","width","maxHeight","overflow","marginBottom","margin","color","fontSize","onClick","border","cursor","paddingLeft","href","target","rel","gridTemplateColumns","gap","fontWeight","textOverflow","whiteSpace","toLocaleDateString","flex","textAlign","textDecoration","accept","onChange","e","files","htmlFor","transition","onMouseEnter","currentTarget","borderColor","onMouseLeave","height","marginTop","cert","minWidth","marginLeft","disabled","styles","container","header","boxShadow","backdropFilter","headerContent","headerLeft","headerInfo","flexDirection","headerTitle","letterSpacing","headerActions","togglePanelBtn","transform","dashboardBtn","vehicleBtn","documentsBtn","notificationBtn","notificationBadge","animation","logoutBtn","gpsIndicator","gpsActiveDot","mainContent","paddingTop","panel","overflowY","overflowX","borderRight","panelContent","gpsButton","card","toast","successModal","stopPropagation","opacity","value","find","z","direccion","onClose"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/SistemaTrabajadoresFirebase.js"],"sourcesContent":["// src/components/SistemaTrabajadoresFirebase.js\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { trabajadoresService } from '../services/firebaseservices';\r\nimport { database } from '../config/firebase';\r\nimport { ref, onValue, update, set, push } from 'firebase/database';\r\nimport TrabajadorVehiclePanel from './TrabajadorVehiclePanel';\r\nimport { cloudinaryConfig } from '../config/cloudinary'; // NUEVO IMPORT\r\n\r\nconst SistemaTrabajadoresFirebase = ({ currentUser, onLogout, onViewChange }) => {\r\n  // Estados principales\r\n  const [showVehiclePanel, setShowVehiclePanel] = useState(false);\r\n  const mapRef = useRef(null);\r\n  const [map, setMap] = useState(null);\r\n  const [userPosition, setUserPosition] = useState(null);\r\n  const [selectedZona, setSelectedZona] = useState(null);\r\n  const [isTracking, setIsTracking] = useState(false);\r\n  const [isNavigating, setIsNavigating] = useState(false);\r\n  const [workStatus, setWorkStatus] = useState('idle');\r\n  const [workLog, setWorkLog] = useState({\r\n    startTime: null,\r\n    arrivalTime: null,\r\n    endTime: null,\r\n    zona: null\r\n  });\r\n  \r\n  // Estados para zonas y notificaciones\r\n  const [zonasAsignadas, setZonasAsignadas] = useState([]);\r\n  const [notificaciones, setNotificaciones] = useState([]);\r\n  const [showPanel, setShowPanel] = useState(true);\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [showNotifications, setShowNotifications] = useState(false);\r\n  const [toastNotification, setToastNotification] = useState(null);\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n  \r\n  // NUEVOS ESTADOS PARA DOCUMENTOS\r\n  const [showDocumentsModal, setShowDocumentsModal] = useState(false);\r\n  const [uploadingFile, setUploadingFile] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState({});\r\n  const [documentos, setDocumentos] = useState({\r\n    licenciaConducir: { url: '', nombre: '', fecha: '', vencimiento: '' },\r\n    certificadoOperador: { url: '', nombre: '', fecha: '', vencimiento: '' },\r\n    certificados: [] // Array para mÃºltiples certificados\r\n  });\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n  \r\n  // Referencias para marcadores y servicios\r\n  const userMarkerRef = useRef(null);\r\n  const zonaMarkerRef = useRef(null);\r\n  const directionsServiceRef = useRef(null);\r\n  const directionsRendererRef = useRef(null);\r\n  const watchIdRef = useRef(null);\r\n  const lastUpdateRef = useRef(null);\r\n  const toastTimeoutRef = useRef(null);\r\n  \r\n  // Estados de UI\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [distance, setDistance] = useState(null);\r\n  const [duration, setDuration] = useState(null);\r\n  const [showWorkLog, setShowWorkLog] = useState(false);\r\n  const [gpsStatus, setGpsStatus] = useState('inactive');\r\n\r\n  const API_KEY = 'AIzaSyA7DrdL36n5cx-RNzuXGAQggFeGCheHDbY';\r\n\r\n  // ========== NUEVAS FUNCIONES PARA MANEJO DE DOCUMENTOS ==========\r\n  \r\n  const handleFileUpload = async (file, tipoDocumento) => {\r\n    if (!file) return;\r\n    \r\n    // Rechazar PDFs\r\n    if (file.type === 'application/pdf') {\r\n      setMessage({ \r\n        type: 'error', \r\n        text: 'âŒ NO se permiten PDFs. Por favor, sube una FOTO o IMAGEN del documento (JPG/PNG).' \r\n      });\r\n      \r\n      alert(\r\n        'ðŸ“¸ ALTERNATIVAS PARA SUBIR TU DOCUMENTO:\\n\\n' +\r\n        '1. Toma una FOTO con tu celular\\n' +\r\n        '2. Haz una CAPTURA DE PANTALLA del PDF\\n' +\r\n        '3. Usa un escÃ¡ner que guarde como JPG\\n' +\r\n        '4. Convierte el PDF a imagen en: https://www.ilovepdf.com/pdf_to_jpg'\r\n      );\r\n      \r\n      return;\r\n    }\r\n    \r\n    // Solo aceptar imÃ¡genes\r\n    const allowedTypes = ['image/jpeg', 'image/png', 'image/jpg'];\r\n    if (!allowedTypes.includes(file.type)) {\r\n      setMessage({ \r\n        type: 'error', \r\n        text: 'âŒ Solo se permiten imÃ¡genes JPG y PNG' \r\n      });\r\n      return;\r\n    }\r\n    \r\n    // Validar tamaÃ±o\r\n    if (file.size > 10 * 1024 * 1024) {\r\n      setMessage({ \r\n        type: 'error', \r\n        text: 'âŒ El archivo no puede superar los 10MB' \r\n      });\r\n      return;\r\n    }\r\n\r\n    setUploadingFile(true);\r\n    setUploadProgress({ [tipoDocumento]: 0 });\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      formData.append('upload_preset', 'vehiculos_docs'); // Usar el mismo preset\r\n      \r\n      const trabajadorId = currentUser.uid || `temp_${Date.now()}`;\r\n      const timestamp = Date.now();\r\n      const cleanFileName = file.name.split('.')[0].replace(/[^a-zA-Z0-9_-]/g, '_');\r\n      \r\n      formData.append('folder', `municipalidad/trabajadores/${trabajadorId}/${tipoDocumento}`);\r\n      formData.append('public_id', `${timestamp}_${cleanFileName}`);\r\n      \r\n      setUploadProgress({ [tipoDocumento]: 30 });\r\n\r\n      const response = await fetch(\r\n        `https://api.cloudinary.com/v1_1/${cloudinaryConfig.cloudName}/image/upload`,\r\n        {\r\n          method: 'POST',\r\n          body: formData\r\n        }\r\n      );\r\n\r\n      setUploadProgress({ [tipoDocumento]: 60 });\r\n\r\n      const data = await response.json();\r\n      console.log('âœ… Imagen subida:', data);\r\n      \r\n      setUploadProgress({ [tipoDocumento]: 90 });\r\n\r\n      const documentData = {\r\n        url: data.secure_url,\r\n        publicId: data.public_id,\r\n        nombre: file.name,\r\n        fecha: new Date().toISOString(),\r\n        tamaÃ±o: file.size,\r\n        tipo: file.type\r\n      };\r\n\r\n      // Actualizar estado segÃºn tipo de documento\r\n      if (tipoDocumento === 'certificados') {\r\n        setDocumentos(prev => ({\r\n          ...prev,\r\n          certificados: [...(prev.certificados || []), documentData]\r\n        }));\r\n      } else {\r\n        setDocumentos(prev => ({\r\n          ...prev,\r\n          [tipoDocumento]: documentData\r\n        }));\r\n      }\r\n\r\n      // Guardar en Firebase\r\n      await guardarDocumentosEnFirebase(tipoDocumento, documentData);\r\n\r\n      setUploadProgress({ [tipoDocumento]: 100 });\r\n      setMessage({ \r\n        type: 'success', \r\n        text: `âœ… ${file.name} subido exitosamente` \r\n      });\r\n      showToast('âœ… Documento subido exitosamente', 'success');\r\n\r\n      setTimeout(() => setUploadProgress({}), 1000);\r\n\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setMessage({ \r\n        type: 'error', \r\n        text: 'âŒ Error al subir la imagen' \r\n      });\r\n      showToast('âŒ Error al subir el documento', 'error');\r\n    } finally {\r\n      setUploadingFile(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteDocument = async (tipoDocumento, index = null) => {\r\n    if (!window.confirm('Â¿EstÃ¡s seguro de eliminar este documento?')) return;\r\n\r\n    try {\r\n      if (tipoDocumento === 'certificados' && index !== null) {\r\n        // Eliminar del array de certificados\r\n        setDocumentos(prev => ({\r\n          ...prev,\r\n          certificados: prev.certificados.filter((_, i) => i !== index)\r\n        }));\r\n      } else {\r\n        // Limpiar documento especÃ­fico\r\n        setDocumentos(prev => ({\r\n          ...prev,\r\n          [tipoDocumento]: { url: '', nombre: '', fecha: '', vencimiento: '' }\r\n        }));\r\n      }\r\n\r\n      // Actualizar en Firebase\r\n      await eliminarDocumentoDeFirebase(tipoDocumento, index);\r\n\r\n      setMessage({ \r\n        type: 'success', \r\n        text: 'âœ… Documento eliminado' \r\n      });\r\n      showToast('âœ… Documento eliminado', 'success');\r\n      \r\n    } catch (error) {\r\n      console.error('Error al eliminar documento:', error);\r\n      setMessage({ \r\n        type: 'error', \r\n        text: 'âŒ Error al eliminar el documento' \r\n      });\r\n    }\r\n  };\r\n\r\n  const guardarDocumentosEnFirebase = async (tipoDocumento, documentData) => {\r\n    try {\r\n      const trabajadorRef = ref(database, `trabajadores/${currentUser.uid}/documentos/${tipoDocumento}`);\r\n      \r\n      if (tipoDocumento === 'certificados') {\r\n        // Para certificados, usar push para crear una lista\r\n        const certificadosRef = ref(database, `trabajadores/${currentUser.uid}/documentos/certificados`);\r\n        const newCertRef = push(certificadosRef);\r\n        await set(newCertRef, documentData);\r\n      } else {\r\n        // Para licencia y certificado de operador, sobrescribir\r\n        await set(trabajadorRef, documentData);\r\n      }\r\n      \r\n      console.log('âœ… Documento guardado en Firebase');\r\n    } catch (error) {\r\n      console.error('âŒ Error al guardar en Firebase:', error);\r\n    }\r\n  };\r\n\r\n  const eliminarDocumentoDeFirebase = async (tipoDocumento, index) => {\r\n    try {\r\n      if (tipoDocumento === 'certificados' && index !== null) {\r\n        // Para certificados, necesitamos el ID especÃ­fico\r\n        const certificadosRef = ref(database, `trabajadores/${currentUser.uid}/documentos/certificados`);\r\n        await set(certificadosRef, documentos.certificados.filter((_, i) => i !== index));\r\n      } else {\r\n        const trabajadorRef = ref(database, `trabajadores/${currentUser.uid}/documentos/${tipoDocumento}`);\r\n        await set(trabajadorRef, null);\r\n      }\r\n      \r\n      console.log('âœ… Documento eliminado de Firebase');\r\n    } catch (error) {\r\n      console.error('âŒ Error al eliminar de Firebase:', error);\r\n    }\r\n  };\r\n\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\r\n  };\r\n\r\n  const cargarDocumentosDesdeFirebase = async () => {\r\n    try {\r\n      const docsRef = ref(database, `trabajadores/${currentUser.uid}/documentos`);\r\n      onValue(docsRef, (snapshot) => {\r\n        const data = snapshot.val();\r\n        if (data) {\r\n          setDocumentos({\r\n            licenciaConducir: data.licenciaConducir || { url: '', nombre: '', fecha: '', vencimiento: '' },\r\n            certificadoOperador: data.certificadoOperador || { url: '', nombre: '', fecha: '', vencimiento: '' },\r\n            certificados: data.certificados ? Object.values(data.certificados) : []\r\n          });\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.error('Error al cargar documentos:', error);\r\n    }\r\n  };\r\n\r\n  // Cargar documentos al iniciar\r\n  useEffect(() => {\r\n    if (currentUser && currentUser.uid) {\r\n      cargarDocumentosDesdeFirebase();\r\n    }\r\n  }, [currentUser]);\r\n\r\n  // FunciÃ³n para navegar al dashboard\r\n  const navigateToDashboard = () => {\r\n    if (onViewChange) {\r\n      onViewChange('dashboard-trabajador');\r\n    }\r\n  };\r\n\r\n  // FunciÃ³n para mostrar notificaciones tipo toast\r\n  const showToast = (message, type = 'info', duration = 4000) => {\r\n    if (toastTimeoutRef.current) {\r\n      clearTimeout(toastTimeoutRef.current);\r\n    }\r\n    \r\n    setToastNotification({ message, type });\r\n    \r\n    toastTimeoutRef.current = setTimeout(() => {\r\n      setToastNotification(null);\r\n    }, duration);\r\n  };\r\n\r\n  // FunciÃ³n para mostrar mensaje de Ã©xito\r\n  const showSuccess = (title, message, duration = 3000) => {\r\n    setSuccessMessage({ title, message });\r\n    setTimeout(() => {\r\n      setSuccessMessage(null);\r\n    }, duration);\r\n  };\r\n\r\n  // Detectar si es mÃ³vil\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth <= 768);\r\n    };\r\n    \r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    \r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  // Cargar zonas asignadas desde Firebase\r\n  useEffect(() => {\r\n    if (currentUser && currentUser.uid) {\r\n      console.log('ðŸ”„ Cargando zonas asignadas para trabajador:', currentUser.uid);\r\n      \r\n      // Escuchar zonas asignadas al trabajador\r\n      const zonasRef = ref(database, 'zonas_asignadas');\r\n      const unsubZonas = onValue(zonasRef, (snapshot) => {\r\n        const data = snapshot.val();\r\n        console.log('ðŸ“¦ Datos de zonas recibidos:', data);\r\n        \r\n        if (data) {\r\n          const zonasArray = Object.entries(data)\r\n            .filter(([id, zona]) => {\r\n              console.log(`Zona ${id}: asignada a ${zona.trabajadorAsignado}, yo soy ${currentUser.uid}`);\r\n              return zona.trabajadorAsignado === currentUser.uid && zona.estado !== 'completado';\r\n            })\r\n            .map(([id, zona]) => ({\r\n              id,\r\n              ...zona\r\n            }));\r\n          \r\n          console.log('âœ… Zonas asignadas filtradas:', zonasArray);\r\n          \r\n          // Mostrar notificaciÃ³n si hay nuevas zonas\r\n          if (zonasArray.length > zonasAsignadas.length) {\r\n            showToast('ðŸ“ Nueva zona asignada', 'success');\r\n          }\r\n          \r\n          setZonasAsignadas(zonasArray);\r\n        } else {\r\n          console.log('âš ï¸ No hay zonas en Firebase');\r\n          setZonasAsignadas([]);\r\n        }\r\n      });\r\n\r\n      // Escuchar notificaciones\r\n      const notifRef = ref(database, 'notificaciones');\r\n      const unsubNotif = onValue(notifRef, (snapshot) => {\r\n        const data = snapshot.val();\r\n        if (data) {\r\n          const notifArray = Object.entries(data)\r\n            .filter(([id, notif]) => notif.trabajadorId === currentUser.uid && !notif.leido)\r\n            .map(([id, notif]) => ({\r\n              id,\r\n              ...notif\r\n            }))\r\n            .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));\r\n          \r\n          // Mostrar toast para nuevas notificaciones\r\n          if (notifArray.length > notificaciones.length) {\r\n            const newNotif = notifArray[0];\r\n            showToast(newNotif.mensaje, 'info');\r\n          }\r\n          \r\n          setNotificaciones(notifArray);\r\n        }\r\n      });\r\n\r\n      return () => {\r\n        unsubZonas();\r\n        unsubNotif();\r\n      };\r\n    }\r\n  }, [currentUser, zonasAsignadas.length, notificaciones.length]);\r\n\r\n  // Registrar trabajador al montar el componente\r\n  useEffect(() => {\r\n    if (currentUser && currentUser.uid) {\r\n      console.log('ðŸ”„ Registrando trabajador al iniciar...');\r\n      \r\n      trabajadoresService.createOrUpdateTrabajador(currentUser.uid, {\r\n        nombre: currentUser.name || currentUser.email || 'Trabajador',\r\n        email: currentUser.email,\r\n        telefono: currentUser.phone || '',\r\n        vehicleId: currentUser.vehicleId || null,\r\n        estado: 'inactivo',\r\n        rol: 'trabajador',\r\n        ubicacion: null,\r\n        createdAt: new Date().toISOString(),\r\n        ultimaActualizacion: new Date().toISOString()\r\n      }).then(() => {\r\n        console.log('âœ… Trabajador registrado en Realtime Database al iniciar');\r\n      }).catch(error => {\r\n        console.error('âŒ Error al registrar trabajador al iniciar:', error);\r\n      });\r\n    }\r\n  }, [currentUser]);\r\n\r\n  // FunciÃ³n para cargar Google Maps\r\n  useEffect(() => {\r\n    const loadGoogleMaps = () => {\r\n      return new Promise((resolve, reject) => {\r\n        if (window.google && window.google.maps) {\r\n          resolve(window.google.maps);\r\n          return;\r\n        }\r\n\r\n        const existingScript = document.querySelector('script[src*=\"maps.googleapis.com\"]');\r\n        if (existingScript) {\r\n          existingScript.addEventListener('load', () => {\r\n            if (window.google && window.google.maps) {\r\n              resolve(window.google.maps);\r\n            } else {\r\n              reject(new Error('Google Maps no disponible'));\r\n            }\r\n          });\r\n          return;\r\n        }\r\n\r\n        const script = document.createElement('script');\r\n        script.src = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry&v=weekly`;\r\n        script.async = true;\r\n        script.defer = true;\r\n\r\n        script.onload = () => {\r\n          if (window.google && window.google.maps) {\r\n            resolve(window.google.maps);\r\n          } else {\r\n            reject(new Error('Google Maps no disponible'));\r\n          }\r\n        };\r\n\r\n        script.onerror = () => {\r\n          reject(new Error('Error al cargar Google Maps'));\r\n        };\r\n\r\n        document.head.appendChild(script);\r\n      });\r\n    };\r\n\r\n    const initMap = async () => {\r\n      try {\r\n        const maps = await loadGoogleMaps();\r\n        \r\n        if (!mapRef.current) return;\r\n\r\n        const mapInstance = new maps.Map(mapRef.current, {\r\n          center: { lat: -36.7333, lng: -72.4667 },\r\n          zoom: 13,\r\n          mapTypeId: 'roadmap',\r\n          zoomControl: !isMobile,\r\n          mapTypeControl: false,\r\n          scaleControl: false,\r\n          streetViewControl: false,\r\n          rotateControl: false,\r\n          fullscreenControl: true,\r\n          gestureHandling: 'greedy'\r\n        });\r\n\r\n        setMap(mapInstance);\r\n        \r\n        // Inicializar servicios de direcciones\r\n        directionsServiceRef.current = new maps.DirectionsService();\r\n        directionsRendererRef.current = new maps.DirectionsRenderer({\r\n          map: mapInstance,\r\n          suppressMarkers: false,\r\n          polylineOptions: {\r\n            strokeColor: '#4285F4',\r\n            strokeWeight: 6,\r\n            strokeOpacity: 0.8\r\n          },\r\n          preserveViewport: false\r\n        });\r\n\r\n        setMapLoaded(true);\r\n      } catch (err) {\r\n        setError('Error al cargar el mapa: ' + err.message);\r\n      }\r\n    };\r\n\r\n    initMap();\r\n  }, [isMobile]);\r\n\r\n  // Actualizar posiciÃ³n del usuario\r\n  const updateUserPosition = (position) => {\r\n    console.log('ðŸ”„ Actualizando posiciÃ³n:', position);\r\n    setUserPosition(position);\r\n    \r\n    const ahora = Date.now();\r\n    if (!lastUpdateRef.current || (ahora - lastUpdateRef.current) > 5000) {\r\n      console.log('ðŸ“ Enviando ubicaciÃ³n a Firebase:', position);\r\n      \r\n      if (currentUser && currentUser.uid) {\r\n        trabajadoresService.updateTrabajadorLocation(currentUser.uid, {\r\n          lat: position.lat,\r\n          lng: position.lng,\r\n          timestamp: new Date().toISOString(),\r\n          accuracy: position.accuracy || null\r\n        }).then(() => {\r\n          console.log('âœ… UbicaciÃ³n enviada a Firebase exitosamente');\r\n        }).catch(error => {\r\n          console.error('âŒ Error al enviar ubicaciÃ³n a Firebase:', error);\r\n        });\r\n        \r\n        const estadoActual = workStatus === 'traveling' ? 'en_camino' : \r\n                            workStatus === 'working' ? 'trabajando' : \r\n                            'disponible';\r\n        \r\n        trabajadoresService.updateTrabajadorData(currentUser.uid, {\r\n          nombre: currentUser.name || currentUser.email,\r\n          email: currentUser.email,\r\n          estado: estadoActual,\r\n          zonaDestino: selectedZona ? selectedZona.nombre : null,\r\n          ultimaActualizacion: new Date().toISOString()\r\n        });\r\n        \r\n        lastUpdateRef.current = ahora;\r\n      }\r\n    }\r\n    \r\n    if (!map || !window.google) return;\r\n\r\n    if (!userMarkerRef.current) {\r\n      userMarkerRef.current = new window.google.maps.Marker({\r\n        position: position,\r\n        map: map,\r\n        title: 'Tu ubicaciÃ³n',\r\n        icon: {\r\n          path: window.google.maps.SymbolPath.CIRCLE,\r\n          scale: 10,\r\n          fillColor: '#4285F4',\r\n          fillOpacity: 1,\r\n          strokeColor: '#ffffff',\r\n          strokeWeight: 3\r\n        },\r\n        zIndex: 1000\r\n      });\r\n      \r\n      map.setCenter(position);\r\n      map.setZoom(15);\r\n    } else {\r\n      userMarkerRef.current.setPosition(position);\r\n    }\r\n\r\n    if (isNavigating && selectedZona) {\r\n      const distance = window.google.maps.geometry.spherical.computeDistanceBetween(\r\n        new window.google.maps.LatLng(position.lat, position.lng),\r\n        new window.google.maps.LatLng(selectedZona.lat, selectedZona.lng)\r\n      );\r\n      \r\n      console.log('ðŸ“ Distancia a la zona:', Math.round(distance), 'metros');\r\n    }\r\n  };\r\n\r\n  // FunciÃ³n para activar/desactivar GPS\r\n  const toggleGPS = () => {\r\n    if (isTracking) {\r\n      if (watchIdRef.current) {\r\n        navigator.geolocation.clearWatch(watchIdRef.current);\r\n        watchIdRef.current = null;\r\n      }\r\n      setIsTracking(false);\r\n      setGpsStatus('inactive');\r\n      \r\n      if (userMarkerRef.current) {\r\n        userMarkerRef.current.setMap(null);\r\n        userMarkerRef.current = null;\r\n      }\r\n      \r\n      showToast('ðŸ“ GPS desactivado', 'warning');\r\n      \r\n      if (currentUser && currentUser.uid) {\r\n        trabajadoresService.updateTrabajadorData(currentUser.uid, {\r\n          estado: 'inactivo',\r\n          ultimaActualizacion: new Date().toISOString()\r\n        });\r\n      }\r\n    } else {\r\n      if (!navigator.geolocation) {\r\n        showToast('âŒ Tu navegador no soporta geolocalizaciÃ³n', 'error');\r\n        setGpsStatus('error');\r\n        return;\r\n      }\r\n\r\n      console.log('ðŸ”„ Iniciando GPS...');\r\n      setIsTracking(true);\r\n      setGpsStatus('activating');\r\n      showToast('ðŸ”„ Activando GPS...', 'info');\r\n      \r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          const pos = {\r\n            lat: position.coords.latitude,\r\n            lng: position.coords.longitude,\r\n            accuracy: position.coords.accuracy\r\n          };\r\n          updateUserPosition(pos);\r\n          setGpsStatus('active');\r\n          showToast('âœ… GPS activado correctamente', 'success');\r\n        },\r\n        (error) => {\r\n          console.warn('âš ï¸ Error al obtener ubicaciÃ³n:', error.message);\r\n          \r\n          if (error.code === error.PERMISSION_DENIED) {\r\n            showToast('âŒ Permisos de ubicaciÃ³n denegados', 'error');\r\n            setIsTracking(false);\r\n            setGpsStatus('error');\r\n            return;\r\n          }\r\n        },\r\n        {\r\n          enableHighAccuracy: true,\r\n          timeout: 15000,\r\n          maximumAge: 0\r\n        }\r\n      );\r\n\r\n      const gpsWatchId = navigator.geolocation.watchPosition(\r\n        (position) => {\r\n          if (position.coords.accuracy <= 150) {\r\n            const pos = {\r\n              lat: position.coords.latitude,\r\n              lng: position.coords.longitude,\r\n              accuracy: position.coords.accuracy\r\n            };\r\n            updateUserPosition(pos);\r\n            setGpsStatus('active');\r\n          }\r\n        },\r\n        (error) => {\r\n          console.log('â±ï¸ Esperando seÃ±al GPS...', error.message);\r\n        },\r\n        {\r\n          enableHighAccuracy: true,\r\n          timeout: 30000,\r\n          maximumAge: 0,\r\n          distanceFilter: 5\r\n        }\r\n      );\r\n      \r\n      watchIdRef.current = gpsWatchId;\r\n    }\r\n  };\r\n\r\n  // Seleccionar zona de trabajo\r\n  const selectZona = (zona) => {\r\n    setSelectedZona(zona);\r\n    showToast(`ðŸ“ Zona seleccionada: ${zona.nombre}`, 'info');\r\n    \r\n    if (!map || !window.google) return;\r\n\r\n    if (zonaMarkerRef.current) {\r\n      zonaMarkerRef.current.setMap(null);\r\n    }\r\n\r\n    zonaMarkerRef.current = new window.google.maps.Marker({\r\n      position: { lat: zona.lat, lng: zona.lng },\r\n      map: map,\r\n      title: zona.nombre,\r\n      icon: {\r\n        path: window.google.maps.SymbolPath.BACKWARD_CLOSED_ARROW,\r\n        scale: 8,\r\n        fillColor: '#22c55e',\r\n        fillOpacity: 1,\r\n        strokeColor: '#ffffff',\r\n        strokeWeight: 2\r\n      }\r\n    });\r\n\r\n    if (userPosition) {\r\n      const bounds = new window.google.maps.LatLngBounds();\r\n      bounds.extend(userPosition);\r\n      bounds.extend({ lat: zona.lat, lng: zona.lng });\r\n      map.fitBounds(bounds, 100);\r\n    } else {\r\n      map.setCenter({ lat: zona.lat, lng: zona.lng });\r\n      map.setZoom(15);\r\n    }\r\n  };\r\n\r\n  // Iniciar navegaciÃ³n\r\n  const startNavigation = async () => {\r\n    if (!selectedZona || !userPosition) {\r\n      showToast('âš ï¸ Activa el GPS y selecciona una zona primero', 'warning');\r\n      return;\r\n    }\r\n\r\n    setIsNavigating(true);\r\n    setWorkStatus('traveling');\r\n    setWorkLog({\r\n      ...workLog,\r\n      startTime: new Date().toISOString(),\r\n      zona: selectedZona\r\n    });\r\n\r\n    showToast('ðŸš— Iniciando recorrido...', 'success');\r\n\r\n    try {\r\n      await trabajadoresService.updateTrabajadorData(currentUser.uid, {\r\n        estado: 'en_camino',\r\n        zonaDestino: selectedZona.nombre,\r\n        recorridoInicio: new Date().toISOString()\r\n      });\r\n      \r\n      if (selectedZona.id) {\r\n        await update(ref(database, `zonas_asignadas/${selectedZona.id}`), {\r\n          estado: 'en_progreso',\r\n          ultimaActualizacion: new Date().toISOString()\r\n        });\r\n      }\r\n      \r\n      console.log('âœ… Estado actualizado a \"en_camino\" en Firebase');\r\n    } catch (error) {\r\n      console.error('Error al actualizar estado en Firebase:', error);\r\n    }\r\n\r\n    const request = {\r\n      origin: new window.google.maps.LatLng(userPosition.lat, userPosition.lng),\r\n      destination: new window.google.maps.LatLng(selectedZona.lat, selectedZona.lng),\r\n      travelMode: window.google.maps.TravelMode.DRIVING,\r\n      unitSystem: window.google.maps.UnitSystem.METRIC,\r\n      region: 'CL'\r\n    };\r\n\r\n    directionsServiceRef.current.route(request, (result, status) => {\r\n      if (status === 'OK') {\r\n        directionsRendererRef.current.setDirections(result);\r\n        const route = result.routes[0];\r\n        const leg = route.legs[0];\r\n        setDistance(leg.distance.text);\r\n        setDuration(leg.duration.text);\r\n      } else {\r\n        mostrarLineaDirecta();\r\n      }\r\n    });\r\n  };\r\n\r\n  // FunciÃ³n auxiliar para mostrar lÃ­nea directa\r\n  const mostrarLineaDirecta = () => {\r\n    if (!window.google || !map || !userPosition || !selectedZona) return;\r\n    \r\n    const distanceInMeters = window.google.maps.geometry.spherical.computeDistanceBetween(\r\n      new window.google.maps.LatLng(userPosition.lat, userPosition.lng),\r\n      new window.google.maps.LatLng(selectedZona.lat, selectedZona.lng)\r\n    );\r\n    \r\n    const distanceInKm = (distanceInMeters / 1000).toFixed(2);\r\n    setDistance(`~${distanceInKm} km`);\r\n    setDuration('Calculando...');\r\n    \r\n    showToast('ðŸ“ Mostrando ruta directa', 'info');\r\n  };\r\n\r\n  // Manejar llegada a la zona\r\n  const handleArrival = async () => {\r\n    setWorkStatus('working');\r\n    const arrivalTime = new Date().toISOString();\r\n    setWorkLog({\r\n      ...workLog,\r\n      arrivalTime: arrivalTime\r\n    });\r\n    \r\n    showToast('âœ… Has llegado a la zona de trabajo', 'success');\r\n    \r\n    try {\r\n      await trabajadoresService.updateTrabajadorData(currentUser.uid, {\r\n        estado: 'trabajando',\r\n        horaLlegada: arrivalTime\r\n      });\r\n    } catch (error) {\r\n      console.error('Error al registrar llegada:', error);\r\n    }\r\n    \r\n    if (directionsRendererRef.current) {\r\n      directionsRendererRef.current.setDirections({ routes: [] });\r\n    }\r\n  };\r\n\r\n  // Finalizar trabajo\r\n  const finishWork = async () => {\r\n    const endTime = new Date().toISOString();\r\n    const tiempoTrabajado = workLog.arrivalTime ? \r\n      Math.floor((new Date(endTime) - new Date(workLog.arrivalTime)) / 60000) : 0;\r\n    \r\n    const finalLog = {\r\n      ...workLog,\r\n      endTime: endTime,\r\n      tiempoTrabajadoMinutos: tiempoTrabajado\r\n    };\r\n    \r\n    setWorkLog(finalLog);\r\n    setWorkStatus('completed');\r\n    setIsNavigating(false);\r\n    \r\n    if (directionsRendererRef.current) {\r\n      directionsRendererRef.current.setDirections({ routes: [] });\r\n    }\r\n    \r\n    try {\r\n      await trabajadoresService.updateTrabajadorData(currentUser.uid, {\r\n        estado: 'disponible',\r\n        zonaDestino: null\r\n      });\r\n      \r\n      if (selectedZona.id) {\r\n        await update(ref(database, `zonas_asignadas/${selectedZona.id}`), {\r\n          estado: 'completado',\r\n          fechaCompletado: endTime,\r\n          tiempoTrabajadoMinutos: tiempoTrabajado,\r\n          completadoPor: currentUser.uid,\r\n          ultimaActualizacion: new Date().toISOString()\r\n        });\r\n      }\r\n      \r\n      // Mostrar mensaje de Ã©xito personalizado\r\n      showSuccess(\r\n        'Â¡Excelente trabajo!',\r\n        'La tarea ha sido marcada como completada.'\r\n      );\r\n      \r\n      // Mostrar resumen despuÃ©s de un delay\r\n      setTimeout(() => {\r\n        setShowWorkLog(true);\r\n      }, 500);\r\n      \r\n    } catch (error) {\r\n      console.error('Error al registrar finalizaciÃ³n:', error);\r\n      showToast('âš ï¸ Error al guardar. Intenta nuevamente.', 'error');\r\n    }\r\n  };\r\n\r\n  // Cancelar navegaciÃ³n\r\n  const cancelNavigation = async () => {\r\n    setIsNavigating(false);\r\n    setWorkStatus('idle');\r\n    setDistance(null);\r\n    setDuration(null);\r\n    \r\n    if (directionsRendererRef.current) {\r\n      directionsRendererRef.current.setDirections({ routes: [] });\r\n    }\r\n    \r\n    showToast('âŒ Recorrido cancelado', 'warning');\r\n    \r\n    try {\r\n      await trabajadoresService.updateTrabajadorData(currentUser.uid, {\r\n        estado: 'disponible',\r\n        zonaDestino: null\r\n      });\r\n      \r\n      if (selectedZona && selectedZona.id && workStatus !== 'idle') {\r\n        await update(ref(database, `zonas_asignadas/${selectedZona.id}`), {\r\n          estado: 'pendiente',\r\n          ultimaActualizacion: new Date().toISOString()\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al cancelar recorrido:', error);\r\n    }\r\n  };\r\n\r\n  // Resetear para nuevo trabajo\r\n  const resetWork = () => {\r\n    setSelectedZona(null);\r\n    setWorkStatus('idle');\r\n    setWorkLog({\r\n      startTime: null,\r\n      arrivalTime: null,\r\n      endTime: null,\r\n      zona: null\r\n    });\r\n    setIsNavigating(false);\r\n    setDistance(null);\r\n    setDuration(null);\r\n    setShowWorkLog(false);\r\n    \r\n    if (zonaMarkerRef.current) {\r\n      zonaMarkerRef.current.setMap(null);\r\n      zonaMarkerRef.current = null;\r\n    }\r\n    \r\n    if (directionsRendererRef.current) {\r\n      directionsRendererRef.current.setDirections({ routes: [] });\r\n    }\r\n    \r\n    showToast('ðŸ”„ Listo para un nuevo trabajo', 'info');\r\n  };\r\n\r\n  // Marcar notificaciÃ³n como leÃ­da\r\n  const markNotificationAsRead = async (notifId) => {\r\n    try {\r\n      const notifRef = ref(database, `notificaciones/${notifId}`);\r\n      await update(notifRef, {\r\n        leido: true,\r\n        fechaLeido: new Date().toISOString()\r\n      });\r\n    } catch (error) {\r\n      console.error('Error al marcar notificaciÃ³n:', error);\r\n    }\r\n  };\r\n\r\n  // Limpiar todas las notificaciones\r\n  const clearAllNotifications = async () => {\r\n    try {\r\n      const updates = {};\r\n      notificaciones.forEach(notif => {\r\n        updates[`notificaciones/${notif.id}/leido`] = true;\r\n        updates[`notificaciones/${notif.id}/fechaLeido`] = new Date().toISOString();\r\n      });\r\n      \r\n      await update(ref(database), updates);\r\n      setShowNotifications(false);\r\n      showToast('âœ… Notificaciones limpiadas', 'success');\r\n    } catch (error) {\r\n      console.error('Error al limpiar notificaciones:', error);\r\n    }\r\n  };\r\n\r\n  // Formatear tiempo\r\n  const formatTime = (isoString) => {\r\n    if (!isoString) return '--:--';\r\n    const date = new Date(isoString);\r\n    return date.toLocaleTimeString('es-CL', { \r\n      hour: '2-digit', \r\n      minute: '2-digit',\r\n      hour12: false \r\n    });\r\n  };\r\n\r\n  // Calcular duraciÃ³n\r\n  const calculateDuration = (start, end) => {\r\n    if (!start || !end) return '--';\r\n    const diff = new Date(end) - new Date(start);\r\n    const hours = Math.floor(diff / 3600000);\r\n    const minutes = Math.floor((diff % 3600000) / 60000);\r\n    return `${hours}h ${minutes}m`;\r\n  };\r\n\r\n  // Limpiar al desmontar\r\n  useEffect(() => {\r\n    return () => {\r\n      if (watchIdRef.current) {\r\n        navigator.geolocation.clearWatch(watchIdRef.current);\r\n      }\r\n      if (toastTimeoutRef.current) {\r\n        clearTimeout(toastTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // ========== MODAL DE DOCUMENTOS ==========\r\n  const DocumentosModal = () => {\r\n    if (!showDocumentsModal) return null;\r\n\r\n    return (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0,0,0,0.5)',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        zIndex: 3000,\r\n        padding: '20px'\r\n      }}>\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '12px',\r\n          maxWidth: '900px',\r\n          width: '100%',\r\n          maxHeight: '90vh',\r\n          overflow: 'auto',\r\n          padding: '30px'\r\n        }}>\r\n          {/* Header del Modal */}\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            marginBottom: '25px'\r\n          }}>\r\n            <h2 style={{ margin: 0, color: '#1f2937', fontSize: '24px' }}>\r\n              ðŸ“„ Mis Documentos\r\n            </h2>\r\n            <button\r\n              onClick={() => setShowDocumentsModal(false)}\r\n              style={{\r\n                padding: '8px',\r\n                background: '#6b7280',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                cursor: 'pointer',\r\n                fontSize: '18px'\r\n              }}\r\n            >\r\n              âœ–\r\n            </button>\r\n          </div>\r\n\r\n          {/* Mensajes */}\r\n          {message.text && (\r\n            <div style={{\r\n              padding: '12px',\r\n              borderRadius: '8px',\r\n              marginBottom: '20px',\r\n              background: message.type === 'success' ? '#dcfce7' : '#fee2e2',\r\n              border: `1px solid ${message.type === 'success' ? '#86efac' : '#fecaca'}`,\r\n              color: message.type === 'success' ? '#166534' : '#991b1b'\r\n            }}>\r\n              {message.text}\r\n            </div>\r\n          )}\r\n\r\n          {/* Aviso importante sobre PDFs */}\r\n          <div style={{\r\n            padding: '15px',\r\n            background: '#fef3c7',\r\n            border: '2px solid #f59e0b',\r\n            borderRadius: '8px',\r\n            marginBottom: '20px'\r\n          }}>\r\n            <h4 style={{ margin: '0 0 10px 0', color: '#92400e', fontSize: '16px' }}>\r\n              ðŸ“¸ IMPORTANTE: Solo se aceptan IMÃGENES\r\n            </h4>\r\n            <p style={{ margin: '0 0 10px 0', fontSize: '14px', color: '#78350f' }}>\r\n              Los archivos PDF no estÃ¡n soportados. Si tienes documentos en PDF:\r\n            </p>\r\n            <ol style={{ margin: '0', paddingLeft: '20px', fontSize: '14px', color: '#78350f' }}>\r\n              <li>ðŸ“± Toma una <strong>FOTO</strong> del documento con tu celular</li>\r\n              <li>ðŸ’» Haz una <strong>CAPTURA DE PANTALLA</strong> del PDF</li>\r\n              <li>ðŸ”„ Convierte el PDF a JPG en: <a href=\"https://www.ilovepdf.com/pdf_to_jpg\" target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: '#f59e0b' }}>iLovePDF.com</a></li>\r\n            </ol>\r\n          </div>\r\n\r\n          {/* Grid de documentos */}\r\n          <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fit, minmax(280px, 1fr))',\r\n            gap: '20px'\r\n          }}>\r\n            {/* Licencia de Conducir */}\r\n            <div style={{\r\n              border: '1px solid #e5e7eb',\r\n              borderRadius: '8px',\r\n              padding: '15px',\r\n              background: documentos.licenciaConducir?.url ? '#f0fdf4' : 'white'\r\n            }}>\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                marginBottom: '10px'\r\n              }}>\r\n                <h5 style={{ \r\n                  margin: 0, \r\n                  fontSize: '14px', \r\n                  fontWeight: '600', \r\n                  color: '#374151' \r\n                }}>\r\n                  ðŸš— Licencia de Conducir\r\n                </h5>\r\n                {documentos.licenciaConducir?.url && (\r\n                  <span style={{\r\n                    fontSize: '10px',\r\n                    padding: '2px 6px',\r\n                    background: '#22c55e',\r\n                    color: 'white',\r\n                    borderRadius: '4px'\r\n                  }}>\r\n                    âœ“ Cargado\r\n                  </span>\r\n                )}\r\n              </div>\r\n              \r\n              {documentos.licenciaConducir?.url ? (\r\n                <div>\r\n                  <div style={{\r\n                    padding: '8px',\r\n                    background: '#f9fafb',\r\n                    borderRadius: '6px',\r\n                    marginBottom: '8px',\r\n                    fontSize: '12px'\r\n                  }}>\r\n                    <div style={{ \r\n                      fontWeight: '500', \r\n                      color: '#1f2937',\r\n                      marginBottom: '3px',\r\n                      overflow: 'hidden',\r\n                      textOverflow: 'ellipsis',\r\n                      whiteSpace: 'nowrap'\r\n                    }}>\r\n                      {documentos.licenciaConducir.nombre}\r\n                    </div>\r\n                    <div style={{ color: '#6b7280', fontSize: '11px' }}>\r\n                      {new Date(documentos.licenciaConducir.fecha).toLocaleDateString('es-CL')}\r\n                    </div>\r\n                  </div>\r\n                  <div style={{ display: 'flex', gap: '8px' }}>\r\n                    <a \r\n                      href={documentos.licenciaConducir.url}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      style={{\r\n                        flex: 1,\r\n                        padding: '6px',\r\n                        background: '#3b82f6',\r\n                        color: 'white',\r\n                        textAlign: 'center',\r\n                        borderRadius: '6px',\r\n                        textDecoration: 'none',\r\n                        fontSize: '12px'\r\n                      }}\r\n                    >\r\n                      ðŸ‘ï¸ Ver\r\n                    </a>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleDeleteDocument('licenciaConducir')}\r\n                      style={{\r\n                        flex: 1,\r\n                        padding: '6px',\r\n                        background: '#ef4444',\r\n                        color: 'white',\r\n                        border: 'none',\r\n                        borderRadius: '6px',\r\n                        cursor: 'pointer',\r\n                        fontSize: '12px'\r\n                      }}\r\n                    >\r\n                      ðŸ—‘ï¸ Eliminar\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div>\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"licenciaConducir\"\r\n                    accept=\".jpg,.jpeg,.png\"\r\n                    onChange={(e) => handleFileUpload(e.target.files[0], 'licenciaConducir')}\r\n                    style={{ display: 'none' }}\r\n                  />\r\n                  <label\r\n                    htmlFor=\"licenciaConducir\"\r\n                    style={{\r\n                      display: 'block',\r\n                      padding: '20px 10px',\r\n                      background: '#f9fafb',\r\n                      border: '2px dashed #d1d5db',\r\n                      borderRadius: '6px',\r\n                      textAlign: 'center',\r\n                      cursor: 'pointer',\r\n                      fontSize: '12px',\r\n                      color: '#6b7280',\r\n                      transition: 'all 0.2s'\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.borderColor = '#3b82f6';\r\n                      e.currentTarget.style.background = '#eff6ff';\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.borderColor = '#d1d5db';\r\n                      e.currentTarget.style.background = '#f9fafb';\r\n                    }}\r\n                  >\r\n                    {uploadProgress.licenciaConducir ? (\r\n                      <div>\r\n                        <div style={{ marginBottom: '5px' }}>\r\n                          Subiendo... {uploadProgress.licenciaConducir}%\r\n                        </div>\r\n                        <div style={{\r\n                          width: '100%',\r\n                          height: '4px',\r\n                          background: '#e5e7eb',\r\n                          borderRadius: '2px',\r\n                          overflow: 'hidden'\r\n                        }}>\r\n                          <div style={{\r\n                            width: `${uploadProgress.licenciaConducir}%`,\r\n                            height: '100%',\r\n                            background: '#3b82f6',\r\n                            transition: 'width 0.3s'\r\n                          }} />\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <>\r\n                        <div style={{ fontSize: '20px', marginBottom: '5px' }}>ðŸ“¤</div>\r\n                        <div>Click para subir</div>\r\n                      </>\r\n                    )}\r\n                  </label>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Certificado de Operador */}\r\n            <div style={{\r\n              border: '1px solid #e5e7eb',\r\n              borderRadius: '8px',\r\n              padding: '15px',\r\n              background: documentos.certificadoOperador?.url ? '#f0fdf4' : 'white'\r\n            }}>\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                marginBottom: '10px'\r\n              }}>\r\n                <h5 style={{ \r\n                  margin: 0, \r\n                  fontSize: '14px', \r\n                  fontWeight: '600', \r\n                  color: '#374151' \r\n                }}>\r\n                  ðŸ—ï¸ Certificado de Operador\r\n                </h5>\r\n                {documentos.certificadoOperador?.url && (\r\n                  <span style={{\r\n                    fontSize: '10px',\r\n                    padding: '2px 6px',\r\n                    background: '#22c55e',\r\n                    color: 'white',\r\n                    borderRadius: '4px'\r\n                  }}>\r\n                    âœ“ Cargado\r\n                  </span>\r\n                )}\r\n              </div>\r\n              \r\n              {documentos.certificadoOperador?.url ? (\r\n                <div>\r\n                  <div style={{\r\n                    padding: '8px',\r\n                    background: '#f9fafb',\r\n                    borderRadius: '6px',\r\n                    marginBottom: '8px',\r\n                    fontSize: '12px'\r\n                  }}>\r\n                    <div style={{ \r\n                      fontWeight: '500', \r\n                      color: '#1f2937',\r\n                      marginBottom: '3px',\r\n                      overflow: 'hidden',\r\n                      textOverflow: 'ellipsis',\r\n                      whiteSpace: 'nowrap'\r\n                    }}>\r\n                      {documentos.certificadoOperador.nombre}\r\n                    </div>\r\n                    <div style={{ color: '#6b7280', fontSize: '11px' }}>\r\n                      {new Date(documentos.certificadoOperador.fecha).toLocaleDateString('es-CL')}\r\n                    </div>\r\n                  </div>\r\n                  <div style={{ display: 'flex', gap: '8px' }}>\r\n                    <a \r\n                      href={documentos.certificadoOperador.url}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      style={{\r\n                        flex: 1,\r\n                        padding: '6px',\r\n                        background: '#3b82f6',\r\n                        color: 'white',\r\n                        textAlign: 'center',\r\n                        borderRadius: '6px',\r\n                        textDecoration: 'none',\r\n                        fontSize: '12px'\r\n                      }}\r\n                    >\r\n                      ðŸ‘ï¸ Ver\r\n                    </a>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleDeleteDocument('certificadoOperador')}\r\n                      style={{\r\n                        flex: 1,\r\n                        padding: '6px',\r\n                        background: '#ef4444',\r\n                        color: 'white',\r\n                        border: 'none',\r\n                        borderRadius: '6px',\r\n                        cursor: 'pointer',\r\n                        fontSize: '12px'\r\n                      }}\r\n                    >\r\n                      ðŸ—‘ï¸ Eliminar\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div>\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"certificadoOperador\"\r\n                    accept=\".jpg,.jpeg,.png\"\r\n                    onChange={(e) => handleFileUpload(e.target.files[0], 'certificadoOperador')}\r\n                    style={{ display: 'none' }}\r\n                  />\r\n                  <label\r\n                    htmlFor=\"certificadoOperador\"\r\n                    style={{\r\n                      display: 'block',\r\n                      padding: '20px 10px',\r\n                      background: '#f9fafb',\r\n                      border: '2px dashed #d1d5db',\r\n                      borderRadius: '6px',\r\n                      textAlign: 'center',\r\n                      cursor: 'pointer',\r\n                      fontSize: '12px',\r\n                      color: '#6b7280',\r\n                      transition: 'all 0.2s'\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.borderColor = '#3b82f6';\r\n                      e.currentTarget.style.background = '#eff6ff';\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.borderColor = '#d1d5db';\r\n                      e.currentTarget.style.background = '#f9fafb';\r\n                    }}\r\n                  >\r\n                    <div style={{ fontSize: '20px', marginBottom: '5px' }}>ðŸ“¤</div>\r\n                    <div>Click para subir</div>\r\n                  </label>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* SecciÃ³n de certificados adicionales */}\r\n          <div style={{\r\n            marginTop: '30px',\r\n            padding: '20px',\r\n            background: '#f9fafb',\r\n            borderRadius: '8px'\r\n          }}>\r\n            <h5 style={{ \r\n              margin: '0 0 15px 0', \r\n              fontSize: '16px', \r\n              fontWeight: '600', \r\n              color: '#374151' \r\n            }}>\r\n              ðŸ“š Certificados de CapacitaciÃ³n\r\n            </h5>\r\n            \r\n            {/* Lista de certificados */}\r\n            {documentos.certificados?.length > 0 && (\r\n              <div style={{ marginBottom: '15px' }}>\r\n                {documentos.certificados.map((cert, index) => (\r\n                  <div key={index} style={{\r\n                    padding: '10px',\r\n                    background: 'white',\r\n                    borderRadius: '6px',\r\n                    marginBottom: '8px',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                    border: '1px solid #e5e7eb'\r\n                  }}>\r\n                    <div style={{ flex: 1, minWidth: 0 }}>\r\n                      <div style={{ \r\n                        fontWeight: '500', \r\n                        fontSize: '13px',\r\n                        color: '#1f2937',\r\n                        overflow: 'hidden',\r\n                        textOverflow: 'ellipsis',\r\n                        whiteSpace: 'nowrap'\r\n                      }}>\r\n                        ðŸ“œ {cert.nombre}\r\n                      </div>\r\n                      <div style={{ \r\n                        color: '#6b7280', \r\n                        fontSize: '11px',\r\n                        marginTop: '2px' \r\n                      }}>\r\n                        {formatFileSize(cert.tamaÃ±o)} â€¢ {new Date(cert.fecha).toLocaleDateString('es-CL')}\r\n                      </div>\r\n                    </div>\r\n                    <div style={{ display: 'flex', gap: '6px', marginLeft: '10px' }}>\r\n                      <a \r\n                        href={cert.url}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        style={{\r\n                          padding: '4px 8px',\r\n                          background: '#3b82f6',\r\n                          color: 'white',\r\n                          borderRadius: '4px',\r\n                          textDecoration: 'none',\r\n                          fontSize: '11px'\r\n                        }}\r\n                      >\r\n                        Ver\r\n                      </a>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => handleDeleteDocument('certificados', index)}\r\n                        style={{\r\n                          padding: '4px 8px',\r\n                          background: '#ef4444',\r\n                          color: 'white',\r\n                          border: 'none',\r\n                          borderRadius: '4px',\r\n                          cursor: 'pointer',\r\n                          fontSize: '11px'\r\n                        }}\r\n                      >\r\n                        Eliminar\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n            \r\n            {/* BotÃ³n para agregar mÃ¡s certificados */}\r\n            <div>\r\n              <input\r\n                type=\"file\"\r\n                id=\"certificados\"\r\n                accept=\".jpg,.jpeg,.png\"\r\n                onChange={(e) => handleFileUpload(e.target.files[0], 'certificados')}\r\n                style={{ display: 'none' }}\r\n                disabled={uploadingFile}\r\n              />\r\n              <label\r\n                htmlFor=\"certificados\"\r\n                style={{\r\n                  display: 'inline-block',\r\n                  padding: '10px 16px',\r\n                  background: uploadingFile ? '#9ca3af' : '#10b981',\r\n                  color: 'white',\r\n                  borderRadius: '6px',\r\n                  cursor: uploadingFile ? 'not-allowed' : 'pointer',\r\n                  fontSize: '14px',\r\n                  fontWeight: '500'\r\n                }}\r\n              >\r\n                {uploadingFile ? 'â³ Subiendo...' : 'âž• Agregar Certificado'}\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Estilos mejorados\r\n  const styles = {\r\n    container: {\r\n      width: '100%',\r\n      height: '100vh',\r\n      position: 'relative',\r\n      overflow: 'hidden',\r\n      background: '#f8fafc'\r\n    },\r\n    header: {\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      background: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\r\n      color: 'white',\r\n      padding: isMobile ? '12px 16px' : '16px 24px',\r\n      zIndex: 1002,\r\n      boxShadow: '0 4px 20px rgba(0,0,0,0.15)',\r\n      backdropFilter: 'blur(10px)'\r\n    },\r\n    headerContent: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      width: '100%'\r\n    },\r\n    headerLeft: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '12px',\r\n      flex: 1\r\n    },\r\n    headerInfo: {\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    },\r\n    headerTitle: {\r\n      margin: 0,\r\n      fontSize: isMobile ? '18px' : '20px',\r\n      fontWeight: '700',\r\n      letterSpacing: '-0.5px'\r\n    },\r\n    headerActions: {\r\n      display: 'flex',\r\n      gap: '8px',\r\n      alignItems: 'center'\r\n    },\r\n    togglePanelBtn: {\r\n      padding: '8px',\r\n      background: 'rgba(255,255,255,0.2)',\r\n      backdropFilter: 'blur(10px)',\r\n      color: 'white',\r\n      border: '1px solid rgba(255,255,255,0.3)',\r\n      borderRadius: '8px',\r\n      cursor: 'pointer',\r\n      fontSize: '20px',\r\n      transition: 'all 0.3s ease',\r\n      transform: showPanel ? 'rotate(0deg)' : 'rotate(180deg)'\r\n    },\r\n    dashboardBtn: {\r\n      padding: '8px 14px',\r\n      background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\r\n      color: 'white',\r\n      border: 'none',\r\n      borderRadius: '8px',\r\n      cursor: 'pointer',\r\n      fontSize: '14px',\r\n      fontWeight: '600',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '6px',\r\n      transition: 'all 0.3s ease'\r\n    },\r\n    vehicleBtn: {\r\n      padding: '8px 14px',\r\n      background: 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)',\r\n      color: 'white',\r\n      border: 'none',\r\n      borderRadius: '8px',\r\n      cursor: 'pointer',\r\n      fontSize: '14px',\r\n      fontWeight: '600',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '6px',\r\n      transition: 'all 0.3s ease'\r\n    },\r\n    documentsBtn: {\r\n      padding: '8px 14px',\r\n      background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\r\n      color: 'white',\r\n      border: 'none',\r\n      borderRadius: '8px',\r\n      cursor: 'pointer',\r\n      fontSize: '14px',\r\n      fontWeight: '600',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '6px',\r\n      transition: 'all 0.3s ease'\r\n    },\r\n    notificationBtn: {\r\n      padding: '8px',\r\n      background: 'rgba(255,255,255,0.2)',\r\n      backdropFilter: 'blur(10px)',\r\n      color: 'white',\r\n      border: '1px solid rgba(255,255,255,0.3)',\r\n      borderRadius: '8px',\r\n      cursor: 'pointer',\r\n      fontSize: '16px',\r\n      position: 'relative',\r\n      transition: 'all 0.3s ease'\r\n    },\r\n    notificationBadge: {\r\n      position: 'absolute',\r\n      top: '-4px',\r\n      right: '-4px',\r\n      background: '#ef4444',\r\n      color: 'white',\r\n      borderRadius: '50%',\r\n      width: '18px',\r\n      height: '18px',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      fontSize: '10px',\r\n      fontWeight: 'bold',\r\n      animation: 'pulse 2s infinite'\r\n    },\r\n    logoutBtn: {\r\n      padding: '8px 14px',\r\n      background: 'rgba(255,255,255,0.2)',\r\n      backdropFilter: 'blur(10px)',\r\n      color: 'white',\r\n      border: '1px solid rgba(255,255,255,0.3)',\r\n      borderRadius: '8px',\r\n      cursor: 'pointer',\r\n      fontSize: '14px',\r\n      fontWeight: '600'\r\n    },\r\n    gpsIndicator: {\r\n      display: 'inline-flex',\r\n      alignItems: 'center',\r\n      gap: '6px',\r\n      marginTop: '4px',\r\n      padding: '2px 8px',\r\n      background: 'rgba(255,255,255,0.2)',\r\n      borderRadius: '12px',\r\n      fontSize: '12px'\r\n    },\r\n    gpsActiveDot: {\r\n      width: '6px',\r\n      height: '6px',\r\n      background: '#4ade80',\r\n      borderRadius: '50%',\r\n      animation: 'pulse 2s infinite'\r\n    },\r\n    mainContent: {\r\n      position: 'relative',\r\n      width: '100%',\r\n      height: '100vh',\r\n      paddingTop: isMobile ? '64px' : '72px'\r\n    },\r\n    panel: {\r\n      position: 'fixed',\r\n      top: isMobile ? '64px' : '72px',\r\n      left: showPanel ? '0' : '-100%',\r\n      width: isMobile ? '100%' : '420px',\r\n      maxWidth: '100%',\r\n      height: `calc(100vh - ${isMobile ? '64px' : '72px'})`,\r\n      background: 'linear-gradient(180deg, #ffffff 0%, #f8fafc 100%)',\r\n      boxShadow: '4px 0 20px rgba(0,0,0,0.1)',\r\n      overflowY: 'auto',\r\n      overflowX: 'hidden',\r\n      transition: 'left 0.4s cubic-bezier(0.4, 0, 0.2, 1)',\r\n      zIndex: 1001,\r\n      borderRight: '1px solid rgba(0,0,0,0.05)'\r\n    },\r\n    panelContent: {\r\n      padding: isMobile ? '16px' : '20px'\r\n    },\r\n    gpsButton: {\r\n      width: '100%',\r\n      padding: isMobile ? '14px' : '13px',\r\n      fontSize: isMobile ? '15px' : '14px',\r\n      border: 'none',\r\n      borderRadius: '10px',\r\n      fontWeight: '600',\r\n      cursor: 'pointer',\r\n      marginBottom: '12px',\r\n      transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n      boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n      position: 'relative',\r\n      overflow: 'hidden',\r\n      background: isTracking \r\n        ? 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)' \r\n        : 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\r\n      color: 'white'\r\n    },\r\n    map: {\r\n      width: '100%',\r\n      height: '100%',\r\n      position: 'absolute',\r\n      top: 0,\r\n      left: 0\r\n    },\r\n    card: {\r\n      background: 'white',\r\n      borderRadius: '12px',\r\n      padding: isMobile ? '14px' : '16px',\r\n      marginBottom: '16px',\r\n      boxShadow: '0 2px 12px rgba(0,0,0,0.06)',\r\n      border: '1px solid rgba(0,0,0,0.04)',\r\n      transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)'\r\n    },\r\n    toast: {\r\n      position: 'fixed',\r\n      top: '80px',\r\n      right: '20px',\r\n      padding: '12px 20px',\r\n      borderRadius: '10px',\r\n      boxShadow: '0 4px 20px rgba(0,0,0,0.15)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '12px',\r\n      zIndex: 2000,\r\n      animation: 'slideInRight 0.3s ease',\r\n      maxWidth: '350px',\r\n      backdropFilter: 'blur(10px)'\r\n    },\r\n    successModal: {\r\n      position: 'fixed',\r\n      top: '50%',\r\n      left: '50%',\r\n      transform: 'translate(-50%, -50%)',\r\n      background: 'white',\r\n      borderRadius: '20px',\r\n      padding: '30px',\r\n      boxShadow: '0 20px 60px rgba(0,0,0,0.3)',\r\n      zIndex: 3000,\r\n      textAlign: 'center',\r\n      animation: 'zoomIn 0.3s ease',\r\n      minWidth: '300px'\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      {/* Header Mejorado */}\r\n      <div style={styles.header}>\r\n        <div style={styles.headerContent}>\r\n          <div style={styles.headerLeft}>\r\n            <button\r\n              onClick={() => setShowPanel(!showPanel)}\r\n              style={styles.togglePanelBtn}\r\n            >\r\n              {showPanel ? 'â—€' : 'â–¶'}\r\n            </button>\r\n            <div style={styles.headerInfo}>\r\n              <h1 style={styles.headerTitle}>\r\n                ðŸ‘·â€â™‚ï¸ {currentUser.name || 'Trabajador'}\r\n              </h1>\r\n              {gpsStatus === 'active' && (\r\n                <div style={styles.gpsIndicator}>\r\n                  <span style={styles.gpsActiveDot}></span>\r\n                  GPS Activo\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n          \r\n          <div style={styles.headerActions}>\r\n            {/* NUEVO BOTÃ“N DE DOCUMENTOS */}\r\n            <button\r\n              onClick={() => setShowDocumentsModal(true)}\r\n              style={styles.documentsBtn}\r\n              onMouseEnter={(e) => {\r\n                e.currentTarget.style.transform = 'scale(1.05)';\r\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.4)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.currentTarget.style.transform = 'scale(1)';\r\n                e.currentTarget.style.boxShadow = 'none';\r\n              }}\r\n            >\r\n              ðŸ“„ Mis Documentos\r\n            </button>\r\n            \r\n            {/* BotÃ³n Mi VehÃ­culo */}\r\n            <button\r\n              onClick={() => setShowVehiclePanel(true)}\r\n              style={styles.vehicleBtn}\r\n              onMouseEnter={(e) => {\r\n                e.currentTarget.style.transform = 'scale(1.05)';\r\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(139, 92, 246, 0.4)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.currentTarget.style.transform = 'scale(1)';\r\n                e.currentTarget.style.boxShadow = 'none';\r\n              }}\r\n            >\r\n              ðŸš› Mi VehÃ­culo\r\n            </button>\r\n            \r\n            {/* BotÃ³n Dashboard */}\r\n            <button\r\n              onClick={navigateToDashboard}\r\n              style={styles.dashboardBtn}\r\n              onMouseEnter={(e) => {\r\n                e.currentTarget.style.transform = 'scale(1.05)';\r\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.4)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.currentTarget.style.transform = 'scale(1)';\r\n                e.currentTarget.style.boxShadow = 'none';\r\n              }}\r\n            >\r\n              ðŸ“Š Dashboard\r\n            </button>\r\n            \r\n            {/* Notificaciones */}\r\n            <button\r\n              onClick={() => setShowNotifications(!showNotifications)}\r\n              style={styles.notificationBtn}\r\n            >\r\n              ðŸ””\r\n              {notificaciones.length > 0 && (\r\n                <span style={styles.notificationBadge}>\r\n                  {notificaciones.length}\r\n                </span>\r\n              )}\r\n            </button>\r\n            \r\n            {/* Logout */}\r\n            <button onClick={onLogout} style={styles.logoutBtn}>\r\n              Salir\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Contenido principal con mapa */}\r\n      <div style={styles.mainContent}>\r\n        {/* Mapa de fondo */}\r\n        <div ref={mapRef} style={styles.map} />\r\n        \r\n        {/* Panel lateral mejorado */}\r\n        <div style={styles.panel}>\r\n          <div style={styles.panelContent}>\r\n            {/* Panel de notificaciones desplegable */}\r\n            {showNotifications && (\r\n              <div style={{\r\n                ...styles.card,\r\n                background: notificaciones.length > 0 \r\n                  ? 'linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%)'\r\n                  : 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\r\n                border: notificaciones.length > 0 \r\n                  ? '2px solid #fbbf24'\r\n                  : '2px solid #d1d5db',\r\n                marginBottom: '20px',\r\n                animation: 'slideIn 0.3s ease'\r\n              }}>\r\n                <div style={{ \r\n                  display: 'flex', \r\n                  justifyContent: 'space-between', \r\n                  alignItems: 'center',\r\n                  marginBottom: notificaciones.length > 0 ? '12px' : '0'\r\n                }}>\r\n                  <h4 style={{ \r\n                    margin: 0, \r\n                    fontSize: '15px', \r\n                    color: notificaciones.length > 0 ? '#92400e' : '#6b7280', \r\n                    fontWeight: '700' \r\n                  }}>\r\n                    ðŸ”” Notificaciones\r\n                  </h4>\r\n                  {notificaciones.length > 0 && (\r\n                    <button\r\n                      onClick={clearAllNotifications}\r\n                      style={{\r\n                        padding: '4px 8px',\r\n                        background: '#dc2626',\r\n                        color: 'white',\r\n                        border: 'none',\r\n                        borderRadius: '6px',\r\n                        fontSize: '12px',\r\n                        cursor: 'pointer',\r\n                        fontWeight: '600',\r\n                        transition: 'all 0.2s ease'\r\n                      }}\r\n                    >\r\n                      Limpiar todas\r\n                    </button>\r\n                  )}\r\n                </div>\r\n                \r\n                {notificaciones.length > 0 ? (\r\n                  <div style={{ maxHeight: '200px', overflowY: 'auto' }}>\r\n                    {notificaciones.map(notif => (\r\n                      <div \r\n                        key={notif.id} \r\n                        style={{\r\n                          padding: '10px',\r\n                          background: 'rgba(255,255,255,0.9)',\r\n                          borderRadius: '8px',\r\n                          marginBottom: '8px',\r\n                          fontSize: '13px',\r\n                          display: 'flex',\r\n                          justifyContent: 'space-between',\r\n                          alignItems: 'start',\r\n                          gap: '8px',\r\n                          cursor: 'pointer',\r\n                          transition: 'all 0.2s ease',\r\n                          border: '1px solid rgba(0,0,0,0.05)'\r\n                        }}\r\n                        onMouseEnter={(e) => {\r\n                          e.currentTarget.style.transform = 'translateX(-2px)';\r\n                          e.currentTarget.style.boxShadow = '0 2px 8px rgba(0,0,0,0.1)';\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          e.currentTarget.style.transform = 'translateX(0)';\r\n                          e.currentTarget.style.boxShadow = 'none';\r\n                        }}\r\n                      >\r\n                        <div style={{ flex: 1 }}>\r\n                          <div style={{ fontWeight: '600', marginBottom: '4px', color: '#1f2937' }}>\r\n                            {notif.mensaje}\r\n                          </div>\r\n                          <div style={{ fontSize: '11px', color: '#6b7280' }}>\r\n                            {new Date(notif.timestamp).toLocaleTimeString('es-CL', {\r\n                              hour: '2-digit',\r\n                              minute: '2-digit'\r\n                            })}\r\n                          </div>\r\n                        </div>\r\n                        <button\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            markNotificationAsRead(notif.id);\r\n                          }}\r\n                          style={{\r\n                            padding: '4px',\r\n                            background: 'transparent',\r\n                            border: 'none',\r\n                            color: '#dc2626',\r\n                            cursor: 'pointer',\r\n                            fontSize: '16px',\r\n                            transition: 'all 0.2s ease',\r\n                            borderRadius: '4px'\r\n                          }}\r\n                          onMouseEnter={(e) => {\r\n                            e.target.style.background = 'rgba(220, 38, 38, 0.1)';\r\n                          }}\r\n                          onMouseLeave={(e) => {\r\n                            e.target.style.background = 'transparent';\r\n                          }}\r\n                        >\r\n                          âœ•\r\n                        </button>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div style={{\r\n                    padding: '20px',\r\n                    textAlign: 'center',\r\n                    color: '#6b7280',\r\n                    fontSize: '14px'\r\n                  }}>\r\n                    <div style={{ fontSize: '32px', marginBottom: '8px', opacity: 0.5 }}>\r\n                      ðŸ“­\r\n                    </div>\r\n                    No tienes notificaciones nuevas\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* ActivaciÃ³n GPS */}\r\n            <button onClick={toggleGPS} style={styles.gpsButton}>\r\n              {isTracking ? 'ðŸ“ Desactivar GPS' : 'ðŸ“ Activar GPS'}\r\n            </button>\r\n\r\n            {/* Selector de zona */}\r\n            {isTracking && workStatus === 'idle' && (\r\n              <div style={styles.card}>\r\n                <label style={{ \r\n                  display: 'block', \r\n                  marginBottom: '10px', \r\n                  fontSize: '14px', \r\n                  fontWeight: '600',\r\n                  color: '#374151'\r\n                }}>\r\n                  ðŸ—ï¸ Selecciona tu zona de trabajo\r\n                </label>\r\n                {zonasAsignadas.length > 0 ? (\r\n                  <select\r\n                    value={selectedZona?.id || ''}\r\n                    onChange={(e) => {\r\n                      const zona = zonasAsignadas.find(z => z.id === e.target.value);\r\n                      if (zona) selectZona(zona);\r\n                    }}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '12px',\r\n                      borderRadius: '8px',\r\n                      border: '2px solid #e5e7eb',\r\n                      fontSize: '14px',\r\n                      background: 'white'\r\n                    }}\r\n                  >\r\n                    <option value=\"\">-- Seleccionar zona --</option>\r\n                    {zonasAsignadas.map(zona => (\r\n                      <option key={zona.id} value={zona.id}>\r\n                        {zona.nombre}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                ) : (\r\n                  <div style={{\r\n                    padding: '16px',\r\n                    background: '#f3f4f6',\r\n                    borderRadius: '8px',\r\n                    textAlign: 'center',\r\n                    fontSize: '14px',\r\n                    color: '#6b7280'\r\n                  }}>\r\n                    No tienes zonas asignadas\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* InformaciÃ³n de zona seleccionada */}\r\n            {selectedZona && workStatus === 'idle' && (\r\n              <div style={{\r\n                ...styles.card,\r\n                background: 'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)',\r\n                border: '2px solid #3b82f6'\r\n              }}>\r\n                <h4 style={{ margin: '0 0 10px 0', color: '#1e40af', fontSize: '15px' }}>\r\n                  ðŸ“ {selectedZona.nombre}\r\n                </h4>\r\n                <p style={{ margin: 0, fontSize: '13px', color: '#1e3a8a' }}>\r\n                  {selectedZona.direccion}\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {/* BotÃ³n iniciar recorrido */}\r\n            {workStatus === 'idle' && selectedZona && userPosition && (\r\n              <button\r\n                onClick={startNavigation}\r\n                style={{\r\n                  ...styles.gpsButton,\r\n                  background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\r\n                  color: 'white'\r\n                }}\r\n              >\r\n                ðŸš— Iniciar Recorrido\r\n              </button>\r\n            )}\r\n\r\n            {/* Estado: En camino */}\r\n            {workStatus === 'traveling' && (\r\n              <div style={styles.card}>\r\n                <div style={{\r\n                  background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',\r\n                  margin: '-16px -16px 16px -16px',\r\n                  padding: '16px',\r\n                  borderRadius: '12px 12px 0 0'\r\n                }}>\r\n                  <div style={{ fontSize: '17px', fontWeight: '700', color: '#92400e' }}>\r\n                    ðŸš— En camino a la zona\r\n                  </div>\r\n                  <div style={{ fontSize: '14px', marginTop: '6px', color: '#78350f' }}>\r\n                    ðŸ“ {selectedZona?.nombre}\r\n                  </div>\r\n                  {distance && duration && (\r\n                    <div style={{ \r\n                      marginTop: '12px', \r\n                      padding: '8px',\r\n                      background: 'rgba(255,255,255,0.8)',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px',\r\n                      display: 'flex',\r\n                      gap: '16px'\r\n                    }}>\r\n                      <span>ðŸ“ {distance}</span>\r\n                      <span>â±ï¸ {duration}</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                \r\n                <button\r\n                  onClick={handleArrival}\r\n                  style={{\r\n                    ...styles.gpsButton,\r\n                    background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\r\n                    color: 'white',\r\n                    marginBottom: '12px'\r\n                  }}\r\n                >\r\n                  ðŸ“ Ya lleguÃ© a la zona\r\n                </button>\r\n                \r\n                <button\r\n                  onClick={() => {\r\n                    if (window.confirm('Â¿Cancelar el recorrido?')) {\r\n                      cancelNavigation();\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    ...styles.gpsButton,\r\n                    background: 'white',\r\n                    color: '#ef4444',\r\n                    border: '2px solid #ef4444',\r\n                    marginBottom: 0\r\n                  }}\r\n                >\r\n                  âŒ Cancelar\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {/* Estado: Trabajando */}\r\n            {workStatus === 'working' && (\r\n              <div style={styles.card}>\r\n                <div style={{\r\n                  background: 'linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)',\r\n                  margin: '-16px -16px 16px -16px',\r\n                  padding: '20px',\r\n                  borderRadius: '12px 12px 0 0',\r\n                  border: '2px solid #22c55e'\r\n                }}>\r\n                  <div style={{ \r\n                    fontSize: '17px', \r\n                    fontWeight: '700', \r\n                    color: '#14532d',\r\n                    animation: 'pulse 2s infinite'\r\n                  }}>\r\n                    ðŸ”§ TRABAJANDO EN ZONA\r\n                  </div>\r\n                  <div style={{ fontSize: '15px', color: '#166534', marginTop: '8px' }}>\r\n                    ðŸ“ {selectedZona?.nombre}\r\n                  </div>\r\n                  <div style={{ \r\n                    fontSize: '13px', \r\n                    marginTop: '10px', \r\n                    color: '#166534'\r\n                  }}>\r\n                    â° Llegada: {formatTime(workLog.arrivalTime)}\r\n                  </div>\r\n                </div>\r\n                \r\n                <button\r\n                  onClick={() => {\r\n                    if (window.confirm('Â¿Confirmas que has completado la tarea?')) {\r\n                      finishWork();\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    ...styles.gpsButton,\r\n                    background: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\r\n                    color: 'white',\r\n                    fontSize: '16px',\r\n                    fontWeight: '700',\r\n                    marginBottom: '12px'\r\n                  }}\r\n                >\r\n                  âœ… COMPLETAR TAREA\r\n                </button>\r\n                \r\n                <button\r\n                  onClick={() => {\r\n                    if (window.confirm('Â¿Cancelar el trabajo?')) {\r\n                      cancelNavigation();\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    ...styles.gpsButton,\r\n                    background: 'white',\r\n                    color: '#ef4444',\r\n                    border: '2px solid #ef4444',\r\n                    marginBottom: 0\r\n                  }}\r\n                >\r\n                  âŒ Cancelar\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {/* Estado: Completado */}\r\n            {workStatus === 'completed' && (\r\n              <div style={{\r\n                ...styles.card,\r\n                background: 'linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%)',\r\n                border: '2px solid #6366f1'\r\n              }}>\r\n                <div style={{ \r\n                  fontSize: '17px', \r\n                  fontWeight: '700', \r\n                  color: '#312e81',\r\n                  textAlign: 'center',\r\n                  marginBottom: '16px'\r\n                }}>\r\n                  âœ… Trabajo Completado\r\n                </div>\r\n                <button\r\n                  onClick={resetWork}\r\n                  style={{\r\n                    ...styles.gpsButton,\r\n                    background: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\r\n                    color: 'white',\r\n                    marginBottom: 0\r\n                  }}\r\n                >\r\n                  ðŸ”„ Nuevo Trabajo\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* NotificaciÃ³n Toast */}\r\n      {toastNotification && (\r\n        <div style={{\r\n          ...styles.toast,\r\n          background: toastNotification.type === 'success' ? 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)' :\r\n                     toastNotification.type === 'error' ? 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)' :\r\n                     toastNotification.type === 'warning' ? 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)' :\r\n                     'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\r\n          color: 'white'\r\n        }}>\r\n          <span style={{ fontSize: '18px' }}>\r\n            {toastNotification.type === 'success' ? 'âœ…' :\r\n             toastNotification.type === 'error' ? 'âŒ' :\r\n             toastNotification.type === 'warning' ? 'âš ï¸' : 'â„¹ï¸'}\r\n          </span>\r\n          <span style={{ flex: 1, fontSize: '14px', fontWeight: '500' }}>\r\n            {toastNotification.message}\r\n          </span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal del panel de vehÃ­culo */}\r\n      {showVehiclePanel && (\r\n        <TrabajadorVehiclePanel \r\n          currentUser={currentUser}\r\n          onClose={() => setShowVehiclePanel(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Modal de Documentos */}\r\n      <DocumentosModal />\r\n\r\n      {/* Modal de Ã©xito */}\r\n      {successMessage && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0,0,0,0.5)',\r\n          zIndex: 2999,\r\n          animation: 'fadeIn 0.3s ease'\r\n        }}>\r\n          <div style={styles.successModal}>\r\n            <div style={{\r\n              fontSize: '60px',\r\n              marginBottom: '20px',\r\n              animation: 'bounce 0.5s ease'\r\n            }}>\r\n              âœ…\r\n            </div>\r\n            <h2 style={{\r\n              margin: '0 0 10px 0',\r\n              fontSize: '24px',\r\n              color: '#16a34a'\r\n            }}>\r\n              {successMessage.title}\r\n            </h2>\r\n            <p style={{\r\n              margin: 0,\r\n              fontSize: '16px',\r\n              color: '#6b7280'\r\n            }}>\r\n              {successMessage.message}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <style>{`\r\n        @keyframes slideInRight {\r\n          from {\r\n            transform: translateX(100%);\r\n            opacity: 0;\r\n          }\r\n          to {\r\n            transform: translateX(0);\r\n            opacity: 1;\r\n          }\r\n        }\r\n        \r\n        @keyframes slideIn {\r\n          from {\r\n            transform: translateY(-10px);\r\n            opacity: 0;\r\n          }\r\n          to {\r\n            transform: translateY(0);\r\n            opacity: 1;\r\n          }\r\n        }\r\n        \r\n        @keyframes fadeIn {\r\n          from { opacity: 0; }\r\n          to { opacity: 1; }\r\n        }\r\n        \r\n        @keyframes zoomIn {\r\n          from {\r\n            transform: translate(-50%, -50%) scale(0.8);\r\n            opacity: 0;\r\n          }\r\n          to {\r\n            transform: translate(-50%, -50%) scale(1);\r\n            opacity: 1;\r\n          }\r\n        }\r\n        \r\n        @keyframes bounce {\r\n          0%, 100% { transform: scale(1); }\r\n          50% { transform: scale(1.2); }\r\n        }\r\n        \r\n        @keyframes pulse {\r\n          0% {\r\n            box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);\r\n          }\r\n          50% {\r\n            box-shadow: 0 0 0 10px rgba(34, 197, 94, 0);\r\n          }\r\n          100% {\r\n            box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SistemaTrabajadoresFirebase;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"// src/components/TrabajadorVehiclePanel.js\nimport React,{useState,useEffect}from'react';import{vehiculosService,trabajadoresService}from'../services/firebaseservices';import{database}from'../config/firebase';import{ref as databaseRef,update,get}from'firebase/database';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TrabajadorVehiclePanel=_ref=>{let{currentUser,onClose}=_ref;// ... resto del c√≥digo\nconst[vehiculoAsignado,setVehiculoAsignado]=useState(null);const[loading,setLoading]=useState(false);const[loadingVehiculo,setLoadingVehiculo]=useState(true);// NUEVO: Estado de carga inicial\nconst[message,setMessage]=useState(null);const[trabajadorData,setTrabajadorData]=useState(null);// Estados del formulario de viaje\nconst[formViaje,setFormViaje]=useState({fechaSalida:new Date().toISOString().split('T')[0],// Fecha de hoy\nhoraSalida:new Date().toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit'}),kilometrajeSalida:'',destino:'',motivoViaje:'trabajo',// trabajo, emergencia, mantenimiento\nobservaciones:''});// Estado para el viaje activo\nconst[viajeActivo,setViajeActivo]=useState(null);// Cargar datos del trabajador y su veh√≠culo\nuseEffect(()=>{let mounted=true;const loadData=async()=>{console.log('üîÑ Iniciando carga de veh√≠culo para:',currentUser.uid);setLoadingVehiculo(true);try{// Esperar un momento para que Firebase se estabilice\nawait new Promise(resolve=>setTimeout(resolve,1000));// Verificar si el componente sigue montado\nif(!mounted)return;// Obtener datos del trabajador\nlet trabajadorData=null;await new Promise(resolve=>{const unsubscribe=trabajadoresService.getTrabajadorById(currentUser.uid,data=>{console.log('üë∑ Datos del trabajador:',data);trabajadorData=data;setTrabajadorData(data);if(data!==null&&data!==void 0&&data.viajeActivo){setViajeActivo(data.viajeActivo);}resolve();});// Timeout para evitar espera infinita\nsetTimeout(()=>resolve(),3000);});// Verificar veh√≠culos\nawait new Promise(resolve=>{const unsubscribe=vehiculosService.subscribeToVehiculos(vehiculosData=>{var _trabajadorData;console.log('üöõ Total de veh√≠culos:',vehiculosData.length);// Buscar veh√≠culo asignado\nlet vehiculoEncontrado=null;// Buscar por diferentes campos\nvehiculoEncontrado=vehiculosData.find(v=>{// SOLO buscar en trabajadorAsignado para evitar falsos positivos\nconst asignado=v.trabajadorAsignado===currentUser.uid;if(asignado){console.log('‚úÖ Veh√≠culo encontrado por asignaci√≥n directa:',v.nombre);}return asignado;});// Si no encuentra, buscar por ID en datos del trabajador\nif(!vehiculoEncontrado&&(_trabajadorData=trabajadorData)!==null&&_trabajadorData!==void 0&&_trabajadorData.vehiculoAsignado){vehiculoEncontrado=vehiculosData.find(v=>v.id===trabajadorData.vehiculoAsignado);if(vehiculoEncontrado){console.log('‚úÖ Veh√≠culo encontrado por ID del trabajador:',vehiculoEncontrado.nombre);}}// Si no encuentra, buscar por vehicleId del usuario\nif(!vehiculoEncontrado&&currentUser.vehicleId){vehiculoEncontrado=vehiculosData.find(v=>v.id===currentUser.vehicleId);if(vehiculoEncontrado){console.log('‚úÖ Veh√≠culo encontrado por vehicleId:',vehiculoEncontrado.nombre);}}if(vehiculoEncontrado){console.log('‚úÖ VEH√çCULO ASIGNADO:',vehiculoEncontrado);setVehiculoAsignado(vehiculoEncontrado);setFormViaje(prev=>{var _vehiculoEncontrado$k;return{...prev,kilometrajeSalida:((_vehiculoEncontrado$k=vehiculoEncontrado.kilometraje)===null||_vehiculoEncontrado$k===void 0?void 0:_vehiculoEncontrado$k.toString())||''};});}else{console.log('‚ùå NO HAY VEH√çCULO ASIGNADO');setVehiculoAsignado(null);}// Solo cambiar loading a false despu√©s de verificar todo\nif(mounted){setLoadingVehiculo(false);}resolve();});// Timeout para evitar espera infinita\nsetTimeout(()=>{if(mounted){setLoadingVehiculo(false);}resolve();},3000);});}catch(error){console.error('‚ùå Error al cargar datos:',error);if(mounted){setMessage({type:'error',text:'‚ùå Error al cargar informaci√≥n'});setLoadingVehiculo(false);setVehiculoAsignado(null);}}};loadData();// Cleanup function\nreturn()=>{mounted=false;};},[currentUser.uid]);// Iniciar viaje\nconst handleIniciarViaje=async()=>{// Validaciones\nif(!formViaje.destino){setMessage({type:'error',text:'‚ö†Ô∏è Debes indicar el destino'});return;}if(!formViaje.kilometrajeSalida){setMessage({type:'error',text:'‚ö†Ô∏è Debes indicar el kilometraje actual'});return;}setLoading(true);try{const viajeData={vehiculoId:vehiculoAsignado.id,vehiculoNombre:vehiculoAsignado.nombre,trabajadorId:currentUser.uid,trabajadorNombre:currentUser.name,fechaSalida:formViaje.fechaSalida,horaSalida:formViaje.horaSalida,kilometrajeSalida:parseInt(formViaje.kilometrajeSalida),destino:formViaje.destino,motivoViaje:formViaje.motivoViaje,observaciones:formViaje.observaciones,estado:'en_curso',iniciadoEn:new Date().toISOString()};// Actualizar estado del veh√≠culo a \"en_uso\"\nawait vehiculosService.updateVehiculoEstado(vehiculoAsignado.id,'en_uso',{asignadoA:currentUser.uid,asignadoNombre:currentUser.name,destino:formViaje.destino,kilometrajeUltimoViaje:parseInt(formViaje.kilometrajeSalida),viajeActivo:viajeData});// Actualizar datos del trabajador con el viaje activo\nawait trabajadoresService.updateTrabajadorData(currentUser.uid,{viajeActivo:viajeData,estadoActual:'en_viaje',ultimoDestino:formViaje.destino});setViajeActivo(viajeData);setMessage({type:'success',text:'‚úÖ Viaje iniciado exitosamente'});}catch(error){console.error('Error al iniciar viaje:',error);setMessage({type:'error',text:'‚ùå Error al iniciar el viaje'});}finally{setLoading(false);}};// Finalizar viaje\nconst handleFinalizarViaje=async()=>{const kilometrajeLlegada=prompt('Ingresa el kilometraje al finalizar el viaje:');if(!kilometrajeLlegada)return;setLoading(true);try{const horaLlegada=new Date().toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit'});const kmRecorridos=parseInt(kilometrajeLlegada)-viajeActivo.kilometrajeSalida;// Actualizar veh√≠culo\nawait vehiculosService.updateVehiculoEstado(vehiculoAsignado.id,'disponible',{asignadoA:currentUser.uid,kilometraje:parseInt(kilometrajeLlegada),ultimoViaje:{...viajeActivo,fechaLlegada:new Date().toISOString().split('T')[0],horaLlegada:horaLlegada,kilometrajeLlegada:parseInt(kilometrajeLlegada),kilometrosRecorridos:kmRecorridos,estado:'finalizado'}});// Limpiar viaje activo del trabajador\nawait trabajadoresService.updateTrabajadorData(currentUser.uid,{viajeActivo:null,estadoActual:'disponible',ultimoViaje:{...viajeActivo,fechaLlegada:new Date().toISOString().split('T')[0],horaLlegada:horaLlegada,kilometrajeLlegada:parseInt(kilometrajeLlegada),kilometrosRecorridos:kmRecorridos}});setViajeActivo(null);setMessage({type:'success',text:`‚úÖ Viaje finalizado. Recorriste ${kmRecorridos} km`});}catch(error){console.error('Error al finalizar viaje:',error);setMessage({type:'error',text:'‚ùå Error al finalizar el viaje'});}finally{setLoading(false);}};// Si est√° cargando, mostrar indicador de carga\nif(loadingVehiculo){return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0, 0, 0, 0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:9999,padding:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:'30px',maxWidth:'400px',width:'100%',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'20px'},children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"h3\",{style:{color:'#1f2937',marginBottom:'10px'},children:\"Cargando informaci\\xF3n...\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280'},children:\"Verificando veh\\xEDculo asignado\"})]})});}// Si no hay veh√≠culo asignado (despu√©s de cargar)\nif(!vehiculoAsignado){return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0, 0, 0, 0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:9999,padding:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:'30px',maxWidth:'400px',width:'100%',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'20px'},children:\"\\uD83D\\uDEAB\"}),/*#__PURE__*/_jsx(\"h3\",{style:{color:'#1f2937',marginBottom:'10px'},children:\"No tienes veh\\xEDculo asignado\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280',marginBottom:'20px'},children:\"Contacta con tu supervisor para que te asigne un veh\\xEDculo\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{padding:'10px 20px',background:'#6b7280',color:'white',border:'none',borderRadius:'8px',fontSize:'14px',cursor:'pointer'},children:\"Cerrar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{console.log('üßπ Limpiando asignaciones incorrectas...');try{// Limpiar TODOS los veh√≠culos mal asignados\nconst vehiculosRef=databaseRef(database,'vehiculos');const snapshot=await get(vehiculosRef);const vehiculos=snapshot.val()||{};for(const[id,vehiculo]of Object.entries(vehiculos)){if(vehiculo.asignadoA===currentUser.uid||vehiculo.operadorAsignado===currentUser.uid){console.log(`Limpiando veh√≠culo ${id}...`);await update(databaseRef(database,`vehiculos/${id}`),{asignadoA:null,operadorAsignado:null});}}// Limpiar el trabajador\nawait update(databaseRef(database,`trabajadores/${currentUser.uid}`),{vehiculoAsignado:null,vehicleId:null});alert('‚úÖ Limpieza completada. Por favor recarga la p√°gina.');window.location.reload();}catch(error){console.error('Error:',error);alert('Error: '+error.message);}},style:{padding:'10px 20px',background:'#dc2626',color:'white',border:'none',borderRadius:'8px',fontSize:'14px',cursor:'pointer',marginBottom:'10px'},children:\"\\uD83E\\uDDF9 LIMPIAR TODAS LAS ASIGNACIONES (DEBUG)\"})]})});}// Solo mostrar el formulario si hay veh√≠culo asignado\nif(!vehiculoAsignado){return null;// Seguridad adicional\n}return/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0, 0, 0, 0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:9999,padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',width:'100%',maxWidth:'600px',maxHeight:'90vh',overflow:'auto',boxShadow:'0 10px 40px rgba(0,0,0,0.2)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',borderBottom:'1px solid #e5e7eb',background:'linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)',borderRadius:'12px 12px 0 0',color:'white'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:'24px',fontWeight:'600'},children:\"\\uD83D\\uDE9B Control de Veh\\xEDculo\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'5px 0 0 0',fontSize:'14px',opacity:0.9},children:viajeActivo?'Viaje en curso':'Registrar salida de veh√≠culo'})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{background:'rgba(255, 255, 255, 0.2)',border:'none',color:'white',padding:'8px',borderRadius:'6px',cursor:'pointer',fontSize:'18px'},children:\"\\u2716\"})]})}),message&&/*#__PURE__*/_jsx(\"div\",{style:{margin:'20px 20px 0',padding:'12px',borderRadius:'8px',background:message.type==='error'?'#fee2e2':'#d1fae5',color:message.type==='error'?'#dc2626':'#065f46',fontSize:'14px',fontWeight:'500'},children:message.text}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',background:'#f0f9ff',borderBottom:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 15px 0',color:'#0c4a6e',fontSize:'16px',fontWeight:'600'},children:\"Veh\\xEDculo Asignado\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(2, 1fr)',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px',color:'#64748b'},children:\"Veh\\xEDculo:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0',fontWeight:'600',color:'#0c4a6e'},children:vehiculoAsignado.nombre})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px',color:'#64748b'},children:\"Patente:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0',fontWeight:'600',color:'#0c4a6e'},children:vehiculoAsignado.patente||'Sin patente'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px',color:'#64748b'},children:\"Marca/Modelo:\"}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'4px 0',fontWeight:'600',color:'#0c4a6e'},children:[vehiculoAsignado.marca,\" \",vehiculoAsignado.modelo]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px',color:'#64748b'},children:\"Estado:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0',fontWeight:'600'},children:/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',borderRadius:'4px',fontSize:'12px',background:viajeActivo?'#fef3c7':'#dcfce7',color:viajeActivo?'#92400e':'#15803d'},children:viajeActivo?'üöó En viaje':'‚úÖ Disponible'})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px'},children:!viajeActivo?/*#__PURE__*/// Formulario para iniciar viaje\n_jsx(\"form\",{onSubmit:e=>{e.preventDefault();handleIniciarViaje();},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"\\uD83D\\uDCC5 Fecha de Salida\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:formViaje.fechaSalida,onChange:e=>setFormViaje({...formViaje,fechaSalida:e.target.value}),style:{width:'100%',padding:'10px',border:'2px solid #e5e7eb',borderRadius:'8px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"\\u23F0 Hora de Salida\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:formViaje.horaSalida,onChange:e=>setFormViaje({...formViaje,horaSalida:e.target.value}),style:{width:'100%',padding:'10px',border:'2px solid #e5e7eb',borderRadius:'8px',fontSize:'14px'}})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"\\uD83D\\uDE97 Kilometraje Actual\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:formViaje.kilometrajeSalida,onChange:e=>setFormViaje({...formViaje,kilometrajeSalida:e.target.value}),placeholder:\"Ej: 45000\",required:true,style:{width:'100%',padding:'10px',border:'2px solid #e5e7eb',borderRadius:'8px',fontSize:'14px'}}),/*#__PURE__*/_jsxs(\"small\",{style:{color:'#6b7280',fontSize:'12px'},children:[\"\\xDAltimo registro: \",vehiculoAsignado.kilometraje||0,\" km\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"\\uD83D\\uDCCD Destino\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formViaje.destino,onChange:e=>setFormViaje({...formViaje,destino:e.target.value}),placeholder:\"Ingresa el lugar de destino\",required:true,style:{width:'100%',padding:'10px',border:'2px solid #e5e7eb',borderRadius:'8px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"\\uD83D\\uDCCB Motivo del Viaje\"}),/*#__PURE__*/_jsxs(\"select\",{value:formViaje.motivoViaje,onChange:e=>setFormViaje({...formViaje,motivoViaje:e.target.value}),style:{width:'100%',padding:'10px',border:'2px solid #e5e7eb',borderRadius:'8px',fontSize:'14px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"trabajo\",children:\"Trabajo en terreno\"}),/*#__PURE__*/_jsx(\"option\",{value:\"emergencia\",children:\"Emergencia\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mantenimiento\",children:\"Mantenimiento\"}),/*#__PURE__*/_jsx(\"option\",{value:\"traslado\",children:\"Traslado de personal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"carga\",children:\"Transporte de carga\"}),/*#__PURE__*/_jsx(\"option\",{value:\"otro\",children:\"Otro\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'6px',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"\\uD83D\\uDCDD Observaciones (Opcional)\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formViaje.observaciones,onChange:e=>setFormViaje({...formViaje,observaciones:e.target.value}),placeholder:\"Detalles adicionales del viaje...\",rows:3,style:{width:'100%',padding:'10px',border:'2px solid #e5e7eb',borderRadius:'8px',fontSize:'14px',resize:'none'}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:{padding:'14px',background:loading?'#9ca3af':'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',fontWeight:'600',cursor:loading?'not-allowed':'pointer',display:'flex',alignItems:'center',justifyContent:'center',gap:'10px',transition:'transform 0.2s'},onMouseEnter:e=>!loading&&(e.currentTarget.style.transform='scale(1.02)'),onMouseLeave:e=>e.currentTarget.style.transform='scale(1)',children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{style:{width:'16px',height:'16px',border:'2px solid white',borderTop:'2px solid transparent',borderRadius:'50%',animation:'spin 1s linear infinite'}}),\"Iniciando...\"]}):/*#__PURE__*/_jsx(_Fragment,{children:\"\\uD83D\\uDE80 INICIAR VIAJE\"})})]})}):/*#__PURE__*/// Informaci√≥n del viaje activo\n_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',background:'#fef3c7',borderRadius:'8px',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 15px 0',color:'#92400e',fontSize:'18px',fontWeight:'600'},children:\"\\uD83D\\uDE97 Viaje en Curso\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'10px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px',color:'#92400e'},children:\"Destino:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0',fontWeight:'600',fontSize:'15px'},children:viajeActivo.destino})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px',color:'#92400e'},children:\"Hora de salida:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0',fontWeight:'600'},children:viajeActivo.horaSalida})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px',color:'#92400e'},children:\"Km de salida:\"}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'4px 0',fontWeight:'600'},children:[viajeActivo.kilometrajeSalida,\" km\"]})]})]}),viajeActivo.observaciones&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'13px',color:'#92400e'},children:\"Observaciones:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0',fontSize:'14px'},children:viajeActivo.observaciones})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFinalizarViaje,disabled:loading,style:{width:'100%',padding:'14px',background:loading?'#9ca3af':'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',color:'white',border:'none',borderRadius:'8px',fontSize:'16px',fontWeight:'600',cursor:loading?'not-allowed':'pointer',display:'flex',alignItems:'center',justifyContent:'center',gap:'10px'},children:loading?'Finalizando...':'üèÅ FINALIZAR VIAJE'})]})})]}),/*#__PURE__*/_jsx(\"style\",{children:`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `})]});};export default TrabajadorVehiclePanel;","map":{"version":3,"names":["React","useState","useEffect","vehiculosService","trabajadoresService","database","ref","databaseRef","update","get","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TrabajadorVehiclePanel","_ref","currentUser","onClose","vehiculoAsignado","setVehiculoAsignado","loading","setLoading","loadingVehiculo","setLoadingVehiculo","message","setMessage","trabajadorData","setTrabajadorData","formViaje","setFormViaje","fechaSalida","Date","toISOString","split","horaSalida","toLocaleTimeString","hour","minute","kilometrajeSalida","destino","motivoViaje","observaciones","viajeActivo","setViajeActivo","mounted","loadData","console","log","uid","Promise","resolve","setTimeout","unsubscribe","getTrabajadorById","data","subscribeToVehiculos","vehiculosData","_trabajadorData","length","vehiculoEncontrado","find","v","asignado","trabajadorAsignado","nombre","id","vehicleId","prev","_vehiculoEncontrado$k","kilometraje","toString","error","type","text","handleIniciarViaje","viajeData","vehiculoId","vehiculoNombre","trabajadorId","trabajadorNombre","name","parseInt","estado","iniciadoEn","updateVehiculoEstado","asignadoA","asignadoNombre","kilometrajeUltimoViaje","updateTrabajadorData","estadoActual","ultimoDestino","handleFinalizarViaje","kilometrajeLlegada","prompt","horaLlegada","kmRecorridos","ultimoViaje","fechaLlegada","kilometrosRecorridos","style","position","top","left","right","bottom","background","display","justifyContent","alignItems","zIndex","padding","children","borderRadius","maxWidth","width","textAlign","fontSize","marginBottom","color","onClick","border","cursor","vehiculosRef","snapshot","vehiculos","val","vehiculo","Object","entries","operadorAsignado","alert","window","location","reload","maxHeight","overflow","boxShadow","borderBottom","margin","fontWeight","opacity","gridTemplateColumns","gap","patente","marca","modelo","onSubmit","e","preventDefault","value","onChange","target","placeholder","required","rows","resize","disabled","transition","onMouseEnter","currentTarget","transform","onMouseLeave","height","borderTop","animation"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/TrabajadorVehiclePanel.js"],"sourcesContent":["// src/components/TrabajadorVehiclePanel.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { vehiculosService, trabajadoresService } from '../services/firebaseservices';\r\nimport { database } from '../config/firebase';\r\nimport { ref as databaseRef, update, get } from 'firebase/database';\r\n\r\nconst TrabajadorVehiclePanel = ({ currentUser, onClose }) => {\r\n  // ... resto del c√≥digo\r\n  const [vehiculoAsignado, setVehiculoAsignado] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loadingVehiculo, setLoadingVehiculo] = useState(true); // NUEVO: Estado de carga inicial\r\n  const [message, setMessage] = useState(null);\r\n  const [trabajadorData, setTrabajadorData] = useState(null);\r\n\r\n  // Estados del formulario de viaje\r\n  const [formViaje, setFormViaje] = useState({\r\n    fechaSalida: new Date().toISOString().split('T')[0], // Fecha de hoy\r\n    horaSalida: new Date().toLocaleTimeString('es-CL', { hour: '2-digit', minute: '2-digit' }),\r\n    kilometrajeSalida: '',\r\n    destino: '',\r\n    motivoViaje: 'trabajo', // trabajo, emergencia, mantenimiento\r\n    observaciones: ''\r\n  });\r\n\r\n  // Estado para el viaje activo\r\n  const [viajeActivo, setViajeActivo] = useState(null);\r\n\r\n  // Cargar datos del trabajador y su veh√≠culo\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    const loadData = async () => {\r\n      console.log('üîÑ Iniciando carga de veh√≠culo para:', currentUser.uid);\r\n      setLoadingVehiculo(true);\r\n\r\n      try {\r\n        // Esperar un momento para que Firebase se estabilice\r\n        await new Promise(resolve => setTimeout(resolve, 1000));\r\n\r\n        // Verificar si el componente sigue montado\r\n        if (!mounted) return;\r\n\r\n        // Obtener datos del trabajador\r\n        let trabajadorData = null;\r\n        await new Promise((resolve) => {\r\n          const unsubscribe = trabajadoresService.getTrabajadorById(\r\n            currentUser.uid,\r\n            (data) => {\r\n              console.log('üë∑ Datos del trabajador:', data);\r\n              trabajadorData = data;\r\n              setTrabajadorData(data);\r\n              if (data?.viajeActivo) {\r\n                setViajeActivo(data.viajeActivo);\r\n              }\r\n              resolve();\r\n            }\r\n          );\r\n\r\n          // Timeout para evitar espera infinita\r\n          setTimeout(() => resolve(), 3000);\r\n        });\r\n\r\n        // Verificar veh√≠culos\r\n        await new Promise((resolve) => {\r\n          const unsubscribe = vehiculosService.subscribeToVehiculos((vehiculosData) => {\r\n            console.log('üöõ Total de veh√≠culos:', vehiculosData.length);\r\n\r\n            // Buscar veh√≠culo asignado\r\n            let vehiculoEncontrado = null;\r\n\r\n            // Buscar por diferentes campos\r\n            vehiculoEncontrado = vehiculosData.find(v => {\r\n              // SOLO buscar en trabajadorAsignado para evitar falsos positivos\r\n              const asignado = v.trabajadorAsignado === currentUser.uid;\r\n\r\n              if (asignado) {\r\n                console.log('‚úÖ Veh√≠culo encontrado por asignaci√≥n directa:', v.nombre);\r\n              }\r\n              return asignado;\r\n            });\r\n\r\n            // Si no encuentra, buscar por ID en datos del trabajador\r\n            if (!vehiculoEncontrado && trabajadorData?.vehiculoAsignado) {\r\n              vehiculoEncontrado = vehiculosData.find(v => v.id === trabajadorData.vehiculoAsignado);\r\n              if (vehiculoEncontrado) {\r\n                console.log('‚úÖ Veh√≠culo encontrado por ID del trabajador:', vehiculoEncontrado.nombre);\r\n              }\r\n            }\r\n\r\n            // Si no encuentra, buscar por vehicleId del usuario\r\n            if (!vehiculoEncontrado && currentUser.vehicleId) {\r\n              vehiculoEncontrado = vehiculosData.find(v => v.id === currentUser.vehicleId);\r\n              if (vehiculoEncontrado) {\r\n                console.log('‚úÖ Veh√≠culo encontrado por vehicleId:', vehiculoEncontrado.nombre);\r\n              }\r\n            }\r\n\r\n            if (vehiculoEncontrado) {\r\n              console.log('‚úÖ VEH√çCULO ASIGNADO:', vehiculoEncontrado);\r\n              setVehiculoAsignado(vehiculoEncontrado);\r\n              setFormViaje(prev => ({\r\n                ...prev,\r\n                kilometrajeSalida: vehiculoEncontrado.kilometraje?.toString() || ''\r\n              }));\r\n            } else {\r\n              console.log('‚ùå NO HAY VEH√çCULO ASIGNADO');\r\n              setVehiculoAsignado(null);\r\n            }\r\n\r\n            // Solo cambiar loading a false despu√©s de verificar todo\r\n            if (mounted) {\r\n              setLoadingVehiculo(false);\r\n            }\r\n\r\n            resolve();\r\n          });\r\n\r\n          // Timeout para evitar espera infinita\r\n          setTimeout(() => {\r\n            if (mounted) {\r\n              setLoadingVehiculo(false);\r\n            }\r\n            resolve();\r\n          }, 3000);\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error('‚ùå Error al cargar datos:', error);\r\n        if (mounted) {\r\n          setMessage({\r\n            type: 'error',\r\n            text: '‚ùå Error al cargar informaci√≥n'\r\n          });\r\n          setLoadingVehiculo(false);\r\n          setVehiculoAsignado(null);\r\n        }\r\n      }\r\n    };\r\n\r\n    loadData();\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [currentUser.uid]);\r\n\r\n  // Iniciar viaje\r\n  const handleIniciarViaje = async () => {\r\n    // Validaciones\r\n    if (!formViaje.destino) {\r\n      setMessage({ type: 'error', text: '‚ö†Ô∏è Debes indicar el destino' });\r\n      return;\r\n    }\r\n\r\n    if (!formViaje.kilometrajeSalida) {\r\n      setMessage({ type: 'error', text: '‚ö†Ô∏è Debes indicar el kilometraje actual' });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const viajeData = {\r\n        vehiculoId: vehiculoAsignado.id,\r\n        vehiculoNombre: vehiculoAsignado.nombre,\r\n        trabajadorId: currentUser.uid,\r\n        trabajadorNombre: currentUser.name,\r\n        fechaSalida: formViaje.fechaSalida,\r\n        horaSalida: formViaje.horaSalida,\r\n        kilometrajeSalida: parseInt(formViaje.kilometrajeSalida),\r\n        destino: formViaje.destino,\r\n        motivoViaje: formViaje.motivoViaje,\r\n        observaciones: formViaje.observaciones,\r\n        estado: 'en_curso',\r\n        iniciadoEn: new Date().toISOString()\r\n      };\r\n\r\n      // Actualizar estado del veh√≠culo a \"en_uso\"\r\n      await vehiculosService.updateVehiculoEstado(vehiculoAsignado.id, 'en_uso', {\r\n        asignadoA: currentUser.uid,\r\n        asignadoNombre: currentUser.name,\r\n        destino: formViaje.destino,\r\n        kilometrajeUltimoViaje: parseInt(formViaje.kilometrajeSalida),\r\n        viajeActivo: viajeData\r\n      });\r\n\r\n      // Actualizar datos del trabajador con el viaje activo\r\n      await trabajadoresService.updateTrabajadorData(currentUser.uid, {\r\n        viajeActivo: viajeData,\r\n        estadoActual: 'en_viaje',\r\n        ultimoDestino: formViaje.destino\r\n      });\r\n\r\n      setViajeActivo(viajeData);\r\n      setMessage({\r\n        type: 'success',\r\n        text: '‚úÖ Viaje iniciado exitosamente'\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error al iniciar viaje:', error);\r\n      setMessage({\r\n        type: 'error',\r\n        text: '‚ùå Error al iniciar el viaje'\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Finalizar viaje\r\n  const handleFinalizarViaje = async () => {\r\n    const kilometrajeLlegada = prompt('Ingresa el kilometraje al finalizar el viaje:');\r\n    if (!kilometrajeLlegada) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      const horaLlegada = new Date().toLocaleTimeString('es-CL', { hour: '2-digit', minute: '2-digit' });\r\n      const kmRecorridos = parseInt(kilometrajeLlegada) - viajeActivo.kilometrajeSalida;\r\n\r\n      // Actualizar veh√≠culo\r\n      await vehiculosService.updateVehiculoEstado(vehiculoAsignado.id, 'disponible', {\r\n        asignadoA: currentUser.uid,\r\n        kilometraje: parseInt(kilometrajeLlegada),\r\n        ultimoViaje: {\r\n          ...viajeActivo,\r\n          fechaLlegada: new Date().toISOString().split('T')[0],\r\n          horaLlegada: horaLlegada,\r\n          kilometrajeLlegada: parseInt(kilometrajeLlegada),\r\n          kilometrosRecorridos: kmRecorridos,\r\n          estado: 'finalizado'\r\n        }\r\n      });\r\n\r\n      // Limpiar viaje activo del trabajador\r\n      await trabajadoresService.updateTrabajadorData(currentUser.uid, {\r\n        viajeActivo: null,\r\n        estadoActual: 'disponible',\r\n        ultimoViaje: {\r\n          ...viajeActivo,\r\n          fechaLlegada: new Date().toISOString().split('T')[0],\r\n          horaLlegada: horaLlegada,\r\n          kilometrajeLlegada: parseInt(kilometrajeLlegada),\r\n          kilometrosRecorridos: kmRecorridos\r\n        }\r\n      });\r\n\r\n      setViajeActivo(null);\r\n      setMessage({\r\n        type: 'success',\r\n        text: `‚úÖ Viaje finalizado. Recorriste ${kmRecorridos} km`\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error al finalizar viaje:', error);\r\n      setMessage({\r\n        type: 'error',\r\n        text: '‚ùå Error al finalizar el viaje'\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Si est√° cargando, mostrar indicador de carga\r\n  if (loadingVehiculo) {\r\n    return (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0, 0, 0, 0.5)',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        zIndex: 9999,\r\n        padding: '20px'\r\n      }}>\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '12px',\r\n          padding: '30px',\r\n          maxWidth: '400px',\r\n          width: '100%',\r\n          textAlign: 'center'\r\n        }}>\r\n          <div style={{ fontSize: '48px', marginBottom: '20px' }}>‚è≥</div>\r\n          <h3 style={{ color: '#1f2937', marginBottom: '10px' }}>\r\n            Cargando informaci√≥n...\r\n          </h3>\r\n          <p style={{ color: '#6b7280' }}>\r\n            Verificando veh√≠culo asignado\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Si no hay veh√≠culo asignado (despu√©s de cargar)\r\n  if (!vehiculoAsignado) {\r\n    return (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0, 0, 0, 0.5)',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        zIndex: 9999,\r\n        padding: '20px'\r\n      }}>\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '12px',\r\n          padding: '30px',\r\n          maxWidth: '400px',\r\n          width: '100%',\r\n          textAlign: 'center'\r\n        }}>\r\n          <div style={{ fontSize: '48px', marginBottom: '20px' }}>üö´</div>\r\n          <h3 style={{ color: '#1f2937', marginBottom: '10px' }}>\r\n            No tienes veh√≠culo asignado\r\n          </h3>\r\n          <p style={{ color: '#6b7280', marginBottom: '20px' }}>\r\n            Contacta con tu supervisor para que te asigne un veh√≠culo\r\n          </p>\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              padding: '10px 20px',\r\n              background: '#6b7280',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              fontSize: '14px',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            Cerrar\r\n          </button>\r\n          {/* Bot√≥n temporal para limpiar datos mal guardados */}\r\n          <button\r\n            onClick={async () => {\r\n              console.log('üßπ Limpiando asignaciones incorrectas...');\r\n              try {\r\n                // Limpiar TODOS los veh√≠culos mal asignados\r\n                const vehiculosRef = databaseRef(database, 'vehiculos');\r\n                const snapshot = await get(vehiculosRef);\r\n                const vehiculos = snapshot.val() || {};\r\n\r\n                for (const [id, vehiculo] of Object.entries(vehiculos)) {\r\n                  if (vehiculo.asignadoA === currentUser.uid ||\r\n                    vehiculo.operadorAsignado === currentUser.uid) {\r\n                    console.log(`Limpiando veh√≠culo ${id}...`);\r\n                    await update(databaseRef(database, `vehiculos/${id}`), {\r\n                      asignadoA: null,\r\n                      operadorAsignado: null\r\n                    });\r\n                  }\r\n                }\r\n\r\n                // Limpiar el trabajador\r\n                await update(databaseRef(database, `trabajadores/${currentUser.uid}`), {\r\n                  vehiculoAsignado: null,\r\n                  vehicleId: null\r\n                });\r\n\r\n                alert('‚úÖ Limpieza completada. Por favor recarga la p√°gina.');\r\n                window.location.reload();\r\n\r\n              } catch (error) {\r\n                console.error('Error:', error);\r\n                alert('Error: ' + error.message);\r\n              }\r\n            }}\r\n            style={{\r\n              padding: '10px 20px',\r\n              background: '#dc2626',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              fontSize: '14px',\r\n              cursor: 'pointer',\r\n              marginBottom: '10px'\r\n            }}\r\n          >\r\n            üßπ LIMPIAR TODAS LAS ASIGNACIONES (DEBUG)\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Solo mostrar el formulario si hay veh√≠culo asignado\r\n  if (!vehiculoAsignado) {\r\n    return null; // Seguridad adicional\r\n  }\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      background: 'rgba(0, 0, 0, 0.5)',\r\n      display: 'flex',\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      zIndex: 9999,\r\n      padding: '20px'\r\n    }}>\r\n      <div style={{\r\n        background: 'white',\r\n        borderRadius: '12px',\r\n        width: '100%',\r\n        maxWidth: '600px',\r\n        maxHeight: '90vh',\r\n        overflow: 'auto',\r\n        boxShadow: '0 10px 40px rgba(0,0,0,0.2)'\r\n      }}>\r\n        {/* Header */}\r\n        <div style={{\r\n          padding: '20px',\r\n          borderBottom: '1px solid #e5e7eb',\r\n          background: 'linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)',\r\n          borderRadius: '12px 12px 0 0',\r\n          color: 'white'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center'\r\n          }}>\r\n            <div>\r\n              <h2 style={{ margin: 0, fontSize: '24px', fontWeight: '600' }}>\r\n                üöõ Control de Veh√≠culo\r\n              </h2>\r\n              <p style={{ margin: '5px 0 0 0', fontSize: '14px', opacity: 0.9 }}>\r\n                {viajeActivo ? 'Viaje en curso' : 'Registrar salida de veh√≠culo'}\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              style={{\r\n                background: 'rgba(255, 255, 255, 0.2)',\r\n                border: 'none',\r\n                color: 'white',\r\n                padding: '8px',\r\n                borderRadius: '6px',\r\n                cursor: 'pointer',\r\n                fontSize: '18px'\r\n              }}\r\n            >\r\n              ‚úñ\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Mensaje */}\r\n        {message && (\r\n          <div style={{\r\n            margin: '20px 20px 0',\r\n            padding: '12px',\r\n            borderRadius: '8px',\r\n            background: message.type === 'error' ? '#fee2e2' : '#d1fae5',\r\n            color: message.type === 'error' ? '#dc2626' : '#065f46',\r\n            fontSize: '14px',\r\n            fontWeight: '500'\r\n          }}>\r\n            {message.text}\r\n          </div>\r\n        )}\r\n\r\n        {/* Informaci√≥n del veh√≠culo */}\r\n        <div style={{\r\n          padding: '20px',\r\n          background: '#f0f9ff',\r\n          borderBottom: '1px solid #e5e7eb'\r\n        }}>\r\n          <h3 style={{\r\n            margin: '0 0 15px 0',\r\n            color: '#0c4a6e',\r\n            fontSize: '16px',\r\n            fontWeight: '600'\r\n          }}>\r\n            Veh√≠culo Asignado\r\n          </h3>\r\n          <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: 'repeat(2, 1fr)',\r\n            gap: '15px'\r\n          }}>\r\n            <div>\r\n              <span style={{ fontSize: '12px', color: '#64748b' }}>Veh√≠culo:</span>\r\n              <p style={{ margin: '4px 0', fontWeight: '600', color: '#0c4a6e' }}>\r\n                {vehiculoAsignado.nombre}\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <span style={{ fontSize: '12px', color: '#64748b' }}>Patente:</span>\r\n              <p style={{ margin: '4px 0', fontWeight: '600', color: '#0c4a6e' }}>\r\n                {vehiculoAsignado.patente || 'Sin patente'}\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <span style={{ fontSize: '12px', color: '#64748b' }}>Marca/Modelo:</span>\r\n              <p style={{ margin: '4px 0', fontWeight: '600', color: '#0c4a6e' }}>\r\n                {vehiculoAsignado.marca} {vehiculoAsignado.modelo}\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <span style={{ fontSize: '12px', color: '#64748b' }}>Estado:</span>\r\n              <p style={{ margin: '4px 0', fontWeight: '600' }}>\r\n                <span style={{\r\n                  padding: '4px 8px',\r\n                  borderRadius: '4px',\r\n                  fontSize: '12px',\r\n                  background: viajeActivo ? '#fef3c7' : '#dcfce7',\r\n                  color: viajeActivo ? '#92400e' : '#15803d'\r\n                }}>\r\n                  {viajeActivo ? 'üöó En viaje' : '‚úÖ Disponible'}\r\n                </span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Contenido principal */}\r\n        <div style={{ padding: '20px' }}>\r\n          {!viajeActivo ? (\r\n            // Formulario para iniciar viaje\r\n            <form onSubmit={(e) => { e.preventDefault(); handleIniciarViaje(); }}>\r\n              <div style={{ display: 'grid', gap: '15px' }}>\r\n                {/* Fecha y hora de salida */}\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px' }}>\r\n                  <div>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      marginBottom: '6px',\r\n                      fontSize: '14px',\r\n                      fontWeight: '500',\r\n                      color: '#374151'\r\n                    }}>\r\n                      üìÖ Fecha de Salida\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={formViaje.fechaSalida}\r\n                      onChange={(e) => setFormViaje({ ...formViaje, fechaSalida: e.target.value })}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '10px',\r\n                        border: '2px solid #e5e7eb',\r\n                        borderRadius: '8px',\r\n                        fontSize: '14px'\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      marginBottom: '6px',\r\n                      fontSize: '14px',\r\n                      fontWeight: '500',\r\n                      color: '#374151'\r\n                    }}>\r\n                      ‚è∞ Hora de Salida\r\n                    </label>\r\n                    <input\r\n                      type=\"time\"\r\n                      value={formViaje.horaSalida}\r\n                      onChange={(e) => setFormViaje({ ...formViaje, horaSalida: e.target.value })}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '10px',\r\n                        border: '2px solid #e5e7eb',\r\n                        borderRadius: '8px',\r\n                        fontSize: '14px'\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Kilometraje */}\r\n                <div>\r\n                  <label style={{\r\n                    display: 'block',\r\n                    marginBottom: '6px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '500',\r\n                    color: '#374151'\r\n                  }}>\r\n                    üöó Kilometraje Actual\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={formViaje.kilometrajeSalida}\r\n                    onChange={(e) => setFormViaje({ ...formViaje, kilometrajeSalida: e.target.value })}\r\n                    placeholder=\"Ej: 45000\"\r\n                    required\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '2px solid #e5e7eb',\r\n                      borderRadius: '8px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  />\r\n                  <small style={{ color: '#6b7280', fontSize: '12px' }}>\r\n                    √öltimo registro: {vehiculoAsignado.kilometraje || 0} km\r\n                  </small>\r\n                </div>\r\n\r\n                {/* Destino */}\r\n                <div>\r\n                  <label style={{\r\n                    display: 'block',\r\n                    marginBottom: '6px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '500',\r\n                    color: '#374151'\r\n                  }}>\r\n                    üìç Destino\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={formViaje.destino}\r\n                    onChange={(e) => setFormViaje({ ...formViaje, destino: e.target.value })}\r\n                    placeholder=\"Ingresa el lugar de destino\"\r\n                    required\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '2px solid #e5e7eb',\r\n                      borderRadius: '8px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                {/* Motivo del viaje */}\r\n                <div>\r\n                  <label style={{\r\n                    display: 'block',\r\n                    marginBottom: '6px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '500',\r\n                    color: '#374151'\r\n                  }}>\r\n                    üìã Motivo del Viaje\r\n                  </label>\r\n                  <select\r\n                    value={formViaje.motivoViaje}\r\n                    onChange={(e) => setFormViaje({ ...formViaje, motivoViaje: e.target.value })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '2px solid #e5e7eb',\r\n                      borderRadius: '8px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  >\r\n                    <option value=\"trabajo\">Trabajo en terreno</option>\r\n                    <option value=\"emergencia\">Emergencia</option>\r\n                    <option value=\"mantenimiento\">Mantenimiento</option>\r\n                    <option value=\"traslado\">Traslado de personal</option>\r\n                    <option value=\"carga\">Transporte de carga</option>\r\n                    <option value=\"otro\">Otro</option>\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Observaciones */}\r\n                <div>\r\n                  <label style={{\r\n                    display: 'block',\r\n                    marginBottom: '6px',\r\n                    fontSize: '14px',\r\n                    fontWeight: '500',\r\n                    color: '#374151'\r\n                  }}>\r\n                    üìù Observaciones (Opcional)\r\n                  </label>\r\n                  <textarea\r\n                    value={formViaje.observaciones}\r\n                    onChange={(e) => setFormViaje({ ...formViaje, observaciones: e.target.value })}\r\n                    placeholder=\"Detalles adicionales del viaje...\"\r\n                    rows={3}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '2px solid #e5e7eb',\r\n                      borderRadius: '8px',\r\n                      fontSize: '14px',\r\n                      resize: 'none'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                {/* Bot√≥n de acci√≥n */}\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  style={{\r\n                    padding: '14px',\r\n                    background: loading ? '#9ca3af' : 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\r\n                    color: 'white',\r\n                    border: 'none',\r\n                    borderRadius: '8px',\r\n                    fontSize: '16px',\r\n                    fontWeight: '600',\r\n                    cursor: loading ? 'not-allowed' : 'pointer',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    gap: '10px',\r\n                    transition: 'transform 0.2s'\r\n                  }}\r\n                  onMouseEnter={(e) => !loading && (e.currentTarget.style.transform = 'scale(1.02)')}\r\n                  onMouseLeave={(e) => e.currentTarget.style.transform = 'scale(1)'}\r\n                >\r\n                  {loading ? (\r\n                    <>\r\n                      <span style={{\r\n                        width: '16px',\r\n                        height: '16px',\r\n                        border: '2px solid white',\r\n                        borderTop: '2px solid transparent',\r\n                        borderRadius: '50%',\r\n                        animation: 'spin 1s linear infinite'\r\n                      }}></span>\r\n                      Iniciando...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      üöÄ INICIAR VIAJE\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          ) : (\r\n            // Informaci√≥n del viaje activo\r\n            <div>\r\n              <div style={{\r\n                padding: '20px',\r\n                background: '#fef3c7',\r\n                borderRadius: '8px',\r\n                marginBottom: '20px'\r\n              }}>\r\n                <h3 style={{\r\n                  margin: '0 0 15px 0',\r\n                  color: '#92400e',\r\n                  fontSize: '18px',\r\n                  fontWeight: '600'\r\n                }}>\r\n                  üöó Viaje en Curso\r\n                </h3>\r\n                <div style={{ display: 'grid', gap: '10px' }}>\r\n                  <div>\r\n                    <span style={{ fontSize: '13px', color: '#92400e' }}>Destino:</span>\r\n                    <p style={{ margin: '4px 0', fontWeight: '600', fontSize: '15px' }}>\r\n                      {viajeActivo.destino}\r\n                    </p>\r\n                  </div>\r\n                  <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px' }}>\r\n                    <div>\r\n                      <span style={{ fontSize: '13px', color: '#92400e' }}>Hora de salida:</span>\r\n                      <p style={{ margin: '4px 0', fontWeight: '600' }}>\r\n                        {viajeActivo.horaSalida}\r\n                      </p>\r\n                    </div>\r\n                    <div>\r\n                      <span style={{ fontSize: '13px', color: '#92400e' }}>Km de salida:</span>\r\n                      <p style={{ margin: '4px 0', fontWeight: '600' }}>\r\n                        {viajeActivo.kilometrajeSalida} km\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  {viajeActivo.observaciones && (\r\n                    <div>\r\n                      <span style={{ fontSize: '13px', color: '#92400e' }}>Observaciones:</span>\r\n                      <p style={{ margin: '4px 0', fontSize: '14px' }}>\r\n                        {viajeActivo.observaciones}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <button\r\n                onClick={handleFinalizarViaje}\r\n                disabled={loading}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '14px',\r\n                  background: loading ? '#9ca3af' : 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '8px',\r\n                  fontSize: '16px',\r\n                  fontWeight: '600',\r\n                  cursor: loading ? 'not-allowed' : 'pointer',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  gap: '10px'\r\n                }}\r\n              >\r\n                {loading ? 'Finalizando...' : 'üèÅ FINALIZAR VIAJE'}\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <style>{`\r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TrabajadorVehiclePanel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"// src/components/FleetPanel.js\nimport React,{useState,useEffect}from'react';import{database,firestore}from'../config/firebase';import{ref,onValue,update,get}from'firebase/database';import{collection,getDocs,updateDoc,doc}from'firebase/firestore';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const FleetPanel=_ref=>{let{currentUser,onLogout,onViewChange,currentView='fleet'}=_ref;const[vehiculos,setVehiculos]=useState([]);const[trabajadores,setTrabajadores]=useState([]);const[users,setUsers]=useState([]);const[activeTab,setActiveTab]=useState('vehicles');const[editingItem,setEditingItem]=useState(null);const[message,setMessage]=useState({type:'',text:''});const[loading,setLoading]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[filterStatus,setFilterStatus]=useState('todos');const[isMobile,setIsMobile]=useState(false);const[showEditModal,setShowEditModal]=useState(false);const[editFormData,setEditFormData]=useState({});const[expandedCards,setExpandedCards]=useState({});const[quickEditMode,setQuickEditMode]=useState({});// Para edición rápida de operador\n// NUEVO: Estados para documentos\nconst[showDocumentsModal,setShowDocumentsModal]=useState(false);const[selectedDocuments,setSelectedDocuments]=useState(null);const[documentOwner,setDocumentOwner]=useState(null);const[loadingDocuments,setLoadingDocuments]=useState(false);// Detectar si es móvil\nuseEffect(()=>{const checkMobile=()=>{setIsMobile(window.innerWidth<=768);};checkMobile();window.addEventListener('resize',checkMobile);return()=>window.removeEventListener('resize',checkMobile);},[]);// Cargar datos\nuseEffect(()=>{loadVehiculos();loadTrabajadores();loadUsers();},[]);const loadVehiculos=()=>{const vehiculosRef=ref(database,'vehiculos');const unsubscribe=onValue(vehiculosRef,snapshot=>{const data=snapshot.val();if(data){const vehiculosArray=Object.entries(data).map(_ref2=>{let[id,vehiculo]=_ref2;return{id,...vehiculo};});setVehiculos(vehiculosArray);}else{setVehiculos([]);}});return unsubscribe;};const loadTrabajadores=()=>{const trabajadoresRef=ref(database,'trabajadores');const unsubscribe=onValue(trabajadoresRef,snapshot=>{const data=snapshot.val();if(data){const trabajadoresArray=Object.entries(data).map(_ref3=>{let[id,trabajador]=_ref3;return{id,...trabajador};});setTrabajadores(trabajadoresArray);}else{setTrabajadores([]);}});return unsubscribe;};const loadUsers=async()=>{try{const usersSnapshot=await getDocs(collection(firestore,'users'));const usersList=[];usersSnapshot.forEach(doc=>{usersList.push({id:doc.id,...doc.data()});});setUsers(usersList);}catch(error){console.error('Error al cargar usuarios:',error);}};// NUEVA FUNCIÓN: Cargar documentos de vehículo\nconst loadVehicleDocuments=async(vehiculoId,vehicleData)=>{setLoadingDocuments(true);try{// Buscar documentos en diferentes rutas posibles\nconst rutas=[`vehiculos/${vehiculoId}/documentos`,`documentos/vehiculos/${vehiculoId}`,`documentos_vehiculos/${vehiculoId}`];let documentosEncontrados=null;for(const ruta of rutas){const docsRef=ref(database,ruta);const snapshot=await get(docsRef);const data=snapshot.val();if(data&&Object.keys(data).length>0){documentosEncontrados=data;console.log(`📄 Documentos de vehículo encontrados en: ${ruta}`);break;}}// Verificar si hay documentos dentro del objeto del vehículo\nif(!documentosEncontrados&&vehicleData!==null&&vehicleData!==void 0&&vehicleData.documentos){documentosEncontrados=vehicleData.documentos;console.log('📄 Documentos encontrados dentro del objeto vehículo');}if(documentosEncontrados){setSelectedDocuments({permisoCirculacion:documentosEncontrados.permisoCirculacion||null,revisionTecnica:documentosEncontrados.revisionTecnica||null,seguroObligatorio:documentosEncontrados.seguroObligatorio||null,otros:documentosEncontrados.otros||[]});}else{setSelectedDocuments({permisoCirculacion:null,revisionTecnica:null,seguroObligatorio:null,otros:[]});}setDocumentOwner({type:'vehicle',id:vehiculoId,name:vehicleData.nombre||'Vehículo'});setShowDocumentsModal(true);}catch(error){console.error('Error al cargar documentos del vehículo:',error);setMessage({type:'error',text:'❌ Error al cargar documentos'});}finally{setLoadingDocuments(false);}};// NUEVA FUNCIÓN: Cargar documentos de trabajador\nconst loadWorkerDocuments=async(trabajadorId,workerData)=>{setLoadingDocuments(true);try{// Buscar documentos en diferentes rutas posibles\nconst rutas=[`trabajadores/${trabajadorId}/documentos`,`documentos/${trabajadorId}`,`usuarios/${trabajadorId}/documentos`];let documentosEncontrados=null;for(const ruta of rutas){const docsRef=ref(database,ruta);const snapshot=await get(docsRef);const data=snapshot.val();if(data&&Object.keys(data).length>0){documentosEncontrados=data;console.log(`📄 Documentos de trabajador encontrados en: ${ruta}`);break;}}// Verificar si hay documentos dentro del objeto del trabajador\nif(!documentosEncontrados&&workerData!==null&&workerData!==void 0&&workerData.documentos){documentosEncontrados=workerData.documentos;console.log('📄 Documentos encontrados dentro del objeto trabajador');}if(documentosEncontrados){// Procesar certificados si existen\nlet certificadosProcesados=[];if(documentosEncontrados.certificados&&typeof documentosEncontrados.certificados==='object'){certificadosProcesados=Object.entries(documentosEncontrados.certificados).map(_ref4=>{let[key,cert]=_ref4;return{firebaseKey:key,...cert};});}setSelectedDocuments({licenciaConducir:documentosEncontrados.licenciaConducir||null,certificadoOperador:documentosEncontrados.certificadoOperador||null,certificados:certificadosProcesados});}else{setSelectedDocuments({licenciaConducir:null,certificadoOperador:null,certificados:[]});}setDocumentOwner({type:'worker',id:trabajadorId,name:workerData.nombre||'Trabajador'});setShowDocumentsModal(true);}catch(error){console.error('Error al cargar documentos del trabajador:',error);setMessage({type:'error',text:'❌ Error al cargar documentos'});}finally{setLoadingDocuments(false);}};// Función para formatear tamaño de archivo\nconst formatFileSize=bytes=>{if(!bytes||bytes===0)return'0 Bytes';const k=1024;const sizes=['Bytes','KB','MB','GB'];const i=Math.floor(Math.log(bytes)/Math.log(k));return Math.round(bytes/Math.pow(k,i)*100)/100+' '+sizes[i];};// Función para actualización rápida del operador\nconst quickUpdateOperator=async(vehiculoId,nuevoOperadorId)=>{setLoading(true);try{// Actualizar en Realtime Database\nconst vehiculoRef=ref(database,`vehiculos/${vehiculoId}`);await update(vehiculoRef,{operadorAsignado:nuevoOperadorId||null,ultimaActualizacion:new Date().toISOString(),actualizadoPor:currentUser.uid});// Si se asignó un trabajador, actualizar su información también\nif(nuevoOperadorId){const userRef=doc(firestore,'users',nuevoOperadorId);await updateDoc(userRef,{vehicleId:vehiculoId,updatedAt:new Date().toISOString()});// Actualizar en trabajadores\nconst trabajadorRef=ref(database,`trabajadores/${nuevoOperadorId}`);await update(trabajadorRef,{vehiculoAsignado:vehiculoId,ultimaActualizacion:new Date().toISOString()});}// Limpiar vehículo anterior si otro trabajador lo tenía\nif(nuevoOperadorId){vehiculos.forEach(async v=>{if(v.id!==vehiculoId&&v.operadorAsignado===nuevoOperadorId){const otroVehiculoRef=ref(database,`vehiculos/${v.id}`);await update(otroVehiculoRef,{operadorAsignado:null,ultimaActualizacion:new Date().toISOString()});}});}setMessage({type:'success',text:'✅ Operador actualizado exitosamente'});setQuickEditMode({...quickEditMode,[vehiculoId]:false});setTimeout(()=>setMessage({type:'',text:''}),3000);}catch(error){setMessage({type:'error',text:'❌ Error al actualizar operador'});console.error('Error:',error);}finally{setLoading(false);}};// Abrir modal de edición\nconst openEditModal=(item,type)=>{if(type==='vehicle'){setEditFormData({nombre:item.nombre||'',patente:item.patente||'',kilometraje:item.kilometraje||0,operadorAsignado:item.operadorAsignado||'',observaciones:item.observaciones||'',estado:item.estado||'disponible'});}else if(type==='worker'){const userData=users.find(u=>u.id===item.id);setEditFormData({nombre:item.nombre||(userData===null||userData===void 0?void 0:userData.name)||'',email:(userData===null||userData===void 0?void 0:userData.email)||'',telefono:(userData===null||userData===void 0?void 0:userData.phone)||item.telefono||'',vehicleId:(userData===null||userData===void 0?void 0:userData.vehicleId)||'',estado:item.estado||'disponible'});}setEditingItem({...item,type});setShowEditModal(true);};// Guardar cambios de vehículo\nconst saveVehicleChanges=async()=>{if(!editingItem)return;setLoading(true);try{const vehicleRef=ref(database,`vehiculos/${editingItem.id}`);await update(vehicleRef,{...editFormData,ultimaActualizacion:new Date().toISOString(),actualizadoPor:currentUser.uid});setMessage({type:'success',text:'✅ Vehículo actualizado exitosamente'});setShowEditModal(false);setEditingItem(null);setTimeout(()=>setMessage({type:'',text:''}),3000);}catch(error){setMessage({type:'error',text:'❌ Error al actualizar vehículo'});}finally{setLoading(false);}};// Guardar cambios de trabajador\nconst saveWorkerChanges=async()=>{if(!editingItem)return;setLoading(true);try{// Actualizar en Realtime Database\nconst trabajadorRef=ref(database,`trabajadores/${editingItem.id}`);await update(trabajadorRef,{nombre:editFormData.nombre,telefono:editFormData.telefono,estado:editFormData.estado,ultimaActualizacion:new Date().toISOString()});// Actualizar en Firestore\nconst userRef=doc(firestore,'users',editingItem.id);await updateDoc(userRef,{name:editFormData.nombre,phone:editFormData.telefono,vehicleId:editFormData.vehicleId||null,updatedAt:new Date().toISOString(),updatedBy:currentUser.uid});setMessage({type:'success',text:'✅ Trabajador actualizado exitosamente'});setShowEditModal(false);setEditingItem(null);setTimeout(()=>setMessage({type:'',text:''}),3000);}catch(error){setMessage({type:'error',text:'❌ Error al actualizar trabajador'});}finally{setLoading(false);}};// Filtrar vehículos\nconst filteredVehiculos=vehiculos.filter(v=>{var _v$nombre,_v$patente,_v$marca;const matchesSearch=((_v$nombre=v.nombre)===null||_v$nombre===void 0?void 0:_v$nombre.toLowerCase().includes(searchTerm.toLowerCase()))||((_v$patente=v.patente)===null||_v$patente===void 0?void 0:_v$patente.toLowerCase().includes(searchTerm.toLowerCase()))||((_v$marca=v.marca)===null||_v$marca===void 0?void 0:_v$marca.toLowerCase().includes(searchTerm.toLowerCase()));const matchesFilter=filterStatus==='todos'||v.estado===filterStatus;return matchesSearch&&matchesFilter;});// Filtrar trabajadores\nconst filteredTrabajadores=trabajadores.filter(t=>{var _t$nombre,_t$email;const matchesSearch=((_t$nombre=t.nombre)===null||_t$nombre===void 0?void 0:_t$nombre.toLowerCase().includes(searchTerm.toLowerCase()))||((_t$email=t.email)===null||_t$email===void 0?void 0:_t$email.toLowerCase().includes(searchTerm.toLowerCase()));const matchesFilter=filterStatus==='todos'||t.estado===filterStatus;return matchesSearch&&matchesFilter;});// Obtener estadísticas\nconst getStats=()=>{const vehicleStats={total:vehiculos.length,disponibles:vehiculos.filter(v=>v.estado==='disponible').length,enUso:vehiculos.filter(v=>v.estado==='en_uso').length,mantenimiento:vehiculos.filter(v=>v.estado==='mantenimiento').length};const workerStats={total:trabajadores.length,activos:trabajadores.filter(t=>t.ubicacion&&new Date()-new Date(t.ubicacion.timestamp)<300000).length,enRuta:trabajadores.filter(t=>t.estado==='en_camino').length,trabajando:trabajadores.filter(t=>t.estado==='trabajando').length,disponibles:trabajadores.filter(t=>t.estado==='disponible'||!t.estado).length};return{vehicleStats,workerStats};};const{vehicleStats,workerStats}=getStats();// Toggle expandir/contraer tarjeta\nconst toggleCardExpansion=id=>{setExpandedCards(prev=>({...prev,[id]:!prev[id]}));};// NUEVO: Modal de Documentos\nconst DocumentsModal=()=>{var _selectedDocuments$pe,_selectedDocuments$pe2,_selectedDocuments$re,_selectedDocuments$re2,_selectedDocuments$se,_selectedDocuments$se2,_selectedDocuments$li,_selectedDocuments$li2,_selectedDocuments$ce,_selectedDocuments$ce2,_selectedDocuments$pe3,_selectedDocuments$re3,_selectedDocuments$se3,_selectedDocuments$li3,_selectedDocuments$ce3,_selectedDocuments$ce4;if(!showDocumentsModal||!selectedDocuments||!documentOwner)return null;const isVehicle=documentOwner.type==='vehicle';return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:3000,padding:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',maxWidth:'900px',width:'100%',maxHeight:'90vh',overflow:'auto',padding:'30px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'25px'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{margin:0,color:'#1f2937',fontSize:'24px'},children:[\"\\uD83D\\uDCC4 Documentos de \",documentOwner.name]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowDocumentsModal(false);setSelectedDocuments(null);setDocumentOwner(null);},style:{padding:'8px',background:'#6b7280',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'18px'},children:\"\\u2716\"})]}),loadingDocuments?/*#__PURE__*/_jsxs(\"div\",{style:{padding:'40px',textAlign:'center',color:'#6b7280'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'24px',marginBottom:'10px'},children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Cargando documentos...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[isVehicle?/*#__PURE__*/// Documentos de Vehículo\n_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fit, minmax(280px, 1fr))',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'8px',padding:'15px',background:(_selectedDocuments$pe=selectedDocuments.permisoCirculacion)!==null&&_selectedDocuments$pe!==void 0&&_selectedDocuments$pe.url?'#f0fdf4':'white'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 10px 0',fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"\\uD83D\\uDCCB Permiso de Circulaci\\xF3n\"}),(_selectedDocuments$pe2=selectedDocuments.permisoCirculacion)!==null&&_selectedDocuments$pe2!==void 0&&_selectedDocuments$pe2.url?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px',background:'#f9fafb',borderRadius:'6px',marginBottom:'8px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',color:'#1f2937'},children:selectedDocuments.permisoCirculacion.nombre||'Documento'}),selectedDocuments.permisoCirculacion.fecha&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'11px',marginTop:'2px'},children:new Date(selectedDocuments.permisoCirculacion.fecha).toLocaleDateString('es-CL')})]}),/*#__PURE__*/_jsx(\"a\",{href:selectedDocuments.permisoCirculacion.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{display:'block',padding:'6px',background:'#3b82f6',color:'white',textAlign:'center',borderRadius:'6px',textDecoration:'none',fontSize:'12px'},children:\"\\uD83D\\uDC41\\uFE0F Ver Documento\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',background:'#f9fafb',borderRadius:'6px',textAlign:'center',color:'#6b7280',fontSize:'12px'},children:\"Sin documento\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'8px',padding:'15px',background:(_selectedDocuments$re=selectedDocuments.revisionTecnica)!==null&&_selectedDocuments$re!==void 0&&_selectedDocuments$re.url?'#f0fdf4':'white'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 10px 0',fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"\\uD83D\\uDD27 Revisi\\xF3n T\\xE9cnica\"}),(_selectedDocuments$re2=selectedDocuments.revisionTecnica)!==null&&_selectedDocuments$re2!==void 0&&_selectedDocuments$re2.url?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px',background:'#f9fafb',borderRadius:'6px',marginBottom:'8px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',color:'#1f2937'},children:selectedDocuments.revisionTecnica.nombre||'Documento'}),selectedDocuments.revisionTecnica.fecha&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'11px',marginTop:'2px'},children:new Date(selectedDocuments.revisionTecnica.fecha).toLocaleDateString('es-CL')})]}),/*#__PURE__*/_jsx(\"a\",{href:selectedDocuments.revisionTecnica.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{display:'block',padding:'6px',background:'#3b82f6',color:'white',textAlign:'center',borderRadius:'6px',textDecoration:'none',fontSize:'12px'},children:\"\\uD83D\\uDC41\\uFE0F Ver Documento\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',background:'#f9fafb',borderRadius:'6px',textAlign:'center',color:'#6b7280',fontSize:'12px'},children:\"Sin documento\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'8px',padding:'15px',background:(_selectedDocuments$se=selectedDocuments.seguroObligatorio)!==null&&_selectedDocuments$se!==void 0&&_selectedDocuments$se.url?'#f0fdf4':'white'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 10px 0',fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"\\uD83D\\uDEE1\\uFE0F Seguro Obligatorio\"}),(_selectedDocuments$se2=selectedDocuments.seguroObligatorio)!==null&&_selectedDocuments$se2!==void 0&&_selectedDocuments$se2.url?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px',background:'#f9fafb',borderRadius:'6px',marginBottom:'8px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',color:'#1f2937'},children:selectedDocuments.seguroObligatorio.nombre||'Documento'}),selectedDocuments.seguroObligatorio.fecha&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'11px',marginTop:'2px'},children:new Date(selectedDocuments.seguroObligatorio.fecha).toLocaleDateString('es-CL')})]}),/*#__PURE__*/_jsx(\"a\",{href:selectedDocuments.seguroObligatorio.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{display:'block',padding:'6px',background:'#3b82f6',color:'white',textAlign:'center',borderRadius:'6px',textDecoration:'none',fontSize:'12px'},children:\"\\uD83D\\uDC41\\uFE0F Ver Documento\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',background:'#f9fafb',borderRadius:'6px',textAlign:'center',color:'#6b7280',fontSize:'12px'},children:\"Sin documento\"})]})]}):/*#__PURE__*/// Documentos de Trabajador\n_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fit, minmax(280px, 1fr))',gap:'20px',marginBottom:'30px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'8px',padding:'15px',background:(_selectedDocuments$li=selectedDocuments.licenciaConducir)!==null&&_selectedDocuments$li!==void 0&&_selectedDocuments$li.url?'#f0fdf4':'white'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 10px 0',fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"\\uD83D\\uDE97 Licencia de Conducir\"}),(_selectedDocuments$li2=selectedDocuments.licenciaConducir)!==null&&_selectedDocuments$li2!==void 0&&_selectedDocuments$li2.url?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px',background:'#f9fafb',borderRadius:'6px',marginBottom:'8px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',color:'#1f2937'},children:selectedDocuments.licenciaConducir.nombre||'Documento'}),selectedDocuments.licenciaConducir.fecha&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'11px',marginTop:'2px'},children:new Date(selectedDocuments.licenciaConducir.fecha).toLocaleDateString('es-CL')}),selectedDocuments.licenciaConducir.tamaño>0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#9ca3af',fontSize:'10px',marginTop:'2px'},children:formatFileSize(selectedDocuments.licenciaConducir.tamaño)})]}),/*#__PURE__*/_jsx(\"a\",{href:selectedDocuments.licenciaConducir.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{display:'block',padding:'6px',background:'#3b82f6',color:'white',textAlign:'center',borderRadius:'6px',textDecoration:'none',fontSize:'12px'},children:\"\\uD83D\\uDC41\\uFE0F Ver Documento\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',background:'#f9fafb',borderRadius:'6px',textAlign:'center',color:'#6b7280',fontSize:'12px'},children:\"Sin documento\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'8px',padding:'15px',background:(_selectedDocuments$ce=selectedDocuments.certificadoOperador)!==null&&_selectedDocuments$ce!==void 0&&_selectedDocuments$ce.url?'#f0fdf4':'white'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 10px 0',fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"\\uD83C\\uDFD7\\uFE0F Certificado de Operador\"}),(_selectedDocuments$ce2=selectedDocuments.certificadoOperador)!==null&&_selectedDocuments$ce2!==void 0&&_selectedDocuments$ce2.url?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px',background:'#f9fafb',borderRadius:'6px',marginBottom:'8px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',color:'#1f2937'},children:selectedDocuments.certificadoOperador.nombre||'Documento'}),selectedDocuments.certificadoOperador.fecha&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'11px',marginTop:'2px'},children:new Date(selectedDocuments.certificadoOperador.fecha).toLocaleDateString('es-CL')}),selectedDocuments.certificadoOperador.tamaño>0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#9ca3af',fontSize:'10px',marginTop:'2px'},children:formatFileSize(selectedDocuments.certificadoOperador.tamaño)})]}),/*#__PURE__*/_jsx(\"a\",{href:selectedDocuments.certificadoOperador.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{display:'block',padding:'6px',background:'#3b82f6',color:'white',textAlign:'center',borderRadius:'6px',textDecoration:'none',fontSize:'12px'},children:\"\\uD83D\\uDC41\\uFE0F Ver Documento\"})]}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',background:'#f9fafb',borderRadius:'6px',textAlign:'center',color:'#6b7280',fontSize:'12px'},children:\"Sin documento\"})]})]}),selectedDocuments.certificados&&selectedDocuments.certificados.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',background:'#f9fafb',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 15px 0',fontSize:'16px',fontWeight:'600',color:'#374151'},children:\"\\uD83D\\uDCDA Certificados de Capacitaci\\xF3n\"}),/*#__PURE__*/_jsx(\"div\",{children:selectedDocuments.certificados.map((cert,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px',background:'white',borderRadius:'6px',marginBottom:'8px',display:'flex',justifyContent:'space-between',alignItems:'center',border:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,minWidth:0},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'500',fontSize:'13px',color:'#1f2937'},children:[\"\\uD83D\\uDCDC \",cert.nombre||'Certificado']}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#6b7280',fontSize:'11px',marginTop:'2px'},children:[cert.tamaño&&formatFileSize(cert.tamaño),cert.fecha&&` • ${new Date(cert.fecha).toLocaleDateString('es-CL')}`]})]}),/*#__PURE__*/_jsx(\"a\",{href:cert.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{padding:'4px 8px',background:'#3b82f6',color:'white',borderRadius:'4px',textDecoration:'none',fontSize:'11px',marginLeft:'10px'},children:\"Ver\"})]},index))})]})]}),isVehicle?!((_selectedDocuments$pe3=selectedDocuments.permisoCirculacion)!==null&&_selectedDocuments$pe3!==void 0&&_selectedDocuments$pe3.url)&&!((_selectedDocuments$re3=selectedDocuments.revisionTecnica)!==null&&_selectedDocuments$re3!==void 0&&_selectedDocuments$re3.url)&&!((_selectedDocuments$se3=selectedDocuments.seguroObligatorio)!==null&&_selectedDocuments$se3!==void 0&&_selectedDocuments$se3.url)&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'40px',textAlign:'center',color:'#6b7280',background:'#f9fafb',borderRadius:'8px',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'10px'},children:\"\\uD83D\\uDCED\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No hay documentos registrados para este veh\\xEDculo\"})]}):!((_selectedDocuments$li3=selectedDocuments.licenciaConducir)!==null&&_selectedDocuments$li3!==void 0&&_selectedDocuments$li3.url)&&!((_selectedDocuments$ce3=selectedDocuments.certificadoOperador)!==null&&_selectedDocuments$ce3!==void 0&&_selectedDocuments$ce3.url)&&((_selectedDocuments$ce4=selectedDocuments.certificados)===null||_selectedDocuments$ce4===void 0?void 0:_selectedDocuments$ce4.length)===0&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'40px',textAlign:'center',color:'#6b7280',background:'#f9fafb',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'10px'},children:\"\\uD83D\\uDCED\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No hay documentos registrados para este trabajador\"})]})]})]})});};return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',minHeight:'100vh',background:'#f3f4f6'},children:[/*#__PURE__*/_jsx(\"div\",{style:{background:'linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)',color:'white',padding:isMobile?'15px':'20px',boxShadow:'0 2px 10px rgba(0,0,0,0.1)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'1400px',margin:'0 auto',display:'flex',justifyContent:'space-between',alignItems:'center',flexWrap:isMobile?'wrap':'nowrap',gap:'10px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{margin:0,fontSize:isMobile?'20px':'24px',fontWeight:'600'},children:\"\\uD83D\\uDE9B Panel de Gesti\\xF3n de Flota\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0 0 0',fontSize:isMobile?'12px':'14px',opacity:0.9},children:\"Control de veh\\xEDculos y trabajadores\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',alignItems:'center',flexWrap:'wrap'},children:[onViewChange&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('dashboard'),style:{padding:isMobile?'6px 10px':'8px 14px',background:'rgba(255,255,255,0.1)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'6px',cursor:'pointer',fontSize:isMobile?'12px':'14px'},children:\"\\uD83D\\uDCCA Dashboard GPS\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('zones'),style:{padding:isMobile?'6px 10px':'8px 14px',background:'rgba(255,255,255,0.1)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'6px',cursor:'pointer',fontSize:isMobile?'12px':'14px'},children:\"\\uD83D\\uDDFA\\uFE0F Gesti\\xF3n Zonas\"})]}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:isMobile?'12px':'14px'},children:[\"\\uD83D\\uDC64 \",currentUser.name||currentUser.email]}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,style:{padding:isMobile?'6px 10px':'8px 16px',background:'#ef4444',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:isMobile?'12px':'14px',fontWeight:'600'},children:\"\\uD83D\\uDEAA Salir\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'1400px',margin:'0 auto',padding:isMobile?'15px':'20px'},children:[message.text&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'12px',borderRadius:'8px',marginBottom:'20px',background:message.type==='success'?'#dcfce7':'#fee2e2',border:`1px solid ${message.type==='success'?'#86efac':'#fecaca'}`,color:message.type==='success'?'#166534':'#991b1b'},children:message.text}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:`repeat(auto-fit, minmax(${isMobile?'140px':'200px'}, 1fr))`,gap:'15px',marginBottom:'25px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'20px',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',borderLeft:'4px solid #3b82f6'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'28px',fontWeight:'bold',color:'#1f2937'},children:vehicleStats.total}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'13px'},children:\"\\uD83D\\uDE9B Total Veh\\xEDculos\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'20px',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',borderLeft:'4px solid #22c55e'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'28px',fontWeight:'bold',color:'#1f2937'},children:vehicleStats.disponibles}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'13px'},children:\"\\u2705 Disponibles\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'20px',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',borderLeft:'4px solid #f59e0b'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'28px',fontWeight:'bold',color:'#1f2937'},children:vehicleStats.enUso}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'13px'},children:\"\\uD83D\\uDD27 En Uso\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'20px',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',borderLeft:'4px solid #8b5cf6'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'28px',fontWeight:'bold',color:'#1f2937'},children:workerStats.total}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'13px'},children:\"\\uD83D\\uDC77 Trabajadores\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'20px',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',borderLeft:'4px solid #10b981'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'28px',fontWeight:'bold',color:'#1f2937'},children:workerStats.activos}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'13px'},children:\"\\uD83D\\uDFE2 GPS Activos\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',padding:'20px',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',borderLeft:'4px solid #06b6d4'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'28px',fontWeight:'bold',color:'#1f2937'},children:workerStats.trabajando}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'13px'},children:\"\\uD83D\\uDD27 Trabajando\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{background:'white',padding:'20px',borderRadius:'12px',marginBottom:'20px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'15px',flexWrap:'wrap',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uD83D\\uDD0D Buscar por nombre, patente, email...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{flex:isMobile?'1 1 100%':'1 1 300px',padding:'10px 15px',border:'1px solid #d1d5db',borderRadius:'8px',fontSize:'14px',outline:'none'}}),/*#__PURE__*/_jsxs(\"select\",{value:filterStatus,onChange:e=>setFilterStatus(e.target.value),style:{padding:'10px 15px',border:'1px solid #d1d5db',borderRadius:'8px',fontSize:'14px',cursor:'pointer',minWidth:'150px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"todos\",children:\"\\uD83D\\uDCCB Todos\"}),/*#__PURE__*/_jsx(\"option\",{value:\"disponible\",children:\"\\u2705 Disponible\"}),/*#__PURE__*/_jsx(\"option\",{value:\"en_uso\",children:\"\\uD83D\\uDD27 En Uso\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mantenimiento\",children:\"\\uD83D\\uDD27 Mantenimiento\"}),/*#__PURE__*/_jsx(\"option\",{value:\"en_camino\",children:\"\\uD83D\\uDE97 En Camino\"}),/*#__PURE__*/_jsx(\"option\",{value:\"trabajando\",children:\"\\uD83D\\uDC77 Trabajando\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginBottom:'20px',borderBottom:'2px solid #e5e7eb'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('vehicles'),style:{padding:'12px 24px',background:activeTab==='vehicles'?'white':'transparent',color:activeTab==='vehicles'?'#1e293b':'#64748b',border:'none',borderBottom:activeTab==='vehicles'?'2px solid #3b82f6':'none',fontSize:'16px',fontWeight:activeTab==='vehicles'?'600':'400',cursor:'pointer',marginBottom:'-2px'},children:[\"\\uD83D\\uDE9B Veh\\xEDculos (\",filteredVehiculos.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('workers'),style:{padding:'12px 24px',background:activeTab==='workers'?'white':'transparent',color:activeTab==='workers'?'#1e293b':'#64748b',border:'none',borderBottom:activeTab==='workers'?'2px solid #3b82f6':'none',fontSize:'16px',fontWeight:activeTab==='workers'?'600':'400',cursor:'pointer',marginBottom:'-2px'},children:[\"\\uD83D\\uDC77 Trabajadores (\",filteredTrabajadores.length,\")\"]})]}),activeTab==='vehicles'&&/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fill, minmax(350px, 1fr))',gap:'20px'},children:filteredVehiculos.map(vehiculo=>{var _vehiculo$kilometraje;const operador=users.find(u=>u.id===vehiculo.operadorAsignado);const isExpanded=expandedCards[vehiculo.id];const isEditingOperator=quickEditMode[vehiculo.id];return/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',overflow:'hidden',transition:'all 0.3s ease',border:vehiculo.estado==='en_uso'?'2px solid #3b82f6':'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'15px 20px',background:vehiculo.estado==='disponible'?'#dcfce7':vehiculo.estado==='en_uso'?'#dbeafe':vehiculo.estado==='mantenimiento'?'#fef3c7':'#fee2e2',borderBottom:'1px solid #e5e7eb'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'18px',fontWeight:'600',color:'#1f2937'},children:[vehiculo.tipo==='maquinaria'?'🏗️':'🚗',\" \",vehiculo.nombre]}),/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 10px',borderRadius:'20px',fontSize:'12px',fontWeight:'500',background:'white',color:vehiculo.estado==='disponible'?'#15803d':vehiculo.estado==='en_uso'?'#1e40af':vehiculo.estado==='mantenimiento'?'#92400e':'#991b1b'},children:vehiculo.estado==='disponible'?'✅ Disponible':vehiculo.estado==='en_uso'?'🔧 En Uso':vehiculo.estado==='mantenimiento'?'🔧 Mantenimiento':'❌ Fuera de Servicio'})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'10px',fontSize:'14px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCCB Patente:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:vehiculo.patente||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83C\\uDFED Marca/Modelo:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:'500'},children:[vehiculo.marca,\" \",vehiculo.modelo]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'8px',background:isEditingOperator?'#f0f9ff':'transparent',borderRadius:'6px',border:isEditingOperator?'2px solid #3b82f6':'none',margin:isEditingOperator?'-2px':'0'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',minWidth:'80px'},children:\"\\uD83D\\uDC64 Operador:\"}),isEditingOperator?/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',alignItems:'center',flex:1},children:[/*#__PURE__*/_jsxs(\"select\",{style:{flex:1,padding:'6px',border:'1px solid #d1d5db',borderRadius:'4px',fontSize:'13px',background:'white'},defaultValue:vehiculo.operadorAsignado||'',onChange:e=>{quickUpdateOperator(vehiculo.id,e.target.value);},disabled:loading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Sin asignar\"}),users.filter(u=>u.role==='trabajador').map(user=>/*#__PURE__*/_jsx(\"option\",{value:user.id,children:user.name||user.email},user.id))]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuickEditMode({...quickEditMode,[vehiculo.id]:false}),style:{padding:'4px 8px',background:'#ef4444',color:'white',border:'none',borderRadius:'4px',fontSize:'12px',cursor:'pointer'},children:\"\\u2715\"})]}):/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:(operador===null||operador===void 0?void 0:operador.name)||'Sin asignar'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuickEditMode({...quickEditMode,[vehiculo.id]:true}),style:{padding:'2px 6px',background:'#3b82f6',color:'white',border:'none',borderRadius:'4px',fontSize:'11px',cursor:'pointer',fontWeight:'600'},children:\"Cambiar\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCCF Kilometraje:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:'500'},children:[((_vehiculo$kilometraje=vehiculo.kilometraje)===null||_vehiculo$kilometraje===void 0?void 0:_vehiculo$kilometraje.toLocaleString())||0,\" km\"]})]}),isExpanded&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{style:{borderTop:'1px solid #e5e7eb',paddingTop:'10px',marginTop:'5px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\u26FD Combustible:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:vehiculo.tipoCombustible||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDD27 \\xDAltimo Mant.:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:vehiculo.ultimoMantenimiento?new Date(vehiculo.ultimoMantenimiento).toLocaleDateString('es-CL'):'Sin registro'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCC5 Pr\\xF3ximo Mant.:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:vehiculo.proximoMantenimiento?new Date(vehiculo.proximoMantenimiento).toLocaleDateString('es-CL'):'No programado'})]}),vehiculo.observaciones&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',padding:'10px',background:'#f9fafb',borderRadius:'6px'},children:[/*#__PURE__*/_jsx(\"strong\",{style:{color:'#6b7280',fontSize:'12px'},children:\"\\uD83D\\uDCDD Observaciones:\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'5px 0 0 0',fontSize:'13px'},children:vehiculo.observaciones})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginTop:'15px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleCardExpansion(vehiculo.id),style:{flex:1,padding:'8px',background:'#f3f4f6',color:'#374151',border:'none',borderRadius:'6px',fontSize:'13px',cursor:'pointer',fontWeight:'500'},children:isExpanded?'➖ Ver menos':'➕ Ver más'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadVehicleDocuments(vehiculo.id,vehiculo),style:{flex:1,padding:'8px',background:'#10b981',color:'white',border:'none',borderRadius:'6px',fontSize:'13px',cursor:'pointer',fontWeight:'500'},children:\"\\uD83D\\uDCC4 Documentos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openEditModal(vehiculo,'vehicle'),style:{flex:1,padding:'8px',background:'#3b82f6',color:'white',border:'none',borderRadius:'6px',fontSize:'13px',cursor:'pointer',fontWeight:'500'},children:\"\\u270F\\uFE0F Editar\"})]})]})]},vehiculo.id);})}),activeTab==='workers'&&/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fill, minmax(350px, 1fr))',gap:'20px'},children:filteredTrabajadores.map(trabajador=>{const userData=users.find(u=>u.id===trabajador.id);const vehiculo=vehiculos.find(v=>v.operadorAsignado===trabajador.id);const isExpanded=expandedCards[trabajador.id];const isGPSActive=trabajador.ubicacion&&new Date()-new Date(trabajador.ubicacion.timestamp)<60000;return/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',boxShadow:'0 2px 8px rgba(0,0,0,0.05)',overflow:'hidden',transition:'all 0.3s ease',border:isGPSActive?'2px solid #10b981':'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'15px 20px',background:trabajador.estado==='en_camino'?'#ede9fe':trabajador.estado==='trabajando'?'#dcfce7':trabajador.estado==='disponible'?'#e0f2fe':'#f3f4f6',borderBottom:'1px solid #e5e7eb'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:0,fontSize:'18px',fontWeight:'600',color:'#1f2937'},children:[\"\\uD83D\\uDC77 \",trabajador.nombre||(userData===null||userData===void 0?void 0:userData.name)||'Trabajador']}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',alignItems:'center'},children:[isGPSActive&&/*#__PURE__*/_jsx(\"span\",{style:{width:'10px',height:'10px',borderRadius:'50%',background:'#10b981',animation:'pulse 2s infinite'},title:\"GPS Activo\"}),/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 10px',borderRadius:'20px',fontSize:'12px',fontWeight:'500',background:'white',color:trabajador.estado==='en_camino'?'#6b21a8':trabajador.estado==='trabajando'?'#15803d':trabajador.estado==='disponible'?'#0891b2':'#6b7280'},children:trabajador.estado==='en_camino'?'🚗 En Camino':trabajador.estado==='trabajando'?'🔧 Trabajando':trabajador.estado==='disponible'?'✅ Disponible':'⏸️ Inactivo'})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:'10px',fontSize:'14px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCE7 Email:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500',fontSize:'13px'},children:(userData===null||userData===void 0?void 0:userData.email)||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCF1 Tel\\xE9fono:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:(userData===null||userData===void 0?void 0:userData.phone)||trabajador.telefono||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDE9B Veh\\xEDculo:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:(vehiculo===null||vehiculo===void 0?void 0:vehiculo.nombre)||'Sin asignar'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCCD GPS:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500',color:isGPSActive?'#10b981':'#ef4444'},children:isGPSActive?'🟢 Activo':'🔴 Inactivo'})]}),isExpanded&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{style:{borderTop:'1px solid #e5e7eb',paddingTop:'10px',marginTop:'5px'},children:[trabajador.zonaDestino&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83C\\uDFAF Zona Destino:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:trabajador.zonaDestino})]}),trabajador.ubicacion&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'8px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:\"\\uD83D\\uDCCD \\xDAltima ubicaci\\xF3n:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500',fontSize:'12px'},children:new Date(trabajador.ubicacion.timestamp).toLocaleTimeString('es-CL')})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',padding:'10px',background:'#f9fafb',borderRadius:'6px',fontSize:'12px',fontFamily:'monospace'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Lat: \",trabajador.ubicacion.lat.toFixed(6)]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Lng: \",trabajador.ubicacion.lng.toFixed(6)]})]})]}),trabajador.ultimoTrabajo&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',padding:'10px',background:'#f0f9ff',borderRadius:'6px'},children:[/*#__PURE__*/_jsx(\"strong\",{style:{color:'#0369a1',fontSize:'12px'},children:\"\\uD83D\\uDCCB \\xDAltimo trabajo:\"}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:'5px 0 0 0',fontSize:'13px'},children:[trabajador.ultimoTrabajo.zona,\" - \",trabajador.ultimoTrabajo.completado?'✅ Completado':'⏳ En proceso']})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginTop:'15px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleCardExpansion(trabajador.id),style:{flex:1,padding:'8px',background:'#f3f4f6',color:'#374151',border:'none',borderRadius:'6px',fontSize:'13px',cursor:'pointer',fontWeight:'500'},children:isExpanded?'➖ Ver menos':'➕ Ver más'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>loadWorkerDocuments(trabajador.id,trabajador),style:{flex:1,padding:'8px',background:'#10b981',color:'white',border:'none',borderRadius:'6px',fontSize:'13px',cursor:'pointer',fontWeight:'500'},children:\"\\uD83D\\uDCC4 Documentos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openEditModal(trabajador,'worker'),style:{flex:1,padding:'8px',background:'#3b82f6',color:'white',border:'none',borderRadius:'6px',fontSize:'13px',cursor:'pointer',fontWeight:'500'},children:\"\\u270F\\uFE0F Editar\"})]})]})]},trabajador.id);})}),(activeTab==='vehicles'&&filteredVehiculos.length===0||activeTab==='workers'&&filteredTrabajadores.length===0)&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:'60px 20px',textAlign:'center',color:'#6b7280'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'20px'},children:activeTab==='vehicles'?'🚛':'👷'}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'16px'},children:[\"No se encontraron \",activeTab==='vehicles'?'vehículos':'trabajadores',searchTerm&&` para \"${searchTerm}\"`,filterStatus!=='todos'&&` con estado \"${filterStatus}\"`]})]})]}),showEditModal&&editingItem&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:2000,padding:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',padding:isMobile?'20px':'30px',maxWidth:'500px',width:'100%',maxHeight:'80vh',overflow:'auto'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{margin:'0 0 20px 0',color:'#1f2937'},children:[\"\\u270F\\uFE0F Editar \",editingItem.type==='vehicle'?'Vehículo':'Trabajador']}),editingItem.type==='vehicle'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editFormData.nombre,onChange:e=>setEditFormData({...editFormData,nombre:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Patente\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editFormData.patente,onChange:e=>setEditFormData({...editFormData,patente:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Kilometraje\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editFormData.kilometraje,onChange:e=>setEditFormData({...editFormData,kilometraje:parseInt(e.target.value)}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Operador Asignado\"}),/*#__PURE__*/_jsxs(\"select\",{value:editFormData.operadorAsignado,onChange:e=>setEditFormData({...editFormData,operadorAsignado:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Sin asignar --\"}),users.filter(u=>u.role==='trabajador').map(user=>/*#__PURE__*/_jsx(\"option\",{value:user.id,children:user.name||user.email},user.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Observaciones\"}),/*#__PURE__*/_jsx(\"textarea\",{value:editFormData.observaciones,onChange:e=>setEditFormData({...editFormData,observaciones:e.target.value}),rows:3,style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px',resize:'vertical'}})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editFormData.nombre,onChange:e=>setEditFormData({...editFormData,nombre:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:editFormData.email,disabled:true,style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px',background:'#f3f4f6',cursor:'not-allowed'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Tel\\xE9fono\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:editFormData.telefono,onChange:e=>setEditFormData({...editFormData,telefono:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontSize:'14px',fontWeight:'500'},children:\"Veh\\xEDculo Asignado\"}),/*#__PURE__*/_jsxs(\"select\",{value:editFormData.vehicleId,onChange:e=>setEditFormData({...editFormData,vehicleId:e.target.value}),style:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'6px',fontSize:'14px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Sin asignar --\"}),vehiculos.filter(v=>!v.operadorAsignado||v.operadorAsignado===editingItem.id).map(vehiculo=>/*#__PURE__*/_jsx(\"option\",{value:vehiculo.id,children:vehiculo.nombre},vehiculo.id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editingItem.type==='vehicle'?saveVehicleChanges():saveWorkerChanges(),disabled:loading,style:{flex:1,padding:'12px',background:loading?'#9ca3af':'#22c55e',color:'white',border:'none',borderRadius:'6px',fontSize:'14px',fontWeight:'500',cursor:loading?'not-allowed':'pointer'},children:loading?'Guardando...':'✅ Guardar Cambios'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowEditModal(false);setEditingItem(null);},style:{flex:1,padding:'12px',background:'#6b7280',color:'white',border:'none',borderRadius:'6px',fontSize:'14px',fontWeight:'500',cursor:'pointer'},children:\"Cancelar\"})]})]})}),/*#__PURE__*/_jsx(DocumentsModal,{}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:`\n        @keyframes pulse {\n          0% {\n            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);\n          }\n          70% {\n            box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);\n          }\n          100% {\n            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);\n          }\n        }\n      `})]});};export default FleetPanel;","map":{"version":3,"names":["React","useState","useEffect","database","firestore","ref","onValue","update","get","collection","getDocs","updateDoc","doc","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","FleetPanel","_ref","currentUser","onLogout","onViewChange","currentView","vehiculos","setVehiculos","trabajadores","setTrabajadores","users","setUsers","activeTab","setActiveTab","editingItem","setEditingItem","message","setMessage","type","text","loading","setLoading","searchTerm","setSearchTerm","filterStatus","setFilterStatus","isMobile","setIsMobile","showEditModal","setShowEditModal","editFormData","setEditFormData","expandedCards","setExpandedCards","quickEditMode","setQuickEditMode","showDocumentsModal","setShowDocumentsModal","selectedDocuments","setSelectedDocuments","documentOwner","setDocumentOwner","loadingDocuments","setLoadingDocuments","checkMobile","window","innerWidth","addEventListener","removeEventListener","loadVehiculos","loadTrabajadores","loadUsers","vehiculosRef","unsubscribe","snapshot","data","val","vehiculosArray","Object","entries","map","_ref2","id","vehiculo","trabajadoresRef","trabajadoresArray","_ref3","trabajador","usersSnapshot","usersList","forEach","push","error","console","loadVehicleDocuments","vehiculoId","vehicleData","rutas","documentosEncontrados","ruta","docsRef","keys","length","log","documentos","permisoCirculacion","revisionTecnica","seguroObligatorio","otros","name","nombre","loadWorkerDocuments","trabajadorId","workerData","certificadosProcesados","certificados","_ref4","key","cert","firebaseKey","licenciaConducir","certificadoOperador","formatFileSize","bytes","k","sizes","i","Math","floor","round","pow","quickUpdateOperator","nuevoOperadorId","vehiculoRef","operadorAsignado","ultimaActualizacion","Date","toISOString","actualizadoPor","uid","userRef","vehicleId","updatedAt","trabajadorRef","vehiculoAsignado","v","otroVehiculoRef","setTimeout","openEditModal","item","patente","kilometraje","observaciones","estado","userData","find","u","email","telefono","phone","saveVehicleChanges","vehicleRef","saveWorkerChanges","updatedBy","filteredVehiculos","filter","_v$nombre","_v$patente","_v$marca","matchesSearch","toLowerCase","includes","marca","matchesFilter","filteredTrabajadores","t","_t$nombre","_t$email","getStats","vehicleStats","total","disponibles","enUso","mantenimiento","workerStats","activos","ubicacion","timestamp","enRuta","trabajando","toggleCardExpansion","prev","DocumentsModal","_selectedDocuments$pe","_selectedDocuments$pe2","_selectedDocuments$re","_selectedDocuments$re2","_selectedDocuments$se","_selectedDocuments$se2","_selectedDocuments$li","_selectedDocuments$li2","_selectedDocuments$ce","_selectedDocuments$ce2","_selectedDocuments$pe3","_selectedDocuments$re3","_selectedDocuments$se3","_selectedDocuments$li3","_selectedDocuments$ce3","_selectedDocuments$ce4","isVehicle","style","position","top","left","right","bottom","background","display","justifyContent","alignItems","zIndex","padding","children","borderRadius","maxWidth","width","maxHeight","overflow","marginBottom","margin","color","fontSize","onClick","border","cursor","textAlign","gridTemplateColumns","gap","url","fontWeight","fecha","marginTop","toLocaleDateString","href","target","rel","textDecoration","tamaño","index","flex","minWidth","marginLeft","minHeight","boxShadow","flexWrap","opacity","borderLeft","placeholder","value","onChange","e","outline","borderBottom","_vehiculo$kilometraje","operador","isExpanded","isEditingOperator","transition","tipo","modelo","defaultValue","disabled","role","user","toLocaleString","borderTop","paddingTop","tipoCombustible","ultimoMantenimiento","proximoMantenimiento","isGPSActive","height","animation","title","zonaDestino","toLocaleTimeString","fontFamily","lat","toFixed","lng","ultimoTrabajo","zona","completado","parseInt","rows","resize"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/FleetPanel.js"],"sourcesContent":["// src/components/FleetPanel.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { database, firestore } from '../config/firebase';\r\nimport { ref, onValue, update, get } from 'firebase/database';\r\nimport { collection, getDocs, updateDoc, doc } from 'firebase/firestore';\r\n\r\nconst FleetPanel = ({ currentUser, onLogout, onViewChange, currentView = 'fleet' }) => {\r\n  const [vehiculos, setVehiculos] = useState([]);\r\n  const [trabajadores, setTrabajadores] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [activeTab, setActiveTab] = useState('vehicles');\r\n  const [editingItem, setEditingItem] = useState(null);\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState('todos');\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [editFormData, setEditFormData] = useState({});\r\n  const [expandedCards, setExpandedCards] = useState({});\r\n  const [quickEditMode, setQuickEditMode] = useState({}); // Para edición rápida de operador\r\n  \r\n  // NUEVO: Estados para documentos\r\n  const [showDocumentsModal, setShowDocumentsModal] = useState(false);\r\n  const [selectedDocuments, setSelectedDocuments] = useState(null);\r\n  const [documentOwner, setDocumentOwner] = useState(null);\r\n  const [loadingDocuments, setLoadingDocuments] = useState(false);\r\n\r\n  // Detectar si es móvil\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth <= 768);\r\n    };\r\n    \r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    \r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  // Cargar datos\r\n  useEffect(() => {\r\n    loadVehiculos();\r\n    loadTrabajadores();\r\n    loadUsers();\r\n  }, []);\r\n\r\n  const loadVehiculos = () => {\r\n    const vehiculosRef = ref(database, 'vehiculos');\r\n    const unsubscribe = onValue(vehiculosRef, (snapshot) => {\r\n      const data = snapshot.val();\r\n      if (data) {\r\n        const vehiculosArray = Object.entries(data).map(([id, vehiculo]) => ({\r\n          id,\r\n          ...vehiculo\r\n        }));\r\n        setVehiculos(vehiculosArray);\r\n      } else {\r\n        setVehiculos([]);\r\n      }\r\n    });\r\n    return unsubscribe;\r\n  };\r\n\r\n  const loadTrabajadores = () => {\r\n    const trabajadoresRef = ref(database, 'trabajadores');\r\n    const unsubscribe = onValue(trabajadoresRef, (snapshot) => {\r\n      const data = snapshot.val();\r\n      if (data) {\r\n        const trabajadoresArray = Object.entries(data).map(([id, trabajador]) => ({\r\n          id,\r\n          ...trabajador\r\n        }));\r\n        setTrabajadores(trabajadoresArray);\r\n      } else {\r\n        setTrabajadores([]);\r\n      }\r\n    });\r\n    return unsubscribe;\r\n  };\r\n\r\n  const loadUsers = async () => {\r\n    try {\r\n      const usersSnapshot = await getDocs(collection(firestore, 'users'));\r\n      const usersList = [];\r\n      usersSnapshot.forEach((doc) => {\r\n        usersList.push({ id: doc.id, ...doc.data() });\r\n      });\r\n      setUsers(usersList);\r\n    } catch (error) {\r\n      console.error('Error al cargar usuarios:', error);\r\n    }\r\n  };\r\n\r\n  // NUEVA FUNCIÓN: Cargar documentos de vehículo\r\n  const loadVehicleDocuments = async (vehiculoId, vehicleData) => {\r\n    setLoadingDocuments(true);\r\n    try {\r\n      // Buscar documentos en diferentes rutas posibles\r\n      const rutas = [\r\n        `vehiculos/${vehiculoId}/documentos`,\r\n        `documentos/vehiculos/${vehiculoId}`,\r\n        `documentos_vehiculos/${vehiculoId}`\r\n      ];\r\n      \r\n      let documentosEncontrados = null;\r\n      \r\n      for (const ruta of rutas) {\r\n        const docsRef = ref(database, ruta);\r\n        const snapshot = await get(docsRef);\r\n        const data = snapshot.val();\r\n        \r\n        if (data && Object.keys(data).length > 0) {\r\n          documentosEncontrados = data;\r\n          console.log(`📄 Documentos de vehículo encontrados en: ${ruta}`);\r\n          break;\r\n        }\r\n      }\r\n      \r\n      // Verificar si hay documentos dentro del objeto del vehículo\r\n      if (!documentosEncontrados && vehicleData?.documentos) {\r\n        documentosEncontrados = vehicleData.documentos;\r\n        console.log('📄 Documentos encontrados dentro del objeto vehículo');\r\n      }\r\n      \r\n      if (documentosEncontrados) {\r\n        setSelectedDocuments({\r\n          permisoCirculacion: documentosEncontrados.permisoCirculacion || null,\r\n          revisionTecnica: documentosEncontrados.revisionTecnica || null,\r\n          seguroObligatorio: documentosEncontrados.seguroObligatorio || null,\r\n          otros: documentosEncontrados.otros || []\r\n        });\r\n      } else {\r\n        setSelectedDocuments({\r\n          permisoCirculacion: null,\r\n          revisionTecnica: null,\r\n          seguroObligatorio: null,\r\n          otros: []\r\n        });\r\n      }\r\n      \r\n      setDocumentOwner({\r\n        type: 'vehicle',\r\n        id: vehiculoId,\r\n        name: vehicleData.nombre || 'Vehículo'\r\n      });\r\n      \r\n      setShowDocumentsModal(true);\r\n    } catch (error) {\r\n      console.error('Error al cargar documentos del vehículo:', error);\r\n      setMessage({ type: 'error', text: '❌ Error al cargar documentos' });\r\n    } finally {\r\n      setLoadingDocuments(false);\r\n    }\r\n  };\r\n\r\n  // NUEVA FUNCIÓN: Cargar documentos de trabajador\r\n  const loadWorkerDocuments = async (trabajadorId, workerData) => {\r\n    setLoadingDocuments(true);\r\n    try {\r\n      // Buscar documentos en diferentes rutas posibles\r\n      const rutas = [\r\n        `trabajadores/${trabajadorId}/documentos`,\r\n        `documentos/${trabajadorId}`,\r\n        `usuarios/${trabajadorId}/documentos`\r\n      ];\r\n      \r\n      let documentosEncontrados = null;\r\n      \r\n      for (const ruta of rutas) {\r\n        const docsRef = ref(database, ruta);\r\n        const snapshot = await get(docsRef);\r\n        const data = snapshot.val();\r\n        \r\n        if (data && Object.keys(data).length > 0) {\r\n          documentosEncontrados = data;\r\n          console.log(`📄 Documentos de trabajador encontrados en: ${ruta}`);\r\n          break;\r\n        }\r\n      }\r\n      \r\n      // Verificar si hay documentos dentro del objeto del trabajador\r\n      if (!documentosEncontrados && workerData?.documentos) {\r\n        documentosEncontrados = workerData.documentos;\r\n        console.log('📄 Documentos encontrados dentro del objeto trabajador');\r\n      }\r\n      \r\n      if (documentosEncontrados) {\r\n        // Procesar certificados si existen\r\n        let certificadosProcesados = [];\r\n        if (documentosEncontrados.certificados && typeof documentosEncontrados.certificados === 'object') {\r\n          certificadosProcesados = Object.entries(documentosEncontrados.certificados).map(([key, cert]) => ({\r\n            firebaseKey: key,\r\n            ...cert\r\n          }));\r\n        }\r\n        \r\n        setSelectedDocuments({\r\n          licenciaConducir: documentosEncontrados.licenciaConducir || null,\r\n          certificadoOperador: documentosEncontrados.certificadoOperador || null,\r\n          certificados: certificadosProcesados\r\n        });\r\n      } else {\r\n        setSelectedDocuments({\r\n          licenciaConducir: null,\r\n          certificadoOperador: null,\r\n          certificados: []\r\n        });\r\n      }\r\n      \r\n      setDocumentOwner({\r\n        type: 'worker',\r\n        id: trabajadorId,\r\n        name: workerData.nombre || 'Trabajador'\r\n      });\r\n      \r\n      setShowDocumentsModal(true);\r\n    } catch (error) {\r\n      console.error('Error al cargar documentos del trabajador:', error);\r\n      setMessage({ type: 'error', text: '❌ Error al cargar documentos' });\r\n    } finally {\r\n      setLoadingDocuments(false);\r\n    }\r\n  };\r\n\r\n  // Función para formatear tamaño de archivo\r\n  const formatFileSize = (bytes) => {\r\n    if (!bytes || bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\r\n  };\r\n\r\n  // Función para actualización rápida del operador\r\n  const quickUpdateOperator = async (vehiculoId, nuevoOperadorId) => {\r\n    setLoading(true);\r\n    try {\r\n      // Actualizar en Realtime Database\r\n      const vehiculoRef = ref(database, `vehiculos/${vehiculoId}`);\r\n      await update(vehiculoRef, {\r\n        operadorAsignado: nuevoOperadorId || null,\r\n        ultimaActualizacion: new Date().toISOString(),\r\n        actualizadoPor: currentUser.uid\r\n      });\r\n\r\n      // Si se asignó un trabajador, actualizar su información también\r\n      if (nuevoOperadorId) {\r\n        const userRef = doc(firestore, 'users', nuevoOperadorId);\r\n        await updateDoc(userRef, {\r\n          vehicleId: vehiculoId,\r\n          updatedAt: new Date().toISOString()\r\n        });\r\n\r\n        // Actualizar en trabajadores\r\n        const trabajadorRef = ref(database, `trabajadores/${nuevoOperadorId}`);\r\n        await update(trabajadorRef, {\r\n          vehiculoAsignado: vehiculoId,\r\n          ultimaActualizacion: new Date().toISOString()\r\n        });\r\n      }\r\n\r\n      // Limpiar vehículo anterior si otro trabajador lo tenía\r\n      if (nuevoOperadorId) {\r\n        vehiculos.forEach(async (v) => {\r\n          if (v.id !== vehiculoId && v.operadorAsignado === nuevoOperadorId) {\r\n            const otroVehiculoRef = ref(database, `vehiculos/${v.id}`);\r\n            await update(otroVehiculoRef, {\r\n              operadorAsignado: null,\r\n              ultimaActualizacion: new Date().toISOString()\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      setMessage({ type: 'success', text: '✅ Operador actualizado exitosamente' });\r\n      setQuickEditMode({ ...quickEditMode, [vehiculoId]: false });\r\n      setTimeout(() => setMessage({ type: '', text: '' }), 3000);\r\n    } catch (error) {\r\n      setMessage({ type: 'error', text: '❌ Error al actualizar operador' });\r\n      console.error('Error:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Abrir modal de edición\r\n  const openEditModal = (item, type) => {\r\n    if (type === 'vehicle') {\r\n      setEditFormData({\r\n        nombre: item.nombre || '',\r\n        patente: item.patente || '',\r\n        kilometraje: item.kilometraje || 0,\r\n        operadorAsignado: item.operadorAsignado || '',\r\n        observaciones: item.observaciones || '',\r\n        estado: item.estado || 'disponible'\r\n      });\r\n    } else if (type === 'worker') {\r\n      const userData = users.find(u => u.id === item.id);\r\n      setEditFormData({\r\n        nombre: item.nombre || userData?.name || '',\r\n        email: userData?.email || '',\r\n        telefono: userData?.phone || item.telefono || '',\r\n        vehicleId: userData?.vehicleId || '',\r\n        estado: item.estado || 'disponible'\r\n      });\r\n    }\r\n    setEditingItem({ ...item, type });\r\n    setShowEditModal(true);\r\n  };\r\n\r\n  // Guardar cambios de vehículo\r\n  const saveVehicleChanges = async () => {\r\n    if (!editingItem) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const vehicleRef = ref(database, `vehiculos/${editingItem.id}`);\r\n      await update(vehicleRef, {\r\n        ...editFormData,\r\n        ultimaActualizacion: new Date().toISOString(),\r\n        actualizadoPor: currentUser.uid\r\n      });\r\n      \r\n      setMessage({ type: 'success', text: '✅ Vehículo actualizado exitosamente' });\r\n      setShowEditModal(false);\r\n      setEditingItem(null);\r\n      setTimeout(() => setMessage({ type: '', text: '' }), 3000);\r\n    } catch (error) {\r\n      setMessage({ type: 'error', text: '❌ Error al actualizar vehículo' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Guardar cambios de trabajador\r\n  const saveWorkerChanges = async () => {\r\n    if (!editingItem) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      // Actualizar en Realtime Database\r\n      const trabajadorRef = ref(database, `trabajadores/${editingItem.id}`);\r\n      await update(trabajadorRef, {\r\n        nombre: editFormData.nombre,\r\n        telefono: editFormData.telefono,\r\n        estado: editFormData.estado,\r\n        ultimaActualizacion: new Date().toISOString()\r\n      });\r\n      \r\n      // Actualizar en Firestore\r\n      const userRef = doc(firestore, 'users', editingItem.id);\r\n      await updateDoc(userRef, {\r\n        name: editFormData.nombre,\r\n        phone: editFormData.telefono,\r\n        vehicleId: editFormData.vehicleId || null,\r\n        updatedAt: new Date().toISOString(),\r\n        updatedBy: currentUser.uid\r\n      });\r\n      \r\n      setMessage({ type: 'success', text: '✅ Trabajador actualizado exitosamente' });\r\n      setShowEditModal(false);\r\n      setEditingItem(null);\r\n      setTimeout(() => setMessage({ type: '', text: '' }), 3000);\r\n    } catch (error) {\r\n      setMessage({ type: 'error', text: '❌ Error al actualizar trabajador' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Filtrar vehículos\r\n  const filteredVehiculos = vehiculos.filter(v => {\r\n    const matchesSearch = v.nombre?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                          v.patente?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                          v.marca?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesFilter = filterStatus === 'todos' || v.estado === filterStatus;\r\n    return matchesSearch && matchesFilter;\r\n  });\r\n\r\n  // Filtrar trabajadores\r\n  const filteredTrabajadores = trabajadores.filter(t => {\r\n    const matchesSearch = t.nombre?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                          t.email?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesFilter = filterStatus === 'todos' || t.estado === filterStatus;\r\n    return matchesSearch && matchesFilter;\r\n  });\r\n\r\n  // Obtener estadísticas\r\n  const getStats = () => {\r\n    const vehicleStats = {\r\n      total: vehiculos.length,\r\n      disponibles: vehiculos.filter(v => v.estado === 'disponible').length,\r\n      enUso: vehiculos.filter(v => v.estado === 'en_uso').length,\r\n      mantenimiento: vehiculos.filter(v => v.estado === 'mantenimiento').length\r\n    };\r\n    \r\n    const workerStats = {\r\n      total: trabajadores.length,\r\n      activos: trabajadores.filter(t => t.ubicacion && \r\n        (new Date() - new Date(t.ubicacion.timestamp)) < 300000).length,\r\n      enRuta: trabajadores.filter(t => t.estado === 'en_camino').length,\r\n      trabajando: trabajadores.filter(t => t.estado === 'trabajando').length,\r\n      disponibles: trabajadores.filter(t => t.estado === 'disponible' || !t.estado).length\r\n    };\r\n    \r\n    return { vehicleStats, workerStats };\r\n  };\r\n\r\n  const { vehicleStats, workerStats } = getStats();\r\n\r\n  // Toggle expandir/contraer tarjeta\r\n  const toggleCardExpansion = (id) => {\r\n    setExpandedCards(prev => ({\r\n      ...prev,\r\n      [id]: !prev[id]\r\n    }));\r\n  };\r\n\r\n  // NUEVO: Modal de Documentos\r\n  const DocumentsModal = () => {\r\n    if (!showDocumentsModal || !selectedDocuments || !documentOwner) return null;\r\n\r\n    const isVehicle = documentOwner.type === 'vehicle';\r\n    \r\n    return (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0,0,0,0.5)',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        zIndex: 3000,\r\n        padding: '20px'\r\n      }}>\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '12px',\r\n          maxWidth: '900px',\r\n          width: '100%',\r\n          maxHeight: '90vh',\r\n          overflow: 'auto',\r\n          padding: '30px'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            marginBottom: '25px'\r\n          }}>\r\n            <h2 style={{ margin: 0, color: '#1f2937', fontSize: '24px' }}>\r\n              📄 Documentos de {documentOwner.name}\r\n            </h2>\r\n            <button\r\n              onClick={() => {\r\n                setShowDocumentsModal(false);\r\n                setSelectedDocuments(null);\r\n                setDocumentOwner(null);\r\n              }}\r\n              style={{\r\n                padding: '8px',\r\n                background: '#6b7280',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                cursor: 'pointer',\r\n                fontSize: '18px'\r\n              }}\r\n            >\r\n              ✖\r\n            </button>\r\n          </div>\r\n\r\n          {loadingDocuments ? (\r\n            <div style={{\r\n              padding: '40px',\r\n              textAlign: 'center',\r\n              color: '#6b7280'\r\n            }}>\r\n              <div style={{ fontSize: '24px', marginBottom: '10px' }}>⏳</div>\r\n              <div>Cargando documentos...</div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {isVehicle ? (\r\n                // Documentos de Vehículo\r\n                <div style={{\r\n                  display: 'grid',\r\n                  gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fit, minmax(280px, 1fr))',\r\n                  gap: '20px'\r\n                }}>\r\n                  {/* Permiso de Circulación */}\r\n                  <div style={{\r\n                    border: '1px solid #e5e7eb',\r\n                    borderRadius: '8px',\r\n                    padding: '15px',\r\n                    background: selectedDocuments.permisoCirculacion?.url ? '#f0fdf4' : 'white'\r\n                  }}>\r\n                    <h5 style={{ \r\n                      margin: '0 0 10px 0', \r\n                      fontSize: '14px', \r\n                      fontWeight: '600', \r\n                      color: '#374151' \r\n                    }}>\r\n                      📋 Permiso de Circulación\r\n                    </h5>\r\n                    {selectedDocuments.permisoCirculacion?.url ? (\r\n                      <div>\r\n                        <div style={{\r\n                          padding: '8px',\r\n                          background: '#f9fafb',\r\n                          borderRadius: '6px',\r\n                          marginBottom: '8px',\r\n                          fontSize: '12px'\r\n                        }}>\r\n                          <div style={{ fontWeight: '500', color: '#1f2937' }}>\r\n                            {selectedDocuments.permisoCirculacion.nombre || 'Documento'}\r\n                          </div>\r\n                          {selectedDocuments.permisoCirculacion.fecha && (\r\n                            <div style={{ color: '#6b7280', fontSize: '11px', marginTop: '2px' }}>\r\n                              {new Date(selectedDocuments.permisoCirculacion.fecha).toLocaleDateString('es-CL')}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        <a \r\n                          href={selectedDocuments.permisoCirculacion.url}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          style={{\r\n                            display: 'block',\r\n                            padding: '6px',\r\n                            background: '#3b82f6',\r\n                            color: 'white',\r\n                            textAlign: 'center',\r\n                            borderRadius: '6px',\r\n                            textDecoration: 'none',\r\n                            fontSize: '12px'\r\n                          }}\r\n                        >\r\n                          👁️ Ver Documento\r\n                        </a>\r\n                      </div>\r\n                    ) : (\r\n                      <div style={{\r\n                        padding: '20px',\r\n                        background: '#f9fafb',\r\n                        borderRadius: '6px',\r\n                        textAlign: 'center',\r\n                        color: '#6b7280',\r\n                        fontSize: '12px'\r\n                      }}>\r\n                        Sin documento\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Revisión Técnica */}\r\n                  <div style={{\r\n                    border: '1px solid #e5e7eb',\r\n                    borderRadius: '8px',\r\n                    padding: '15px',\r\n                    background: selectedDocuments.revisionTecnica?.url ? '#f0fdf4' : 'white'\r\n                  }}>\r\n                    <h5 style={{ \r\n                      margin: '0 0 10px 0', \r\n                      fontSize: '14px', \r\n                      fontWeight: '600', \r\n                      color: '#374151' \r\n                    }}>\r\n                      🔧 Revisión Técnica\r\n                    </h5>\r\n                    {selectedDocuments.revisionTecnica?.url ? (\r\n                      <div>\r\n                        <div style={{\r\n                          padding: '8px',\r\n                          background: '#f9fafb',\r\n                          borderRadius: '6px',\r\n                          marginBottom: '8px',\r\n                          fontSize: '12px'\r\n                        }}>\r\n                          <div style={{ fontWeight: '500', color: '#1f2937' }}>\r\n                            {selectedDocuments.revisionTecnica.nombre || 'Documento'}\r\n                          </div>\r\n                          {selectedDocuments.revisionTecnica.fecha && (\r\n                            <div style={{ color: '#6b7280', fontSize: '11px', marginTop: '2px' }}>\r\n                              {new Date(selectedDocuments.revisionTecnica.fecha).toLocaleDateString('es-CL')}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        <a \r\n                          href={selectedDocuments.revisionTecnica.url}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          style={{\r\n                            display: 'block',\r\n                            padding: '6px',\r\n                            background: '#3b82f6',\r\n                            color: 'white',\r\n                            textAlign: 'center',\r\n                            borderRadius: '6px',\r\n                            textDecoration: 'none',\r\n                            fontSize: '12px'\r\n                          }}\r\n                        >\r\n                          👁️ Ver Documento\r\n                        </a>\r\n                      </div>\r\n                    ) : (\r\n                      <div style={{\r\n                        padding: '20px',\r\n                        background: '#f9fafb',\r\n                        borderRadius: '6px',\r\n                        textAlign: 'center',\r\n                        color: '#6b7280',\r\n                        fontSize: '12px'\r\n                      }}>\r\n                        Sin documento\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Seguro Obligatorio */}\r\n                  <div style={{\r\n                    border: '1px solid #e5e7eb',\r\n                    borderRadius: '8px',\r\n                    padding: '15px',\r\n                    background: selectedDocuments.seguroObligatorio?.url ? '#f0fdf4' : 'white'\r\n                  }}>\r\n                    <h5 style={{ \r\n                      margin: '0 0 10px 0', \r\n                      fontSize: '14px', \r\n                      fontWeight: '600', \r\n                      color: '#374151' \r\n                    }}>\r\n                      🛡️ Seguro Obligatorio\r\n                    </h5>\r\n                    {selectedDocuments.seguroObligatorio?.url ? (\r\n                      <div>\r\n                        <div style={{\r\n                          padding: '8px',\r\n                          background: '#f9fafb',\r\n                          borderRadius: '6px',\r\n                          marginBottom: '8px',\r\n                          fontSize: '12px'\r\n                        }}>\r\n                          <div style={{ fontWeight: '500', color: '#1f2937' }}>\r\n                            {selectedDocuments.seguroObligatorio.nombre || 'Documento'}\r\n                          </div>\r\n                          {selectedDocuments.seguroObligatorio.fecha && (\r\n                            <div style={{ color: '#6b7280', fontSize: '11px', marginTop: '2px' }}>\r\n                              {new Date(selectedDocuments.seguroObligatorio.fecha).toLocaleDateString('es-CL')}\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        <a \r\n                          href={selectedDocuments.seguroObligatorio.url}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          style={{\r\n                            display: 'block',\r\n                            padding: '6px',\r\n                            background: '#3b82f6',\r\n                            color: 'white',\r\n                            textAlign: 'center',\r\n                            borderRadius: '6px',\r\n                            textDecoration: 'none',\r\n                            fontSize: '12px'\r\n                          }}\r\n                        >\r\n                          👁️ Ver Documento\r\n                        </a>\r\n                      </div>\r\n                    ) : (\r\n                      <div style={{\r\n                        padding: '20px',\r\n                        background: '#f9fafb',\r\n                        borderRadius: '6px',\r\n                        textAlign: 'center',\r\n                        color: '#6b7280',\r\n                        fontSize: '12px'\r\n                      }}>\r\n                        Sin documento\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                // Documentos de Trabajador\r\n                <div>\r\n                  <div style={{\r\n                    display: 'grid',\r\n                    gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fit, minmax(280px, 1fr))',\r\n                    gap: '20px',\r\n                    marginBottom: '30px'\r\n                  }}>\r\n                    {/* Licencia de Conducir */}\r\n                    <div style={{\r\n                      border: '1px solid #e5e7eb',\r\n                      borderRadius: '8px',\r\n                      padding: '15px',\r\n                      background: selectedDocuments.licenciaConducir?.url ? '#f0fdf4' : 'white'\r\n                    }}>\r\n                      <h5 style={{ \r\n                        margin: '0 0 10px 0', \r\n                        fontSize: '14px', \r\n                        fontWeight: '600', \r\n                        color: '#374151' \r\n                      }}>\r\n                        🚗 Licencia de Conducir\r\n                      </h5>\r\n                      {selectedDocuments.licenciaConducir?.url ? (\r\n                        <div>\r\n                          <div style={{\r\n                            padding: '8px',\r\n                            background: '#f9fafb',\r\n                            borderRadius: '6px',\r\n                            marginBottom: '8px',\r\n                            fontSize: '12px'\r\n                          }}>\r\n                            <div style={{ fontWeight: '500', color: '#1f2937' }}>\r\n                              {selectedDocuments.licenciaConducir.nombre || 'Documento'}\r\n                            </div>\r\n                            {selectedDocuments.licenciaConducir.fecha && (\r\n                              <div style={{ color: '#6b7280', fontSize: '11px', marginTop: '2px' }}>\r\n                                {new Date(selectedDocuments.licenciaConducir.fecha).toLocaleDateString('es-CL')}\r\n                              </div>\r\n                            )}\r\n                            {selectedDocuments.licenciaConducir.tamaño > 0 && (\r\n                              <div style={{ color: '#9ca3af', fontSize: '10px', marginTop: '2px' }}>\r\n                                {formatFileSize(selectedDocuments.licenciaConducir.tamaño)}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                          <a \r\n                            href={selectedDocuments.licenciaConducir.url}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            style={{\r\n                              display: 'block',\r\n                              padding: '6px',\r\n                              background: '#3b82f6',\r\n                              color: 'white',\r\n                              textAlign: 'center',\r\n                              borderRadius: '6px',\r\n                              textDecoration: 'none',\r\n                              fontSize: '12px'\r\n                            }}\r\n                          >\r\n                            👁️ Ver Documento\r\n                          </a>\r\n                        </div>\r\n                      ) : (\r\n                        <div style={{\r\n                          padding: '20px',\r\n                          background: '#f9fafb',\r\n                          borderRadius: '6px',\r\n                          textAlign: 'center',\r\n                          color: '#6b7280',\r\n                          fontSize: '12px'\r\n                        }}>\r\n                          Sin documento\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Certificado de Operador */}\r\n                    <div style={{\r\n                      border: '1px solid #e5e7eb',\r\n                      borderRadius: '8px',\r\n                      padding: '15px',\r\n                      background: selectedDocuments.certificadoOperador?.url ? '#f0fdf4' : 'white'\r\n                    }}>\r\n                      <h5 style={{ \r\n                        margin: '0 0 10px 0', \r\n                        fontSize: '14px', \r\n                        fontWeight: '600', \r\n                        color: '#374151' \r\n                      }}>\r\n                        🏗️ Certificado de Operador\r\n                      </h5>\r\n                      {selectedDocuments.certificadoOperador?.url ? (\r\n                        <div>\r\n                          <div style={{\r\n                            padding: '8px',\r\n                            background: '#f9fafb',\r\n                            borderRadius: '6px',\r\n                            marginBottom: '8px',\r\n                            fontSize: '12px'\r\n                          }}>\r\n                            <div style={{ fontWeight: '500', color: '#1f2937' }}>\r\n                              {selectedDocuments.certificadoOperador.nombre || 'Documento'}\r\n                            </div>\r\n                            {selectedDocuments.certificadoOperador.fecha && (\r\n                              <div style={{ color: '#6b7280', fontSize: '11px', marginTop: '2px' }}>\r\n                                {new Date(selectedDocuments.certificadoOperador.fecha).toLocaleDateString('es-CL')}\r\n                              </div>\r\n                            )}\r\n                            {selectedDocuments.certificadoOperador.tamaño > 0 && (\r\n                              <div style={{ color: '#9ca3af', fontSize: '10px', marginTop: '2px' }}>\r\n                                {formatFileSize(selectedDocuments.certificadoOperador.tamaño)}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                          <a \r\n                            href={selectedDocuments.certificadoOperador.url}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            style={{\r\n                              display: 'block',\r\n                              padding: '6px',\r\n                              background: '#3b82f6',\r\n                              color: 'white',\r\n                              textAlign: 'center',\r\n                              borderRadius: '6px',\r\n                              textDecoration: 'none',\r\n                              fontSize: '12px'\r\n                            }}\r\n                          >\r\n                            👁️ Ver Documento\r\n                          </a>\r\n                        </div>\r\n                      ) : (\r\n                        <div style={{\r\n                          padding: '20px',\r\n                          background: '#f9fafb',\r\n                          borderRadius: '6px',\r\n                          textAlign: 'center',\r\n                          color: '#6b7280',\r\n                          fontSize: '12px'\r\n                        }}>\r\n                          Sin documento\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Certificados Adicionales */}\r\n                  {selectedDocuments.certificados && selectedDocuments.certificados.length > 0 && (\r\n                    <div style={{\r\n                      padding: '20px',\r\n                      background: '#f9fafb',\r\n                      borderRadius: '8px'\r\n                    }}>\r\n                      <h5 style={{ \r\n                        margin: '0 0 15px 0', \r\n                        fontSize: '16px', \r\n                        fontWeight: '600', \r\n                        color: '#374151' \r\n                      }}>\r\n                        📚 Certificados de Capacitación\r\n                      </h5>\r\n                      <div>\r\n                        {selectedDocuments.certificados.map((cert, index) => (\r\n                          <div key={index} style={{\r\n                            padding: '10px',\r\n                            background: 'white',\r\n                            borderRadius: '6px',\r\n                            marginBottom: '8px',\r\n                            display: 'flex',\r\n                            justifyContent: 'space-between',\r\n                            alignItems: 'center',\r\n                            border: '1px solid #e5e7eb'\r\n                          }}>\r\n                            <div style={{ flex: 1, minWidth: 0 }}>\r\n                              <div style={{ \r\n                                fontWeight: '500', \r\n                                fontSize: '13px',\r\n                                color: '#1f2937'\r\n                              }}>\r\n                                📜 {cert.nombre || 'Certificado'}\r\n                              </div>\r\n                              <div style={{ \r\n                                color: '#6b7280', \r\n                                fontSize: '11px',\r\n                                marginTop: '2px' \r\n                              }}>\r\n                                {cert.tamaño && formatFileSize(cert.tamaño)} \r\n                                {cert.fecha && ` • ${new Date(cert.fecha).toLocaleDateString('es-CL')}`}\r\n                              </div>\r\n                            </div>\r\n                            <a \r\n                              href={cert.url}\r\n                              target=\"_blank\"\r\n                              rel=\"noopener noreferrer\"\r\n                              style={{\r\n                                padding: '4px 8px',\r\n                                background: '#3b82f6',\r\n                                color: 'white',\r\n                                borderRadius: '4px',\r\n                                textDecoration: 'none',\r\n                                fontSize: '11px',\r\n                                marginLeft: '10px'\r\n                              }}\r\n                            >\r\n                              Ver\r\n                            </a>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Mensaje si no hay documentos */}\r\n              {isVehicle ? (\r\n                !selectedDocuments.permisoCirculacion?.url && \r\n                !selectedDocuments.revisionTecnica?.url && \r\n                !selectedDocuments.seguroObligatorio?.url && (\r\n                  <div style={{\r\n                    padding: '40px',\r\n                    textAlign: 'center',\r\n                    color: '#6b7280',\r\n                    background: '#f9fafb',\r\n                    borderRadius: '8px',\r\n                    marginTop: '20px'\r\n                  }}>\r\n                    <div style={{ fontSize: '48px', marginBottom: '10px' }}>📭</div>\r\n                    <p>No hay documentos registrados para este vehículo</p>\r\n                  </div>\r\n                )\r\n              ) : (\r\n                !selectedDocuments.licenciaConducir?.url && \r\n                !selectedDocuments.certificadoOperador?.url && \r\n                selectedDocuments.certificados?.length === 0 && (\r\n                  <div style={{\r\n                    padding: '40px',\r\n                    textAlign: 'center',\r\n                    color: '#6b7280',\r\n                    background: '#f9fafb',\r\n                    borderRadius: '8px'\r\n                  }}>\r\n                    <div style={{ fontSize: '48px', marginBottom: '10px' }}>📭</div>\r\n                    <p>No hay documentos registrados para este trabajador</p>\r\n                  </div>\r\n                )\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div style={{ width: '100%', minHeight: '100vh', background: '#f3f4f6' }}>\r\n      {/* Header */}\r\n      <div style={{\r\n        background: 'linear-gradient(135deg, #3b82f6 0%, #1e40af 100%)',\r\n        color: 'white',\r\n        padding: isMobile ? '15px' : '20px',\r\n        boxShadow: '0 2px 10px rgba(0,0,0,0.1)'\r\n      }}>\r\n        <div style={{ \r\n          maxWidth: '1400px', \r\n          margin: '0 auto',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          flexWrap: isMobile ? 'wrap' : 'nowrap',\r\n          gap: '10px'\r\n        }}>\r\n          <div>\r\n            <h1 style={{ \r\n              margin: 0, \r\n              fontSize: isMobile ? '20px' : '24px', \r\n              fontWeight: '600' \r\n            }}>\r\n              🚛 Panel de Gestión de Flota\r\n            </h1>\r\n            <p style={{ \r\n              margin: '4px 0 0 0', \r\n              fontSize: isMobile ? '12px' : '14px', \r\n              opacity: 0.9 \r\n            }}>\r\n              Control de vehículos y trabajadores\r\n            </p>\r\n          </div>\r\n          \r\n          <div style={{ \r\n            display: 'flex', \r\n            gap: '10px', \r\n            alignItems: 'center',\r\n            flexWrap: 'wrap'\r\n          }}>\r\n            {onViewChange && (\r\n              <>\r\n                <button\r\n                  onClick={() => onViewChange('dashboard')}\r\n                  style={{\r\n                    padding: isMobile ? '6px 10px' : '8px 14px',\r\n                    background: 'rgba(255,255,255,0.1)',\r\n                    color: 'white',\r\n                    border: '1px solid rgba(255,255,255,0.3)',\r\n                    borderRadius: '6px',\r\n                    cursor: 'pointer',\r\n                    fontSize: isMobile ? '12px' : '14px'\r\n                  }}\r\n                >\r\n                  📊 Dashboard GPS\r\n                </button>\r\n                <button\r\n                  onClick={() => onViewChange('zones')}\r\n                  style={{\r\n                    padding: isMobile ? '6px 10px' : '8px 14px',\r\n                    background: 'rgba(255,255,255,0.1)',\r\n                    color: 'white',\r\n                    border: '1px solid rgba(255,255,255,0.3)',\r\n                    borderRadius: '6px',\r\n                    cursor: 'pointer',\r\n                    fontSize: isMobile ? '12px' : '14px'\r\n                  }}\r\n                >\r\n                  🗺️ Gestión Zonas\r\n                </button>\r\n              </>\r\n            )}\r\n            \r\n            <span style={{ fontSize: isMobile ? '12px' : '14px' }}>\r\n              👤 {currentUser.name || currentUser.email}\r\n            </span>\r\n            <button\r\n              onClick={onLogout}\r\n              style={{\r\n                padding: isMobile ? '6px 10px' : '8px 16px',\r\n                background: '#ef4444',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                cursor: 'pointer',\r\n                fontSize: isMobile ? '12px' : '14px',\r\n                fontWeight: '600'\r\n              }}\r\n            >\r\n              🚪 Salir\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ maxWidth: '1400px', margin: '0 auto', padding: isMobile ? '15px' : '20px' }}>\r\n        {/* Mensajes */}\r\n        {message.text && (\r\n          <div style={{\r\n            padding: '12px',\r\n            borderRadius: '8px',\r\n            marginBottom: '20px',\r\n            background: message.type === 'success' ? '#dcfce7' : '#fee2e2',\r\n            border: `1px solid ${message.type === 'success' ? '#86efac' : '#fecaca'}`,\r\n            color: message.type === 'success' ? '#166534' : '#991b1b'\r\n          }}>\r\n            {message.text}\r\n          </div>\r\n        )}\r\n\r\n        {/* Estadísticas rápidas */}\r\n        <div style={{\r\n          display: 'grid',\r\n          gridTemplateColumns: `repeat(auto-fit, minmax(${isMobile ? '140px' : '200px'}, 1fr))`,\r\n          gap: '15px',\r\n          marginBottom: '25px'\r\n        }}>\r\n          <div style={{\r\n            background: 'white',\r\n            padding: '20px',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n            borderLeft: '4px solid #3b82f6'\r\n          }}>\r\n            <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#1f2937' }}>\r\n              {vehicleStats.total}\r\n            </div>\r\n            <div style={{ color: '#6b7280', fontSize: '13px' }}>🚛 Total Vehículos</div>\r\n          </div>\r\n\r\n          <div style={{\r\n            background: 'white',\r\n            padding: '20px',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n            borderLeft: '4px solid #22c55e'\r\n          }}>\r\n            <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#1f2937' }}>\r\n              {vehicleStats.disponibles}\r\n            </div>\r\n            <div style={{ color: '#6b7280', fontSize: '13px' }}>✅ Disponibles</div>\r\n          </div>\r\n\r\n          <div style={{\r\n            background: 'white',\r\n            padding: '20px',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n            borderLeft: '4px solid #f59e0b'\r\n          }}>\r\n            <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#1f2937' }}>\r\n              {vehicleStats.enUso}\r\n            </div>\r\n            <div style={{ color: '#6b7280', fontSize: '13px' }}>🔧 En Uso</div>\r\n          </div>\r\n\r\n          <div style={{\r\n            background: 'white',\r\n            padding: '20px',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n            borderLeft: '4px solid #8b5cf6'\r\n          }}>\r\n            <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#1f2937' }}>\r\n              {workerStats.total}\r\n            </div>\r\n            <div style={{ color: '#6b7280', fontSize: '13px' }}>👷 Trabajadores</div>\r\n          </div>\r\n\r\n          <div style={{\r\n            background: 'white',\r\n            padding: '20px',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n            borderLeft: '4px solid #10b981'\r\n          }}>\r\n            <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#1f2937' }}>\r\n              {workerStats.activos}\r\n            </div>\r\n            <div style={{ color: '#6b7280', fontSize: '13px' }}>🟢 GPS Activos</div>\r\n          </div>\r\n\r\n          <div style={{\r\n            background: 'white',\r\n            padding: '20px',\r\n            borderRadius: '12px',\r\n            boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n            borderLeft: '4px solid #06b6d4'\r\n          }}>\r\n            <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#1f2937' }}>\r\n              {workerStats.trabajando}\r\n            </div>\r\n            <div style={{ color: '#6b7280', fontSize: '13px' }}>🔧 Trabajando</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Controles de búsqueda y filtros */}\r\n        <div style={{\r\n          background: 'white',\r\n          padding: '20px',\r\n          borderRadius: '12px',\r\n          marginBottom: '20px',\r\n          boxShadow: '0 2px 8px rgba(0,0,0,0.05)'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '15px',\r\n            flexWrap: 'wrap',\r\n            alignItems: 'center'\r\n          }}>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"🔍 Buscar por nombre, patente, email...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              style={{\r\n                flex: isMobile ? '1 1 100%' : '1 1 300px',\r\n                padding: '10px 15px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px',\r\n                outline: 'none'\r\n              }}\r\n            />\r\n            \r\n            <select\r\n              value={filterStatus}\r\n              onChange={(e) => setFilterStatus(e.target.value)}\r\n              style={{\r\n                padding: '10px 15px',\r\n                border: '1px solid #d1d5db',\r\n                borderRadius: '8px',\r\n                fontSize: '14px',\r\n                cursor: 'pointer',\r\n                minWidth: '150px'\r\n              }}\r\n            >\r\n              <option value=\"todos\">📋 Todos</option>\r\n              <option value=\"disponible\">✅ Disponible</option>\r\n              <option value=\"en_uso\">🔧 En Uso</option>\r\n              <option value=\"mantenimiento\">🔧 Mantenimiento</option>\r\n              <option value=\"en_camino\">🚗 En Camino</option>\r\n              <option value=\"trabajando\">👷 Trabajando</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div style={{\r\n          display: 'flex',\r\n          gap: '10px',\r\n          marginBottom: '20px',\r\n          borderBottom: '2px solid #e5e7eb'\r\n        }}>\r\n          <button\r\n            onClick={() => setActiveTab('vehicles')}\r\n            style={{\r\n              padding: '12px 24px',\r\n              background: activeTab === 'vehicles' ? 'white' : 'transparent',\r\n              color: activeTab === 'vehicles' ? '#1e293b' : '#64748b',\r\n              border: 'none',\r\n              borderBottom: activeTab === 'vehicles' ? '2px solid #3b82f6' : 'none',\r\n              fontSize: '16px',\r\n              fontWeight: activeTab === 'vehicles' ? '600' : '400',\r\n              cursor: 'pointer',\r\n              marginBottom: '-2px'\r\n            }}\r\n          >\r\n            🚛 Vehículos ({filteredVehiculos.length})\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('workers')}\r\n            style={{\r\n              padding: '12px 24px',\r\n              background: activeTab === 'workers' ? 'white' : 'transparent',\r\n              color: activeTab === 'workers' ? '#1e293b' : '#64748b',\r\n              border: 'none',\r\n              borderBottom: activeTab === 'workers' ? '2px solid #3b82f6' : 'none',\r\n              fontSize: '16px',\r\n              fontWeight: activeTab === 'workers' ? '600' : '400',\r\n              cursor: 'pointer',\r\n              marginBottom: '-2px'\r\n            }}\r\n          >\r\n            👷 Trabajadores ({filteredTrabajadores.length})\r\n          </button>\r\n        </div>\r\n\r\n        {/* Lista de Vehículos */}\r\n        {activeTab === 'vehicles' && (\r\n          <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fill, minmax(350px, 1fr))',\r\n            gap: '20px'\r\n          }}>\r\n            {filteredVehiculos.map(vehiculo => {\r\n              const operador = users.find(u => u.id === vehiculo.operadorAsignado);\r\n              const isExpanded = expandedCards[vehiculo.id];\r\n              const isEditingOperator = quickEditMode[vehiculo.id];\r\n              \r\n              return (\r\n                <div key={vehiculo.id} style={{\r\n                  background: 'white',\r\n                  borderRadius: '12px',\r\n                  boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n                  overflow: 'hidden',\r\n                  transition: 'all 0.3s ease',\r\n                  border: vehiculo.estado === 'en_uso' ? '2px solid #3b82f6' : '1px solid #e5e7eb'\r\n                }}>\r\n                  {/* Header de la tarjeta */}\r\n                  <div style={{\r\n                    padding: '15px 20px',\r\n                    background: vehiculo.estado === 'disponible' ? '#dcfce7' :\r\n                              vehiculo.estado === 'en_uso' ? '#dbeafe' :\r\n                              vehiculo.estado === 'mantenimiento' ? '#fef3c7' : '#fee2e2',\r\n                    borderBottom: '1px solid #e5e7eb'\r\n                  }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                      <h3 style={{ margin: 0, fontSize: '18px', fontWeight: '600', color: '#1f2937' }}>\r\n                        {vehiculo.tipo === 'maquinaria' ? '🏗️' : '🚗'} {vehiculo.nombre}\r\n                      </h3>\r\n                      <span style={{\r\n                        padding: '4px 10px',\r\n                        borderRadius: '20px',\r\n                        fontSize: '12px',\r\n                        fontWeight: '500',\r\n                        background: 'white',\r\n                        color: vehiculo.estado === 'disponible' ? '#15803d' :\r\n                               vehiculo.estado === 'en_uso' ? '#1e40af' :\r\n                               vehiculo.estado === 'mantenimiento' ? '#92400e' : '#991b1b'\r\n                      }}>\r\n                        {vehiculo.estado === 'disponible' ? '✅ Disponible' :\r\n                         vehiculo.estado === 'en_uso' ? '🔧 En Uso' :\r\n                         vehiculo.estado === 'mantenimiento' ? '🔧 Mantenimiento' : '❌ Fuera de Servicio'}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Contenido de la tarjeta */}\r\n                  <div style={{ padding: '20px' }}>\r\n                    <div style={{ display: 'grid', gap: '10px', fontSize: '14px' }}>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <span style={{ color: '#6b7280' }}>📋 Patente:</span>\r\n                        <span style={{ fontWeight: '500' }}>{vehiculo.patente || 'N/A'}</span>\r\n                      </div>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <span style={{ color: '#6b7280' }}>🏭 Marca/Modelo:</span>\r\n                        <span style={{ fontWeight: '500' }}>{vehiculo.marca} {vehiculo.modelo}</span>\r\n                      </div>\r\n                      \r\n                      {/* Campo de operador con edición rápida */}\r\n                      <div style={{ \r\n                        display: 'flex', \r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'center',\r\n                        padding: '8px',\r\n                        background: isEditingOperator ? '#f0f9ff' : 'transparent',\r\n                        borderRadius: '6px',\r\n                        border: isEditingOperator ? '2px solid #3b82f6' : 'none',\r\n                        margin: isEditingOperator ? '-2px' : '0'\r\n                      }}>\r\n                        <span style={{ color: '#6b7280', minWidth: '80px' }}>👤 Operador:</span>\r\n                        {isEditingOperator ? (\r\n                          <div style={{ display: 'flex', gap: '8px', alignItems: 'center', flex: 1 }}>\r\n                            <select\r\n                              style={{\r\n                                flex: 1,\r\n                                padding: '6px',\r\n                                border: '1px solid #d1d5db',\r\n                                borderRadius: '4px',\r\n                                fontSize: '13px',\r\n                                background: 'white'\r\n                              }}\r\n                              defaultValue={vehiculo.operadorAsignado || ''}\r\n                              onChange={(e) => {\r\n                                quickUpdateOperator(vehiculo.id, e.target.value);\r\n                              }}\r\n                              disabled={loading}\r\n                            >\r\n                              <option value=\"\">Sin asignar</option>\r\n                              {users.filter(u => u.role === 'trabajador').map(user => (\r\n                                <option key={user.id} value={user.id}>\r\n                                  {user.name || user.email}\r\n                                </option>\r\n                              ))}\r\n                            </select>\r\n                            <button\r\n                              onClick={() => setQuickEditMode({ ...quickEditMode, [vehiculo.id]: false })}\r\n                              style={{\r\n                                padding: '4px 8px',\r\n                                background: '#ef4444',\r\n                                color: 'white',\r\n                                border: 'none',\r\n                                borderRadius: '4px',\r\n                                fontSize: '12px',\r\n                                cursor: 'pointer'\r\n                              }}\r\n                            >\r\n                              ✕\r\n                            </button>\r\n                          </div>\r\n                        ) : (\r\n                          <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n                            <span style={{ fontWeight: '500' }}>{operador?.name || 'Sin asignar'}</span>\r\n                            <button\r\n                              onClick={() => setQuickEditMode({ ...quickEditMode, [vehiculo.id]: true })}\r\n                              style={{\r\n                                padding: '2px 6px',\r\n                                background: '#3b82f6',\r\n                                color: 'white',\r\n                                border: 'none',\r\n                                borderRadius: '4px',\r\n                                fontSize: '11px',\r\n                                cursor: 'pointer',\r\n                                fontWeight: '600'\r\n                              }}\r\n                            >\r\n                              Cambiar\r\n                            </button>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <span style={{ color: '#6b7280' }}>📏 Kilometraje:</span>\r\n                        <span style={{ fontWeight: '500' }}>{vehiculo.kilometraje?.toLocaleString() || 0} km</span>\r\n                      </div>\r\n\r\n                      {/* Información expandida */}\r\n                      {isExpanded && (\r\n                        <>\r\n                          <div style={{ borderTop: '1px solid #e5e7eb', paddingTop: '10px', marginTop: '5px' }}>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                              <span style={{ color: '#6b7280' }}>⛽ Combustible:</span>\r\n                              <span style={{ fontWeight: '500' }}>{vehiculo.tipoCombustible || 'N/A'}</span>\r\n                            </div>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                              <span style={{ color: '#6b7280' }}>🔧 Último Mant.:</span>\r\n                              <span style={{ fontWeight: '500' }}>\r\n                                {vehiculo.ultimoMantenimiento ? \r\n                                  new Date(vehiculo.ultimoMantenimiento).toLocaleDateString('es-CL') : \r\n                                  'Sin registro'}\r\n                              </span>\r\n                            </div>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                              <span style={{ color: '#6b7280' }}>📅 Próximo Mant.:</span>\r\n                              <span style={{ fontWeight: '500' }}>\r\n                                {vehiculo.proximoMantenimiento ? \r\n                                  new Date(vehiculo.proximoMantenimiento).toLocaleDateString('es-CL') : \r\n                                  'No programado'}\r\n                              </span>\r\n                            </div>\r\n                            {vehiculo.observaciones && (\r\n                              <div style={{ marginTop: '10px', padding: '10px', background: '#f9fafb', borderRadius: '6px' }}>\r\n                                <strong style={{ color: '#6b7280', fontSize: '12px' }}>📝 Observaciones:</strong>\r\n                                <p style={{ margin: '5px 0 0 0', fontSize: '13px' }}>{vehiculo.observaciones}</p>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Botones de acción */}\r\n                    <div style={{ display: 'flex', gap: '10px', marginTop: '15px' }}>\r\n                      <button\r\n                        onClick={() => toggleCardExpansion(vehiculo.id)}\r\n                        style={{\r\n                          flex: 1,\r\n                          padding: '8px',\r\n                          background: '#f3f4f6',\r\n                          color: '#374151',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: '13px',\r\n                          cursor: 'pointer',\r\n                          fontWeight: '500'\r\n                        }}\r\n                      >\r\n                        {isExpanded ? '➖ Ver menos' : '➕ Ver más'}\r\n                      </button>\r\n                      <button\r\n                        onClick={() => loadVehicleDocuments(vehiculo.id, vehiculo)}\r\n                        style={{\r\n                          flex: 1,\r\n                          padding: '8px',\r\n                          background: '#10b981',\r\n                          color: 'white',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: '13px',\r\n                          cursor: 'pointer',\r\n                          fontWeight: '500'\r\n                        }}\r\n                      >\r\n                        📄 Documentos\r\n                      </button>\r\n                      <button\r\n                        onClick={() => openEditModal(vehiculo, 'vehicle')}\r\n                        style={{\r\n                          flex: 1,\r\n                          padding: '8px',\r\n                          background: '#3b82f6',\r\n                          color: 'white',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: '13px',\r\n                          cursor: 'pointer',\r\n                          fontWeight: '500'\r\n                        }}\r\n                      >\r\n                        ✏️ Editar\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n\r\n        {/* Lista de Trabajadores */}\r\n        {activeTab === 'workers' && (\r\n          <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fill, minmax(350px, 1fr))',\r\n            gap: '20px'\r\n          }}>\r\n            {filteredTrabajadores.map(trabajador => {\r\n              const userData = users.find(u => u.id === trabajador.id);\r\n              const vehiculo = vehiculos.find(v => v.operadorAsignado === trabajador.id);\r\n              const isExpanded = expandedCards[trabajador.id];\r\n              const isGPSActive = trabajador.ubicacion && \r\n                (new Date() - new Date(trabajador.ubicacion.timestamp)) < 60000;\r\n              \r\n              return (\r\n                <div key={trabajador.id} style={{\r\n                  background: 'white',\r\n                  borderRadius: '12px',\r\n                  boxShadow: '0 2px 8px rgba(0,0,0,0.05)',\r\n                  overflow: 'hidden',\r\n                  transition: 'all 0.3s ease',\r\n                  border: isGPSActive ? '2px solid #10b981' : '1px solid #e5e7eb'\r\n                }}>\r\n                  {/* Header de la tarjeta */}\r\n                  <div style={{\r\n                    padding: '15px 20px',\r\n                    background: trabajador.estado === 'en_camino' ? '#ede9fe' :\r\n                              trabajador.estado === 'trabajando' ? '#dcfce7' :\r\n                              trabajador.estado === 'disponible' ? '#e0f2fe' : '#f3f4f6',\r\n                    borderBottom: '1px solid #e5e7eb'\r\n                  }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                      <h3 style={{ margin: 0, fontSize: '18px', fontWeight: '600', color: '#1f2937' }}>\r\n                        👷 {trabajador.nombre || userData?.name || 'Trabajador'}\r\n                      </h3>\r\n                      <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n                        {isGPSActive && (\r\n                          <span style={{\r\n                            width: '10px',\r\n                            height: '10px',\r\n                            borderRadius: '50%',\r\n                            background: '#10b981',\r\n                            animation: 'pulse 2s infinite'\r\n                          }} title=\"GPS Activo\" />\r\n                        )}\r\n                        <span style={{\r\n                          padding: '4px 10px',\r\n                          borderRadius: '20px',\r\n                          fontSize: '12px',\r\n                          fontWeight: '500',\r\n                          background: 'white',\r\n                          color: trabajador.estado === 'en_camino' ? '#6b21a8' :\r\n                                 trabajador.estado === 'trabajando' ? '#15803d' :\r\n                                 trabajador.estado === 'disponible' ? '#0891b2' : '#6b7280'\r\n                        }}>\r\n                          {trabajador.estado === 'en_camino' ? '🚗 En Camino' :\r\n                           trabajador.estado === 'trabajando' ? '🔧 Trabajando' :\r\n                           trabajador.estado === 'disponible' ? '✅ Disponible' : '⏸️ Inactivo'}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Contenido de la tarjeta */}\r\n                  <div style={{ padding: '20px' }}>\r\n                    <div style={{ display: 'grid', gap: '10px', fontSize: '14px' }}>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <span style={{ color: '#6b7280' }}>📧 Email:</span>\r\n                        <span style={{ fontWeight: '500', fontSize: '13px' }}>{userData?.email || 'N/A'}</span>\r\n                      </div>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <span style={{ color: '#6b7280' }}>📱 Teléfono:</span>\r\n                        <span style={{ fontWeight: '500' }}>{userData?.phone || trabajador.telefono || 'N/A'}</span>\r\n                      </div>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <span style={{ color: '#6b7280' }}>🚛 Vehículo:</span>\r\n                        <span style={{ fontWeight: '500' }}>{vehiculo?.nombre || 'Sin asignar'}</span>\r\n                      </div>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                        <span style={{ color: '#6b7280' }}>📍 GPS:</span>\r\n                        <span style={{ \r\n                          fontWeight: '500',\r\n                          color: isGPSActive ? '#10b981' : '#ef4444'\r\n                        }}>\r\n                          {isGPSActive ? '🟢 Activo' : '🔴 Inactivo'}\r\n                        </span>\r\n                      </div>\r\n\r\n                      {/* Información expandida */}\r\n                      {isExpanded && (\r\n                        <>\r\n                          <div style={{ borderTop: '1px solid #e5e7eb', paddingTop: '10px', marginTop: '5px' }}>\r\n                            {trabajador.zonaDestino && (\r\n                              <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                                <span style={{ color: '#6b7280' }}>🎯 Zona Destino:</span>\r\n                                <span style={{ fontWeight: '500' }}>{trabajador.zonaDestino}</span>\r\n                              </div>\r\n                            )}\r\n                            {trabajador.ubicacion && (\r\n                              <>\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px' }}>\r\n                                  <span style={{ color: '#6b7280' }}>📍 Última ubicación:</span>\r\n                                  <span style={{ fontWeight: '500', fontSize: '12px' }}>\r\n                                    {new Date(trabajador.ubicacion.timestamp).toLocaleTimeString('es-CL')}\r\n                                  </span>\r\n                                </div>\r\n                                <div style={{\r\n                                  marginTop: '10px',\r\n                                  padding: '10px',\r\n                                  background: '#f9fafb',\r\n                                  borderRadius: '6px',\r\n                                  fontSize: '12px',\r\n                                  fontFamily: 'monospace'\r\n                                }}>\r\n                                  <div>Lat: {trabajador.ubicacion.lat.toFixed(6)}</div>\r\n                                  <div>Lng: {trabajador.ubicacion.lng.toFixed(6)}</div>\r\n                                </div>\r\n                              </>\r\n                            )}\r\n                            {trabajador.ultimoTrabajo && (\r\n                              <div style={{ marginTop: '10px', padding: '10px', background: '#f0f9ff', borderRadius: '6px' }}>\r\n                                <strong style={{ color: '#0369a1', fontSize: '12px' }}>📋 Último trabajo:</strong>\r\n                                <p style={{ margin: '5px 0 0 0', fontSize: '13px' }}>\r\n                                  {trabajador.ultimoTrabajo.zona} - {\r\n                                    trabajador.ultimoTrabajo.completado ? '✅ Completado' : '⏳ En proceso'\r\n                                  }\r\n                                </p>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Botones de acción */}\r\n                    <div style={{ display: 'flex', gap: '10px', marginTop: '15px' }}>\r\n                      <button\r\n                        onClick={() => toggleCardExpansion(trabajador.id)}\r\n                        style={{\r\n                          flex: 1,\r\n                          padding: '8px',\r\n                          background: '#f3f4f6',\r\n                          color: '#374151',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: '13px',\r\n                          cursor: 'pointer',\r\n                          fontWeight: '500'\r\n                        }}\r\n                      >\r\n                        {isExpanded ? '➖ Ver menos' : '➕ Ver más'}\r\n                      </button>\r\n                      <button\r\n                        onClick={() => loadWorkerDocuments(trabajador.id, trabajador)}\r\n                        style={{\r\n                          flex: 1,\r\n                          padding: '8px',\r\n                          background: '#10b981',\r\n                          color: 'white',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: '13px',\r\n                          cursor: 'pointer',\r\n                          fontWeight: '500'\r\n                        }}\r\n                      >\r\n                        📄 Documentos\r\n                      </button>\r\n                      <button\r\n                        onClick={() => openEditModal(trabajador, 'worker')}\r\n                        style={{\r\n                          flex: 1,\r\n                          padding: '8px',\r\n                          background: '#3b82f6',\r\n                          color: 'white',\r\n                          border: 'none',\r\n                          borderRadius: '6px',\r\n                          fontSize: '13px',\r\n                          cursor: 'pointer',\r\n                          fontWeight: '500'\r\n                        }}\r\n                      >\r\n                        ✏️ Editar\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n\r\n        {/* No hay resultados */}\r\n        {((activeTab === 'vehicles' && filteredVehiculos.length === 0) ||\r\n          (activeTab === 'workers' && filteredTrabajadores.length === 0)) && (\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '12px',\r\n            padding: '60px 20px',\r\n            textAlign: 'center',\r\n            color: '#6b7280'\r\n          }}>\r\n            <div style={{ fontSize: '48px', marginBottom: '20px' }}>\r\n              {activeTab === 'vehicles' ? '🚛' : '👷'}\r\n            </div>\r\n            <p style={{ fontSize: '16px' }}>\r\n              No se encontraron {activeTab === 'vehicles' ? 'vehículos' : 'trabajadores'} \r\n              {searchTerm && ` para \"${searchTerm}\"`}\r\n              {filterStatus !== 'todos' && ` con estado \"${filterStatus}\"`}\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modal de edición */}\r\n      {showEditModal && editingItem && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0,0,0,0.5)',\r\n          display: 'flex',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          zIndex: 2000,\r\n          padding: '20px'\r\n        }}>\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '12px',\r\n            padding: isMobile ? '20px' : '30px',\r\n            maxWidth: '500px',\r\n            width: '100%',\r\n            maxHeight: '80vh',\r\n            overflow: 'auto'\r\n          }}>\r\n            <h2 style={{ margin: '0 0 20px 0', color: '#1f2937' }}>\r\n              ✏️ Editar {editingItem.type === 'vehicle' ? 'Vehículo' : 'Trabajador'}\r\n            </h2>\r\n\r\n            {editingItem.type === 'vehicle' ? (\r\n              <>\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Nombre\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editFormData.nombre}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, nombre: e.target.value })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Patente\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editFormData.patente}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, patente: e.target.value })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Kilometraje\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={editFormData.kilometraje}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, kilometraje: parseInt(e.target.value) })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Operador Asignado\r\n                  </label>\r\n                  <select\r\n                    value={editFormData.operadorAsignado}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, operadorAsignado: e.target.value })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  >\r\n                    <option value=\"\">-- Sin asignar --</option>\r\n                    {users.filter(u => u.role === 'trabajador').map(user => (\r\n                      <option key={user.id} value={user.id}>\r\n                        {user.name || user.email}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Observaciones\r\n                  </label>\r\n                  <textarea\r\n                    value={editFormData.observaciones}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, observaciones: e.target.value })}\r\n                    rows={3}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px',\r\n                      resize: 'vertical'\r\n                    }}\r\n                  />\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Nombre\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={editFormData.nombre}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, nombre: e.target.value })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Email\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    value={editFormData.email}\r\n                    disabled\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px',\r\n                      background: '#f3f4f6',\r\n                      cursor: 'not-allowed'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Teléfono\r\n                  </label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    value={editFormData.telefono}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, telefono: e.target.value })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '15px' }}>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', fontWeight: '500' }}>\r\n                    Vehículo Asignado\r\n                  </label>\r\n                  <select\r\n                    value={editFormData.vehicleId}\r\n                    onChange={(e) => setEditFormData({ ...editFormData, vehicleId: e.target.value })}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '10px',\r\n                      border: '1px solid #d1d5db',\r\n                      borderRadius: '6px',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  >\r\n                    <option value=\"\">-- Sin asignar --</option>\r\n                    {vehiculos.filter(v => !v.operadorAsignado || v.operadorAsignado === editingItem.id).map(vehiculo => (\r\n                      <option key={vehiculo.id} value={vehiculo.id}>\r\n                        {vehiculo.nombre}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            <div style={{ display: 'flex', gap: '10px', marginTop: '20px' }}>\r\n              <button\r\n                onClick={() => editingItem.type === 'vehicle' ? saveVehicleChanges() : saveWorkerChanges()}\r\n                disabled={loading}\r\n                style={{\r\n                  flex: 1,\r\n                  padding: '12px',\r\n                  background: loading ? '#9ca3af' : '#22c55e',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  fontSize: '14px',\r\n                  fontWeight: '500',\r\n                  cursor: loading ? 'not-allowed' : 'pointer'\r\n                }}\r\n              >\r\n                {loading ? 'Guardando...' : '✅ Guardar Cambios'}\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowEditModal(false);\r\n                  setEditingItem(null);\r\n                }}\r\n                style={{\r\n                  flex: 1,\r\n                  padding: '12px',\r\n                  background: '#6b7280',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  fontSize: '14px',\r\n                  fontWeight: '500',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                Cancelar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal de Documentos */}\r\n      <DocumentsModal />\r\n\r\n      <style jsx>{`\r\n        @keyframes pulse {\r\n          0% {\r\n            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);\r\n          }\r\n          70% {\r\n            box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);\r\n          }\r\n          100% {\r\n            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FleetPanel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
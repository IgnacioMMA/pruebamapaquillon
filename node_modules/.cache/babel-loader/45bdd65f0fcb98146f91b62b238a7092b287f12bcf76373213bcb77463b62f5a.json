{"ast":null,"code":"// src/services/pdfExportService.js\nimport{jsPDF}from'jspdf';import autoTable from'jspdf-autotable';// ========== CONFIGURACIÓN DE ESTILOS ==========\nconst COLORS={primary:'#667eea',secondary:'#764ba2',success:'#22c55e',warning:'#f59e0b',danger:'#ef4444',dark:'#1f2937',gray:'#6b7280'};const FONTS={title:20,subtitle:16,heading:14,normal:11,small:9};// ========== SERVICIO DE EXPORTACIÓN PDF ==========\nexport const pdfExportService={// ========== EXPORTAR USUARIO INDIVIDUAL A PDF (CON RUT Y LICENCIA) ==========\nexportSingleUserToPDF:(user,currentUser)=>{var _user$role;const doc=new jsPDF();const pageWidth=doc.internal.pageSize.width;const pageHeight=doc.internal.pageSize.height;// VALIDACIÓN DE DATOS\nif(!user){console.error('Error: No se recibió usuario para exportar');return;}console.log('Exportando usuario:',user);// Fecha y hora actual\nconst now=new Date();const fecha=now.toLocaleDateString('es-CL',{year:'numeric',month:'long',day:'numeric'});const hora=now.toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit'});// ========== HEADER CON GRADIENTE ==========\ndoc.setFillColor(102,126,234);doc.rect(0,0,pageWidth,50,'F');// Título\ndoc.setTextColor(255,255,255);doc.setFontSize(24);doc.setFont(undefined,'bold');doc.text('SISTEMA MAPAQUILLON',pageWidth/2,25,{align:'center'});doc.setFontSize(16);doc.setFont(undefined,'normal');doc.text('Ficha de Usuario',pageWidth/2,38,{align:'center'});// ========== FOTO/AVATAR PLACEHOLDER ==========\ndoc.setFillColor(240,242,245);doc.circle(pageWidth/2,75,20,'F');// Inicial del usuario\ndoc.setTextColor(102,126,234);doc.setFontSize(24);doc.setFont(undefined,'bold');const inicial=(user.name||user.email||'U').charAt(0).toUpperCase();doc.text(inicial,pageWidth/2,82,{align:'center'});// ========== NOMBRE DEL USUARIO ==========\ndoc.setTextColor(31,41,55);doc.setFontSize(20);doc.setFont(undefined,'bold');const nombreMostrar=user.name||user.email||'Usuario sin nombre';doc.text(nombreMostrar,pageWidth/2,105,{align:'center'});// Rol con badge\nconst roleColors={'superadmin':[109,33,168],'admin':[30,64,175],'trabajador':[22,163,74],'junta_vecinos':[217,119,6]};const roleNames={'superadmin':'SUPER ADMINISTRADOR','admin':'ADMINISTRADOR','trabajador':'TRABAJADOR','junta_vecinos':'JUNTA DE VECINOS'};const roleColor=roleColors[user.role]||[107,114,128];const roleName=roleNames[user.role]||((_user$role=user.role)===null||_user$role===void 0?void 0:_user$role.toUpperCase())||'ROL NO DEFINIDO';// Badge del rol\ndoc.setFillColor(...roleColor);const badgeWidth=roleName.length*5+20;doc.roundedRect(pageWidth/2-badgeWidth/2,110,badgeWidth,10,2,2,'F');doc.setTextColor(255,255,255);doc.setFontSize(10);doc.setFont(undefined,'bold');doc.text(roleName,pageWidth/2,117,{align:'center'});// ========== INFORMACIÓN DETALLADA ==========\nlet yPos=140;// Título de sección\ndoc.setTextColor(31,41,55);doc.setFontSize(14);doc.setFont(undefined,'bold');doc.text('INFORMACION PERSONAL',20,yPos);// Línea decorativa\ndoc.setDrawColor(229,231,235);doc.setLineWidth(0.5);doc.line(20,yPos+2,pageWidth-20,yPos+2);yPos+=15;// Función helper para agregar campo\nconst addField=(label,value,yPosition)=>{// Label\ndoc.setTextColor(107,114,128);doc.setFontSize(10);doc.setFont(undefined,'normal');doc.text(label,30,yPosition);// Value\ndoc.setTextColor(31,41,55);doc.setFontSize(12);doc.setFont(undefined,'bold');const displayValue=value||'No especificado';doc.text(displayValue,30,yPosition+6);return yPosition+18;};// Campos de información personal\nyPos=addField('RUT:',user.rut||'No especificado',yPos);yPos=addField('Correo Electronico:',user.email||'No especificado',yPos);yPos=addField('Telefono:',user.phone||'No especificado',yPos);// NUEVO: Licencia de conducir con detalles\nif(user.licenciaConducir){const licenciaTexto={'B':'Clase B - Vehiculos particulares','C':'Clase C - Vehiculos de dos ruedas','A1':'Clase A1 - Taxis','A2':'Clase A2 - Buses y taxibuses','A3':'Clase A3 - Transporte de carga simple','A4':'Clase A4 - Transporte con remolque','A5':'Clase A5 - Todo tipo de vehiculos','D':'Clase D - Maquinaria automotriz','E':'Clase E - Vehiculos de traccion animal','F':'Clase F - Vehiculos especiales'}[user.licenciaConducir]||`Clase ${user.licenciaConducir}`;yPos=addField('Licencia de Conducir:',licenciaTexto,yPos);}else{yPos=addField('Licencia de Conducir:','Sin licencia registrada',yPos);}yPos=addField('Localidad/Sector:',user.localidad||'No especificado',yPos);// Estado de la cuenta\nconst estadoCuenta=user.active===false?'INACTIVA':'ACTIVA';yPos=addField('Estado de la Cuenta:',estadoCuenta,yPos);// Fecha de registro\nif(user.createdAt){try{const fechaRegistro=new Date(user.createdAt).toLocaleDateString('es-CL',{year:'numeric',month:'long',day:'numeric'});yPos=addField('Fecha de Registro:',fechaRegistro,yPos);}catch(e){yPos=addField('Fecha de Registro:','No disponible',yPos);}}// ID del usuario\nyPos=addField('ID de Usuario:',user.id||user.uid||'No disponible',yPos);// ========== INFORMACIÓN ADICIONAL ==========\nyPos+=10;doc.setTextColor(31,41,55);doc.setFontSize(14);doc.setFont(undefined,'bold');doc.text('PERMISOS Y CAPACIDADES',20,yPos);doc.setDrawColor(229,231,235);doc.line(20,yPos+2,pageWidth-20,yPos+2);yPos+=15;// Permisos según el rol\ndoc.setTextColor(107,114,128);doc.setFontSize(10);doc.setFont(undefined,'normal');doc.text('Permisos del Usuario:',30,yPos);yPos+=8;const permisos={'superadmin':['- Acceso total al sistema','- Gestion de usuarios','- Gestion de vehiculos','- Configuracion del sistema','- Acceso a todos los modulos'],'admin':['- Dashboard GPS','- Gestion de zonas','- Monitoreo de flota','- Asignacion de trabajos','- NO puede crear usuarios'],'trabajador':['- Sistema GPS personal','- Recepcion de zonas asignadas','- Registro de recorridos','- Dashboard personal','- NO puede asignar trabajos'],'junta_vecinos':['- Crear solicitudes','- Ver estado de solicitudes','- Comunicacion con municipio','- Acceso limitado a su localidad']};const userPermisos=permisos[user.role]||['- Sin permisos definidos'];doc.setFontSize(9);userPermisos.forEach(permiso=>{if(yPos<pageHeight-60){doc.text(permiso,35,yPos);yPos+=6;}});// NUEVO: Sección de vehículos autorizados según licencia\nif(user.licenciaConducir&&yPos<pageHeight-80){yPos+=10;doc.setTextColor(107,114,128);doc.setFontSize(10);doc.setFont(undefined,'normal');doc.text('Vehiculos Autorizados a Conducir:',30,yPos);yPos+=8;doc.setFontSize(9);const vehiculosAutorizados={'B':['Automoviles','Camionetas hasta 3.500 kg'],'C':['Motocicletas','Motonetas','Vehiculos de 3 ruedas'],'A1':['Taxis','Vehiculos de alquiler'],'A2':['Buses','Minibuses','Taxibuses'],'A3':['Camiones simples','Vehiculos de carga'],'A4':['Camiones con remolque','Vehiculos articulados'],'A5':['Todo tipo de vehiculos motorizados'],'D':['Maquinaria pesada','Retroexcavadoras','Gruas'],'E':['Carretones','Vehiculos de traccion animal'],'F':['Vehiculos adaptados','Vehiculos especiales']};const vehiculos=vehiculosAutorizados[user.licenciaConducir]||['Segun licencia clase '+user.licenciaConducir];vehiculos.forEach(vehiculo=>{if(yPos<pageHeight-60){doc.text('- '+vehiculo,35,yPos);yPos+=6;}});}// ========== CÓDIGO QR SIMULADO ==========\nif(yPos<pageHeight-80){yPos+=10;doc.setFillColor(240,242,245);doc.rect(pageWidth/2-30,yPos,60,40,'F');// Texto dentro del recuadro\ndoc.setTextColor(31,41,55);doc.setFontSize(8);doc.setFont(undefined,'bold');doc.text('CODIGO ID',pageWidth/2,yPos+10,{align:'center'});doc.setFontSize(10);doc.setFont(undefined,'normal');const shortId=(user.id||user.uid||'NO-ID').substring(0,8).toUpperCase();doc.text(shortId,pageWidth/2,yPos+25,{align:'center'});// RUT si existe\nif(user.rut){doc.setFontSize(8);doc.text('RUT: '+user.rut,pageWidth/2,yPos+35,{align:'center'});}}// ========== PIE DE PÁGINA ==========\ndoc.setDrawColor(229,231,235);doc.line(20,pageHeight-35,pageWidth-20,pageHeight-35);doc.setTextColor(107,114,128);doc.setFontSize(9);doc.setFont(undefined,'italic');doc.text(`Generado el ${fecha} a las ${hora}`,20,pageHeight-25);doc.text(`Por: ${currentUser.name||currentUser.email}`,20,pageHeight-18);doc.text('Sistema MapaQuillon - Municipalidad de Quillon',pageWidth-20,pageHeight-18,{align:'right'});// Guardar el PDF con el nombre del usuario\nconst fileName=`usuario_${(user.name||user.email||'sin_nombre').replace(/[^\\w]/g,'_')}_${now.getTime()}.pdf`;doc.save(fileName);},// ========== EXPORTAR USUARIOS A PDF (CON RUT Y LICENCIA) ==========\nexportUsersToPDF:(users,currentUser)=>{const doc=new jsPDF('landscape');// Orientación horizontal para más columnas\nconst pageWidth=doc.internal.pageSize.width;const pageHeight=doc.internal.pageSize.height;const margins={top:20,left:15,right:15,bottom:20};// Fecha y hora actual\nconst now=new Date();const fecha=now.toLocaleDateString('es-CL',{year:'numeric',month:'long',day:'numeric'});const hora=now.toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit'});// ========== HEADER ==========\ndoc.setFillColor(102,126,234);doc.rect(0,0,pageWidth,40,'F');// Título principal\ndoc.setTextColor(255,255,255);doc.setFontSize(FONTS.title);doc.setFont(undefined,'bold');doc.text('SISTEMA MAPAQUILLÓN',pageWidth/2,20,{align:'center'});// Subtítulo\ndoc.setFontSize(FONTS.subtitle);doc.setFont(undefined,'normal');doc.text('Reporte de Usuarios',pageWidth/2,30,{align:'center'});// ========== INFORMACIÓN DEL REPORTE ==========\ndoc.setTextColor(COLORS.dark);doc.setFontSize(FONTS.small);doc.setFont(undefined,'normal');// Cuadro de información\ndoc.setFillColor(245,247,250);doc.rect(margins.left,50,pageWidth-margins.left-margins.right,25,'F');doc.text(`Fecha de generación: ${fecha}`,margins.left+5,60);doc.text(`Hora: ${hora}`,margins.left+5,67);doc.text(`Generado por: ${currentUser.name||currentUser.email}`,pageWidth/2,60);doc.text(`Total de usuarios: ${users.length}`,pageWidth/2,67);// ========== ESTADÍSTICAS DE USUARIOS ==========\nconst stats={superadmins:users.filter(u=>u.role==='superadmin').length,admins:users.filter(u=>u.role==='admin').length,trabajadores:users.filter(u=>u.role==='trabajador').length,juntasVecinos:users.filter(u=>u.role==='junta_vecinos').length,activos:users.filter(u=>u.active!==false).length,inactivos:users.filter(u=>u.active===false).length,conLicencia:users.filter(u=>u.licenciaConducir).length,sinLicencia:users.filter(u=>!u.licenciaConducir).length};// Cuadro de estadísticas\nlet yPosition=85;doc.setFontSize(FONTS.heading);doc.setFont(undefined,'bold');doc.text('Estadísticas de Usuarios',margins.left,yPosition);yPosition+=10;doc.setFontSize(FONTS.normal);doc.setFont(undefined,'normal');// Crear grid de estadísticas\nconst statsData=[['Super Admins',stats.superadmins.toString(),'Administradores',stats.admins.toString()],['Trabajadores',stats.trabajadores.toString(),'Juntas de Vecinos',stats.juntasVecinos.toString()],['Usuarios Activos',stats.activos.toString(),'Usuarios Inactivos',stats.inactivos.toString()],['Con Licencia',stats.conLicencia.toString(),'Sin Licencia',stats.sinLicencia.toString()]];autoTable(doc,{startY:yPosition,head:[],body:statsData,theme:'grid',styles:{fontSize:10,cellPadding:3},columnStyles:{0:{fontStyle:'bold',fillColor:[240,242,245]},2:{fontStyle:'bold',fillColor:[240,242,245]}}});// ========== TABLA DE USUARIOS ==========\nyPosition=doc.lastAutoTable.finalY+15;doc.setFontSize(FONTS.heading);doc.setFont(undefined,'bold');doc.text('Lista Detallada de Usuarios',margins.left,yPosition);// Preparar datos para la tabla con nuevas columnas\nconst tableHeaders=[['#','Nombre','RUT','Email','Rol','Licencia','Teléfono','Localidad','Estado']];const tableData=users.map((user,index)=>{const rol={'superadmin':'Super Admin','admin':'Administrador','trabajador':'Trabajador','junta_vecinos':'Junta Vecinos'}[user.role]||user.role||'Sin rol';const licencia=user.licenciaConducir?`Clase ${user.licenciaConducir}`:'No';return[(index+1).toString(),user.name||'Sin nombre',user.rut||'-',user.email||'',rol,licencia,user.phone||'-',user.localidad||'-',user.active===false?'Inactivo':'Activo'];});autoTable(doc,{startY:yPosition+7,head:tableHeaders,body:tableData,theme:'striped',headStyles:{fillColor:[102,126,234],textColor:255,fontSize:9,fontStyle:'bold'},bodyStyles:{fontSize:8},alternateRowStyles:{fillColor:[245,247,250]},columnStyles:{0:{cellWidth:10,halign:'center'},1:{cellWidth:35},2:{cellWidth:28},3:{cellWidth:45},4:{cellWidth:30},5:{cellWidth:20,halign:'center'},6:{cellWidth:25},7:{cellWidth:35},8:{cellWidth:20,halign:'center'}},didDrawPage:function(data){// Footer en cada página\ndoc.setFontSize(FONTS.small);doc.setTextColor(COLORS.gray);doc.text(`Página ${data.pageNumber}`,pageWidth/2,pageHeight-10,{align:'center'});}});// ========== RESUMEN DE LICENCIAS ==========\nconst finalY=doc.lastAutoTable.finalY;if(finalY<pageHeight-60){doc.addPage();let summaryY=30;doc.setFontSize(FONTS.heading);doc.setFont(undefined,'bold');doc.text('Resumen de Licencias de Conducir',margins.left,summaryY);summaryY+=10;// Contar licencias por tipo\nconst licenciaCount={};users.forEach(user=>{if(user.licenciaConducir){licenciaCount[user.licenciaConducir]=(licenciaCount[user.licenciaConducir]||0)+1;}});const licenciaData=Object.entries(licenciaCount).map(_ref=>{let[tipo,cantidad]=_ref;const descripcion={'B':'Vehículos particulares','C':'Vehículos de dos ruedas','A1':'Taxis','A2':'Buses y taxibuses','A3':'Transporte de carga simple','A4':'Transporte con remolque','A5':'Todo tipo de vehículos','D':'Maquinaria automotriz','E':'Vehículos de tracción animal','F':'Vehículos especiales'}[tipo]||'Otros';return[`Clase ${tipo}`,descripcion,cantidad.toString()];});if(licenciaData.length>0){autoTable(doc,{startY:summaryY,head:[['Clase','Descripción','Cantidad']],body:licenciaData,theme:'grid',headStyles:{fillColor:[102,126,234],textColor:255,fontSize:10,fontStyle:'bold'},bodyStyles:{fontSize:9},columnStyles:{0:{cellWidth:30},1:{cellWidth:100},2:{cellWidth:30,halign:'center'}}});}}// ========== PIE DE PÁGINA FINAL ==========\nconst lastY=doc.lastAutoTable?doc.lastAutoTable.finalY:finalY;if(lastY<pageHeight-40){doc.setDrawColor(200,200,200);doc.line(margins.left,lastY+10,pageWidth-margins.right,lastY+10);doc.setFontSize(FONTS.small);doc.setTextColor(COLORS.gray);doc.setFont(undefined,'italic');doc.text('Este documento fue generado automáticamente por el Sistema MapaQuillón',pageWidth/2,lastY+20,{align:'center'});doc.text('© 2024 Municipalidad de Quillón - Todos los derechos reservados',pageWidth/2,lastY+27,{align:'center'});}// Guardar el PDF\ndoc.save(`usuarios_mapaquillon_${now.getTime()}.pdf`);},// ========== EXPORTAR VEHÍCULOS A PDF ==========\nexportVehiclesToPDF:(vehiculos,tiposVehiculo,currentUser)=>{const doc=new jsPDF('landscape');const pageWidth=doc.internal.pageSize.width;const pageHeight=doc.internal.pageSize.height;const margins={top:20,left:15,right:15,bottom:20};// Fecha y hora actual\nconst now=new Date();const fecha=now.toLocaleDateString('es-CL',{year:'numeric',month:'long',day:'numeric'});const hora=now.toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit'});// ========== HEADER ==========\ndoc.setFillColor(59,130,246);doc.rect(0,0,pageWidth,40,'F');doc.setTextColor(255,255,255);doc.setFontSize(FONTS.title);doc.setFont(undefined,'bold');doc.text('SISTEMA MAPAQUILLÓN',pageWidth/2,20,{align:'center'});doc.setFontSize(FONTS.subtitle);doc.setFont(undefined,'normal');doc.text('Reporte de Flota Vehicular',pageWidth/2,30,{align:'center'});// ========== INFORMACIÓN DEL REPORTE ==========\ndoc.setTextColor(COLORS.dark);doc.setFontSize(FONTS.small);doc.setFont(undefined,'normal');doc.setFillColor(245,247,250);doc.rect(margins.left,50,pageWidth-margins.left-margins.right,25,'F');doc.text(`Fecha: ${fecha}`,margins.left+5,60);doc.text(`Hora: ${hora}`,margins.left+5,67);doc.text(`Generado por: ${currentUser.name||currentUser.email}`,pageWidth/2,60);doc.text(`Total de vehículos: ${vehiculos.length}`,pageWidth/2,67);// ========== ESTADÍSTICAS DE VEHÍCULOS ==========\nconst vehicleStats={disponibles:vehiculos.filter(v=>v.estado==='disponible').length,enUso:vehiculos.filter(v=>v.estado==='en_uso').length,mantenimiento:vehiculos.filter(v=>v.estado==='mantenimiento').length,fueraServicio:vehiculos.filter(v=>v.estado==='fuera_servicio').length};let yPosition=85;doc.setFontSize(FONTS.heading);doc.setFont(undefined,'bold');doc.text('Estado de la Flota',margins.left,yPosition);yPosition+=10;const vehicleStatsData=[['Disponibles',vehicleStats.disponibles.toString(),'En Uso',vehicleStats.enUso.toString()],['En Mantenimiento',vehicleStats.mantenimiento.toString(),'Fuera de Servicio',vehicleStats.fueraServicio.toString()]];autoTable(doc,{startY:yPosition,head:[],body:vehicleStatsData,theme:'grid',styles:{fontSize:10,cellPadding:3},columnStyles:{0:{fontStyle:'bold',fillColor:[240,242,245]},2:{fontStyle:'bold',fillColor:[240,242,245]}}});// ========== LISTA DE VEHÍCULOS ==========\nyPosition=doc.lastAutoTable.finalY+15;doc.setFontSize(FONTS.heading);doc.setFont(undefined,'bold');doc.text('Inventario de Vehículos',margins.left,yPosition);// Preparar datos para la tabla\nconst tableHeaders=[['#','Nombre','Tipo','Marca','Modelo','Año','Patente','Kilometraje','Estado','Documentos']];const tableData=vehiculos.map((vehiculo,index)=>{var _vehiculo$año;const tipo=tiposVehiculo===null||tiposVehiculo===void 0?void 0:tiposVehiculo.find(t=>t.id===vehiculo.tipo);const tipoDisplay=tipo?tipo.nombre:vehiculo.tipo||'Sin tipo';const estadoDisplay={'disponible':'Disponible','en_uso':'En Uso','mantenimiento':'Mantenimiento','fuera_servicio':'Fuera Servicio'}[vehiculo.estado]||vehiculo.estado||'Desconocido';// Contar documentos cargados\nlet docsCount=0;if(vehiculo.documentos){Object.keys(vehiculo.documentos).forEach(key=>{var _vehiculo$documentos$;if(key==='otros'&&Array.isArray(vehiculo.documentos[key])){docsCount+=vehiculo.documentos[key].length;}else if((_vehiculo$documentos$=vehiculo.documentos[key])!==null&&_vehiculo$documentos$!==void 0&&_vehiculo$documentos$.url){docsCount++;}});}return[(index+1).toString(),vehiculo.nombre||'Sin nombre',tipoDisplay,vehiculo.marca||'-',vehiculo.modelo||'-',((_vehiculo$año=vehiculo.año)===null||_vehiculo$año===void 0?void 0:_vehiculo$año.toString())||'-',vehiculo.patente||'-',vehiculo.kilometraje?`${vehiculo.kilometraje.toLocaleString()} km`:'-',estadoDisplay,docsCount>0?`${docsCount} docs`:'Sin docs'];});autoTable(doc,{startY:yPosition+7,head:tableHeaders,body:tableData,theme:'striped',headStyles:{fillColor:[59,130,246],textColor:255,fontSize:9,fontStyle:'bold'},bodyStyles:{fontSize:8},alternateRowStyles:{fillColor:[245,247,250]},columnStyles:{0:{cellWidth:10,halign:'center'},1:{cellWidth:35},2:{cellWidth:30},3:{cellWidth:25},4:{cellWidth:25},5:{cellWidth:18,halign:'center'},6:{cellWidth:25},7:{cellWidth:28,halign:'right'},8:{cellWidth:25},9:{cellWidth:20,halign:'center'}},didDrawPage:function(data){// Footer en cada página\ndoc.setFontSize(FONTS.small);doc.setTextColor(COLORS.gray);doc.text(`Página ${data.pageNumber}`,pageWidth/2,pageHeight-10,{align:'center'});}});// Guardar el PDF\ndoc.save(`vehiculos_mapaquillon_${now.getTime()}.pdf`);},// NUEVA FUNCIÓN - Agregar aquí, DENTRO del objeto\nexportMaintenanceHistory:(vehicle,history,currentUser)=>{var _vehicle$kilometraje;const doc=new jsPDF();const pageWidth=doc.internal.pageSize.width;const pageHeight=doc.internal.pageSize.height;// Fecha y hora actual\nconst now=new Date();const fecha=now.toLocaleDateString('es-CL',{year:'numeric',month:'long',day:'numeric'});// Header\ndoc.setFillColor(34,197,94);doc.rect(0,0,pageWidth,40,'F');doc.setTextColor(255,255,255);doc.setFontSize(20);doc.setFont(undefined,'bold');doc.text('HISTORIAL DE MANTENIMIENTO',pageWidth/2,20,{align:'center'});doc.setFontSize(14);doc.setFont(undefined,'normal');doc.text(`${vehicle.nombre} - ${vehicle.patente}`,pageWidth/2,32,{align:'center'});// Información del vehículo\ndoc.setTextColor(31,41,55);doc.setFontSize(12);let yPos=55;doc.text(`Marca/Modelo: ${vehicle.marca} ${vehicle.modelo}`,20,yPos);yPos+=8;doc.text(`Año: ${vehicle.año||'-'}`,20,yPos);yPos+=8;doc.text(`Kilometraje Actual: ${((_vehicle$kilometraje=vehicle.kilometraje)===null||_vehicle$kilometraje===void 0?void 0:_vehicle$kilometraje.toLocaleString())||0} km`,20,yPos);yPos+=8;doc.text(`Total de Mantenimientos: ${history.length}`,20,yPos);// Línea divisora\nyPos+=10;doc.setDrawColor(200,200,200);doc.line(20,yPos,pageWidth-20,yPos);yPos+=10;// Tabla de mantenimientos\nconst tableData=history.map(m=>{const trabajos=[];if(m.cambioAceite)trabajos.push('Aceite');if(m.filtroAire)trabajos.push('F.Aire');if(m.filtroAceite)trabajos.push('F.Aceite');if(m.revisionFrenos)trabajos.push('Frenos');if(m.revisionNeumaticos)trabajos.push('Neumáticos');const fecha=new Date(m.fecha).toLocaleDateString('es-CL');const tipo=m.tipoMantenimiento||'General';const km=m.kilometraje||'-';const responsable=m.realizadoPor||'-';const costo=m.costoMantenimiento?`$${m.costoMantenimiento.toLocaleString()}`:'-';return[fecha,tipo,km,responsable,trabajos.join(', ')||'-',costo];});if(tableData.length>0){autoTable(doc,{startY:yPos,head:[['Fecha','Tipo','Km','Responsable','Trabajos','Costo']],body:tableData,theme:'striped',headStyles:{fillColor:[34,197,94],textColor:255,fontSize:10,fontStyle:'bold'},bodyStyles:{fontSize:9},columnStyles:{0:{cellWidth:25},1:{cellWidth:25},2:{cellWidth:25},3:{cellWidth:40},4:{cellWidth:55},5:{cellWidth:25}}});yPos=doc.lastAutoTable.finalY+15;}// Última inspección de seguridad\nif(history.length>0&&yPos<pageHeight-60){const lastMaintenance=history[0];doc.setFontSize(14);doc.setFont(undefined,'bold');doc.text('Última Inspección de Seguridad',20,yPos);yPos+=10;doc.setFontSize(10);doc.setFont(undefined,'normal');const inspections=[{label:'Gata',value:lastMaintenance.gata},{label:'Chaleco Reflectante',value:lastMaintenance.chalecoReflectante},{label:'Llave Repuesto',value:lastMaintenance.llaveRepuesto},{label:'Cinturón',value:lastMaintenance.cinturon},{label:'Parabrisas',value:lastMaintenance.parabrisas},{label:'Luces Freno',value:lastMaintenance.lucesFreno},{label:'Luces Delanteras',value:lastMaintenance.lucesDelanteras}];inspections.forEach(insp=>{if(insp.value&&insp.value!=='no_aplica'&&yPos<pageHeight-30){const status=insp.value==='bueno'?'✓ Bueno':insp.value==='requiere_atencion'?'⚠ Requiere Atención':'✗ Malo';doc.text(`${insp.label}: ${status}`,25,yPos);yPos+=6;}});}// Próximo mantenimiento\nif(vehicle.proximoMantenimiento&&yPos<pageHeight-40){yPos+=10;doc.setFontSize(12);doc.setFont(undefined,'bold');doc.setTextColor(220,38,38);doc.text('PRÓXIMO MANTENIMIENTO:',20,yPos);doc.setTextColor(0,0,0);doc.text(new Date(vehicle.proximoMantenimiento).toLocaleDateString('es-CL'),85,yPos);if(vehicle.kilometrajeProximoMantenimiento){doc.text(`o ${vehicle.kilometrajeProximoMantenimiento.toLocaleString()} km`,120,yPos);}}// Footer\ndoc.setFontSize(9);doc.setTextColor(107,114,128);doc.text(`Generado el ${fecha} por ${currentUser.name||currentUser.email}`,20,pageHeight-20);doc.text('Sistema MapaQuillón',pageWidth-20,pageHeight-20,{align:'right'});// Guardar PDF\ndoc.save(`mantenimiento_${vehicle.patente}_${Date.now()}.pdf`);}};export default pdfExportService;","map":{"version":3,"names":["jsPDF","autoTable","COLORS","primary","secondary","success","warning","danger","dark","gray","FONTS","title","subtitle","heading","normal","small","pdfExportService","exportSingleUserToPDF","user","currentUser","_user$role","doc","pageWidth","internal","pageSize","width","pageHeight","height","console","error","log","now","Date","fecha","toLocaleDateString","year","month","day","hora","toLocaleTimeString","hour","minute","setFillColor","rect","setTextColor","setFontSize","setFont","undefined","text","align","circle","inicial","name","email","charAt","toUpperCase","nombreMostrar","roleColors","roleNames","roleColor","role","roleName","badgeWidth","length","roundedRect","yPos","setDrawColor","setLineWidth","line","addField","label","value","yPosition","displayValue","rut","phone","licenciaConducir","licenciaTexto","localidad","estadoCuenta","active","createdAt","fechaRegistro","e","id","uid","permisos","userPermisos","forEach","permiso","vehiculosAutorizados","vehiculos","vehiculo","shortId","substring","fileName","replace","getTime","save","exportUsersToPDF","users","margins","top","left","right","bottom","stats","superadmins","filter","u","admins","trabajadores","juntasVecinos","activos","inactivos","conLicencia","sinLicencia","statsData","toString","startY","head","body","theme","styles","fontSize","cellPadding","columnStyles","fontStyle","fillColor","lastAutoTable","finalY","tableHeaders","tableData","map","index","rol","licencia","headStyles","textColor","bodyStyles","alternateRowStyles","cellWidth","halign","didDrawPage","data","pageNumber","addPage","summaryY","licenciaCount","licenciaData","Object","entries","_ref","tipo","cantidad","descripcion","lastY","exportVehiclesToPDF","tiposVehiculo","vehicleStats","disponibles","v","estado","enUso","mantenimiento","fueraServicio","vehicleStatsData","_vehiculo$año","find","t","tipoDisplay","nombre","estadoDisplay","docsCount","documentos","keys","key","_vehiculo$documentos$","Array","isArray","url","marca","modelo","año","patente","kilometraje","toLocaleString","exportMaintenanceHistory","vehicle","history","_vehicle$kilometraje","m","trabajos","cambioAceite","push","filtroAire","filtroAceite","revisionFrenos","revisionNeumaticos","tipoMantenimiento","km","responsable","realizadoPor","costo","costoMantenimiento","join","lastMaintenance","inspections","gata","chalecoReflectante","llaveRepuesto","cinturon","parabrisas","lucesFreno","lucesDelanteras","insp","status","proximoMantenimiento","kilometrajeProximoMantenimiento"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/services/pdfExportService.js"],"sourcesContent":["// src/services/pdfExportService.js\r\nimport { jsPDF } from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\n\r\n// ========== CONFIGURACIÓN DE ESTILOS ==========\r\nconst COLORS = {\r\n  primary: '#667eea',\r\n  secondary: '#764ba2',\r\n  success: '#22c55e',\r\n  warning: '#f59e0b',\r\n  danger: '#ef4444',\r\n  dark: '#1f2937',\r\n  gray: '#6b7280'\r\n};\r\n\r\nconst FONTS = {\r\n  title: 20,\r\n  subtitle: 16,\r\n  heading: 14,\r\n  normal: 11,\r\n  small: 9\r\n};\r\n\r\n// ========== SERVICIO DE EXPORTACIÓN PDF ==========\r\nexport const pdfExportService = {\r\n\r\n  // ========== EXPORTAR USUARIO INDIVIDUAL A PDF (CON RUT Y LICENCIA) ==========\r\n  exportSingleUserToPDF: (user, currentUser) => {\r\n    const doc = new jsPDF();\r\n    const pageWidth = doc.internal.pageSize.width;\r\n    const pageHeight = doc.internal.pageSize.height;\r\n\r\n    // VALIDACIÓN DE DATOS\r\n    if (!user) {\r\n      console.error('Error: No se recibió usuario para exportar');\r\n      return;\r\n    }\r\n\r\n    console.log('Exportando usuario:', user);\r\n\r\n    // Fecha y hora actual\r\n    const now = new Date();\r\n    const fecha = now.toLocaleDateString('es-CL', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric'\r\n    });\r\n    const hora = now.toLocaleTimeString('es-CL', {\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n\r\n    // ========== HEADER CON GRADIENTE ==========\r\n    doc.setFillColor(102, 126, 234);\r\n    doc.rect(0, 0, pageWidth, 50, 'F');\r\n\r\n    // Título\r\n    doc.setTextColor(255, 255, 255);\r\n    doc.setFontSize(24);\r\n    doc.setFont(undefined, 'bold');\r\n    doc.text('SISTEMA MAPAQUILLON', pageWidth / 2, 25, { align: 'center' });\r\n\r\n    doc.setFontSize(16);\r\n    doc.setFont(undefined, 'normal');\r\n    doc.text('Ficha de Usuario', pageWidth / 2, 38, { align: 'center' });\r\n\r\n    // ========== FOTO/AVATAR PLACEHOLDER ==========\r\n    doc.setFillColor(240, 242, 245);\r\n    doc.circle(pageWidth / 2, 75, 20, 'F');\r\n\r\n    // Inicial del usuario\r\n    doc.setTextColor(102, 126, 234);\r\n    doc.setFontSize(24);\r\n    doc.setFont(undefined, 'bold');\r\n    const inicial = (user.name || user.email || 'U').charAt(0).toUpperCase();\r\n    doc.text(inicial, pageWidth / 2, 82, { align: 'center' });\r\n\r\n    // ========== NOMBRE DEL USUARIO ==========\r\n    doc.setTextColor(31, 41, 55);\r\n    doc.setFontSize(20);\r\n    doc.setFont(undefined, 'bold');\r\n    const nombreMostrar = user.name || user.email || 'Usuario sin nombre';\r\n    doc.text(nombreMostrar, pageWidth / 2, 105, { align: 'center' });\r\n\r\n    // Rol con badge\r\n    const roleColors = {\r\n      'superadmin': [109, 33, 168],\r\n      'admin': [30, 64, 175],\r\n      'trabajador': [22, 163, 74],\r\n      'junta_vecinos': [217, 119, 6]\r\n    };\r\n\r\n    const roleNames = {\r\n      'superadmin': 'SUPER ADMINISTRADOR',\r\n      'admin': 'ADMINISTRADOR',\r\n      'trabajador': 'TRABAJADOR',\r\n      'junta_vecinos': 'JUNTA DE VECINOS'\r\n    };\r\n\r\n    const roleColor = roleColors[user.role] || [107, 114, 128];\r\n    const roleName = roleNames[user.role] || user.role?.toUpperCase() || 'ROL NO DEFINIDO';\r\n\r\n    // Badge del rol\r\n    doc.setFillColor(...roleColor);\r\n    const badgeWidth = roleName.length * 5 + 20;\r\n    doc.roundedRect(pageWidth / 2 - badgeWidth / 2, 110, badgeWidth, 10, 2, 2, 'F');\r\n    doc.setTextColor(255, 255, 255);\r\n    doc.setFontSize(10);\r\n    doc.setFont(undefined, 'bold');\r\n    doc.text(roleName, pageWidth / 2, 117, { align: 'center' });\r\n\r\n    // ========== INFORMACIÓN DETALLADA ==========\r\n    let yPos = 140;\r\n\r\n    // Título de sección\r\n    doc.setTextColor(31, 41, 55);\r\n    doc.setFontSize(14);\r\n    doc.setFont(undefined, 'bold');\r\n    doc.text('INFORMACION PERSONAL', 20, yPos);\r\n\r\n    // Línea decorativa\r\n    doc.setDrawColor(229, 231, 235);\r\n    doc.setLineWidth(0.5);\r\n    doc.line(20, yPos + 2, pageWidth - 20, yPos + 2);\r\n\r\n    yPos += 15;\r\n\r\n    // Función helper para agregar campo\r\n    const addField = (label, value, yPosition) => {\r\n      // Label\r\n      doc.setTextColor(107, 114, 128);\r\n      doc.setFontSize(10);\r\n      doc.setFont(undefined, 'normal');\r\n      doc.text(label, 30, yPosition);\r\n\r\n      // Value\r\n      doc.setTextColor(31, 41, 55);\r\n      doc.setFontSize(12);\r\n      doc.setFont(undefined, 'bold');\r\n      const displayValue = value || 'No especificado';\r\n      doc.text(displayValue, 30, yPosition + 6);\r\n\r\n      return yPosition + 18;\r\n    };\r\n\r\n    // Campos de información personal\r\n    yPos = addField('RUT:', user.rut || 'No especificado', yPos);\r\n    yPos = addField('Correo Electronico:', user.email || 'No especificado', yPos);\r\n    yPos = addField('Telefono:', user.phone || 'No especificado', yPos);\r\n\r\n    // NUEVO: Licencia de conducir con detalles\r\n    if (user.licenciaConducir) {\r\n      const licenciaTexto = {\r\n        'B': 'Clase B - Vehiculos particulares',\r\n        'C': 'Clase C - Vehiculos de dos ruedas',\r\n        'A1': 'Clase A1 - Taxis',\r\n        'A2': 'Clase A2 - Buses y taxibuses',\r\n        'A3': 'Clase A3 - Transporte de carga simple',\r\n        'A4': 'Clase A4 - Transporte con remolque',\r\n        'A5': 'Clase A5 - Todo tipo de vehiculos',\r\n        'D': 'Clase D - Maquinaria automotriz',\r\n        'E': 'Clase E - Vehiculos de traccion animal',\r\n        'F': 'Clase F - Vehiculos especiales'\r\n      }[user.licenciaConducir] || `Clase ${user.licenciaConducir}`;\r\n\r\n      yPos = addField('Licencia de Conducir:', licenciaTexto, yPos);\r\n    } else {\r\n      yPos = addField('Licencia de Conducir:', 'Sin licencia registrada', yPos);\r\n    }\r\n\r\n    yPos = addField('Localidad/Sector:', user.localidad || 'No especificado', yPos);\r\n\r\n    // Estado de la cuenta\r\n    const estadoCuenta = user.active === false ? 'INACTIVA' : 'ACTIVA';\r\n    yPos = addField('Estado de la Cuenta:', estadoCuenta, yPos);\r\n\r\n    // Fecha de registro\r\n    if (user.createdAt) {\r\n      try {\r\n        const fechaRegistro = new Date(user.createdAt).toLocaleDateString('es-CL', {\r\n          year: 'numeric',\r\n          month: 'long',\r\n          day: 'numeric'\r\n        });\r\n        yPos = addField('Fecha de Registro:', fechaRegistro, yPos);\r\n      } catch (e) {\r\n        yPos = addField('Fecha de Registro:', 'No disponible', yPos);\r\n      }\r\n    }\r\n\r\n    // ID del usuario\r\n    yPos = addField('ID de Usuario:', user.id || user.uid || 'No disponible', yPos);\r\n\r\n    // ========== INFORMACIÓN ADICIONAL ==========\r\n    yPos += 10;\r\n    doc.setTextColor(31, 41, 55);\r\n    doc.setFontSize(14);\r\n    doc.setFont(undefined, 'bold');\r\n    doc.text('PERMISOS Y CAPACIDADES', 20, yPos);\r\n\r\n    doc.setDrawColor(229, 231, 235);\r\n    doc.line(20, yPos + 2, pageWidth - 20, yPos + 2);\r\n\r\n    yPos += 15;\r\n\r\n    // Permisos según el rol\r\n    doc.setTextColor(107, 114, 128);\r\n    doc.setFontSize(10);\r\n    doc.setFont(undefined, 'normal');\r\n    doc.text('Permisos del Usuario:', 30, yPos);\r\n\r\n    yPos += 8;\r\n\r\n    const permisos = {\r\n      'superadmin': [\r\n        '- Acceso total al sistema',\r\n        '- Gestion de usuarios',\r\n        '- Gestion de vehiculos',\r\n        '- Configuracion del sistema',\r\n        '- Acceso a todos los modulos'\r\n      ],\r\n      'admin': [\r\n        '- Dashboard GPS',\r\n        '- Gestion de zonas',\r\n        '- Monitoreo de flota',\r\n        '- Asignacion de trabajos',\r\n        '- NO puede crear usuarios'\r\n      ],\r\n      'trabajador': [\r\n        '- Sistema GPS personal',\r\n        '- Recepcion de zonas asignadas',\r\n        '- Registro de recorridos',\r\n        '- Dashboard personal',\r\n        '- NO puede asignar trabajos'\r\n      ],\r\n      'junta_vecinos': [\r\n        '- Crear solicitudes',\r\n        '- Ver estado de solicitudes',\r\n        '- Comunicacion con municipio',\r\n        '- Acceso limitado a su localidad'\r\n      ]\r\n    };\r\n\r\n    const userPermisos = permisos[user.role] || ['- Sin permisos definidos'];\r\n\r\n    doc.setFontSize(9);\r\n    userPermisos.forEach(permiso => {\r\n      if (yPos < pageHeight - 60) {\r\n        doc.text(permiso, 35, yPos);\r\n        yPos += 6;\r\n      }\r\n    });\r\n\r\n    // NUEVO: Sección de vehículos autorizados según licencia\r\n    if (user.licenciaConducir && yPos < pageHeight - 80) {\r\n      yPos += 10;\r\n      doc.setTextColor(107, 114, 128);\r\n      doc.setFontSize(10);\r\n      doc.setFont(undefined, 'normal');\r\n      doc.text('Vehiculos Autorizados a Conducir:', 30, yPos);\r\n\r\n      yPos += 8;\r\n      doc.setFontSize(9);\r\n\r\n      const vehiculosAutorizados = {\r\n        'B': ['Automoviles', 'Camionetas hasta 3.500 kg'],\r\n        'C': ['Motocicletas', 'Motonetas', 'Vehiculos de 3 ruedas'],\r\n        'A1': ['Taxis', 'Vehiculos de alquiler'],\r\n        'A2': ['Buses', 'Minibuses', 'Taxibuses'],\r\n        'A3': ['Camiones simples', 'Vehiculos de carga'],\r\n        'A4': ['Camiones con remolque', 'Vehiculos articulados'],\r\n        'A5': ['Todo tipo de vehiculos motorizados'],\r\n        'D': ['Maquinaria pesada', 'Retroexcavadoras', 'Gruas'],\r\n        'E': ['Carretones', 'Vehiculos de traccion animal'],\r\n        'F': ['Vehiculos adaptados', 'Vehiculos especiales']\r\n      };\r\n\r\n      const vehiculos = vehiculosAutorizados[user.licenciaConducir] || ['Segun licencia clase ' + user.licenciaConducir];\r\n      vehiculos.forEach(vehiculo => {\r\n        if (yPos < pageHeight - 60) {\r\n          doc.text('- ' + vehiculo, 35, yPos);\r\n          yPos += 6;\r\n        }\r\n      });\r\n    }\r\n\r\n    // ========== CÓDIGO QR SIMULADO ==========\r\n    if (yPos < pageHeight - 80) {\r\n      yPos += 10;\r\n      doc.setFillColor(240, 242, 245);\r\n      doc.rect(pageWidth / 2 - 30, yPos, 60, 40, 'F');\r\n\r\n      // Texto dentro del recuadro\r\n      doc.setTextColor(31, 41, 55);\r\n      doc.setFontSize(8);\r\n      doc.setFont(undefined, 'bold');\r\n      doc.text('CODIGO ID', pageWidth / 2, yPos + 10, { align: 'center' });\r\n\r\n      doc.setFontSize(10);\r\n      doc.setFont(undefined, 'normal');\r\n      const shortId = (user.id || user.uid || 'NO-ID').substring(0, 8).toUpperCase();\r\n      doc.text(shortId, pageWidth / 2, yPos + 25, { align: 'center' });\r\n\r\n      // RUT si existe\r\n      if (user.rut) {\r\n        doc.setFontSize(8);\r\n        doc.text('RUT: ' + user.rut, pageWidth / 2, yPos + 35, { align: 'center' });\r\n      }\r\n    }\r\n\r\n    // ========== PIE DE PÁGINA ==========\r\n    doc.setDrawColor(229, 231, 235);\r\n    doc.line(20, pageHeight - 35, pageWidth - 20, pageHeight - 35);\r\n\r\n    doc.setTextColor(107, 114, 128);\r\n    doc.setFontSize(9);\r\n    doc.setFont(undefined, 'italic');\r\n    doc.text(`Generado el ${fecha} a las ${hora}`, 20, pageHeight - 25);\r\n    doc.text(`Por: ${currentUser.name || currentUser.email}`, 20, pageHeight - 18);\r\n    doc.text('Sistema MapaQuillon - Municipalidad de Quillon', pageWidth - 20, pageHeight - 18, { align: 'right' });\r\n\r\n    // Guardar el PDF con el nombre del usuario\r\n    const fileName = `usuario_${(user.name || user.email || 'sin_nombre').replace(/[^\\w]/g, '_')}_${now.getTime()}.pdf`;\r\n    doc.save(fileName);\r\n  },\r\n\r\n  // ========== EXPORTAR USUARIOS A PDF (CON RUT Y LICENCIA) ==========\r\n  exportUsersToPDF: (users, currentUser) => {\r\n    const doc = new jsPDF('landscape'); // Orientación horizontal para más columnas\r\n    const pageWidth = doc.internal.pageSize.width;\r\n    const pageHeight = doc.internal.pageSize.height;\r\n    const margins = { top: 20, left: 15, right: 15, bottom: 20 };\r\n\r\n    // Fecha y hora actual\r\n    const now = new Date();\r\n    const fecha = now.toLocaleDateString('es-CL', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric'\r\n    });\r\n    const hora = now.toLocaleTimeString('es-CL', {\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n\r\n    // ========== HEADER ==========\r\n    doc.setFillColor(102, 126, 234);\r\n    doc.rect(0, 0, pageWidth, 40, 'F');\r\n\r\n    // Título principal\r\n    doc.setTextColor(255, 255, 255);\r\n    doc.setFontSize(FONTS.title);\r\n    doc.setFont(undefined, 'bold');\r\n    doc.text('SISTEMA MAPAQUILLÓN', pageWidth / 2, 20, { align: 'center' });\r\n\r\n    // Subtítulo\r\n    doc.setFontSize(FONTS.subtitle);\r\n    doc.setFont(undefined, 'normal');\r\n    doc.text('Reporte de Usuarios', pageWidth / 2, 30, { align: 'center' });\r\n\r\n    // ========== INFORMACIÓN DEL REPORTE ==========\r\n    doc.setTextColor(COLORS.dark);\r\n    doc.setFontSize(FONTS.small);\r\n    doc.setFont(undefined, 'normal');\r\n\r\n    // Cuadro de información\r\n    doc.setFillColor(245, 247, 250);\r\n    doc.rect(margins.left, 50, pageWidth - margins.left - margins.right, 25, 'F');\r\n\r\n    doc.text(`Fecha de generación: ${fecha}`, margins.left + 5, 60);\r\n    doc.text(`Hora: ${hora}`, margins.left + 5, 67);\r\n    doc.text(`Generado por: ${currentUser.name || currentUser.email}`, pageWidth / 2, 60);\r\n    doc.text(`Total de usuarios: ${users.length}`, pageWidth / 2, 67);\r\n\r\n    // ========== ESTADÍSTICAS DE USUARIOS ==========\r\n    const stats = {\r\n      superadmins: users.filter(u => u.role === 'superadmin').length,\r\n      admins: users.filter(u => u.role === 'admin').length,\r\n      trabajadores: users.filter(u => u.role === 'trabajador').length,\r\n      juntasVecinos: users.filter(u => u.role === 'junta_vecinos').length,\r\n      activos: users.filter(u => u.active !== false).length,\r\n      inactivos: users.filter(u => u.active === false).length,\r\n      conLicencia: users.filter(u => u.licenciaConducir).length,\r\n      sinLicencia: users.filter(u => !u.licenciaConducir).length\r\n    };\r\n\r\n    // Cuadro de estadísticas\r\n    let yPosition = 85;\r\n    doc.setFontSize(FONTS.heading);\r\n    doc.setFont(undefined, 'bold');\r\n    doc.text('Estadísticas de Usuarios', margins.left, yPosition);\r\n\r\n    yPosition += 10;\r\n    doc.setFontSize(FONTS.normal);\r\n    doc.setFont(undefined, 'normal');\r\n\r\n    // Crear grid de estadísticas\r\n    const statsData = [\r\n      ['Super Admins', stats.superadmins.toString(), 'Administradores', stats.admins.toString()],\r\n      ['Trabajadores', stats.trabajadores.toString(), 'Juntas de Vecinos', stats.juntasVecinos.toString()],\r\n      ['Usuarios Activos', stats.activos.toString(), 'Usuarios Inactivos', stats.inactivos.toString()],\r\n      ['Con Licencia', stats.conLicencia.toString(), 'Sin Licencia', stats.sinLicencia.toString()]\r\n    ];\r\n\r\n    autoTable(doc, {\r\n      startY: yPosition,\r\n      head: [],\r\n      body: statsData,\r\n      theme: 'grid',\r\n      styles: {\r\n        fontSize: 10,\r\n        cellPadding: 3\r\n      },\r\n      columnStyles: {\r\n        0: { fontStyle: 'bold', fillColor: [240, 242, 245] },\r\n        2: { fontStyle: 'bold', fillColor: [240, 242, 245] }\r\n      }\r\n    });\r\n\r\n    // ========== TABLA DE USUARIOS ==========\r\n    yPosition = doc.lastAutoTable.finalY + 15;\r\n\r\n    doc.setFontSize(FONTS.heading);\r\n    doc.setFont(undefined, 'bold');\r\n    doc.text('Lista Detallada de Usuarios', margins.left, yPosition);\r\n\r\n    // Preparar datos para la tabla con nuevas columnas\r\n    const tableHeaders = [\r\n      ['#', 'Nombre', 'RUT', 'Email', 'Rol', 'Licencia', 'Teléfono', 'Localidad', 'Estado']\r\n    ];\r\n\r\n    const tableData = users.map((user, index) => {\r\n      const rol = {\r\n        'superadmin': 'Super Admin',\r\n        'admin': 'Administrador',\r\n        'trabajador': 'Trabajador',\r\n        'junta_vecinos': 'Junta Vecinos'\r\n      }[user.role] || user.role || 'Sin rol';\r\n\r\n      const licencia = user.licenciaConducir ? `Clase ${user.licenciaConducir}` : 'No';\r\n\r\n      return [\r\n        (index + 1).toString(),\r\n        user.name || 'Sin nombre',\r\n        user.rut || '-',\r\n        user.email || '',\r\n        rol,\r\n        licencia,\r\n        user.phone || '-',\r\n        user.localidad || '-',\r\n        user.active === false ? 'Inactivo' : 'Activo'\r\n      ];\r\n    });\r\n\r\n    autoTable(doc, {\r\n      startY: yPosition + 7,\r\n      head: tableHeaders,\r\n      body: tableData,\r\n      theme: 'striped',\r\n      headStyles: {\r\n        fillColor: [102, 126, 234],\r\n        textColor: 255,\r\n        fontSize: 9,\r\n        fontStyle: 'bold'\r\n      },\r\n      bodyStyles: {\r\n        fontSize: 8\r\n      },\r\n      alternateRowStyles: {\r\n        fillColor: [245, 247, 250]\r\n      },\r\n      columnStyles: {\r\n        0: { cellWidth: 10, halign: 'center' },\r\n        1: { cellWidth: 35 },\r\n        2: { cellWidth: 28 },\r\n        3: { cellWidth: 45 },\r\n        4: { cellWidth: 30 },\r\n        5: { cellWidth: 20, halign: 'center' },\r\n        6: { cellWidth: 25 },\r\n        7: { cellWidth: 35 },\r\n        8: { cellWidth: 20, halign: 'center' }\r\n      },\r\n      didDrawPage: function (data) {\r\n        // Footer en cada página\r\n        doc.setFontSize(FONTS.small);\r\n        doc.setTextColor(COLORS.gray);\r\n        doc.text(\r\n          `Página ${data.pageNumber}`,\r\n          pageWidth / 2,\r\n          pageHeight - 10,\r\n          { align: 'center' }\r\n        );\r\n      }\r\n    });\r\n\r\n    // ========== RESUMEN DE LICENCIAS ==========\r\n    const finalY = doc.lastAutoTable.finalY;\r\n    if (finalY < pageHeight - 60) {\r\n      doc.addPage();\r\n      let summaryY = 30;\r\n\r\n      doc.setFontSize(FONTS.heading);\r\n      doc.setFont(undefined, 'bold');\r\n      doc.text('Resumen de Licencias de Conducir', margins.left, summaryY);\r\n\r\n      summaryY += 10;\r\n\r\n      // Contar licencias por tipo\r\n      const licenciaCount = {};\r\n      users.forEach(user => {\r\n        if (user.licenciaConducir) {\r\n          licenciaCount[user.licenciaConducir] = (licenciaCount[user.licenciaConducir] || 0) + 1;\r\n        }\r\n      });\r\n\r\n      const licenciaData = Object.entries(licenciaCount).map(([tipo, cantidad]) => {\r\n        const descripcion = {\r\n          'B': 'Vehículos particulares',\r\n          'C': 'Vehículos de dos ruedas',\r\n          'A1': 'Taxis',\r\n          'A2': 'Buses y taxibuses',\r\n          'A3': 'Transporte de carga simple',\r\n          'A4': 'Transporte con remolque',\r\n          'A5': 'Todo tipo de vehículos',\r\n          'D': 'Maquinaria automotriz',\r\n          'E': 'Vehículos de tracción animal',\r\n          'F': 'Vehículos especiales'\r\n        }[tipo] || 'Otros';\r\n\r\n        return [`Clase ${tipo}`, descripcion, cantidad.toString()];\r\n      });\r\n\r\n      if (licenciaData.length > 0) {\r\n        autoTable(doc, {\r\n          startY: summaryY,\r\n          head: [['Clase', 'Descripción', 'Cantidad']],\r\n          body: licenciaData,\r\n          theme: 'grid',\r\n          headStyles: {\r\n            fillColor: [102, 126, 234],\r\n            textColor: 255,\r\n            fontSize: 10,\r\n            fontStyle: 'bold'\r\n          },\r\n          bodyStyles: {\r\n            fontSize: 9\r\n          },\r\n          columnStyles: {\r\n            0: { cellWidth: 30 },\r\n            1: { cellWidth: 100 },\r\n            2: { cellWidth: 30, halign: 'center' }\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    // ========== PIE DE PÁGINA FINAL ==========\r\n    const lastY = doc.lastAutoTable ? doc.lastAutoTable.finalY : finalY;\r\n    if (lastY < pageHeight - 40) {\r\n      doc.setDrawColor(200, 200, 200);\r\n      doc.line(margins.left, lastY + 10, pageWidth - margins.right, lastY + 10);\r\n\r\n      doc.setFontSize(FONTS.small);\r\n      doc.setTextColor(COLORS.gray);\r\n      doc.setFont(undefined, 'italic');\r\n      doc.text(\r\n        'Este documento fue generado automáticamente por el Sistema MapaQuillón',\r\n        pageWidth / 2,\r\n        lastY + 20,\r\n        { align: 'center' }\r\n      );\r\n      doc.text(\r\n        '© 2024 Municipalidad de Quillón - Todos los derechos reservados',\r\n        pageWidth / 2,\r\n        lastY + 27,\r\n        { align: 'center' }\r\n      );\r\n    }\r\n\r\n    // Guardar el PDF\r\n    doc.save(`usuarios_mapaquillon_${now.getTime()}.pdf`);\r\n  },\r\n\r\n  // ========== EXPORTAR VEHÍCULOS A PDF ==========\r\n  exportVehiclesToPDF: (vehiculos, tiposVehiculo, currentUser) => {\r\n    const doc = new jsPDF('landscape');\r\n    const pageWidth = doc.internal.pageSize.width;\r\n    const pageHeight = doc.internal.pageSize.height;\r\n    const margins = { top: 20, left: 15, right: 15, bottom: 20 };\r\n\r\n    // Fecha y hora actual\r\n    const now = new Date();\r\n    const fecha = now.toLocaleDateString('es-CL', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric'\r\n    });\r\n    const hora = now.toLocaleTimeString('es-CL', {\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n\r\n    // ========== HEADER ==========\r\n    doc.setFillColor(59, 130, 246);\r\n    doc.rect(0, 0, pageWidth, 40, 'F');\r\n\r\n    doc.setTextColor(255, 255, 255);\r\n    doc.setFontSize(FONTS.title);\r\n    doc.setFont(undefined, 'bold');\r\n    doc.text('SISTEMA MAPAQUILLÓN', pageWidth / 2, 20, { align: 'center' });\r\n\r\n    doc.setFontSize(FONTS.subtitle);\r\n    doc.setFont(undefined, 'normal');\r\n    doc.text('Reporte de Flota Vehicular', pageWidth / 2, 30, { align: 'center' });\r\n\r\n    // ========== INFORMACIÓN DEL REPORTE ==========\r\n    doc.setTextColor(COLORS.dark);\r\n    doc.setFontSize(FONTS.small);\r\n    doc.setFont(undefined, 'normal');\r\n\r\n    doc.setFillColor(245, 247, 250);\r\n    doc.rect(margins.left, 50, pageWidth - margins.left - margins.right, 25, 'F');\r\n\r\n    doc.text(`Fecha: ${fecha}`, margins.left + 5, 60);\r\n    doc.text(`Hora: ${hora}`, margins.left + 5, 67);\r\n    doc.text(`Generado por: ${currentUser.name || currentUser.email}`, pageWidth / 2, 60);\r\n    doc.text(`Total de vehículos: ${vehiculos.length}`, pageWidth / 2, 67);\r\n\r\n    // ========== ESTADÍSTICAS DE VEHÍCULOS ==========\r\n    const vehicleStats = {\r\n      disponibles: vehiculos.filter(v => v.estado === 'disponible').length,\r\n      enUso: vehiculos.filter(v => v.estado === 'en_uso').length,\r\n      mantenimiento: vehiculos.filter(v => v.estado === 'mantenimiento').length,\r\n      fueraServicio: vehiculos.filter(v => v.estado === 'fuera_servicio').length\r\n    };\r\n\r\n    let yPosition = 85;\r\n    doc.setFontSize(FONTS.heading);\r\n    doc.setFont(undefined, 'bold');\r\n    doc.text('Estado de la Flota', margins.left, yPosition);\r\n\r\n    yPosition += 10;\r\n\r\n    const vehicleStatsData = [\r\n      ['Disponibles', vehicleStats.disponibles.toString(), 'En Uso', vehicleStats.enUso.toString()],\r\n      ['En Mantenimiento', vehicleStats.mantenimiento.toString(), 'Fuera de Servicio', vehicleStats.fueraServicio.toString()]\r\n    ];\r\n\r\n    autoTable(doc, {\r\n      startY: yPosition,\r\n      head: [],\r\n      body: vehicleStatsData,\r\n      theme: 'grid',\r\n      styles: {\r\n        fontSize: 10,\r\n        cellPadding: 3\r\n      },\r\n      columnStyles: {\r\n        0: { fontStyle: 'bold', fillColor: [240, 242, 245] },\r\n        2: { fontStyle: 'bold', fillColor: [240, 242, 245] }\r\n      }\r\n    });\r\n\r\n    // ========== LISTA DE VEHÍCULOS ==========\r\n    yPosition = doc.lastAutoTable.finalY + 15;\r\n    doc.setFontSize(FONTS.heading);\r\n    doc.setFont(undefined, 'bold');\r\n    doc.text('Inventario de Vehículos', margins.left, yPosition);\r\n\r\n    // Preparar datos para la tabla\r\n    const tableHeaders = [\r\n      ['#', 'Nombre', 'Tipo', 'Marca', 'Modelo', 'Año', 'Patente', 'Kilometraje', 'Estado', 'Documentos']\r\n    ];\r\n\r\n    const tableData = vehiculos.map((vehiculo, index) => {\r\n      const tipo = tiposVehiculo?.find(t => t.id === vehiculo.tipo);\r\n      const tipoDisplay = tipo ? tipo.nombre : vehiculo.tipo || 'Sin tipo';\r\n\r\n      const estadoDisplay = {\r\n        'disponible': 'Disponible',\r\n        'en_uso': 'En Uso',\r\n        'mantenimiento': 'Mantenimiento',\r\n        'fuera_servicio': 'Fuera Servicio'\r\n      }[vehiculo.estado] || vehiculo.estado || 'Desconocido';\r\n\r\n      // Contar documentos cargados\r\n      let docsCount = 0;\r\n      if (vehiculo.documentos) {\r\n        Object.keys(vehiculo.documentos).forEach(key => {\r\n          if (key === 'otros' && Array.isArray(vehiculo.documentos[key])) {\r\n            docsCount += vehiculo.documentos[key].length;\r\n          } else if (vehiculo.documentos[key]?.url) {\r\n            docsCount++;\r\n          }\r\n        });\r\n      }\r\n\r\n      return [\r\n        (index + 1).toString(),\r\n        vehiculo.nombre || 'Sin nombre',\r\n        tipoDisplay,\r\n        vehiculo.marca || '-',\r\n        vehiculo.modelo || '-',\r\n        vehiculo.año?.toString() || '-',\r\n        vehiculo.patente || '-',\r\n        vehiculo.kilometraje ? `${vehiculo.kilometraje.toLocaleString()} km` : '-',\r\n        estadoDisplay,\r\n        docsCount > 0 ? `${docsCount} docs` : 'Sin docs'\r\n      ];\r\n    });\r\n\r\n    autoTable(doc, {\r\n      startY: yPosition + 7,\r\n      head: tableHeaders,\r\n      body: tableData,\r\n      theme: 'striped',\r\n      headStyles: {\r\n        fillColor: [59, 130, 246],\r\n        textColor: 255,\r\n        fontSize: 9,\r\n        fontStyle: 'bold'\r\n      },\r\n      bodyStyles: {\r\n        fontSize: 8\r\n      },\r\n      alternateRowStyles: {\r\n        fillColor: [245, 247, 250]\r\n      },\r\n      columnStyles: {\r\n        0: { cellWidth: 10, halign: 'center' },\r\n        1: { cellWidth: 35 },\r\n        2: { cellWidth: 30 },\r\n        3: { cellWidth: 25 },\r\n        4: { cellWidth: 25 },\r\n        5: { cellWidth: 18, halign: 'center' },\r\n        6: { cellWidth: 25 },\r\n        7: { cellWidth: 28, halign: 'right' },\r\n        8: { cellWidth: 25 },\r\n        9: { cellWidth: 20, halign: 'center' }\r\n      },\r\n      didDrawPage: function (data) {\r\n        // Footer en cada página\r\n        doc.setFontSize(FONTS.small);\r\n        doc.setTextColor(COLORS.gray);\r\n        doc.text(\r\n          `Página ${data.pageNumber}`,\r\n          pageWidth / 2,\r\n          pageHeight - 10,\r\n          { align: 'center' }\r\n        );\r\n      }\r\n    });\r\n\r\n    // Guardar el PDF\r\n    doc.save(`vehiculos_mapaquillon_${now.getTime()}.pdf`);\r\n\r\n    \r\n  },\r\n  // NUEVA FUNCIÓN - Agregar aquí, DENTRO del objeto\r\n  exportMaintenanceHistory: (vehicle, history, currentUser) => {\r\n    const doc = new jsPDF();\r\n    const pageWidth = doc.internal.pageSize.width;\r\n    const pageHeight = doc.internal.pageSize.height;\r\n    \r\n    // Fecha y hora actual\r\n    const now = new Date();\r\n    const fecha = now.toLocaleDateString('es-CL', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric'\r\n    });\r\n    \r\n    // Header\r\n    doc.setFillColor(34, 197, 94);\r\n    doc.rect(0, 0, pageWidth, 40, 'F');\r\n    \r\n    doc.setTextColor(255, 255, 255);\r\n    doc.setFontSize(20);\r\n    doc.setFont(undefined, 'bold');\r\n    doc.text('HISTORIAL DE MANTENIMIENTO', pageWidth / 2, 20, { align: 'center' });\r\n    \r\n    doc.setFontSize(14);\r\n    doc.setFont(undefined, 'normal');\r\n    doc.text(`${vehicle.nombre} - ${vehicle.patente}`, pageWidth / 2, 32, { align: 'center' });\r\n    \r\n    // Información del vehículo\r\n    doc.setTextColor(31, 41, 55);\r\n    doc.setFontSize(12);\r\n    let yPos = 55;\r\n    \r\n    doc.text(`Marca/Modelo: ${vehicle.marca} ${vehicle.modelo}`, 20, yPos);\r\n    yPos += 8;\r\n    doc.text(`Año: ${vehicle.año || '-'}`, 20, yPos);\r\n    yPos += 8;\r\n    doc.text(`Kilometraje Actual: ${vehicle.kilometraje?.toLocaleString() || 0} km`, 20, yPos);\r\n    yPos += 8;\r\n    doc.text(`Total de Mantenimientos: ${history.length}`, 20, yPos);\r\n    \r\n    // Línea divisora\r\n    yPos += 10;\r\n    doc.setDrawColor(200, 200, 200);\r\n    doc.line(20, yPos, pageWidth - 20, yPos);\r\n    yPos += 10;\r\n    \r\n    // Tabla de mantenimientos\r\n    const tableData = history.map(m => {\r\n      const trabajos = [];\r\n      if (m.cambioAceite) trabajos.push('Aceite');\r\n      if (m.filtroAire) trabajos.push('F.Aire');\r\n      if (m.filtroAceite) trabajos.push('F.Aceite');\r\n      if (m.revisionFrenos) trabajos.push('Frenos');\r\n      if (m.revisionNeumaticos) trabajos.push('Neumáticos');\r\n      \r\n      const fecha = new Date(m.fecha).toLocaleDateString('es-CL');\r\n      const tipo = m.tipoMantenimiento || 'General';\r\n      const km = m.kilometraje || '-';\r\n      const responsable = m.realizadoPor || '-';\r\n      const costo = m.costoMantenimiento ? `$${m.costoMantenimiento.toLocaleString()}` : '-';\r\n      \r\n      return [fecha, tipo, km, responsable, trabajos.join(', ') || '-', costo];\r\n    });\r\n    \r\n    if (tableData.length > 0) {\r\n      autoTable(doc, {\r\n        startY: yPos,\r\n        head: [['Fecha', 'Tipo', 'Km', 'Responsable', 'Trabajos', 'Costo']],\r\n        body: tableData,\r\n        theme: 'striped',\r\n        headStyles: {\r\n          fillColor: [34, 197, 94],\r\n          textColor: 255,\r\n          fontSize: 10,\r\n          fontStyle: 'bold'\r\n        },\r\n        bodyStyles: {\r\n          fontSize: 9\r\n        },\r\n        columnStyles: {\r\n          0: { cellWidth: 25 },\r\n          1: { cellWidth: 25 },\r\n          2: { cellWidth: 25 },\r\n          3: { cellWidth: 40 },\r\n          4: { cellWidth: 55 },\r\n          5: { cellWidth: 25 }\r\n        }\r\n      });\r\n      \r\n      yPos = doc.lastAutoTable.finalY + 15;\r\n    }\r\n    \r\n    // Última inspección de seguridad\r\n    if (history.length > 0 && yPos < pageHeight - 60) {\r\n      const lastMaintenance = history[0];\r\n      \r\n      doc.setFontSize(14);\r\n      doc.setFont(undefined, 'bold');\r\n      doc.text('Última Inspección de Seguridad', 20, yPos);\r\n      yPos += 10;\r\n      \r\n      doc.setFontSize(10);\r\n      doc.setFont(undefined, 'normal');\r\n      \r\n      const inspections = [\r\n        { label: 'Gata', value: lastMaintenance.gata },\r\n        { label: 'Chaleco Reflectante', value: lastMaintenance.chalecoReflectante },\r\n        { label: 'Llave Repuesto', value: lastMaintenance.llaveRepuesto },\r\n        { label: 'Cinturón', value: lastMaintenance.cinturon },\r\n        { label: 'Parabrisas', value: lastMaintenance.parabrisas },\r\n        { label: 'Luces Freno', value: lastMaintenance.lucesFreno },\r\n        { label: 'Luces Delanteras', value: lastMaintenance.lucesDelanteras }\r\n      ];\r\n      \r\n      inspections.forEach(insp => {\r\n        if (insp.value && insp.value !== 'no_aplica' && yPos < pageHeight - 30) {\r\n          const status = insp.value === 'bueno' ? '✓ Bueno' : \r\n                        insp.value === 'requiere_atencion' ? '⚠ Requiere Atención' : \r\n                        '✗ Malo';\r\n          doc.text(`${insp.label}: ${status}`, 25, yPos);\r\n          yPos += 6;\r\n        }\r\n      });\r\n    }\r\n    \r\n    // Próximo mantenimiento\r\n    if (vehicle.proximoMantenimiento && yPos < pageHeight - 40) {\r\n      yPos += 10;\r\n      doc.setFontSize(12);\r\n      doc.setFont(undefined, 'bold');\r\n      doc.setTextColor(220, 38, 38);\r\n      doc.text('PRÓXIMO MANTENIMIENTO:', 20, yPos);\r\n      doc.setTextColor(0, 0, 0);\r\n      doc.text(new Date(vehicle.proximoMantenimiento).toLocaleDateString('es-CL'), 85, yPos);\r\n      \r\n      if (vehicle.kilometrajeProximoMantenimiento) {\r\n        doc.text(`o ${vehicle.kilometrajeProximoMantenimiento.toLocaleString()} km`, 120, yPos);\r\n      }\r\n    }\r\n    \r\n    // Footer\r\n    doc.setFontSize(9);\r\n    doc.setTextColor(107, 114, 128);\r\n    doc.text(`Generado el ${fecha} por ${currentUser.name || currentUser.email}`, 20, pageHeight - 20);\r\n    doc.text('Sistema MapaQuillón', pageWidth - 20, pageHeight - 20, { align: 'right' });\r\n    \r\n    // Guardar PDF\r\n    doc.save(`mantenimiento_${vehicle.patente}_${Date.now()}.pdf`);\r\n  }\r\n  \r\n};\r\n  \r\n\r\n\r\nexport default pdfExportService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"// src/components/MapaQuillonFirebase.js\nimport React,{useEffect,useRef,useState}from'react';import{vehiculosService,zonasService,trabajadoresService,reportesService}from'../services/firebaseservices';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MapaQuillonFirebase=_ref=>{let{currentUser,onLogout}=_ref;const mapRef=useRef(null);const[map,setMap]=useState(null);const[vehiculos,setVehiculos]=useState([]);const[zonas,setZonas]=useState([]);const[trabajadores,setTrabajadores]=useState([]);// const [selectedItem, setSelectedItem] = useState(null); // Para uso futuro\nconst[filtroActivo,setFiltroActivo]=useState('todos');const[mapLoaded,setMapLoaded]=useState(false);const[showStats,setShowStats]=useState(true);const[realtimeStats,setRealtimeStats]=useState({vehiculos:{total:0,activos:0,enMantenimiento:0},zonas:{total:0,activas:0,completadas:0},trabajadores:{total:0,enRuta:0,trabajando:0}});const markersRef=useRef({});const infoWindowRef=useRef(null);const unsubscribesRef=useRef([]);const API_KEY='AIzaSyA7DrdL36n5cx-RNzuXGAQggFeGCheHDbY';// Cargar Google Maps\nuseEffect(()=>{const loadGoogleMaps=()=>{return new Promise((resolve,reject)=>{if(window.google&&window.google.maps){resolve(window.google.maps);return;}const existingScript=document.querySelector('script[src*=\"maps.googleapis.com\"]');if(existingScript){existingScript.addEventListener('load',()=>{if(window.google&&window.google.maps){resolve(window.google.maps);}else{reject(new Error('Google Maps no disponible'));}});return;}const script=document.createElement('script');script.src=`https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry&v=weekly`;script.async=true;script.defer=true;script.onload=()=>{if(window.google&&window.google.maps){resolve(window.google.maps);}};script.onerror=()=>reject(new Error('Error al cargar Google Maps'));document.head.appendChild(script);});};const initMap=async()=>{try{const maps=await loadGoogleMaps();if(!mapRef.current)return;const mapInstance=new maps.Map(mapRef.current,{center:{lat:-36.7333,lng:-72.4667},zoom:13,mapTypeId:'roadmap',styles:[{featureType:'poi.business',stylers:[{visibility:'off'}]}]});setMap(mapInstance);infoWindowRef.current=new maps.InfoWindow();setMapLoaded(true);}catch(err){console.error('Error al cargar mapa:',err);}};initMap();},[]);// Suscribirse a datos de Firebase en tiempo real\nuseEffect(()=>{// Suscribirse a vehículos\nconst unsubVehiculos=vehiculosService.subscribeToVehiculos(vehiculosData=>{setVehiculos(vehiculosData);});unsubscribesRef.current.push(unsubVehiculos);// Suscribirse a zonas\nconst unsubZonas=zonasService.subscribeToZonas(zonasData=>{setZonas(zonasData);});unsubscribesRef.current.push(unsubZonas);// Suscribirse a trabajadores\nconst unsubTrabajadores=trabajadoresService.subscribeToTrabajadores(trabajadoresData=>{setTrabajadores(trabajadoresData);console.log('Trabajadores actualizados:',trabajadoresData);});unsubscribesRef.current.push(unsubTrabajadores);// Suscribirse a estadísticas en tiempo real\nreportesService.getRealtimeStats(stats=>{setRealtimeStats(stats);});// Auto-refresh cada 2 segundos para actualizar indicadores visuales\nconst refreshInterval=setInterval(()=>{// Forzar re-render para actualizar tiempos relativos\nsetTrabajadores(prev=>[...prev]);},2000);// Limpiar suscripciones al desmontar\nreturn()=>{unsubscribesRef.current.forEach(unsub=>unsub&&unsub());clearInterval(refreshInterval);};},[]);// Crear/actualizar marcadores\nuseEffect(()=>{if(!map||!window.google)return;// Función para crear icono según tipo y estado\nconst getIcon=(tipo,estado)=>{var _iconConfigs$tipo;const iconConfigs={vehiculo:{activo:{color:'#22c55e',symbol:'🚛'},trabajando:{color:'#3b82f6',symbol:'🔧'},en_ruta:{color:'#f59e0b',symbol:'🚗'},mantenimiento:{color:'#ef4444',symbol:'🔧'},inactivo:{color:'#6b7280',symbol:'⏸️'}},zona:{activa:{color:'#3b82f6',symbol:'🏗️'},pausada:{color:'#f59e0b',symbol:'⏸️'},completada:{color:'#22c55e',symbol:'✅'}},trabajador:{en_camino:{color:'#8b5cf6',symbol:'👷'},trabajando:{color:'#10b981',symbol:'👷'},disponible:{color:'#06b6d4',symbol:'👷'}}};const config=((_iconConfigs$tipo=iconConfigs[tipo])===null||_iconConfigs$tipo===void 0?void 0:_iconConfigs$tipo[estado])||{color:'#6b7280',symbol:'📍'};if(tipo==='trabajador'){return{path:window.google.maps.SymbolPath.CIRCLE,scale:8,fillColor:config.color,fillOpacity:1,strokeColor:'#ffffff',strokeWeight:2};}return{path:'M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z',fillColor:config.color,fillOpacity:1,strokeColor:'#ffffff',strokeWeight:2,scale:tipo==='vehiculo'?1.8:2,anchor:new window.google.maps.Point(12,24)};};// Limpiar marcadores antiguos\nObject.values(markersRef.current).forEach(marker=>marker.setMap(null));markersRef.current={};// Crear marcadores de vehículos\nif(filtroActivo==='todos'||filtroActivo==='vehiculos'){vehiculos.forEach(vehiculo=>{if(vehiculo.lat&&vehiculo.lng){const marker=new window.google.maps.Marker({position:{lat:vehiculo.lat,lng:vehiculo.lng},map:map,title:vehiculo.nombre,icon:getIcon('vehiculo',vehiculo.estado),animation:vehiculo.estado==='activo'?window.google.maps.Animation.BOUNCE:null});marker.addListener('click',()=>{const content=createVehiculoInfoWindow(vehiculo);infoWindowRef.current.setContent(content);infoWindowRef.current.open(map,marker);// setSelectedItem(vehiculo); // Para uso futuro\n});markersRef.current[`vehiculo_${vehiculo.id}`]=marker;}});}// Crear marcadores de zonas\nif(filtroActivo==='todos'||filtroActivo==='zonas'){zonas.forEach(zona=>{if(zona.lat&&zona.lng){const marker=new window.google.maps.Marker({position:{lat:zona.lat,lng:zona.lng},map:map,title:zona.nombre,icon:getIcon('zona',zona.estado)});marker.addListener('click',()=>{const content=createZonaInfoWindow(zona);infoWindowRef.current.setContent(content);infoWindowRef.current.open(map,marker);// setSelectedItem(zona); // Para uso futuro\n});markersRef.current[`zona_${zona.id}`]=marker;}});}// Crear marcadores de trabajadores\nif(filtroActivo==='todos'||filtroActivo==='trabajadores'){trabajadores.forEach(trabajador=>{if(trabajador.ubicacion&&trabajador.ubicacion.lat&&trabajador.ubicacion.lng){const marker=new window.google.maps.Marker({position:{lat:trabajador.ubicacion.lat,lng:trabajador.ubicacion.lng},map:map,title:trabajador.nombre,icon:getIcon('trabajador',trabajador.estado||'disponible')});marker.addListener('click',()=>{const content=createTrabajadorInfoWindow(trabajador);infoWindowRef.current.setContent(content);infoWindowRef.current.open(map,marker);// setSelectedItem(trabajador); // Para uso futuro\n});markersRef.current[`trabajador_${trabajador.id}`]=marker;}});}},[map,vehiculos,zonas,trabajadores,filtroActivo]);// Funciones para crear contenido de InfoWindow\nconst createVehiculoInfoWindow=vehiculo=>{return`\n      <div style=\"padding: 10px; font-family: Arial, sans-serif; max-width: 280px;\">\n        <h3 style=\"margin: 0 0 10px 0; color: #1f2937;\">\n          ${vehiculo.nombre}\n        </h3>\n        <div style=\"background: ${vehiculo.estado==='activo'?'#dcfce7':vehiculo.estado==='trabajando'?'#dbeafe':'#fef3c7'}; \n                    padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 10px;\">\n          <strong>Estado:</strong> ${vehiculo.estado}\n        </div>\n        <div style=\"font-size: 14px; line-height: 1.6;\">\n          ${vehiculo.conductor?`<div><strong>👤 Conductor:</strong> ${vehiculo.conductor}</div>`:''}\n          ${vehiculo.telefono?`<div><strong>📱 Teléfono:</strong> ${vehiculo.telefono}</div>`:''}\n          ${vehiculo.combustible?`\n            <div><strong>⛽ Combustible:</strong> \n              <span style=\"color: ${vehiculo.combustible>50?'#22c55e':vehiculo.combustible>25?'#f59e0b':'#ef4444'}\">\n                ${vehiculo.combustible}%\n              </span>\n            </div>\n          `:''}\n          ${vehiculo.velocidad?`<div><strong>📍 Velocidad:</strong> ${vehiculo.velocidad} km/h</div>`:''}\n          ${vehiculo.zona?`<div><strong>🏗️ Zona:</strong> ${vehiculo.zona}</div>`:''}\n          ${vehiculo.destino?`<div><strong>🎯 Destino:</strong> ${vehiculo.destino}</div>`:''}\n          <div style=\"margin-top: 8px; color: #6b7280; font-size: 12px;\">\n            Última actualización: ${vehiculo.ultimaActualizacion?new Date(vehiculo.ultimaActualizacion).toLocaleTimeString():'N/A'}\n          </div>\n        </div>\n      </div>\n    `;};const createZonaInfoWindow=zona=>{return`\n      <div style=\"padding: 10px; font-family: Arial, sans-serif; max-width: 280px;\">\n        <h3 style=\"margin: 0 0 10px 0; color: #1f2937;\">\n          ${zona.nombre}\n        </h3>\n        <div style=\"background: ${zona.estado==='activa'?'#dbeafe':zona.estado==='pausada'?'#fef3c7':'#dcfce7'}; \n                    padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 10px;\">\n          <strong>Estado:</strong> ${zona.estado}\n        </div>\n        <div style=\"font-size: 14px; line-height: 1.6;\">\n          ${zona.supervisor?`<div><strong>👷 Supervisor:</strong> ${zona.supervisor}</div>`:''}\n          ${zona.telefono?`<div><strong>📱 Teléfono:</strong> ${zona.telefono}</div>`:''}\n          ${zona.progreso!==undefined?`\n            <div><strong>📊 Progreso:</strong>\n              <div style=\"background: #e5e7eb; border-radius: 4px; height: 20px; margin: 4px 0;\">\n                <div style=\"background: ${zona.progreso===100?'#22c55e':'#3b82f6'}; \n                            width: ${zona.progreso}%; height: 100%; border-radius: 4px; \n                            display: flex; align-items: center; justify-content: center; color: white; font-size: 12px;\">\n                  ${zona.progreso.toFixed(0)}%\n                </div>\n              </div>\n            </div>\n          `:''}\n          ${zona.trabajadores?`<div><strong>👥 Trabajadores:</strong> ${zona.trabajadores}</div>`:''}\n          ${zona.horaInicio?`<div><strong>⏰ Horario:</strong> ${zona.horaInicio} - ${zona.horaEstimadaFin||zona.horaFin||'Por definir'}</div>`:''}\n          ${zona.motivoPausa?`<div style=\"color: #f59e0b; margin-top: 8px;\">⚠️ ${zona.motivoPausa}</div>`:''}\n        </div>\n      </div>\n    `;};const createTrabajadorInfoWindow=trabajador=>{var _trabajador$ubicacion;const ahora=new Date();const ultimaActualizacion=(_trabajador$ubicacion=trabajador.ubicacion)!==null&&_trabajador$ubicacion!==void 0&&_trabajador$ubicacion.timestamp?new Date(trabajador.ubicacion.timestamp):null;const diferenciaTiempo=ultimaActualizacion?Math.floor((ahora-ultimaActualizacion)/1000):null;let estadoConexion='⚫ Sin conexión';let colorEstado='#6b7280';if(diferenciaTiempo!==null){if(diferenciaTiempo<30){estadoConexion='🟢 En línea';colorEstado='#10b981';}else if(diferenciaTiempo<60){estadoConexion='🟡 Conexión reciente';colorEstado='#f59e0b';}else if(diferenciaTiempo<300){estadoConexion='🟠 Última conexión hace '+Math.floor(diferenciaTiempo/60)+' min';colorEstado='#fb923c';}else{estadoConexion='🔴 Sin conexión reciente';colorEstado='#ef4444';}}return`\n      <div style=\"padding: 10px; font-family: Arial, sans-serif; max-width: 300px;\">\n        <h3 style=\"margin: 0 0 10px 0; color: #1f2937; display: flex; align-items: center; gap: 8px;\">\n          👷 ${trabajador.nombre||trabajador.email||'Trabajador'}\n          <span style=\"\n            font-size: 10px;\n            padding: 2px 6px;\n            background: ${colorEstado}22;\n            color: ${colorEstado};\n            border-radius: 12px;\n            font-weight: normal;\n          \">\n            ${estadoConexion}\n          </span>\n        </h3>\n        \n        <div style=\"\n          background: ${trabajador.estado==='en_camino'?'#ede9fe':trabajador.estado==='trabajando'?'#dcfce7':trabajador.estado==='disponible'?'#e0f2fe':'#f3f4f6'}; \n          padding: 6px 10px; \n          border-radius: 6px; \n          display: inline-block; \n          margin-bottom: 12px;\n          font-size: 13px;\n        \">\n          <strong>Estado:</strong> ${trabajador.estado==='en_camino'?'🚗 En camino':trabajador.estado==='trabajando'?'🔧 Trabajando':trabajador.estado==='disponible'?'✅ Disponible':'⏸️ '+(trabajador.estado||'Sin estado')}\n        </div>\n        \n        <div style=\"font-size: 14px; line-height: 1.8;\">\n          ${trabajador.email?`\n            <div style=\"margin-bottom: 6px;\">\n              <strong>📧 Email:</strong> \n              <span style=\"color: #6b7280; font-size: 13px;\">${trabajador.email}</span>\n            </div>\n          `:''}\n          \n          ${trabajador.telefono?`\n            <div style=\"margin-bottom: 6px;\">\n              <strong>📱 Teléfono:</strong> \n              <span style=\"color: #6b7280; font-size: 13px;\">${trabajador.telefono}</span>\n            </div>\n          `:''}\n          \n          ${trabajador.zonaDestino?`\n            <div style=\"margin-bottom: 6px;\">\n              <strong>🎯 Destino:</strong> \n              <span style=\"color: #3b82f6; font-size: 13px;\">${trabajador.zonaDestino}</span>\n            </div>\n          `:''}\n          \n          ${trabajador.recorridoActual?`\n            <div style=\"margin-bottom: 6px;\">\n              <strong>📍 En recorrido:</strong> \n              <span style=\"color: #10b981; font-size: 13px;\">Activo</span>\n            </div>\n          `:''}\n          \n          ${trabajador.ubicacion?`\n            <div style=\"\n              margin-top: 12px; \n              padding-top: 10px; \n              border-top: 1px solid #e5e7eb;\n            \">\n              <div style=\"color: #6b7280; font-size: 12px; margin-bottom: 4px;\">\n                <strong>📍 Ubicación GPS:</strong>\n              </div>\n              <div style=\"\n                font-family: monospace; \n                font-size: 11px; \n                color: #9ca3af;\n                background: #f9fafb;\n                padding: 6px;\n                border-radius: 4px;\n              \">\n                Lat: ${trabajador.ubicacion.lat.toFixed(6)}<br/>\n                Lng: ${trabajador.ubicacion.lng.toFixed(6)}\n              </div>\n              <div style=\"color: #9ca3af; font-size: 11px; margin-top: 6px;\">\n                ⏱️ Última actualización: ${ultimaActualizacion?ultimaActualizacion.toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit',second:'2-digit'}):'N/A'}\n              </div>\n            </div>\n          `:`\n            <div style=\"\n              margin-top: 12px; \n              padding: 10px; \n              background: #fef2f2;\n              border-radius: 6px;\n              color: #991b1b;\n              font-size: 12px;\n              text-align: center;\n            \">\n              📍 GPS no activado\n            </div>\n          `}\n        </div>\n      </div>\n    `;};return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',height:'100vh',position:'relative'},children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:0,left:0,right:0,background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white',padding:'12px 20px',zIndex:1000,boxShadow:'0 2px 10px rgba(0,0,0,0.2)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{margin:0,fontSize:'20px',fontWeight:'600'},children:\"\\uD83D\\uDDFA\\uFE0F Centro de Control - MapaQuill\\xF3n\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'2px 0 0 0',fontSize:'13px',opacity:0.95},children:\"Monitoreo en tiempo real de flota y zonas de trabajo\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'13px'},children:[\"\\uD83D\\uDC64 \",currentUser.name||currentUser.email]}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,style:{padding:'6px 12px',background:'rgba(255,255,255,0.2)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'6px',cursor:'pointer',fontSize:'13px'},children:\"Cerrar Sesi\\xF3n\"}),/*#__PURE__*/_jsx(\"span\",{style:{background:'rgba(255,255,255,0.2)',padding:'4px 8px',borderRadius:'4px',fontSize:'12px'},children:new Date().toLocaleTimeString()})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'70px',left:'20px',background:'white',borderRadius:'8px',padding:'10px',boxShadow:'0 2px 10px rgba(0,0,0,0.1)',zIndex:1000,display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFiltroActivo('todos'),style:{padding:'8px 12px',background:filtroActivo==='todos'?'#667eea':'#f3f4f6',color:filtroActivo==='todos'?'white':'#374151',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'13px',fontWeight:'500'},children:\"\\uD83D\\uDCCD Todos\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFiltroActivo('vehiculos'),style:{padding:'8px 12px',background:filtroActivo==='vehiculos'?'#22c55e':'#f3f4f6',color:filtroActivo==='vehiculos'?'white':'#374151',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'13px',fontWeight:'500'},children:[\"\\uD83D\\uDE9B Veh\\xEDculos (\",realtimeStats.vehiculos.total,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFiltroActivo('zonas'),style:{padding:'8px 12px',background:filtroActivo==='zonas'?'#3b82f6':'#f3f4f6',color:filtroActivo==='zonas'?'white':'#374151',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'13px',fontWeight:'500'},children:[\"\\uD83C\\uDFD7\\uFE0F Zonas (\",realtimeStats.zonas.total,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFiltroActivo('trabajadores'),style:{padding:'8px 12px',background:filtroActivo==='trabajadores'?'#8b5cf6':'#f3f4f6',color:filtroActivo==='trabajadores'?'white':'#374151',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'13px',fontWeight:'500'},children:[\"\\uD83D\\uDC77 Trabajadores (\",realtimeStats.trabajadores.total,\")\"]})]}),showStats&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',bottom:'20px',left:'20px',background:'white',borderRadius:'12px',padding:'15px',boxShadow:'0 4px 20px rgba(0,0,0,0.1)',zIndex:1000,maxWidth:'380px',maxHeight:'40vh',overflow:'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'12px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,fontSize:'16px',color:'#1f2937'},children:\"\\uD83D\\uDCCA Estado General (Tiempo Real)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowStats(false),style:{background:'none',border:'none',color:'#6b7280',cursor:'pointer',fontSize:'18px'},children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'12px',fontSize:'13px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',marginBottom:'4px'},children:\"\\uD83D\\uDE9B Veh\\xEDculos\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'2px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Total: \",/*#__PURE__*/_jsx(\"strong\",{children:realtimeStats.vehiculos.total})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Activos: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#22c55e'},children:realtimeStats.vehiculos.activos})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Mantenimiento: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#ef4444'},children:realtimeStats.vehiculos.enMantenimiento})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',marginBottom:'4px'},children:\"\\uD83C\\uDFD7\\uFE0F Zonas\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'2px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Total: \",/*#__PURE__*/_jsx(\"strong\",{children:realtimeStats.zonas.total})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Activas: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#3b82f6'},children:realtimeStats.zonas.activas})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Completadas: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#22c55e'},children:realtimeStats.zonas.completadas})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{gridColumn:'span 2'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',marginBottom:'4px'},children:\"\\uD83D\\uDC77 Trabajadores\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'15px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Total: \",/*#__PURE__*/_jsx(\"strong\",{children:realtimeStats.trabajadores.total})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 En ruta: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#8b5cf6'},children:realtimeStats.trabajadores.enRuta})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2022 Trabajando: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#10b981'},children:realtimeStats.trabajadores.trabajando})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'8px',padding:'6px',background:'#dcfce7',borderRadius:'4px',fontSize:'12px',color:'#15803d'},children:[\"\\uD83D\\uDFE2 GPS Activos: \",/*#__PURE__*/_jsx(\"strong\",{children:trabajadores.filter(t=>{var _t$ubicacion;const tieneUbicacion=t.ubicacion&&t.ubicacion.lat&&t.ubicacion.lng;const esReciente=((_t$ubicacion=t.ubicacion)===null||_t$ubicacion===void 0?void 0:_t$ubicacion.timestamp)&&new Date()-new Date(t.ubicacion.timestamp)<60000;// Menos de 1 minuto\nreturn tieneUbicacion&&esReciente;}).length}),\" trabajadores transmitiendo ubicaci\\xF3n\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'12px',paddingTop:'12px',borderTop:'1px solid #e5e7eb',fontSize:'11px',color:'#22c55e',fontWeight:'bold'},children:\"\\uD83D\\uDFE2 Conectado a Firebase - Actualizaci\\xF3n en tiempo real\"})]}),!showStats&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowStats(true),style:{position:'absolute',bottom:'20px',left:'20px',background:'white',border:'1px solid #e5e7eb',borderRadius:'8px',padding:'10px 15px',boxShadow:'0 2px 10px rgba(0,0,0,0.1)',zIndex:1000,cursor:'pointer',fontSize:'14px',fontWeight:'500',color:'#374151'},children:\"\\uD83D\\uDCCA Mostrar estad\\xEDsticas\"}),/*#__PURE__*/_jsx(\"div\",{ref:mapRef,style:{width:'100%',height:'100%'}}),!mapLoaded&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)',textAlign:'center',zIndex:1001},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'50px',height:'50px',border:'4px solid #f3f3f3',borderTop:'4px solid #667eea',borderRadius:'50%',animation:'spin 1s linear infinite'}}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'10px',color:'#666'},children:\"Cargando mapa...\"})]}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `})]});};export default MapaQuillonFirebase;","map":{"version":3,"names":["React","useEffect","useRef","useState","vehiculosService","zonasService","trabajadoresService","reportesService","jsx","_jsx","jsxs","_jsxs","MapaQuillonFirebase","_ref","currentUser","onLogout","mapRef","map","setMap","vehiculos","setVehiculos","zonas","setZonas","trabajadores","setTrabajadores","filtroActivo","setFiltroActivo","mapLoaded","setMapLoaded","showStats","setShowStats","realtimeStats","setRealtimeStats","total","activos","enMantenimiento","activas","completadas","enRuta","trabajando","markersRef","infoWindowRef","unsubscribesRef","API_KEY","loadGoogleMaps","Promise","resolve","reject","window","google","maps","existingScript","document","querySelector","addEventListener","Error","script","createElement","src","async","defer","onload","onerror","head","appendChild","initMap","current","mapInstance","Map","center","lat","lng","zoom","mapTypeId","styles","featureType","stylers","visibility","InfoWindow","err","console","error","unsubVehiculos","subscribeToVehiculos","vehiculosData","push","unsubZonas","subscribeToZonas","zonasData","unsubTrabajadores","subscribeToTrabajadores","trabajadoresData","log","getRealtimeStats","stats","refreshInterval","setInterval","prev","forEach","unsub","clearInterval","getIcon","tipo","estado","_iconConfigs$tipo","iconConfigs","vehiculo","activo","color","symbol","en_ruta","mantenimiento","inactivo","zona","activa","pausada","completada","trabajador","en_camino","disponible","config","path","SymbolPath","CIRCLE","scale","fillColor","fillOpacity","strokeColor","strokeWeight","anchor","Point","Object","values","marker","Marker","position","title","nombre","icon","animation","Animation","BOUNCE","addListener","content","createVehiculoInfoWindow","setContent","open","id","createZonaInfoWindow","ubicacion","createTrabajadorInfoWindow","conductor","telefono","combustible","velocidad","destino","ultimaActualizacion","Date","toLocaleTimeString","supervisor","progreso","undefined","toFixed","horaInicio","horaEstimadaFin","horaFin","motivoPausa","_trabajador$ubicacion","ahora","timestamp","diferenciaTiempo","Math","floor","estadoConexion","colorEstado","email","zonaDestino","recorridoActual","hour","minute","second","style","width","height","children","top","left","right","background","padding","zIndex","boxShadow","display","justifyContent","alignItems","margin","fontSize","fontWeight","opacity","gap","name","onClick","border","borderRadius","cursor","bottom","maxWidth","maxHeight","overflow","marginBottom","gridTemplateColumns","flexDirection","gridColumn","marginTop","filter","t","_t$ubicacion","tieneUbicacion","esReciente","length","paddingTop","borderTop","ref","transform","textAlign"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/MapaQuillonFirebase.js"],"sourcesContent":["// src/components/MapaQuillonFirebase.js\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { vehiculosService, zonasService, trabajadoresService, reportesService } from '../services/firebaseservices';\r\n\r\nconst MapaQuillonFirebase = ({ currentUser, onLogout }) => {\r\n  const mapRef = useRef(null);\r\n  const [map, setMap] = useState(null);\r\n  const [vehiculos, setVehiculos] = useState([]);\r\n  const [zonas, setZonas] = useState([]);\r\n  const [trabajadores, setTrabajadores] = useState([]);\r\n  // const [selectedItem, setSelectedItem] = useState(null); // Para uso futuro\r\n  const [filtroActivo, setFiltroActivo] = useState('todos');\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n  const [showStats, setShowStats] = useState(true);\r\n  const [realtimeStats, setRealtimeStats] = useState({\r\n    vehiculos: { total: 0, activos: 0, enMantenimiento: 0 },\r\n    zonas: { total: 0, activas: 0, completadas: 0 },\r\n    trabajadores: { total: 0, enRuta: 0, trabajando: 0 }\r\n  });\r\n  \r\n  const markersRef = useRef({});\r\n  const infoWindowRef = useRef(null);\r\n  const unsubscribesRef = useRef([]);\r\n  \r\n  const API_KEY = 'AIzaSyA7DrdL36n5cx-RNzuXGAQggFeGCheHDbY';\r\n\r\n  // Cargar Google Maps\r\n  useEffect(() => {\r\n    const loadGoogleMaps = () => {\r\n      return new Promise((resolve, reject) => {\r\n        if (window.google && window.google.maps) {\r\n          resolve(window.google.maps);\r\n          return;\r\n        }\r\n\r\n        const existingScript = document.querySelector('script[src*=\"maps.googleapis.com\"]');\r\n        if (existingScript) {\r\n          existingScript.addEventListener('load', () => {\r\n            if (window.google && window.google.maps) {\r\n              resolve(window.google.maps);\r\n            } else {\r\n              reject(new Error('Google Maps no disponible'));\r\n            }\r\n          });\r\n          return;\r\n        }\r\n\r\n        const script = document.createElement('script');\r\n        script.src = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry&v=weekly`;\r\n        script.async = true;\r\n        script.defer = true;\r\n\r\n        script.onload = () => {\r\n          if (window.google && window.google.maps) {\r\n            resolve(window.google.maps);\r\n          }\r\n        };\r\n\r\n        script.onerror = () => reject(new Error('Error al cargar Google Maps'));\r\n        document.head.appendChild(script);\r\n      });\r\n    };\r\n\r\n    const initMap = async () => {\r\n      try {\r\n        const maps = await loadGoogleMaps();\r\n        \r\n        if (!mapRef.current) return;\r\n\r\n        const mapInstance = new maps.Map(mapRef.current, {\r\n          center: { lat: -36.7333, lng: -72.4667 },\r\n          zoom: 13,\r\n          mapTypeId: 'roadmap',\r\n          styles: [\r\n            {\r\n              featureType: 'poi.business',\r\n              stylers: [{ visibility: 'off' }]\r\n            }\r\n          ]\r\n        });\r\n\r\n        setMap(mapInstance);\r\n        infoWindowRef.current = new maps.InfoWindow();\r\n        setMapLoaded(true);\r\n      } catch (err) {\r\n        console.error('Error al cargar mapa:', err);\r\n      }\r\n    };\r\n\r\n    initMap();\r\n  }, []);\r\n\r\n  // Suscribirse a datos de Firebase en tiempo real\r\n  useEffect(() => {\r\n    // Suscribirse a vehículos\r\n    const unsubVehiculos = vehiculosService.subscribeToVehiculos((vehiculosData) => {\r\n      setVehiculos(vehiculosData);\r\n    });\r\n    unsubscribesRef.current.push(unsubVehiculos);\r\n\r\n    // Suscribirse a zonas\r\n    const unsubZonas = zonasService.subscribeToZonas((zonasData) => {\r\n      setZonas(zonasData);\r\n    });\r\n    unsubscribesRef.current.push(unsubZonas);\r\n\r\n    // Suscribirse a trabajadores\r\n    const unsubTrabajadores = trabajadoresService.subscribeToTrabajadores((trabajadoresData) => {\r\n      setTrabajadores(trabajadoresData);\r\n      console.log('Trabajadores actualizados:', trabajadoresData);\r\n    });\r\n    unsubscribesRef.current.push(unsubTrabajadores);\r\n\r\n    // Suscribirse a estadísticas en tiempo real\r\n    reportesService.getRealtimeStats((stats) => {\r\n      setRealtimeStats(stats);\r\n    });\r\n\r\n    // Auto-refresh cada 2 segundos para actualizar indicadores visuales\r\n    const refreshInterval = setInterval(() => {\r\n      // Forzar re-render para actualizar tiempos relativos\r\n      setTrabajadores(prev => [...prev]);\r\n    }, 2000);\r\n\r\n    // Limpiar suscripciones al desmontar\r\n    return () => {\r\n      unsubscribesRef.current.forEach(unsub => unsub && unsub());\r\n      clearInterval(refreshInterval);\r\n    };\r\n  }, []);\r\n\r\n  // Crear/actualizar marcadores\r\n  useEffect(() => {\r\n    if (!map || !window.google) return;\r\n\r\n    // Función para crear icono según tipo y estado\r\n    const getIcon = (tipo, estado) => {\r\n      const iconConfigs = {\r\n        vehiculo: {\r\n          activo: { color: '#22c55e', symbol: '🚛' },\r\n          trabajando: { color: '#3b82f6', symbol: '🔧' },\r\n          en_ruta: { color: '#f59e0b', symbol: '🚗' },\r\n          mantenimiento: { color: '#ef4444', symbol: '🔧' },\r\n          inactivo: { color: '#6b7280', symbol: '⏸️' }\r\n        },\r\n        zona: {\r\n          activa: { color: '#3b82f6', symbol: '🏗️' },\r\n          pausada: { color: '#f59e0b', symbol: '⏸️' },\r\n          completada: { color: '#22c55e', symbol: '✅' }\r\n        },\r\n        trabajador: {\r\n          en_camino: { color: '#8b5cf6', symbol: '👷' },\r\n          trabajando: { color: '#10b981', symbol: '👷' },\r\n          disponible: { color: '#06b6d4', symbol: '👷' }\r\n        }\r\n      };\r\n\r\n      const config = iconConfigs[tipo]?.[estado] || { color: '#6b7280', symbol: '📍' };\r\n      \r\n      if (tipo === 'trabajador') {\r\n        return {\r\n          path: window.google.maps.SymbolPath.CIRCLE,\r\n          scale: 8,\r\n          fillColor: config.color,\r\n          fillOpacity: 1,\r\n          strokeColor: '#ffffff',\r\n          strokeWeight: 2\r\n        };\r\n      }\r\n\r\n      return {\r\n        path: 'M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z',\r\n        fillColor: config.color,\r\n        fillOpacity: 1,\r\n        strokeColor: '#ffffff',\r\n        strokeWeight: 2,\r\n        scale: tipo === 'vehiculo' ? 1.8 : 2,\r\n        anchor: new window.google.maps.Point(12, 24)\r\n      };\r\n    };\r\n\r\n    // Limpiar marcadores antiguos\r\n    Object.values(markersRef.current).forEach(marker => marker.setMap(null));\r\n    markersRef.current = {};\r\n\r\n    // Crear marcadores de vehículos\r\n    if (filtroActivo === 'todos' || filtroActivo === 'vehiculos') {\r\n      vehiculos.forEach(vehiculo => {\r\n        if (vehiculo.lat && vehiculo.lng) {\r\n          const marker = new window.google.maps.Marker({\r\n            position: { lat: vehiculo.lat, lng: vehiculo.lng },\r\n            map: map,\r\n            title: vehiculo.nombre,\r\n            icon: getIcon('vehiculo', vehiculo.estado),\r\n            animation: vehiculo.estado === 'activo' ? window.google.maps.Animation.BOUNCE : null\r\n          });\r\n\r\n          marker.addListener('click', () => {\r\n            const content = createVehiculoInfoWindow(vehiculo);\r\n            infoWindowRef.current.setContent(content);\r\n            infoWindowRef.current.open(map, marker);\r\n            // setSelectedItem(vehiculo); // Para uso futuro\r\n          });\r\n\r\n          markersRef.current[`vehiculo_${vehiculo.id}`] = marker;\r\n        }\r\n      });\r\n    }\r\n\r\n    // Crear marcadores de zonas\r\n    if (filtroActivo === 'todos' || filtroActivo === 'zonas') {\r\n      zonas.forEach(zona => {\r\n        if (zona.lat && zona.lng) {\r\n          const marker = new window.google.maps.Marker({\r\n            position: { lat: zona.lat, lng: zona.lng },\r\n            map: map,\r\n            title: zona.nombre,\r\n            icon: getIcon('zona', zona.estado)\r\n          });\r\n\r\n          marker.addListener('click', () => {\r\n            const content = createZonaInfoWindow(zona);\r\n            infoWindowRef.current.setContent(content);\r\n            infoWindowRef.current.open(map, marker);\r\n            // setSelectedItem(zona); // Para uso futuro\r\n          });\r\n\r\n          markersRef.current[`zona_${zona.id}`] = marker;\r\n        }\r\n      });\r\n    }\r\n\r\n    // Crear marcadores de trabajadores\r\n    if (filtroActivo === 'todos' || filtroActivo === 'trabajadores') {\r\n      trabajadores.forEach(trabajador => {\r\n        if (trabajador.ubicacion && trabajador.ubicacion.lat && trabajador.ubicacion.lng) {\r\n          const marker = new window.google.maps.Marker({\r\n            position: { lat: trabajador.ubicacion.lat, lng: trabajador.ubicacion.lng },\r\n            map: map,\r\n            title: trabajador.nombre,\r\n            icon: getIcon('trabajador', trabajador.estado || 'disponible')\r\n          });\r\n\r\n          marker.addListener('click', () => {\r\n            const content = createTrabajadorInfoWindow(trabajador);\r\n            infoWindowRef.current.setContent(content);\r\n            infoWindowRef.current.open(map, marker);\r\n            // setSelectedItem(trabajador); // Para uso futuro\r\n          });\r\n\r\n          markersRef.current[`trabajador_${trabajador.id}`] = marker;\r\n        }\r\n      });\r\n    }\r\n\r\n  }, [map, vehiculos, zonas, trabajadores, filtroActivo]);\r\n\r\n  // Funciones para crear contenido de InfoWindow\r\n  const createVehiculoInfoWindow = (vehiculo) => {\r\n    return `\r\n      <div style=\"padding: 10px; font-family: Arial, sans-serif; max-width: 280px;\">\r\n        <h3 style=\"margin: 0 0 10px 0; color: #1f2937;\">\r\n          ${vehiculo.nombre}\r\n        </h3>\r\n        <div style=\"background: ${vehiculo.estado === 'activo' ? '#dcfce7' : vehiculo.estado === 'trabajando' ? '#dbeafe' : '#fef3c7'}; \r\n                    padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 10px;\">\r\n          <strong>Estado:</strong> ${vehiculo.estado}\r\n        </div>\r\n        <div style=\"font-size: 14px; line-height: 1.6;\">\r\n          ${vehiculo.conductor ? `<div><strong>👤 Conductor:</strong> ${vehiculo.conductor}</div>` : ''}\r\n          ${vehiculo.telefono ? `<div><strong>📱 Teléfono:</strong> ${vehiculo.telefono}</div>` : ''}\r\n          ${vehiculo.combustible ? `\r\n            <div><strong>⛽ Combustible:</strong> \r\n              <span style=\"color: ${vehiculo.combustible > 50 ? '#22c55e' : vehiculo.combustible > 25 ? '#f59e0b' : '#ef4444'}\">\r\n                ${vehiculo.combustible}%\r\n              </span>\r\n            </div>\r\n          ` : ''}\r\n          ${vehiculo.velocidad ? `<div><strong>📍 Velocidad:</strong> ${vehiculo.velocidad} km/h</div>` : ''}\r\n          ${vehiculo.zona ? `<div><strong>🏗️ Zona:</strong> ${vehiculo.zona}</div>` : ''}\r\n          ${vehiculo.destino ? `<div><strong>🎯 Destino:</strong> ${vehiculo.destino}</div>` : ''}\r\n          <div style=\"margin-top: 8px; color: #6b7280; font-size: 12px;\">\r\n            Última actualización: ${vehiculo.ultimaActualizacion ? new Date(vehiculo.ultimaActualizacion).toLocaleTimeString() : 'N/A'}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  };\r\n\r\n  const createZonaInfoWindow = (zona) => {\r\n    return `\r\n      <div style=\"padding: 10px; font-family: Arial, sans-serif; max-width: 280px;\">\r\n        <h3 style=\"margin: 0 0 10px 0; color: #1f2937;\">\r\n          ${zona.nombre}\r\n        </h3>\r\n        <div style=\"background: ${zona.estado === 'activa' ? '#dbeafe' : zona.estado === 'pausada' ? '#fef3c7' : '#dcfce7'}; \r\n                    padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 10px;\">\r\n          <strong>Estado:</strong> ${zona.estado}\r\n        </div>\r\n        <div style=\"font-size: 14px; line-height: 1.6;\">\r\n          ${zona.supervisor ? `<div><strong>👷 Supervisor:</strong> ${zona.supervisor}</div>` : ''}\r\n          ${zona.telefono ? `<div><strong>📱 Teléfono:</strong> ${zona.telefono}</div>` : ''}\r\n          ${zona.progreso !== undefined ? `\r\n            <div><strong>📊 Progreso:</strong>\r\n              <div style=\"background: #e5e7eb; border-radius: 4px; height: 20px; margin: 4px 0;\">\r\n                <div style=\"background: ${zona.progreso === 100 ? '#22c55e' : '#3b82f6'}; \r\n                            width: ${zona.progreso}%; height: 100%; border-radius: 4px; \r\n                            display: flex; align-items: center; justify-content: center; color: white; font-size: 12px;\">\r\n                  ${zona.progreso.toFixed(0)}%\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ` : ''}\r\n          ${zona.trabajadores ? `<div><strong>👥 Trabajadores:</strong> ${zona.trabajadores}</div>` : ''}\r\n          ${zona.horaInicio ? `<div><strong>⏰ Horario:</strong> ${zona.horaInicio} - ${zona.horaEstimadaFin || zona.horaFin || 'Por definir'}</div>` : ''}\r\n          ${zona.motivoPausa ? `<div style=\"color: #f59e0b; margin-top: 8px;\">⚠️ ${zona.motivoPausa}</div>` : ''}\r\n        </div>\r\n      </div>\r\n    `;\r\n  };\r\n\r\n  const createTrabajadorInfoWindow = (trabajador) => {\r\n    const ahora = new Date();\r\n    const ultimaActualizacion = trabajador.ubicacion?.timestamp ? new Date(trabajador.ubicacion.timestamp) : null;\r\n    const diferenciaTiempo = ultimaActualizacion ? Math.floor((ahora - ultimaActualizacion) / 1000) : null;\r\n    \r\n    let estadoConexion = '⚫ Sin conexión';\r\n    let colorEstado = '#6b7280';\r\n    \r\n    if (diferenciaTiempo !== null) {\r\n      if (diferenciaTiempo < 30) {\r\n        estadoConexion = '🟢 En línea';\r\n        colorEstado = '#10b981';\r\n      } else if (diferenciaTiempo < 60) {\r\n        estadoConexion = '🟡 Conexión reciente';\r\n        colorEstado = '#f59e0b';\r\n      } else if (diferenciaTiempo < 300) {\r\n        estadoConexion = '🟠 Última conexión hace ' + Math.floor(diferenciaTiempo / 60) + ' min';\r\n        colorEstado = '#fb923c';\r\n      } else {\r\n        estadoConexion = '🔴 Sin conexión reciente';\r\n        colorEstado = '#ef4444';\r\n      }\r\n    }\r\n    \r\n    return `\r\n      <div style=\"padding: 10px; font-family: Arial, sans-serif; max-width: 300px;\">\r\n        <h3 style=\"margin: 0 0 10px 0; color: #1f2937; display: flex; align-items: center; gap: 8px;\">\r\n          👷 ${trabajador.nombre || trabajador.email || 'Trabajador'}\r\n          <span style=\"\r\n            font-size: 10px;\r\n            padding: 2px 6px;\r\n            background: ${colorEstado}22;\r\n            color: ${colorEstado};\r\n            border-radius: 12px;\r\n            font-weight: normal;\r\n          \">\r\n            ${estadoConexion}\r\n          </span>\r\n        </h3>\r\n        \r\n        <div style=\"\r\n          background: ${trabajador.estado === 'en_camino' ? '#ede9fe' : \r\n                       trabajador.estado === 'trabajando' ? '#dcfce7' : \r\n                       trabajador.estado === 'disponible' ? '#e0f2fe' : '#f3f4f6'}; \r\n          padding: 6px 10px; \r\n          border-radius: 6px; \r\n          display: inline-block; \r\n          margin-bottom: 12px;\r\n          font-size: 13px;\r\n        \">\r\n          <strong>Estado:</strong> ${\r\n            trabajador.estado === 'en_camino' ? '🚗 En camino' :\r\n            trabajador.estado === 'trabajando' ? '🔧 Trabajando' :\r\n            trabajador.estado === 'disponible' ? '✅ Disponible' :\r\n            '⏸️ ' + (trabajador.estado || 'Sin estado')\r\n          }\r\n        </div>\r\n        \r\n        <div style=\"font-size: 14px; line-height: 1.8;\">\r\n          ${trabajador.email ? `\r\n            <div style=\"margin-bottom: 6px;\">\r\n              <strong>📧 Email:</strong> \r\n              <span style=\"color: #6b7280; font-size: 13px;\">${trabajador.email}</span>\r\n            </div>\r\n          ` : ''}\r\n          \r\n          ${trabajador.telefono ? `\r\n            <div style=\"margin-bottom: 6px;\">\r\n              <strong>📱 Teléfono:</strong> \r\n              <span style=\"color: #6b7280; font-size: 13px;\">${trabajador.telefono}</span>\r\n            </div>\r\n          ` : ''}\r\n          \r\n          ${trabajador.zonaDestino ? `\r\n            <div style=\"margin-bottom: 6px;\">\r\n              <strong>🎯 Destino:</strong> \r\n              <span style=\"color: #3b82f6; font-size: 13px;\">${trabajador.zonaDestino}</span>\r\n            </div>\r\n          ` : ''}\r\n          \r\n          ${trabajador.recorridoActual ? `\r\n            <div style=\"margin-bottom: 6px;\">\r\n              <strong>📍 En recorrido:</strong> \r\n              <span style=\"color: #10b981; font-size: 13px;\">Activo</span>\r\n            </div>\r\n          ` : ''}\r\n          \r\n          ${trabajador.ubicacion ? `\r\n            <div style=\"\r\n              margin-top: 12px; \r\n              padding-top: 10px; \r\n              border-top: 1px solid #e5e7eb;\r\n            \">\r\n              <div style=\"color: #6b7280; font-size: 12px; margin-bottom: 4px;\">\r\n                <strong>📍 Ubicación GPS:</strong>\r\n              </div>\r\n              <div style=\"\r\n                font-family: monospace; \r\n                font-size: 11px; \r\n                color: #9ca3af;\r\n                background: #f9fafb;\r\n                padding: 6px;\r\n                border-radius: 4px;\r\n              \">\r\n                Lat: ${trabajador.ubicacion.lat.toFixed(6)}<br/>\r\n                Lng: ${trabajador.ubicacion.lng.toFixed(6)}\r\n              </div>\r\n              <div style=\"color: #9ca3af; font-size: 11px; margin-top: 6px;\">\r\n                ⏱️ Última actualización: ${\r\n                  ultimaActualizacion ? \r\n                  ultimaActualizacion.toLocaleTimeString('es-CL', { \r\n                    hour: '2-digit', \r\n                    minute: '2-digit',\r\n                    second: '2-digit'\r\n                  }) : \r\n                  'N/A'\r\n                }\r\n              </div>\r\n            </div>\r\n          ` : `\r\n            <div style=\"\r\n              margin-top: 12px; \r\n              padding: 10px; \r\n              background: #fef2f2;\r\n              border-radius: 6px;\r\n              color: #991b1b;\r\n              font-size: 12px;\r\n              text-align: center;\r\n            \">\r\n              📍 GPS no activado\r\n            </div>\r\n          `}\r\n        </div>\r\n      </div>\r\n    `;\r\n  };\r\n\r\n  return (\r\n    <div style={{ width: '100%', height: '100vh', position: 'relative' }}>\r\n      {/* Header */}\r\n      <div style={{\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n        color: 'white',\r\n        padding: '12px 20px',\r\n        zIndex: 1000,\r\n        boxShadow: '0 2px 10px rgba(0,0,0,0.2)'\r\n      }}>\r\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          <div>\r\n            <h1 style={{ margin: 0, fontSize: '20px', fontWeight: '600' }}>\r\n              🗺️ Centro de Control - MapaQuillón\r\n            </h1>\r\n            <p style={{ margin: '2px 0 0 0', fontSize: '13px', opacity: 0.95 }}>\r\n              Monitoreo en tiempo real de flota y zonas de trabajo\r\n            </p>\r\n          </div>\r\n          <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>\r\n            <span style={{ fontSize: '13px' }}>\r\n              👤 {currentUser.name || currentUser.email}\r\n            </span>\r\n            <button\r\n              onClick={onLogout}\r\n              style={{\r\n                padding: '6px 12px',\r\n                background: 'rgba(255,255,255,0.2)',\r\n                color: 'white',\r\n                border: '1px solid rgba(255,255,255,0.3)',\r\n                borderRadius: '6px',\r\n                cursor: 'pointer',\r\n                fontSize: '13px'\r\n              }}\r\n            >\r\n              Cerrar Sesión\r\n            </button>\r\n            <span style={{ \r\n              background: 'rgba(255,255,255,0.2)', \r\n              padding: '4px 8px', \r\n              borderRadius: '4px',\r\n              fontSize: '12px'\r\n            }}>\r\n              {new Date().toLocaleTimeString()}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Panel de filtros */}\r\n      <div style={{\r\n        position: 'absolute',\r\n        top: '70px',\r\n        left: '20px',\r\n        background: 'white',\r\n        borderRadius: '8px',\r\n        padding: '10px',\r\n        boxShadow: '0 2px 10px rgba(0,0,0,0.1)',\r\n        zIndex: 1000,\r\n        display: 'flex',\r\n        gap: '8px'\r\n      }}>\r\n        <button\r\n          onClick={() => setFiltroActivo('todos')}\r\n          style={{\r\n            padding: '8px 12px',\r\n            background: filtroActivo === 'todos' ? '#667eea' : '#f3f4f6',\r\n            color: filtroActivo === 'todos' ? 'white' : '#374151',\r\n            border: 'none',\r\n            borderRadius: '6px',\r\n            cursor: 'pointer',\r\n            fontSize: '13px',\r\n            fontWeight: '500'\r\n          }}\r\n        >\r\n          📍 Todos\r\n        </button>\r\n        <button\r\n          onClick={() => setFiltroActivo('vehiculos')}\r\n          style={{\r\n            padding: '8px 12px',\r\n            background: filtroActivo === 'vehiculos' ? '#22c55e' : '#f3f4f6',\r\n            color: filtroActivo === 'vehiculos' ? 'white' : '#374151',\r\n            border: 'none',\r\n            borderRadius: '6px',\r\n            cursor: 'pointer',\r\n            fontSize: '13px',\r\n            fontWeight: '500'\r\n          }}\r\n        >\r\n          🚛 Vehículos ({realtimeStats.vehiculos.total})\r\n        </button>\r\n        <button\r\n          onClick={() => setFiltroActivo('zonas')}\r\n          style={{\r\n            padding: '8px 12px',\r\n            background: filtroActivo === 'zonas' ? '#3b82f6' : '#f3f4f6',\r\n            color: filtroActivo === 'zonas' ? 'white' : '#374151',\r\n            border: 'none',\r\n            borderRadius: '6px',\r\n            cursor: 'pointer',\r\n            fontSize: '13px',\r\n            fontWeight: '500'\r\n          }}\r\n        >\r\n          🏗️ Zonas ({realtimeStats.zonas.total})\r\n        </button>\r\n        <button\r\n          onClick={() => setFiltroActivo('trabajadores')}\r\n          style={{\r\n            padding: '8px 12px',\r\n            background: filtroActivo === 'trabajadores' ? '#8b5cf6' : '#f3f4f6',\r\n            color: filtroActivo === 'trabajadores' ? 'white' : '#374151',\r\n            border: 'none',\r\n            borderRadius: '6px',\r\n            cursor: 'pointer',\r\n            fontSize: '13px',\r\n            fontWeight: '500'\r\n          }}\r\n        >\r\n          👷 Trabajadores ({realtimeStats.trabajadores.total})\r\n        </button>\r\n      </div>\r\n\r\n      {/* Panel de estadísticas */}\r\n      {showStats && (\r\n        <div style={{\r\n          position: 'absolute',\r\n          bottom: '20px',\r\n          left: '20px',\r\n          background: 'white',\r\n          borderRadius: '12px',\r\n          padding: '15px',\r\n          boxShadow: '0 4px 20px rgba(0,0,0,0.1)',\r\n          zIndex: 1000,\r\n          maxWidth: '380px',\r\n          maxHeight: '40vh',\r\n          overflow: 'auto'\r\n        }}>\r\n          <div style={{ \r\n            display: 'flex', \r\n            justifyContent: 'space-between', \r\n            alignItems: 'center',\r\n            marginBottom: '12px'\r\n          }}>\r\n            <h3 style={{ margin: 0, fontSize: '16px', color: '#1f2937' }}>\r\n              📊 Estado General (Tiempo Real)\r\n            </h3>\r\n            <button\r\n              onClick={() => setShowStats(false)}\r\n              style={{\r\n                background: 'none',\r\n                border: 'none',\r\n                color: '#6b7280',\r\n                cursor: 'pointer',\r\n                fontSize: '18px'\r\n              }}\r\n            >\r\n              ×\r\n            </button>\r\n          </div>\r\n\r\n          <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px', fontSize: '13px' }}>\r\n            <div>\r\n              <div style={{ color: '#6b7280', marginBottom: '4px' }}>🚛 Vehículos</div>\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '2px' }}>\r\n                <span>• Total: <strong>{realtimeStats.vehiculos.total}</strong></span>\r\n                <span>• Activos: <strong style={{ color: '#22c55e' }}>{realtimeStats.vehiculos.activos}</strong></span>\r\n                <span>• Mantenimiento: <strong style={{ color: '#ef4444' }}>{realtimeStats.vehiculos.enMantenimiento}</strong></span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <div style={{ color: '#6b7280', marginBottom: '4px' }}>🏗️ Zonas</div>\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '2px' }}>\r\n                <span>• Total: <strong>{realtimeStats.zonas.total}</strong></span>\r\n                <span>• Activas: <strong style={{ color: '#3b82f6' }}>{realtimeStats.zonas.activas}</strong></span>\r\n                <span>• Completadas: <strong style={{ color: '#22c55e' }}>{realtimeStats.zonas.completadas}</strong></span>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{ gridColumn: 'span 2' }}>\r\n              <div style={{ color: '#6b7280', marginBottom: '4px' }}>👷 Trabajadores</div>\r\n              <div style={{ display: 'flex', gap: '15px' }}>\r\n                <span>• Total: <strong>{realtimeStats.trabajadores.total}</strong></span>\r\n                <span>• En ruta: <strong style={{ color: '#8b5cf6' }}>{realtimeStats.trabajadores.enRuta}</strong></span>\r\n                <span>• Trabajando: <strong style={{ color: '#10b981' }}>{realtimeStats.trabajadores.trabajando}</strong></span>\r\n              </div>\r\n              <div style={{ \r\n                marginTop: '8px', \r\n                padding: '6px', \r\n                background: '#dcfce7', \r\n                borderRadius: '4px',\r\n                fontSize: '12px',\r\n                color: '#15803d'\r\n              }}>\r\n                🟢 GPS Activos: <strong>{\r\n                  trabajadores.filter(t => {\r\n                    const tieneUbicacion = t.ubicacion && t.ubicacion.lat && t.ubicacion.lng;\r\n                    const esReciente = t.ubicacion?.timestamp && \r\n                      (new Date() - new Date(t.ubicacion.timestamp)) < 60000; // Menos de 1 minuto\r\n                    return tieneUbicacion && esReciente;\r\n                  }).length\r\n                }</strong> trabajadores transmitiendo ubicación\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{\r\n            marginTop: '12px',\r\n            paddingTop: '12px',\r\n            borderTop: '1px solid #e5e7eb',\r\n            fontSize: '11px',\r\n            color: '#22c55e',\r\n            fontWeight: 'bold'\r\n          }}>\r\n            🟢 Conectado a Firebase - Actualización en tiempo real\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Botón para mostrar estadísticas si están ocultas */}\r\n      {!showStats && (\r\n        <button\r\n          onClick={() => setShowStats(true)}\r\n          style={{\r\n            position: 'absolute',\r\n            bottom: '20px',\r\n            left: '20px',\r\n            background: 'white',\r\n            border: '1px solid #e5e7eb',\r\n            borderRadius: '8px',\r\n            padding: '10px 15px',\r\n            boxShadow: '0 2px 10px rgba(0,0,0,0.1)',\r\n            zIndex: 1000,\r\n            cursor: 'pointer',\r\n            fontSize: '14px',\r\n            fontWeight: '500',\r\n            color: '#374151'\r\n          }}\r\n        >\r\n          📊 Mostrar estadísticas\r\n        </button>\r\n      )}\r\n\r\n      {/* Mapa */}\r\n      <div \r\n        ref={mapRef}\r\n        style={{ \r\n          width: '100%', \r\n          height: '100%'\r\n        }} \r\n      />\r\n\r\n      {/* Indicador de carga */}\r\n      {!mapLoaded && (\r\n        <div style={{\r\n          position: 'absolute',\r\n          top: '50%',\r\n          left: '50%',\r\n          transform: 'translate(-50%, -50%)',\r\n          textAlign: 'center',\r\n          zIndex: 1001\r\n        }}>\r\n          <div style={{\r\n            width: '50px',\r\n            height: '50px',\r\n            border: '4px solid #f3f3f3',\r\n            borderTop: '4px solid #667eea',\r\n            borderRadius: '50%',\r\n            animation: 'spin 1s linear infinite'\r\n          }}></div>\r\n          <p style={{ marginTop: '10px', color: '#666' }}>Cargando mapa...</p>\r\n        </div>\r\n      )}\r\n\r\n      <style jsx>{`\r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapaQuillonFirebase;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
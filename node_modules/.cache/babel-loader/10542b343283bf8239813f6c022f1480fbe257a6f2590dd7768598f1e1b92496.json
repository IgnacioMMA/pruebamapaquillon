{"ast":null,"code":"// src/components/SistemaTrabajadoresFirebase.js\nimport React,{useEffect,useRef,useState}from'react';import{trabajadoresService}from'../services/firebaseservices';import{database}from'../config/firebase';import{ref,onValue,update,set,push,get}from'firebase/database';import TrabajadorVehiclePanel from'./TrabajadorVehiclePanel';import{cloudinaryConfig}from'../config/cloudinary';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SistemaTrabajadoresFirebase=_ref=>{let{currentUser,onLogout,onViewChange}=_ref;// Estados principales\nconst[showVehiclePanel,setShowVehiclePanel]=useState(false);const[userPosition,setUserPosition]=useState(null);const[selectedZona,setSelectedZona]=useState(null);const[isTracking,setIsTracking]=useState(false);const[workStatus,setWorkStatus]=useState('idle');// Estados para zonas y notificaciones\nconst[zonasAsignadas,setZonasAsignadas]=useState([]);const[notificaciones,setNotificaciones]=useState([]);const[isMobile,setIsMobile]=useState(false);const[toastNotification,setToastNotification]=useState(null);// ESTADOS PARA DOCUMENTOS\nconst[showDocumentsModal,setShowDocumentsModal]=useState(false);const[uploadingFile,setUploadingFile]=useState(false);const[uploadProgress,setUploadProgress]=useState({});const[documentos,setDocumentos]=useState({licenciaConducir:{url:'',nombre:'',fecha:'',vencimiento:''},certificadoOperador:{url:'',nombre:'',fecha:'',vencimiento:''},certificados:[]});const[message,setMessage]=useState({type:'',text:''});const[isLoadingDocuments,setIsLoadingDocuments]=useState(false);// Referencias\nconst toastTimeoutRef=useRef(null);const[gpsStatus,setGpsStatus]=useState('inactive');// ========== FUNCIONES COMPLETAS PARA MANEJO DE DOCUMENTOS ==========\n// 1. FUNCIÓN PARA SUBIR ARCHIVOS (COMPLETA Y MEJORADA)\nconst handleFileUpload=async(file,tipoDocumento)=>{if(!file)return;// Validación de PDF\nif(file.type==='application/pdf'){setMessage({type:'error',text:'❌ NO se permiten PDFs. Por favor, sube una FOTO o IMAGEN del documento (JPG/PNG).'});alert('📸 ALTERNATIVAS PARA SUBIR TU DOCUMENTO:\\n\\n'+'1. Toma una FOTO con tu celular\\n'+'2. Haz una CAPTURA DE PANTALLA del PDF\\n'+'3. Usa un escáner que guarde como JPG\\n'+'4. Convierte el PDF a imagen en: https://www.ilovepdf.com/pdf_to_jpg');return;}// Validación de tipo de archivo\nconst allowedTypes=['image/jpeg','image/png','image/jpg'];if(!allowedTypes.includes(file.type)){setMessage({type:'error',text:'❌ Solo se permiten imágenes JPG y PNG'});return;}// Validación de tamaño\nif(file.size>10*1024*1024){setMessage({type:'error',text:'❌ El archivo no puede superar los 10MB'});return;}setUploadingFile(true);setUploadProgress({[tipoDocumento]:0});try{// Preparar FormData para Cloudinary\nconst formData=new FormData();formData.append('file',file);formData.append('upload_preset','vehiculos_docs');const trabajadorId=currentUser.uid||`temp_${Date.now()}`;const timestamp=Date.now();const cleanFileName=file.name.split('.')[0].replace(/[^a-zA-Z0-9_-]/g,'_');formData.append('folder',`municipalidad/trabajadores/${trabajadorId}/${tipoDocumento}`);formData.append('public_id',`${timestamp}_${cleanFileName}`);setUploadProgress({[tipoDocumento]:30});// Subir a Cloudinary\nconst response=await fetch(`https://api.cloudinary.com/v1_1/${cloudinaryConfig.cloudName}/image/upload`,{method:'POST',body:formData});setUploadProgress({[tipoDocumento]:60});if(!response.ok){throw new Error('Error al subir imagen a Cloudinary');}const data=await response.json();console.log('✅ Imagen subida a Cloudinary:',data);setUploadProgress({[tipoDocumento]:90});// Crear objeto de documento con todos los datos necesarios\nconst documentData={url:data.secure_url||'',publicId:data.public_id||'',nombre:file.name||'documento',fecha:new Date().toISOString(),tamaño:file.size||0,tipo:file.type||'image/jpeg',vencimiento:''// Campo opcional para fechas de vencimiento\n};console.log('📄 Datos del documento a guardar:',documentData);// Guardar en Firebase PRIMERO\nawait guardarDocumentosEnFirebase(tipoDocumento,documentData);// DESPUÉS actualizar el estado local\nif(tipoDocumento==='certificados'){setDocumentos(prev=>({...prev,certificados:[...(prev.certificados||[]),documentData]}));}else{setDocumentos(prev=>({...prev,[tipoDocumento]:documentData}));}setUploadProgress({[tipoDocumento]:100});setMessage({type:'success',text:`✅ ${file.name} subido exitosamente`});showToast('✅ Documento subido exitosamente','success');setTimeout(()=>{setUploadProgress({});setMessage({type:'',text:''});},3000);}catch(error){console.error('❌ Error completo:',error);setMessage({type:'error',text:'❌ Error al subir la imagen: '+error.message});showToast('❌ Error al subir el documento','error');}finally{setUploadingFile(false);}};// 2. FUNCIÓN PARA GUARDAR EN FIREBASE\nconst guardarDocumentosEnFirebase=async(tipoDocumento,documentData)=>{try{console.log(`🔄 Guardando ${tipoDocumento} en Firebase...`);console.log('📝 Datos a guardar:',documentData);if(!currentUser||!currentUser.uid){throw new Error('No hay usuario autenticado');}// GUARDAR EN MÚLTIPLES RUTAS PARA ASEGURAR\nconst rutas=[`trabajadores/${currentUser.uid}/documentos`,`documentos/${currentUser.uid}`];for(const rutaBase of rutas){console.log(`💾 Guardando en ruta: ${rutaBase}/${tipoDocumento}`);if(tipoDocumento==='certificados'){// Para certificados, usar push para crear una lista\nconst certificadosRef=ref(database,`${rutaBase}/certificados`);const newCertRef=push(certificadosRef);await set(newCertRef,documentData);console.log(`✅ Certificado guardado en ${rutaBase} con ID:`,newCertRef.key);}else{// Para licencia y certificado de operador\nconst docRef=ref(database,`${rutaBase}/${tipoDocumento}`);await set(docRef,documentData);console.log(`✅ ${tipoDocumento} guardado en ${rutaBase}`);}}// Verificar que se guardó correctamente en ambas rutas\nfor(const rutaBase of rutas){const verificarRef=ref(database,rutaBase);const snapshot=await get(verificarRef);console.log(`📦 Verificación - Documentos en ${rutaBase}:`,snapshot.val());}// También verificar la estructura completa del trabajador\nconst trabajadorRef=ref(database,`trabajadores/${currentUser.uid}`);const trabajadorSnapshot=await get(trabajadorRef);console.log('👷 Estructura completa del trabajador después de guardar:',trabajadorSnapshot.val());}catch(error){console.error('❌ Error al guardar en Firebase:',error);throw error;}};// 3. FUNCIÓN PARA ELIMINAR DOCUMENTOS\nconst handleDeleteDocument=async function(tipoDocumento){let index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!window.confirm('¿Estás seguro de eliminar este documento?'))return;try{// Primero eliminar de Firebase\nawait eliminarDocumentoDeFirebase(tipoDocumento,index);// Después actualizar el estado local\nif(tipoDocumento==='certificados'&&index!==null){setDocumentos(prev=>({...prev,certificados:prev.certificados.filter((_,i)=>i!==index)}));}else{setDocumentos(prev=>({...prev,[tipoDocumento]:{url:'',nombre:'',fecha:'',vencimiento:''}}));}setMessage({type:'success',text:'✅ Documento eliminado correctamente'});showToast('✅ Documento eliminado','success');setTimeout(()=>{setMessage({type:'',text:''});},3000);}catch(error){console.error('Error al eliminar documento:',error);setMessage({type:'error',text:'❌ Error al eliminar el documento'});}};// 4. FUNCIÓN PARA ELIMINAR DE FIREBASE\nconst eliminarDocumentoDeFirebase=async(tipoDocumento,index)=>{try{if(!currentUser||!currentUser.uid){throw new Error('No hay usuario autenticado');}if(tipoDocumento==='certificados'){// Para certificados, obtener la lista actual y eliminar el específico\nconst certificadosRef=ref(database,`trabajadores/${currentUser.uid}/documentos/certificados`);const snapshot=await get(certificadosRef);const certificadosData=snapshot.val()||{};const certificadosArray=Object.entries(certificadosData);if(index!==null&&index<certificadosArray.length){const[keyToDelete]=certificadosArray[index];const certRef=ref(database,`trabajadores/${currentUser.uid}/documentos/certificados/${keyToDelete}`);await set(certRef,null);console.log(`✅ Certificado ${keyToDelete} eliminado de Firebase`);}}else{// Para otros documentos, simplemente eliminar\nconst docRef=ref(database,`trabajadores/${currentUser.uid}/documentos/${tipoDocumento}`);await set(docRef,null);console.log(`✅ ${tipoDocumento} eliminado de Firebase`);}}catch(error){console.error('❌ Error al eliminar de Firebase:',error);throw error;}};// 5. FUNCIÓN CORREGIDA PARA CARGAR DOCUMENTOS DESDE FIREBASE\nconst cargarDocumentosDesdeFirebase=async()=>{if(!currentUser||!currentUser.uid){console.log('⚠️ No hay usuario para cargar documentos');return null;}console.log('🔄 Iniciando carga de documentos para usuario:',currentUser.uid);setIsLoadingDocuments(true);try{// VERIFICAR MÚLTIPLES RUTAS POSIBLES\nconsole.log('🔍 Verificando rutas de documentos...');// Ruta 1: trabajadores/uid/documentos\nconst docsRef1=ref(database,`trabajadores/${currentUser.uid}/documentos`);const snapshot1=await get(docsRef1);const data1=snapshot1.val();console.log('📦 Ruta trabajadores/uid/documentos:',data1);// Ruta 2: documentos/uid\nconst docsRef2=ref(database,`documentos/${currentUser.uid}`);const snapshot2=await get(docsRef2);const data2=snapshot2.val();console.log('📦 Ruta documentos/uid:',data2);// Ruta 3: usuarios/uid/documentos\nconst docsRef3=ref(database,`usuarios/${currentUser.uid}/documentos`);const snapshot3=await get(docsRef3);const data3=snapshot3.val();console.log('📦 Ruta usuarios/uid/documentos:',data3);// Verificar toda la estructura del trabajador\nconst trabajadorRef=ref(database,`trabajadores/${currentUser.uid}`);const trabajadorSnapshot=await get(trabajadorRef);const trabajadorData=trabajadorSnapshot.val();console.log('👷 Datos completos del trabajador:',trabajadorData);// Usar la ruta correcta (por defecto la primera)\nconst docsRef=docsRef1;const data=data1;if(data){// Procesar y establecer los documentos\nconst docsToLoad={licenciaConducir:data.licenciaConducir||{url:'',nombre:'',fecha:'',vencimiento:''},certificadoOperador:data.certificadoOperador||{url:'',nombre:'',fecha:'',vencimiento:''},certificados:[]};// Procesar certificados si existen\nif(data.certificados&&typeof data.certificados==='object'){docsToLoad.certificados=Object.entries(data.certificados).map(_ref2=>{let[key,cert]=_ref2;return{firebaseKey:key,...cert};});}console.log('✅ Documentos procesados:',docsToLoad);setDocumentos(docsToLoad);}else{console.log('⚠️ No hay documentos guardados para este usuario');}// Establecer listener para cambios en tiempo real\nconst unsubscribe=onValue(docsRef,snapshot=>{const updatedData=snapshot.val();console.log('🔄 Actualización de documentos detectada:',updatedData);if(updatedData){const docsToUpdate={licenciaConducir:updatedData.licenciaConducir||{url:'',nombre:'',fecha:'',vencimiento:''},certificadoOperador:updatedData.certificadoOperador||{url:'',nombre:'',fecha:'',vencimiento:''},certificados:[]};if(updatedData.certificados&&typeof updatedData.certificados==='object'){docsToUpdate.certificados=Object.entries(updatedData.certificados).map(_ref3=>{let[key,cert]=_ref3;return{firebaseKey:key,...cert};});}setDocumentos(docsToUpdate);}});setIsLoadingDocuments(false);return unsubscribe;}catch(error){console.error('❌ Error al cargar documentos:',error);setIsLoadingDocuments(false);showToast('❌ Error al cargar documentos','error');return null;}};// 6. FUNCIÓN PARA FORMATEAR TAMAÑO DE ARCHIVO\nconst formatFileSize=bytes=>{if(!bytes||bytes===0)return'0 Bytes';const k=1024;const sizes=['Bytes','KB','MB','GB'];const i=Math.floor(Math.log(bytes)/Math.log(k));return Math.round(bytes/Math.pow(k,i)*100)/100+' '+sizes[i];};// 7. USE EFFECT CORREGIDO PARA CARGAR DOCUMENTOS AL INICIAR\nuseEffect(()=>{let unsubscribe=null;let mounted=true;const loadDocuments=async()=>{if(currentUser&&currentUser.uid&&mounted){console.log('👤 Usuario detectado, cargando documentos:',currentUser.uid);// Esperar un poco para asegurar que Firebase esté listo\nawait new Promise(resolve=>setTimeout(resolve,500));if(mounted){unsubscribe=await cargarDocumentosDesdeFirebase();}}};loadDocuments();return()=>{mounted=false;if(unsubscribe&&typeof unsubscribe==='function'){console.log('🔚 Desuscribiendo listener de documentos');unsubscribe();}};},[currentUser===null||currentUser===void 0?void 0:currentUser.uid]);// 8. USE EFFECT ADICIONAL PARA DEBUGGING\nuseEffect(()=>{if(showDocumentsModal&&currentUser!==null&&currentUser!==void 0&&currentUser.uid){console.log('📂 Modal abierto, estado actual de documentos:',documentos);// Verificar directamente en Firebase cuando se abre el modal\nconst checkFirebase=async()=>{var _rootData$trabajadore;console.log('🔍 Iniciando verificación completa de Firebase...');// Verificar múltiples rutas posibles\nconst rutas=[`trabajadores/${currentUser.uid}/documentos`,`documentos/${currentUser.uid}`,`usuarios/${currentUser.uid}/documentos`,`trabajadores/${currentUser.uid}`];for(const ruta of rutas){const testRef=ref(database,ruta);const snapshot=await get(testRef);const data=snapshot.val();if(data){console.log(`✅ Datos encontrados en ${ruta}:`,data);}else{console.log(`❌ Sin datos en ${ruta}`);}}// Verificar la estructura completa de la base de datos\nconsole.log('📊 Verificando estructura completa...');const rootRef=ref(database);const rootSnapshot=await get(rootRef);const rootData=rootSnapshot.val();console.log('🗂️ Estructura raíz de la base de datos:',Object.keys(rootData||{}));// Si hay trabajadores, verificar su estructura\nif(rootData!==null&&rootData!==void 0&&(_rootData$trabajadore=rootData.trabajadores)!==null&&_rootData$trabajadore!==void 0&&_rootData$trabajadore[currentUser.uid]){console.log('👤 Estructura del trabajador actual:',Object.keys(rootData.trabajadores[currentUser.uid]||{}));}};checkFirebase();}},[showDocumentsModal,currentUser===null||currentUser===void 0?void 0:currentUser.uid]);// ========== RESTO DE LAS FUNCIONES DEL COMPONENTE ==========\n// Función para navegar al dashboard\nconst navigateToDashboard=()=>{if(onViewChange){onViewChange('dashboard-trabajador');}};// Función para mostrar notificaciones tipo toast\nconst showToast=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';let duration=arguments.length>2&&arguments[2]!==undefined?arguments[2]:4000;if(toastTimeoutRef.current){clearTimeout(toastTimeoutRef.current);}setToastNotification({message,type});toastTimeoutRef.current=setTimeout(()=>{setToastNotification(null);},duration);};// Detectar si es móvil\nuseEffect(()=>{const checkMobile=()=>{setIsMobile(window.innerWidth<=768);};checkMobile();window.addEventListener('resize',checkMobile);return()=>window.removeEventListener('resize',checkMobile);},[]);// Cargar zonas asignadas\nuseEffect(()=>{if(currentUser&&currentUser.uid){const zonasRef=ref(database,'zonas_asignadas');const unsubZonas=onValue(zonasRef,snapshot=>{const data=snapshot.val();if(data){const zonasArray=Object.entries(data).filter(_ref4=>{let[id,zona]=_ref4;return zona.trabajadorAsignado===currentUser.uid&&zona.estado!=='completado';}).map(_ref5=>{let[id,zona]=_ref5;return{id,...zona};});setZonasAsignadas(zonasArray);}else{setZonasAsignadas([]);}});return()=>unsubZonas();}},[currentUser]);// Registrar trabajador\nuseEffect(()=>{if(currentUser&&currentUser.uid){console.log('🔄 Registrando trabajador en Firebase...');trabajadoresService.createOrUpdateTrabajador(currentUser.uid,{nombre:currentUser.name||currentUser.email||'Trabajador',email:currentUser.email,telefono:currentUser.phone||'',vehicleId:currentUser.vehicleId||null,estado:'disponible',rol:'trabajador',ubicacion:null,createdAt:new Date().toISOString(),ultimaActualizacion:new Date().toISOString()}).then(()=>{console.log('✅ Trabajador registrado exitosamente');}).catch(error=>{console.error('❌ Error al registrar trabajador:',error);});}},[currentUser]);// Limpiar al desmontar\nuseEffect(()=>{return()=>{if(toastTimeoutRef.current){clearTimeout(toastTimeoutRef.current);}};},[]);// ========== MODAL DE DOCUMENTOS MEJORADO ==========\nconst DocumentosModal=()=>{var _documentos$licenciaC,_documentos$licenciaC2,_documentos$licenciaC3,_documentos$certifica,_documentos$certifica2,_documentos$certifica3,_documentos$certifica4;if(!showDocumentsModal)return null;return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:3000,padding:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'white',borderRadius:'12px',maxWidth:'900px',width:'100%',maxHeight:'90vh',overflow:'auto',padding:'30px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px',padding:'15px',background:'#fee2e2',border:'2px dashed #dc2626',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 10px 0',color:'#991b1b'},children:\"\\uD83D\\uDD27 Herramientas de Debug (Temporal)\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{console.log('=== INICIANDO DEBUG COMPLETO ===');// Buscar documentos en todas las rutas posibles\nconst rutas=['trabajadores','documentos','usuarios','uploads'];for(const ruta of rutas){const testRef=ref(database,ruta);const snapshot=await get(testRef);const data=snapshot.val();console.log(`📁 ${ruta}:`,data);}// Buscar específicamente los documentos del usuario\nconst buscarDocumentos=async()=>{const rootRef=ref(database);const snapshot=await get(rootRef);const allData=snapshot.val();console.log('🔍 Buscando documentos con URLs de Cloudinary...');const buscarEnObjeto=function(obj){let path=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';if(!obj)return;for(const[key,value]of Object.entries(obj)){const currentPath=path?`${path}/${key}`:key;if(typeof value==='string'&&value.includes('cloudinary')){console.log(`✅ URL Cloudinary encontrada en ${currentPath}:`,value);}if(typeof value==='object'&&value!==null){buscarEnObjeto(value,currentPath);}}};buscarEnObjeto(allData);};await buscarDocumentos();alert('Revisa la consola para ver los resultados del debug');},style:{padding:'8px 16px',background:'#dc2626',color:'white',border:'none',borderRadius:'6px',cursor:'pointer'},children:\"\\uD83D\\uDD0D Buscar Documentos Perdidos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{// Forzar recarga de documentos\nconsole.log('🔄 Forzando recarga...');await cargarDocumentosDesdeFirebase();alert('Documentos recargados - revisa la consola');},style:{padding:'8px 16px',background:'#0891b2',color:'white',border:'none',borderRadius:'6px',cursor:'pointer'},children:\"\\uD83D\\uDD04 Forzar Recarga\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{console.log('📊 Estado actual:');console.log('- Usuario:',currentUser);console.log('- Documentos en estado:',documentos);console.log('- UID:',currentUser===null||currentUser===void 0?void 0:currentUser.uid);},style:{padding:'8px 16px',background:'#7c3aed',color:'white',border:'none',borderRadius:'6px',cursor:'pointer'},children:\"\\uD83D\\uDCCA Ver Estado Actual\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'25px'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,color:'#1f2937',fontSize:'24px'},children:\"\\uD83D\\uDCC4 Mis Documentos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDocumentsModal(false),style:{padding:'8px',background:'#6b7280',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'18px'},children:\"\\u2716\"})]}),isLoadingDocuments&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',textAlign:'center',color:'#6b7280'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'24px',marginBottom:'10px'},children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Cargando documentos...\"})]}),message.text&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'12px',borderRadius:'8px',marginBottom:'20px',background:message.type==='success'?'#dcfce7':'#fee2e2',border:`1px solid ${message.type==='success'?'#86efac':'#fecaca'}`,color:message.type==='success'?'#166534':'#991b1b'},children:message.text}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'15px',background:'#fef3c7',border:'2px solid #f59e0b',borderRadius:'8px',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:'0 0 10px 0',color:'#92400e',fontSize:'16px'},children:\"\\uD83D\\uDCF8 IMPORTANTE: Solo se aceptan IM\\xC1GENES\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 0 10px 0',fontSize:'14px',color:'#78350f'},children:\"Los archivos PDF no est\\xE1n soportados. Si tienes documentos en PDF:\"}),/*#__PURE__*/_jsxs(\"ol\",{style:{margin:'0',paddingLeft:'20px',fontSize:'14px',color:'#78350f'},children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"\\uD83D\\uDCF1 Toma una \",/*#__PURE__*/_jsx(\"strong\",{children:\"FOTO\"}),\" del documento con tu celular\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\uD83D\\uDCBB Haz una \",/*#__PURE__*/_jsx(\"strong\",{children:\"CAPTURA DE PANTALLA\"}),\" del PDF\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"\\uD83D\\uDD04 Convierte el PDF a JPG en: \",/*#__PURE__*/_jsx(\"a\",{href:\"https://www.ilovepdf.com/pdf_to_jpg\",target:\"_blank\",rel:\"noopener noreferrer\",style:{color:'#f59e0b'},children:\"iLovePDF.com\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fit, minmax(280px, 1fr))',gap:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'8px',padding:'15px',background:(_documentos$licenciaC=documentos.licenciaConducir)!==null&&_documentos$licenciaC!==void 0&&_documentos$licenciaC.url?'#f0fdf4':'white'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:0,fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"\\uD83D\\uDE97 Licencia de Conducir\"}),((_documentos$licenciaC2=documentos.licenciaConducir)===null||_documentos$licenciaC2===void 0?void 0:_documentos$licenciaC2.url)&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'10px',padding:'2px 6px',background:'#22c55e',color:'white',borderRadius:'4px'},children:\"\\u2713 Cargado\"})]}),(_documentos$licenciaC3=documentos.licenciaConducir)!==null&&_documentos$licenciaC3!==void 0&&_documentos$licenciaC3.url?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px',background:'#f9fafb',borderRadius:'6px',marginBottom:'8px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',color:'#1f2937',marginBottom:'3px',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:documentos.licenciaConducir.nombre}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'11px'},children:documentos.licenciaConducir.fecha&&new Date(documentos.licenciaConducir.fecha).toLocaleDateString('es-CL')}),documentos.licenciaConducir.tamaño>0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#9ca3af',fontSize:'10px',marginTop:'2px'},children:formatFileSize(documentos.licenciaConducir.tamaño)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"a\",{href:documentos.licenciaConducir.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{flex:1,padding:'6px',background:'#3b82f6',color:'white',textAlign:'center',borderRadius:'6px',textDecoration:'none',fontSize:'12px'},children:\"\\uD83D\\uDC41\\uFE0F Ver\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleDeleteDocument('licenciaConducir'),style:{flex:1,padding:'6px',background:'#ef4444',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'12px'},children:\"\\uD83D\\uDDD1\\uFE0F Eliminar\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"licenciaConducir\",accept:\".jpg,.jpeg,.png\",onChange:e=>handleFileUpload(e.target.files[0],'licenciaConducir'),style:{display:'none'}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"licenciaConducir\",style:{display:'block',padding:'20px 10px',background:'#f9fafb',border:'2px dashed #d1d5db',borderRadius:'6px',textAlign:'center',cursor:'pointer',fontSize:'12px',color:'#6b7280',transition:'all 0.2s'},onMouseEnter:e=>{e.currentTarget.style.borderColor='#3b82f6';e.currentTarget.style.background='#eff6ff';},onMouseLeave:e=>{e.currentTarget.style.borderColor='#d1d5db';e.currentTarget.style.background='#f9fafb';},children:uploadProgress.licenciaConducir?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'5px'},children:[\"Subiendo... \",uploadProgress.licenciaConducir,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'4px',background:'#e5e7eb',borderRadius:'2px',overflow:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{width:`${uploadProgress.licenciaConducir}%`,height:'100%',background:'#3b82f6',transition:'width 0.3s'}})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'20px',marginBottom:'5px'},children:\"\\uD83D\\uDCE4\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Click para subir\"})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #e5e7eb',borderRadius:'8px',padding:'15px',background:(_documentos$certifica=documentos.certificadoOperador)!==null&&_documentos$certifica!==void 0&&_documentos$certifica.url?'#f0fdf4':'white'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:0,fontSize:'14px',fontWeight:'600',color:'#374151'},children:\"\\uD83C\\uDFD7\\uFE0F Certificado de Operador\"}),((_documentos$certifica2=documentos.certificadoOperador)===null||_documentos$certifica2===void 0?void 0:_documentos$certifica2.url)&&/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'10px',padding:'2px 6px',background:'#22c55e',color:'white',borderRadius:'4px'},children:\"\\u2713 Cargado\"})]}),(_documentos$certifica3=documentos.certificadoOperador)!==null&&_documentos$certifica3!==void 0&&_documentos$certifica3.url?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'8px',background:'#f9fafb',borderRadius:'6px',marginBottom:'8px',fontSize:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',color:'#1f2937',marginBottom:'3px',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:documentos.certificadoOperador.nombre}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',fontSize:'11px'},children:documentos.certificadoOperador.fecha&&new Date(documentos.certificadoOperador.fecha).toLocaleDateString('es-CL')}),documentos.certificadoOperador.tamaño>0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#9ca3af',fontSize:'10px',marginTop:'2px'},children:formatFileSize(documentos.certificadoOperador.tamaño)})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"a\",{href:documentos.certificadoOperador.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{flex:1,padding:'6px',background:'#3b82f6',color:'white',textAlign:'center',borderRadius:'6px',textDecoration:'none',fontSize:'12px'},children:\"\\uD83D\\uDC41\\uFE0F Ver\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleDeleteDocument('certificadoOperador'),style:{flex:1,padding:'6px',background:'#ef4444',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'12px'},children:\"\\uD83D\\uDDD1\\uFE0F Eliminar\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"certificadoOperador\",accept:\".jpg,.jpeg,.png\",onChange:e=>handleFileUpload(e.target.files[0],'certificadoOperador'),style:{display:'none'}}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"certificadoOperador\",style:{display:'block',padding:'20px 10px',background:'#f9fafb',border:'2px dashed #d1d5db',borderRadius:'6px',textAlign:'center',cursor:'pointer',fontSize:'12px',color:'#6b7280',transition:'all 0.2s'},onMouseEnter:e=>{e.currentTarget.style.borderColor='#3b82f6';e.currentTarget.style.background='#eff6ff';},onMouseLeave:e=>{e.currentTarget.style.borderColor='#d1d5db';e.currentTarget.style.background='#f9fafb';},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'20px',marginBottom:'5px'},children:\"\\uD83D\\uDCE4\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Click para subir\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'30px',padding:'20px',background:'#f9fafb',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"h5\",{style:{margin:'0 0 15px 0',fontSize:'16px',fontWeight:'600',color:'#374151'},children:\"\\uD83D\\uDCDA Certificados de Capacitaci\\xF3n\"}),((_documentos$certifica4=documentos.certificados)===null||_documentos$certifica4===void 0?void 0:_documentos$certifica4.length)>0&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'15px'},children:documentos.certificados.map((cert,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px',background:'white',borderRadius:'6px',marginBottom:'8px',display:'flex',justifyContent:'space-between',alignItems:'center',border:'1px solid #e5e7eb'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,minWidth:0},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'500',fontSize:'13px',color:'#1f2937',overflow:'hidden',textOverflow:'ellipsis',whiteSpace:'nowrap'},children:[\"\\uD83D\\uDCDC \",cert.nombre]}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#6b7280',fontSize:'11px',marginTop:'2px'},children:[formatFileSize(cert.tamaño),\" \\u2022 \",cert.fecha&&new Date(cert.fecha).toLocaleDateString('es-CL')]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'6px',marginLeft:'10px'},children:[/*#__PURE__*/_jsx(\"a\",{href:cert.url,target:\"_blank\",rel:\"noopener noreferrer\",style:{padding:'4px 8px',background:'#3b82f6',color:'white',borderRadius:'4px',textDecoration:'none',fontSize:'11px'},children:\"Ver\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleDeleteDocument('certificados',index),style:{padding:'4px 8px',background:'#ef4444',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'11px'},children:\"Eliminar\"})]})]},index))}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"certificados\",accept:\".jpg,.jpeg,.png\",onChange:e=>handleFileUpload(e.target.files[0],'certificados'),style:{display:'none'},disabled:uploadingFile}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"certificados\",style:{display:'inline-block',padding:'10px 16px',background:uploadingFile?'#9ca3af':'#10b981',color:'white',borderRadius:'6px',cursor:uploadingFile?'not-allowed':'pointer',fontSize:'14px',fontWeight:'500'},children:uploadingFile?'⏳ Subiendo...':'➕ Agregar Certificado'})]})]})]})});};// RESTO DEL CÓDIGO (Estilos y return) SIN CAMBIOS...\nconst styles={container:{width:'100%',minHeight:'100vh',background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',position:'relative',overflow:'hidden'},header:{background:'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',color:'white',padding:'16px',position:'relative',boxShadow:'0 4px 20px rgba(0,0,0,0.15)'},headerContent:{display:'flex',flexDirection:'column',gap:'16px'},userInfo:{display:'flex',alignItems:'center',justifyContent:'space-between'},userName:{fontSize:'20px',fontWeight:'700',display:'flex',alignItems:'center',gap:'8px'},logoutBtn:{padding:'8px 16px',background:'rgba(255,255,255,0.2)',backdropFilter:'blur(10px)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'8px',cursor:'pointer',fontSize:'14px',fontWeight:'600',display:'flex',alignItems:'center',gap:'6px'},buttonGrid:{display:'grid',gridTemplateColumns:'repeat(2, 1fr)',gap:'12px'},actionBtn:{padding:'16px',borderRadius:'12px',border:'none',cursor:'pointer',fontSize:'15px',fontWeight:'600',display:'flex',flexDirection:'column',alignItems:'center',gap:'8px',transition:'all 0.3s ease',boxShadow:'0 4px 15px rgba(0,0,0,0.1)'},mainContent:{padding:'20px',paddingTop:'30px'},dashboardGrid:{display:'grid',gridTemplateColumns:isMobile?'1fr':'repeat(auto-fit, minmax(300px, 1fr))',gap:'20px',marginBottom:'30px'},dashboardCard:{background:'white',borderRadius:'16px',padding:'24px',boxShadow:'0 10px 40px rgba(0,0,0,0.1)',transition:'all 0.3s ease'},cardIcon:{fontSize:'48px',marginBottom:'12px'},cardTitle:{fontSize:'18px',fontWeight:'700',color:'#1f2937',marginBottom:'8px'},cardValue:{fontSize:'32px',fontWeight:'800',color:'#3b82f6',marginBottom:'4px'},cardSubtext:{fontSize:'14px',color:'#6b7280'},zonasSection:{background:'white',borderRadius:'16px',padding:'24px',boxShadow:'0 10px 40px rgba(0,0,0,0.1)'},sectionTitle:{fontSize:'20px',fontWeight:'700',color:'#1f2937',marginBottom:'16px',display:'flex',alignItems:'center',gap:'8px'},zonaCard:{background:'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',borderRadius:'12px',padding:'16px',marginBottom:'12px',border:'2px solid #e5e7eb',transition:'all 0.3s ease'},emptyState:{textAlign:'center',padding:'40px',color:'#6b7280'},toast:{position:'fixed',top:'20px',right:'20px',padding:'12px 20px',borderRadius:'10px',boxShadow:'0 4px 20px rgba(0,0,0,0.15)',display:'flex',alignItems:'center',gap:'12px',zIndex:2000,animation:'slideInRight 0.3s ease',maxWidth:'350px',backdropFilter:'blur(10px)'}};return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.header,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.headerContent,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.userInfo,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.userName,children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDC77\\u200D\\u2642\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{children:currentUser.name||'Trabajador'})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:onLogout,style:styles.logoutBtn,children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDEAA\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Salir\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.buttonGrid,children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowDocumentsModal(true),style:{...styles.actionBtn,background:'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',color:'white'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'24px'},children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Mis Documentos\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowVehiclePanel(true),style:{...styles.actionBtn,background:'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)',color:'white'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'24px'},children:\"\\uD83D\\uDE9B\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Mi Veh\\xEDculo\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:navigateToDashboard,style:{...styles.actionBtn,background:'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',color:'white'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'24px'},children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Dashboard\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>showToast('🗺️ Función de mapa próximamente','info'),style:{...styles.actionBtn,background:'linear-gradient(135deg, #10b981 0%, #059669 100%)',color:'white'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'24px'},children:\"\\uD83D\\uDDFA\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Mapa GPS\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mainContent,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.dashboardGrid,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.dashboardCard,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.cardIcon,children:\"\\uD83D\\uDCCD\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.cardTitle,children:\"Estado GPS\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.cardValue,children:gpsStatus==='active'?'Activo':'Inactivo'}),/*#__PURE__*/_jsx(\"div\",{style:styles.cardSubtext,children:gpsStatus==='active'?'🟢 Transmitiendo ubicación':'🔴 Sin transmisión'})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.dashboardCard,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.cardIcon,children:\"\\uD83C\\uDFD7\\uFE0F\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.cardTitle,children:\"Zonas Asignadas\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.cardValue,children:zonasAsignadas.length}),/*#__PURE__*/_jsxs(\"div\",{style:styles.cardSubtext,children:[zonasAsignadas.filter(z=>z.estado==='pendiente').length,\" pendientes\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.dashboardCard,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.cardIcon,children:\"\\u2705\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.cardTitle,children:\"Estado Actual\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.cardValue,children:\"Disponible\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.cardSubtext,children:\"Listo para trabajar\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.zonasSection,children:[/*#__PURE__*/_jsxs(\"h2\",{style:styles.sectionTitle,children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDDFA\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Mis Zonas de Trabajo\"})]}),zonasAsignadas.length>0?/*#__PURE__*/_jsx(\"div\",{children:zonasAsignadas.map(zona=>/*#__PURE__*/_jsxs(\"div\",{style:styles.zonaCard,children:[/*#__PURE__*/_jsxs(\"h3\",{style:{margin:'0 0 8px 0',fontSize:'16px',fontWeight:'600',color:'#1f2937'},children:[\"\\uD83D\\uDCCD \",zona.nombre]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 0 8px 0',fontSize:'14px',color:'#6b7280'},children:zona.direccion}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{padding:'4px 8px',background:zona.prioridad==='alta'?'#dc2626':zona.prioridad==='media'?'#f59e0b':'#10b981',color:'white',borderRadius:'6px',fontSize:'12px',fontWeight:'600'},children:[\"Prioridad: \",zona.prioridad]}),/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',background:zona.estado==='pendiente'?'#6b7280':zona.estado==='en_progreso'?'#3b82f6':'#10b981',color:'white',borderRadius:'6px',fontSize:'12px',fontWeight:'600'},children:zona.estado==='pendiente'?'⏳ Pendiente':zona.estado==='en_progreso'?'🔧 En Progreso':'✅ Completado'})]})]},zona.id))}):/*#__PURE__*/_jsxs(\"div\",{style:styles.emptyState,children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'12px',opacity:0.5},children:\"\\uD83D\\uDCED\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'16px',fontWeight:'500',marginBottom:'4px'},children:\"No tienes zonas asignadas\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'14px'},children:\"Cuando te asignen nuevas zonas aparecer\\xE1n aqu\\xED\"})]})]})]}),toastNotification&&/*#__PURE__*/_jsxs(\"div\",{style:{...styles.toast,background:toastNotification.type==='success'?'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)':toastNotification.type==='error'?'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)':toastNotification.type==='warning'?'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)':'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',color:'white'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'18px'},children:toastNotification.type==='success'?'✅':toastNotification.type==='error'?'❌':toastNotification.type==='warning'?'⚠️':'ℹ️'}),/*#__PURE__*/_jsx(\"span\",{style:{flex:1,fontSize:'14px',fontWeight:'500'},children:toastNotification.message})]}),showVehiclePanel&&/*#__PURE__*/_jsx(TrabajadorVehiclePanel,{currentUser:currentUser,onClose:()=>setShowVehiclePanel(false)}),/*#__PURE__*/_jsx(DocumentosModal,{}),/*#__PURE__*/_jsx(\"style\",{children:`\n        @keyframes slideInRight {\n          from {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n      `})]});};export default SistemaTrabajadoresFirebase;","map":{"version":3,"names":["React","useEffect","useRef","useState","trabajadoresService","database","ref","onValue","update","set","push","get","TrabajadorVehiclePanel","cloudinaryConfig","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SistemaTrabajadoresFirebase","_ref","currentUser","onLogout","onViewChange","showVehiclePanel","setShowVehiclePanel","userPosition","setUserPosition","selectedZona","setSelectedZona","isTracking","setIsTracking","workStatus","setWorkStatus","zonasAsignadas","setZonasAsignadas","notificaciones","setNotificaciones","isMobile","setIsMobile","toastNotification","setToastNotification","showDocumentsModal","setShowDocumentsModal","uploadingFile","setUploadingFile","uploadProgress","setUploadProgress","documentos","setDocumentos","licenciaConducir","url","nombre","fecha","vencimiento","certificadoOperador","certificados","message","setMessage","type","text","isLoadingDocuments","setIsLoadingDocuments","toastTimeoutRef","gpsStatus","setGpsStatus","handleFileUpload","file","tipoDocumento","alert","allowedTypes","includes","size","formData","FormData","append","trabajadorId","uid","Date","now","timestamp","cleanFileName","name","split","replace","response","fetch","cloudName","method","body","ok","Error","data","json","console","log","documentData","secure_url","publicId","public_id","toISOString","tamaño","tipo","guardarDocumentosEnFirebase","prev","showToast","setTimeout","error","rutas","rutaBase","certificadosRef","newCertRef","key","docRef","verificarRef","snapshot","val","trabajadorRef","trabajadorSnapshot","handleDeleteDocument","index","arguments","length","undefined","window","confirm","eliminarDocumentoDeFirebase","filter","_","i","certificadosData","certificadosArray","Object","entries","keyToDelete","certRef","cargarDocumentosDesdeFirebase","docsRef1","snapshot1","data1","docsRef2","snapshot2","data2","docsRef3","snapshot3","data3","trabajadorData","docsRef","docsToLoad","map","_ref2","cert","firebaseKey","unsubscribe","updatedData","docsToUpdate","_ref3","formatFileSize","bytes","k","sizes","Math","floor","round","pow","mounted","loadDocuments","Promise","resolve","checkFirebase","_rootData$trabajadore","ruta","testRef","rootRef","rootSnapshot","rootData","keys","trabajadores","navigateToDashboard","duration","current","clearTimeout","checkMobile","innerWidth","addEventListener","removeEventListener","zonasRef","unsubZonas","zonasArray","_ref4","id","zona","trabajadorAsignado","estado","_ref5","createOrUpdateTrabajador","email","telefono","phone","vehicleId","rol","ubicacion","createdAt","ultimaActualizacion","then","catch","DocumentosModal","_documentos$licenciaC","_documentos$licenciaC2","_documentos$licenciaC3","_documentos$certifica","_documentos$certifica2","_documentos$certifica3","_documentos$certifica4","style","position","top","left","right","bottom","background","display","justifyContent","alignItems","zIndex","padding","children","borderRadius","maxWidth","width","maxHeight","overflow","marginTop","border","margin","color","gap","flexWrap","onClick","buscarDocumentos","allData","buscarEnObjeto","obj","path","value","currentPath","cursor","marginBottom","fontSize","textAlign","paddingLeft","href","target","rel","gridTemplateColumns","fontWeight","textOverflow","whiteSpace","toLocaleDateString","flex","textDecoration","accept","onChange","e","files","htmlFor","transition","onMouseEnter","currentTarget","borderColor","onMouseLeave","height","minWidth","marginLeft","disabled","styles","container","minHeight","header","boxShadow","headerContent","flexDirection","userInfo","userName","logoutBtn","backdropFilter","buttonGrid","actionBtn","mainContent","paddingTop","dashboardGrid","dashboardCard","cardIcon","cardTitle","cardValue","cardSubtext","zonasSection","sectionTitle","zonaCard","emptyState","toast","animation","z","direccion","prioridad","opacity","onClose"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/SistemaTrabajadoresFirebase.js"],"sourcesContent":["// src/components/SistemaTrabajadoresFirebase.js\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { trabajadoresService } from '../services/firebaseservices';\r\nimport { database } from '../config/firebase';\r\nimport { ref, onValue, update, set, push, get } from 'firebase/database';\r\nimport TrabajadorVehiclePanel from './TrabajadorVehiclePanel';\r\nimport { cloudinaryConfig } from '../config/cloudinary';\r\n\r\nconst SistemaTrabajadoresFirebase = ({ currentUser, onLogout, onViewChange }) => {\r\n  // Estados principales\r\n  const [showVehiclePanel, setShowVehiclePanel] = useState(false);\r\n  const [userPosition, setUserPosition] = useState(null);\r\n  const [selectedZona, setSelectedZona] = useState(null);\r\n  const [isTracking, setIsTracking] = useState(false);\r\n  const [workStatus, setWorkStatus] = useState('idle');\r\n  \r\n  // Estados para zonas y notificaciones\r\n  const [zonasAsignadas, setZonasAsignadas] = useState([]);\r\n  const [notificaciones, setNotificaciones] = useState([]);\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [toastNotification, setToastNotification] = useState(null);\r\n  \r\n  // ESTADOS PARA DOCUMENTOS\r\n  const [showDocumentsModal, setShowDocumentsModal] = useState(false);\r\n  const [uploadingFile, setUploadingFile] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState({});\r\n  const [documentos, setDocumentos] = useState({\r\n    licenciaConducir: { url: '', nombre: '', fecha: '', vencimiento: '' },\r\n    certificadoOperador: { url: '', nombre: '', fecha: '', vencimiento: '' },\r\n    certificados: []\r\n  });\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n  const [isLoadingDocuments, setIsLoadingDocuments] = useState(false);\r\n  \r\n  // Referencias\r\n  const toastTimeoutRef = useRef(null);\r\n  const [gpsStatus, setGpsStatus] = useState('inactive');\r\n\r\n  // ========== FUNCIONES COMPLETAS PARA MANEJO DE DOCUMENTOS ==========\r\n  \r\n  // 1. FUNCIÓN PARA SUBIR ARCHIVOS (COMPLETA Y MEJORADA)\r\n  const handleFileUpload = async (file, tipoDocumento) => {\r\n    if (!file) return;\r\n    \r\n    // Validación de PDF\r\n    if (file.type === 'application/pdf') {\r\n      setMessage({ \r\n        type: 'error', \r\n        text: '❌ NO se permiten PDFs. Por favor, sube una FOTO o IMAGEN del documento (JPG/PNG).' \r\n      });\r\n      \r\n      alert(\r\n        '📸 ALTERNATIVAS PARA SUBIR TU DOCUMENTO:\\n\\n' +\r\n        '1. Toma una FOTO con tu celular\\n' +\r\n        '2. Haz una CAPTURA DE PANTALLA del PDF\\n' +\r\n        '3. Usa un escáner que guarde como JPG\\n' +\r\n        '4. Convierte el PDF a imagen en: https://www.ilovepdf.com/pdf_to_jpg'\r\n      );\r\n      \r\n      return;\r\n    }\r\n    \r\n    // Validación de tipo de archivo\r\n    const allowedTypes = ['image/jpeg', 'image/png', 'image/jpg'];\r\n    if (!allowedTypes.includes(file.type)) {\r\n      setMessage({ \r\n        type: 'error', \r\n        text: '❌ Solo se permiten imágenes JPG y PNG' \r\n      });\r\n      return;\r\n    }\r\n    \r\n    // Validación de tamaño\r\n    if (file.size > 10 * 1024 * 1024) {\r\n      setMessage({ \r\n        type: 'error', \r\n        text: '❌ El archivo no puede superar los 10MB' \r\n      });\r\n      return;\r\n    }\r\n\r\n    setUploadingFile(true);\r\n    setUploadProgress({ [tipoDocumento]: 0 });\r\n\r\n    try {\r\n      // Preparar FormData para Cloudinary\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      formData.append('upload_preset', 'vehiculos_docs');\r\n      \r\n      const trabajadorId = currentUser.uid || `temp_${Date.now()}`;\r\n      const timestamp = Date.now();\r\n      const cleanFileName = file.name.split('.')[0].replace(/[^a-zA-Z0-9_-]/g, '_');\r\n      \r\n      formData.append('folder', `municipalidad/trabajadores/${trabajadorId}/${tipoDocumento}`);\r\n      formData.append('public_id', `${timestamp}_${cleanFileName}`);\r\n      \r\n      setUploadProgress({ [tipoDocumento]: 30 });\r\n\r\n      // Subir a Cloudinary\r\n      const response = await fetch(\r\n        `https://api.cloudinary.com/v1_1/${cloudinaryConfig.cloudName}/image/upload`,\r\n        {\r\n          method: 'POST',\r\n          body: formData\r\n        }\r\n      );\r\n\r\n      setUploadProgress({ [tipoDocumento]: 60 });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Error al subir imagen a Cloudinary');\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log('✅ Imagen subida a Cloudinary:', data);\r\n      \r\n      setUploadProgress({ [tipoDocumento]: 90 });\r\n\r\n      // Crear objeto de documento con todos los datos necesarios\r\n      const documentData = {\r\n        url: data.secure_url || '',\r\n        publicId: data.public_id || '',\r\n        nombre: file.name || 'documento',\r\n        fecha: new Date().toISOString(),\r\n        tamaño: file.size || 0,\r\n        tipo: file.type || 'image/jpeg',\r\n        vencimiento: '' // Campo opcional para fechas de vencimiento\r\n      };\r\n\r\n      console.log('📄 Datos del documento a guardar:', documentData);\r\n\r\n      // Guardar en Firebase PRIMERO\r\n      await guardarDocumentosEnFirebase(tipoDocumento, documentData);\r\n\r\n      // DESPUÉS actualizar el estado local\r\n      if (tipoDocumento === 'certificados') {\r\n        setDocumentos(prev => ({\r\n          ...prev,\r\n          certificados: [...(prev.certificados || []), documentData]\r\n        }));\r\n      } else {\r\n        setDocumentos(prev => ({\r\n          ...prev,\r\n          [tipoDocumento]: documentData\r\n        }));\r\n      }\r\n\r\n      setUploadProgress({ [tipoDocumento]: 100 });\r\n      setMessage({ \r\n        type: 'success', \r\n        text: `✅ ${file.name} subido exitosamente` \r\n      });\r\n      showToast('✅ Documento subido exitosamente', 'success');\r\n\r\n      setTimeout(() => {\r\n        setUploadProgress({});\r\n        setMessage({ type: '', text: '' });\r\n      }, 3000);\r\n\r\n    } catch (error) {\r\n      console.error('❌ Error completo:', error);\r\n      setMessage({ \r\n        type: 'error', \r\n        text: '❌ Error al subir la imagen: ' + error.message \r\n      });\r\n      showToast('❌ Error al subir el documento', 'error');\r\n    } finally {\r\n      setUploadingFile(false);\r\n    }\r\n  };\r\n\r\n  // 2. FUNCIÓN PARA GUARDAR EN FIREBASE\r\n  const guardarDocumentosEnFirebase = async (tipoDocumento, documentData) => {\r\n    try {\r\n      console.log(`🔄 Guardando ${tipoDocumento} en Firebase...`);\r\n      console.log('📝 Datos a guardar:', documentData);\r\n      \r\n      if (!currentUser || !currentUser.uid) {\r\n        throw new Error('No hay usuario autenticado');\r\n      }\r\n      \r\n      // GUARDAR EN MÚLTIPLES RUTAS PARA ASEGURAR\r\n      const rutas = [\r\n        `trabajadores/${currentUser.uid}/documentos`,\r\n        `documentos/${currentUser.uid}`\r\n      ];\r\n      \r\n      for (const rutaBase of rutas) {\r\n        console.log(`💾 Guardando en ruta: ${rutaBase}/${tipoDocumento}`);\r\n        \r\n        if (tipoDocumento === 'certificados') {\r\n          // Para certificados, usar push para crear una lista\r\n          const certificadosRef = ref(database, `${rutaBase}/certificados`);\r\n          const newCertRef = push(certificadosRef);\r\n          await set(newCertRef, documentData);\r\n          console.log(`✅ Certificado guardado en ${rutaBase} con ID:`, newCertRef.key);\r\n        } else {\r\n          // Para licencia y certificado de operador\r\n          const docRef = ref(database, `${rutaBase}/${tipoDocumento}`);\r\n          await set(docRef, documentData);\r\n          console.log(`✅ ${tipoDocumento} guardado en ${rutaBase}`);\r\n        }\r\n      }\r\n      \r\n      // Verificar que se guardó correctamente en ambas rutas\r\n      for (const rutaBase of rutas) {\r\n        const verificarRef = ref(database, rutaBase);\r\n        const snapshot = await get(verificarRef);\r\n        console.log(`📦 Verificación - Documentos en ${rutaBase}:`, snapshot.val());\r\n      }\r\n      \r\n      // También verificar la estructura completa del trabajador\r\n      const trabajadorRef = ref(database, `trabajadores/${currentUser.uid}`);\r\n      const trabajadorSnapshot = await get(trabajadorRef);\r\n      console.log('👷 Estructura completa del trabajador después de guardar:', trabajadorSnapshot.val());\r\n      \r\n    } catch (error) {\r\n      console.error('❌ Error al guardar en Firebase:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  // 3. FUNCIÓN PARA ELIMINAR DOCUMENTOS\r\n  const handleDeleteDocument = async (tipoDocumento, index = null) => {\r\n    if (!window.confirm('¿Estás seguro de eliminar este documento?')) return;\r\n\r\n    try {\r\n      // Primero eliminar de Firebase\r\n      await eliminarDocumentoDeFirebase(tipoDocumento, index);\r\n      \r\n      // Después actualizar el estado local\r\n      if (tipoDocumento === 'certificados' && index !== null) {\r\n        setDocumentos(prev => ({\r\n          ...prev,\r\n          certificados: prev.certificados.filter((_, i) => i !== index)\r\n        }));\r\n      } else {\r\n        setDocumentos(prev => ({\r\n          ...prev,\r\n          [tipoDocumento]: { url: '', nombre: '', fecha: '', vencimiento: '' }\r\n        }));\r\n      }\r\n\r\n      setMessage({ \r\n        type: 'success', \r\n        text: '✅ Documento eliminado correctamente' \r\n      });\r\n      showToast('✅ Documento eliminado', 'success');\r\n      \r\n      setTimeout(() => {\r\n        setMessage({ type: '', text: '' });\r\n      }, 3000);\r\n      \r\n    } catch (error) {\r\n      console.error('Error al eliminar documento:', error);\r\n      setMessage({ \r\n        type: 'error', \r\n        text: '❌ Error al eliminar el documento' \r\n      });\r\n    }\r\n  };\r\n\r\n  // 4. FUNCIÓN PARA ELIMINAR DE FIREBASE\r\n  const eliminarDocumentoDeFirebase = async (tipoDocumento, index) => {\r\n    try {\r\n      if (!currentUser || !currentUser.uid) {\r\n        throw new Error('No hay usuario autenticado');\r\n      }\r\n\r\n      if (tipoDocumento === 'certificados') {\r\n        // Para certificados, obtener la lista actual y eliminar el específico\r\n        const certificadosRef = ref(database, `trabajadores/${currentUser.uid}/documentos/certificados`);\r\n        const snapshot = await get(certificadosRef);\r\n        const certificadosData = snapshot.val() || {};\r\n        \r\n        const certificadosArray = Object.entries(certificadosData);\r\n        if (index !== null && index < certificadosArray.length) {\r\n          const [keyToDelete] = certificadosArray[index];\r\n          const certRef = ref(database, `trabajadores/${currentUser.uid}/documentos/certificados/${keyToDelete}`);\r\n          await set(certRef, null);\r\n          console.log(`✅ Certificado ${keyToDelete} eliminado de Firebase`);\r\n        }\r\n      } else {\r\n        // Para otros documentos, simplemente eliminar\r\n        const docRef = ref(database, `trabajadores/${currentUser.uid}/documentos/${tipoDocumento}`);\r\n        await set(docRef, null);\r\n        console.log(`✅ ${tipoDocumento} eliminado de Firebase`);\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Error al eliminar de Firebase:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  // 5. FUNCIÓN CORREGIDA PARA CARGAR DOCUMENTOS DESDE FIREBASE\r\n  const cargarDocumentosDesdeFirebase = async () => {\r\n    if (!currentUser || !currentUser.uid) {\r\n      console.log('⚠️ No hay usuario para cargar documentos');\r\n      return null;\r\n    }\r\n\r\n    console.log('🔄 Iniciando carga de documentos para usuario:', currentUser.uid);\r\n    setIsLoadingDocuments(true);\r\n    \r\n    try {\r\n      // VERIFICAR MÚLTIPLES RUTAS POSIBLES\r\n      console.log('🔍 Verificando rutas de documentos...');\r\n      \r\n      // Ruta 1: trabajadores/uid/documentos\r\n      const docsRef1 = ref(database, `trabajadores/${currentUser.uid}/documentos`);\r\n      const snapshot1 = await get(docsRef1);\r\n      const data1 = snapshot1.val();\r\n      console.log('📦 Ruta trabajadores/uid/documentos:', data1);\r\n      \r\n      // Ruta 2: documentos/uid\r\n      const docsRef2 = ref(database, `documentos/${currentUser.uid}`);\r\n      const snapshot2 = await get(docsRef2);\r\n      const data2 = snapshot2.val();\r\n      console.log('📦 Ruta documentos/uid:', data2);\r\n      \r\n      // Ruta 3: usuarios/uid/documentos\r\n      const docsRef3 = ref(database, `usuarios/${currentUser.uid}/documentos`);\r\n      const snapshot3 = await get(docsRef3);\r\n      const data3 = snapshot3.val();\r\n      console.log('📦 Ruta usuarios/uid/documentos:', data3);\r\n      \r\n      // Verificar toda la estructura del trabajador\r\n      const trabajadorRef = ref(database, `trabajadores/${currentUser.uid}`);\r\n      const trabajadorSnapshot = await get(trabajadorRef);\r\n      const trabajadorData = trabajadorSnapshot.val();\r\n      console.log('👷 Datos completos del trabajador:', trabajadorData);\r\n      \r\n      // Usar la ruta correcta (por defecto la primera)\r\n      const docsRef = docsRef1;\r\n      const data = data1;\r\n      \r\n      if (data) {\r\n        // Procesar y establecer los documentos\r\n        const docsToLoad = {\r\n          licenciaConducir: data.licenciaConducir || { url: '', nombre: '', fecha: '', vencimiento: '' },\r\n          certificadoOperador: data.certificadoOperador || { url: '', nombre: '', fecha: '', vencimiento: '' },\r\n          certificados: []\r\n        };\r\n        \r\n        // Procesar certificados si existen\r\n        if (data.certificados && typeof data.certificados === 'object') {\r\n          docsToLoad.certificados = Object.entries(data.certificados).map(([key, cert]) => ({\r\n            firebaseKey: key,\r\n            ...cert\r\n          }));\r\n        }\r\n        \r\n        console.log('✅ Documentos procesados:', docsToLoad);\r\n        setDocumentos(docsToLoad);\r\n      } else {\r\n        console.log('⚠️ No hay documentos guardados para este usuario');\r\n      }\r\n      \r\n      // Establecer listener para cambios en tiempo real\r\n      const unsubscribe = onValue(docsRef, (snapshot) => {\r\n        const updatedData = snapshot.val();\r\n        console.log('🔄 Actualización de documentos detectada:', updatedData);\r\n        \r\n        if (updatedData) {\r\n          const docsToUpdate = {\r\n            licenciaConducir: updatedData.licenciaConducir || { url: '', nombre: '', fecha: '', vencimiento: '' },\r\n            certificadoOperador: updatedData.certificadoOperador || { url: '', nombre: '', fecha: '', vencimiento: '' },\r\n            certificados: []\r\n          };\r\n          \r\n          if (updatedData.certificados && typeof updatedData.certificados === 'object') {\r\n            docsToUpdate.certificados = Object.entries(updatedData.certificados).map(([key, cert]) => ({\r\n              firebaseKey: key,\r\n              ...cert\r\n            }));\r\n          }\r\n          \r\n          setDocumentos(docsToUpdate);\r\n        }\r\n      });\r\n      \r\n      setIsLoadingDocuments(false);\r\n      return unsubscribe;\r\n      \r\n    } catch (error) {\r\n      console.error('❌ Error al cargar documentos:', error);\r\n      setIsLoadingDocuments(false);\r\n      showToast('❌ Error al cargar documentos', 'error');\r\n      return null;\r\n    }\r\n  };\r\n\r\n  // 6. FUNCIÓN PARA FORMATEAR TAMAÑO DE ARCHIVO\r\n  const formatFileSize = (bytes) => {\r\n    if (!bytes || bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\r\n  };\r\n\r\n  // 7. USE EFFECT CORREGIDO PARA CARGAR DOCUMENTOS AL INICIAR\r\n  useEffect(() => {\r\n    let unsubscribe = null;\r\n    let mounted = true;\r\n    \r\n    const loadDocuments = async () => {\r\n      if (currentUser && currentUser.uid && mounted) {\r\n        console.log('👤 Usuario detectado, cargando documentos:', currentUser.uid);\r\n        \r\n        // Esperar un poco para asegurar que Firebase esté listo\r\n        await new Promise(resolve => setTimeout(resolve, 500));\r\n        \r\n        if (mounted) {\r\n          unsubscribe = await cargarDocumentosDesdeFirebase();\r\n        }\r\n      }\r\n    };\r\n    \r\n    loadDocuments();\r\n    \r\n    return () => {\r\n      mounted = false;\r\n      if (unsubscribe && typeof unsubscribe === 'function') {\r\n        console.log('🔚 Desuscribiendo listener de documentos');\r\n        unsubscribe();\r\n      }\r\n    };\r\n  }, [currentUser?.uid]);\r\n\r\n  // 8. USE EFFECT ADICIONAL PARA DEBUGGING\r\n  useEffect(() => {\r\n    if (showDocumentsModal && currentUser?.uid) {\r\n      console.log('📂 Modal abierto, estado actual de documentos:', documentos);\r\n      \r\n      // Verificar directamente en Firebase cuando se abre el modal\r\n      const checkFirebase = async () => {\r\n        console.log('🔍 Iniciando verificación completa de Firebase...');\r\n        \r\n        // Verificar múltiples rutas posibles\r\n        const rutas = [\r\n          `trabajadores/${currentUser.uid}/documentos`,\r\n          `documentos/${currentUser.uid}`,\r\n          `usuarios/${currentUser.uid}/documentos`,\r\n          `trabajadores/${currentUser.uid}`\r\n        ];\r\n        \r\n        for (const ruta of rutas) {\r\n          const testRef = ref(database, ruta);\r\n          const snapshot = await get(testRef);\r\n          const data = snapshot.val();\r\n          if (data) {\r\n            console.log(`✅ Datos encontrados en ${ruta}:`, data);\r\n          } else {\r\n            console.log(`❌ Sin datos en ${ruta}`);\r\n          }\r\n        }\r\n        \r\n        // Verificar la estructura completa de la base de datos\r\n        console.log('📊 Verificando estructura completa...');\r\n        const rootRef = ref(database);\r\n        const rootSnapshot = await get(rootRef);\r\n        const rootData = rootSnapshot.val();\r\n        console.log('🗂️ Estructura raíz de la base de datos:', Object.keys(rootData || {}));\r\n        \r\n        // Si hay trabajadores, verificar su estructura\r\n        if (rootData?.trabajadores?.[currentUser.uid]) {\r\n          console.log('👤 Estructura del trabajador actual:', \r\n            Object.keys(rootData.trabajadores[currentUser.uid] || {}));\r\n        }\r\n      };\r\n      \r\n      checkFirebase();\r\n    }\r\n  }, [showDocumentsModal, currentUser?.uid]);\r\n\r\n  // ========== RESTO DE LAS FUNCIONES DEL COMPONENTE ==========\r\n  \r\n  // Función para navegar al dashboard\r\n  const navigateToDashboard = () => {\r\n    if (onViewChange) {\r\n      onViewChange('dashboard-trabajador');\r\n    }\r\n  };\r\n\r\n  // Función para mostrar notificaciones tipo toast\r\n  const showToast = (message, type = 'info', duration = 4000) => {\r\n    if (toastTimeoutRef.current) {\r\n      clearTimeout(toastTimeoutRef.current);\r\n    }\r\n    \r\n    setToastNotification({ message, type });\r\n    \r\n    toastTimeoutRef.current = setTimeout(() => {\r\n      setToastNotification(null);\r\n    }, duration);\r\n  };\r\n\r\n  // Detectar si es móvil\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth <= 768);\r\n    };\r\n    \r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    \r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  // Cargar zonas asignadas\r\n  useEffect(() => {\r\n    if (currentUser && currentUser.uid) {\r\n      const zonasRef = ref(database, 'zonas_asignadas');\r\n      const unsubZonas = onValue(zonasRef, (snapshot) => {\r\n        const data = snapshot.val();\r\n        if (data) {\r\n          const zonasArray = Object.entries(data)\r\n            .filter(([id, zona]) => {\r\n              return zona.trabajadorAsignado === currentUser.uid && zona.estado !== 'completado';\r\n            })\r\n            .map(([id, zona]) => ({\r\n              id,\r\n              ...zona\r\n            }));\r\n          \r\n          setZonasAsignadas(zonasArray);\r\n        } else {\r\n          setZonasAsignadas([]);\r\n        }\r\n      });\r\n\r\n      return () => unsubZonas();\r\n    }\r\n  }, [currentUser]);\r\n\r\n  // Registrar trabajador\r\n  useEffect(() => {\r\n    if (currentUser && currentUser.uid) {\r\n      console.log('🔄 Registrando trabajador en Firebase...');\r\n      trabajadoresService.createOrUpdateTrabajador(currentUser.uid, {\r\n        nombre: currentUser.name || currentUser.email || 'Trabajador',\r\n        email: currentUser.email,\r\n        telefono: currentUser.phone || '',\r\n        vehicleId: currentUser.vehicleId || null,\r\n        estado: 'disponible',\r\n        rol: 'trabajador',\r\n        ubicacion: null,\r\n        createdAt: new Date().toISOString(),\r\n        ultimaActualizacion: new Date().toISOString()\r\n      }).then(() => {\r\n        console.log('✅ Trabajador registrado exitosamente');\r\n      }).catch(error => {\r\n        console.error('❌ Error al registrar trabajador:', error);\r\n      });\r\n    }\r\n  }, [currentUser]);\r\n\r\n  // Limpiar al desmontar\r\n  useEffect(() => {\r\n    return () => {\r\n      if (toastTimeoutRef.current) {\r\n        clearTimeout(toastTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // ========== MODAL DE DOCUMENTOS MEJORADO ==========\r\n  const DocumentosModal = () => {\r\n    if (!showDocumentsModal) return null;\r\n\r\n    return (\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: 'rgba(0,0,0,0.5)',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        zIndex: 3000,\r\n        padding: '20px'\r\n      }}>\r\n        <div style={{\r\n          background: 'white',\r\n          borderRadius: '12px',\r\n          maxWidth: '900px',\r\n          width: '100%',\r\n          maxHeight: '90vh',\r\n          overflow: 'auto',\r\n          padding: '30px'\r\n        }}>\r\n          {/* Botón de DEBUG temporal - ELIMINAR EN PRODUCCIÓN */}\r\n          <div style={{\r\n            marginTop: '20px',\r\n            padding: '15px',\r\n            background: '#fee2e2',\r\n            border: '2px dashed #dc2626',\r\n            borderRadius: '8px'\r\n          }}>\r\n            <h4 style={{ margin: '0 0 10px 0', color: '#991b1b' }}>\r\n              🔧 Herramientas de Debug (Temporal)\r\n            </h4>\r\n            <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap' }}>\r\n              <button\r\n                onClick={async () => {\r\n                  console.log('=== INICIANDO DEBUG COMPLETO ===');\r\n                  \r\n                  // Buscar documentos en todas las rutas posibles\r\n                  const rutas = [\r\n                    'trabajadores',\r\n                    'documentos', \r\n                    'usuarios',\r\n                    'uploads'\r\n                  ];\r\n                  \r\n                  for (const ruta of rutas) {\r\n                    const testRef = ref(database, ruta);\r\n                    const snapshot = await get(testRef);\r\n                    const data = snapshot.val();\r\n                    console.log(`📁 ${ruta}:`, data);\r\n                  }\r\n                  \r\n                  // Buscar específicamente los documentos del usuario\r\n                  const buscarDocumentos = async () => {\r\n                    const rootRef = ref(database);\r\n                    const snapshot = await get(rootRef);\r\n                    const allData = snapshot.val();\r\n                    \r\n                    console.log('🔍 Buscando documentos con URLs de Cloudinary...');\r\n                    \r\n                    const buscarEnObjeto = (obj, path = '') => {\r\n                      if (!obj) return;\r\n                      \r\n                      for (const [key, value] of Object.entries(obj)) {\r\n                        const currentPath = path ? `${path}/${key}` : key;\r\n                        \r\n                        if (typeof value === 'string' && value.includes('cloudinary')) {\r\n                          console.log(`✅ URL Cloudinary encontrada en ${currentPath}:`, value);\r\n                        }\r\n                        \r\n                        if (typeof value === 'object' && value !== null) {\r\n                          buscarEnObjeto(value, currentPath);\r\n                        }\r\n                      }\r\n                    };\r\n                    \r\n                    buscarEnObjeto(allData);\r\n                  };\r\n                  \r\n                  await buscarDocumentos();\r\n                  alert('Revisa la consola para ver los resultados del debug');\r\n                }}\r\n                style={{\r\n                  padding: '8px 16px',\r\n                  background: '#dc2626',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                🔍 Buscar Documentos Perdidos\r\n              </button>\r\n              \r\n              <button\r\n                onClick={async () => {\r\n                  // Forzar recarga de documentos\r\n                  console.log('🔄 Forzando recarga...');\r\n                  await cargarDocumentosDesdeFirebase();\r\n                  alert('Documentos recargados - revisa la consola');\r\n                }}\r\n                style={{\r\n                  padding: '8px 16px',\r\n                  background: '#0891b2',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                🔄 Forzar Recarga\r\n              </button>\r\n              \r\n              <button\r\n                onClick={() => {\r\n                  console.log('📊 Estado actual:');\r\n                  console.log('- Usuario:', currentUser);\r\n                  console.log('- Documentos en estado:', documentos);\r\n                  console.log('- UID:', currentUser?.uid);\r\n                }}\r\n                style={{\r\n                  padding: '8px 16px',\r\n                  background: '#7c3aed',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                📊 Ver Estado Actual\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{\r\n            display: 'flex',\r\n            justifyContent: 'space-between',\r\n            alignItems: 'center',\r\n            marginBottom: '25px'\r\n          }}>\r\n            <h2 style={{ margin: 0, color: '#1f2937', fontSize: '24px' }}>\r\n              📄 Mis Documentos\r\n            </h2>\r\n            <button\r\n              onClick={() => setShowDocumentsModal(false)}\r\n              style={{\r\n                padding: '8px',\r\n                background: '#6b7280',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '6px',\r\n                cursor: 'pointer',\r\n                fontSize: '18px'\r\n              }}\r\n            >\r\n              ✖\r\n            </button>\r\n          </div>\r\n\r\n          {/* Indicador de carga */}\r\n          {isLoadingDocuments && (\r\n            <div style={{\r\n              padding: '20px',\r\n              textAlign: 'center',\r\n              color: '#6b7280'\r\n            }}>\r\n              <div style={{ fontSize: '24px', marginBottom: '10px' }}>⏳</div>\r\n              <div>Cargando documentos...</div>\r\n            </div>\r\n          )}\r\n\r\n          {message.text && (\r\n            <div style={{\r\n              padding: '12px',\r\n              borderRadius: '8px',\r\n              marginBottom: '20px',\r\n              background: message.type === 'success' ? '#dcfce7' : '#fee2e2',\r\n              border: `1px solid ${message.type === 'success' ? '#86efac' : '#fecaca'}`,\r\n              color: message.type === 'success' ? '#166534' : '#991b1b'\r\n            }}>\r\n              {message.text}\r\n            </div>\r\n          )}\r\n\r\n          <div style={{\r\n            padding: '15px',\r\n            background: '#fef3c7',\r\n            border: '2px solid #f59e0b',\r\n            borderRadius: '8px',\r\n            marginBottom: '20px'\r\n          }}>\r\n            <h4 style={{ margin: '0 0 10px 0', color: '#92400e', fontSize: '16px' }}>\r\n              📸 IMPORTANTE: Solo se aceptan IMÁGENES\r\n            </h4>\r\n            <p style={{ margin: '0 0 10px 0', fontSize: '14px', color: '#78350f' }}>\r\n              Los archivos PDF no están soportados. Si tienes documentos en PDF:\r\n            </p>\r\n            <ol style={{ margin: '0', paddingLeft: '20px', fontSize: '14px', color: '#78350f' }}>\r\n              <li>📱 Toma una <strong>FOTO</strong> del documento con tu celular</li>\r\n              <li>💻 Haz una <strong>CAPTURA DE PANTALLA</strong> del PDF</li>\r\n              <li>🔄 Convierte el PDF a JPG en: <a href=\"https://www.ilovepdf.com/pdf_to_jpg\" target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: '#f59e0b' }}>iLovePDF.com</a></li>\r\n            </ol>\r\n          </div>\r\n\r\n          <div style={{\r\n            display: 'grid',\r\n            gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fit, minmax(280px, 1fr))',\r\n            gap: '20px'\r\n          }}>\r\n            {/* Licencia de Conducir */}\r\n            <div style={{\r\n              border: '1px solid #e5e7eb',\r\n              borderRadius: '8px',\r\n              padding: '15px',\r\n              background: documentos.licenciaConducir?.url ? '#f0fdf4' : 'white'\r\n            }}>\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                marginBottom: '10px'\r\n              }}>\r\n                <h5 style={{ \r\n                  margin: 0, \r\n                  fontSize: '14px', \r\n                  fontWeight: '600', \r\n                  color: '#374151' \r\n                }}>\r\n                  🚗 Licencia de Conducir\r\n                </h5>\r\n                {documentos.licenciaConducir?.url && (\r\n                  <span style={{\r\n                    fontSize: '10px',\r\n                    padding: '2px 6px',\r\n                    background: '#22c55e',\r\n                    color: 'white',\r\n                    borderRadius: '4px'\r\n                  }}>\r\n                    ✓ Cargado\r\n                  </span>\r\n                )}\r\n              </div>\r\n              \r\n              {documentos.licenciaConducir?.url ? (\r\n                <div>\r\n                  <div style={{\r\n                    padding: '8px',\r\n                    background: '#f9fafb',\r\n                    borderRadius: '6px',\r\n                    marginBottom: '8px',\r\n                    fontSize: '12px'\r\n                  }}>\r\n                    <div style={{ \r\n                      fontWeight: '500', \r\n                      color: '#1f2937',\r\n                      marginBottom: '3px',\r\n                      overflow: 'hidden',\r\n                      textOverflow: 'ellipsis',\r\n                      whiteSpace: 'nowrap'\r\n                    }}>\r\n                      {documentos.licenciaConducir.nombre}\r\n                    </div>\r\n                    <div style={{ color: '#6b7280', fontSize: '11px' }}>\r\n                      {documentos.licenciaConducir.fecha && \r\n                        new Date(documentos.licenciaConducir.fecha).toLocaleDateString('es-CL')}\r\n                    </div>\r\n                    {documentos.licenciaConducir.tamaño > 0 && (\r\n                      <div style={{ color: '#9ca3af', fontSize: '10px', marginTop: '2px' }}>\r\n                        {formatFileSize(documentos.licenciaConducir.tamaño)}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div style={{ display: 'flex', gap: '8px' }}>\r\n                    <a \r\n                      href={documentos.licenciaConducir.url}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      style={{\r\n                        flex: 1,\r\n                        padding: '6px',\r\n                        background: '#3b82f6',\r\n                        color: 'white',\r\n                        textAlign: 'center',\r\n                        borderRadius: '6px',\r\n                        textDecoration: 'none',\r\n                        fontSize: '12px'\r\n                      }}\r\n                    >\r\n                      👁️ Ver\r\n                    </a>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleDeleteDocument('licenciaConducir')}\r\n                      style={{\r\n                        flex: 1,\r\n                        padding: '6px',\r\n                        background: '#ef4444',\r\n                        color: 'white',\r\n                        border: 'none',\r\n                        borderRadius: '6px',\r\n                        cursor: 'pointer',\r\n                        fontSize: '12px'\r\n                      }}\r\n                    >\r\n                      🗑️ Eliminar\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div>\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"licenciaConducir\"\r\n                    accept=\".jpg,.jpeg,.png\"\r\n                    onChange={(e) => handleFileUpload(e.target.files[0], 'licenciaConducir')}\r\n                    style={{ display: 'none' }}\r\n                  />\r\n                  <label\r\n                    htmlFor=\"licenciaConducir\"\r\n                    style={{\r\n                      display: 'block',\r\n                      padding: '20px 10px',\r\n                      background: '#f9fafb',\r\n                      border: '2px dashed #d1d5db',\r\n                      borderRadius: '6px',\r\n                      textAlign: 'center',\r\n                      cursor: 'pointer',\r\n                      fontSize: '12px',\r\n                      color: '#6b7280',\r\n                      transition: 'all 0.2s'\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.borderColor = '#3b82f6';\r\n                      e.currentTarget.style.background = '#eff6ff';\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.borderColor = '#d1d5db';\r\n                      e.currentTarget.style.background = '#f9fafb';\r\n                    }}\r\n                  >\r\n                    {uploadProgress.licenciaConducir ? (\r\n                      <div>\r\n                        <div style={{ marginBottom: '5px' }}>\r\n                          Subiendo... {uploadProgress.licenciaConducir}%\r\n                        </div>\r\n                        <div style={{\r\n                          width: '100%',\r\n                          height: '4px',\r\n                          background: '#e5e7eb',\r\n                          borderRadius: '2px',\r\n                          overflow: 'hidden'\r\n                        }}>\r\n                          <div style={{\r\n                            width: `${uploadProgress.licenciaConducir}%`,\r\n                            height: '100%',\r\n                            background: '#3b82f6',\r\n                            transition: 'width 0.3s'\r\n                          }} />\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <>\r\n                        <div style={{ fontSize: '20px', marginBottom: '5px' }}>📤</div>\r\n                        <div>Click para subir</div>\r\n                      </>\r\n                    )}\r\n                  </label>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Certificado de Operador */}\r\n            <div style={{\r\n              border: '1px solid #e5e7eb',\r\n              borderRadius: '8px',\r\n              padding: '15px',\r\n              background: documentos.certificadoOperador?.url ? '#f0fdf4' : 'white'\r\n            }}>\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                marginBottom: '10px'\r\n              }}>\r\n                <h5 style={{ \r\n                  margin: 0, \r\n                  fontSize: '14px', \r\n                  fontWeight: '600', \r\n                  color: '#374151' \r\n                }}>\r\n                  🏗️ Certificado de Operador\r\n                </h5>\r\n                {documentos.certificadoOperador?.url && (\r\n                  <span style={{\r\n                    fontSize: '10px',\r\n                    padding: '2px 6px',\r\n                    background: '#22c55e',\r\n                    color: 'white',\r\n                    borderRadius: '4px'\r\n                  }}>\r\n                    ✓ Cargado\r\n                  </span>\r\n                )}\r\n              </div>\r\n              \r\n              {documentos.certificadoOperador?.url ? (\r\n                <div>\r\n                  <div style={{\r\n                    padding: '8px',\r\n                    background: '#f9fafb',\r\n                    borderRadius: '6px',\r\n                    marginBottom: '8px',\r\n                    fontSize: '12px'\r\n                  }}>\r\n                    <div style={{ \r\n                      fontWeight: '500', \r\n                      color: '#1f2937',\r\n                      marginBottom: '3px',\r\n                      overflow: 'hidden',\r\n                      textOverflow: 'ellipsis',\r\n                      whiteSpace: 'nowrap'\r\n                    }}>\r\n                      {documentos.certificadoOperador.nombre}\r\n                    </div>\r\n                    <div style={{ color: '#6b7280', fontSize: '11px' }}>\r\n                      {documentos.certificadoOperador.fecha && \r\n                        new Date(documentos.certificadoOperador.fecha).toLocaleDateString('es-CL')}\r\n                    </div>\r\n                    {documentos.certificadoOperador.tamaño > 0 && (\r\n                      <div style={{ color: '#9ca3af', fontSize: '10px', marginTop: '2px' }}>\r\n                        {formatFileSize(documentos.certificadoOperador.tamaño)}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  <div style={{ display: 'flex', gap: '8px' }}>\r\n                    <a \r\n                      href={documentos.certificadoOperador.url}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      style={{\r\n                        flex: 1,\r\n                        padding: '6px',\r\n                        background: '#3b82f6',\r\n                        color: 'white',\r\n                        textAlign: 'center',\r\n                        borderRadius: '6px',\r\n                        textDecoration: 'none',\r\n                        fontSize: '12px'\r\n                      }}\r\n                    >\r\n                      👁️ Ver\r\n                    </a>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleDeleteDocument('certificadoOperador')}\r\n                      style={{\r\n                        flex: 1,\r\n                        padding: '6px',\r\n                        background: '#ef4444',\r\n                        color: 'white',\r\n                        border: 'none',\r\n                        borderRadius: '6px',\r\n                        cursor: 'pointer',\r\n                        fontSize: '12px'\r\n                      }}\r\n                    >\r\n                      🗑️ Eliminar\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div>\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"certificadoOperador\"\r\n                    accept=\".jpg,.jpeg,.png\"\r\n                    onChange={(e) => handleFileUpload(e.target.files[0], 'certificadoOperador')}\r\n                    style={{ display: 'none' }}\r\n                  />\r\n                  <label\r\n                    htmlFor=\"certificadoOperador\"\r\n                    style={{\r\n                      display: 'block',\r\n                      padding: '20px 10px',\r\n                      background: '#f9fafb',\r\n                      border: '2px dashed #d1d5db',\r\n                      borderRadius: '6px',\r\n                      textAlign: 'center',\r\n                      cursor: 'pointer',\r\n                      fontSize: '12px',\r\n                      color: '#6b7280',\r\n                      transition: 'all 0.2s'\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                      e.currentTarget.style.borderColor = '#3b82f6';\r\n                      e.currentTarget.style.background = '#eff6ff';\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      e.currentTarget.style.borderColor = '#d1d5db';\r\n                      e.currentTarget.style.background = '#f9fafb';\r\n                    }}\r\n                  >\r\n                    <div style={{ fontSize: '20px', marginBottom: '5px' }}>📤</div>\r\n                    <div>Click para subir</div>\r\n                  </label>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Sección de certificados adicionales */}\r\n          <div style={{\r\n            marginTop: '30px',\r\n            padding: '20px',\r\n            background: '#f9fafb',\r\n            borderRadius: '8px'\r\n          }}>\r\n            <h5 style={{ \r\n              margin: '0 0 15px 0', \r\n              fontSize: '16px', \r\n              fontWeight: '600', \r\n              color: '#374151' \r\n            }}>\r\n              📚 Certificados de Capacitación\r\n            </h5>\r\n            \r\n            {documentos.certificados?.length > 0 && (\r\n              <div style={{ marginBottom: '15px' }}>\r\n                {documentos.certificados.map((cert, index) => (\r\n                  <div key={index} style={{\r\n                    padding: '10px',\r\n                    background: 'white',\r\n                    borderRadius: '6px',\r\n                    marginBottom: '8px',\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'center',\r\n                    border: '1px solid #e5e7eb'\r\n                  }}>\r\n                    <div style={{ flex: 1, minWidth: 0 }}>\r\n                      <div style={{ \r\n                        fontWeight: '500', \r\n                        fontSize: '13px',\r\n                        color: '#1f2937',\r\n                        overflow: 'hidden',\r\n                        textOverflow: 'ellipsis',\r\n                        whiteSpace: 'nowrap'\r\n                      }}>\r\n                        📜 {cert.nombre}\r\n                      </div>\r\n                      <div style={{ \r\n                        color: '#6b7280', \r\n                        fontSize: '11px',\r\n                        marginTop: '2px' \r\n                      }}>\r\n                        {formatFileSize(cert.tamaño)} • {cert.fecha && new Date(cert.fecha).toLocaleDateString('es-CL')}\r\n                      </div>\r\n                    </div>\r\n                    <div style={{ display: 'flex', gap: '6px', marginLeft: '10px' }}>\r\n                      <a \r\n                        href={cert.url}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        style={{\r\n                          padding: '4px 8px',\r\n                          background: '#3b82f6',\r\n                          color: 'white',\r\n                          borderRadius: '4px',\r\n                          textDecoration: 'none',\r\n                          fontSize: '11px'\r\n                        }}\r\n                      >\r\n                        Ver\r\n                      </a>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => handleDeleteDocument('certificados', index)}\r\n                        style={{\r\n                          padding: '4px 8px',\r\n                          background: '#ef4444',\r\n                          color: 'white',\r\n                          border: 'none',\r\n                          borderRadius: '4px',\r\n                          cursor: 'pointer',\r\n                          fontSize: '11px'\r\n                        }}\r\n                      >\r\n                        Eliminar\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n            \r\n            <div>\r\n              <input\r\n                type=\"file\"\r\n                id=\"certificados\"\r\n                accept=\".jpg,.jpeg,.png\"\r\n                onChange={(e) => handleFileUpload(e.target.files[0], 'certificados')}\r\n                style={{ display: 'none' }}\r\n                disabled={uploadingFile}\r\n              />\r\n              <label\r\n                htmlFor=\"certificados\"\r\n                style={{\r\n                  display: 'inline-block',\r\n                  padding: '10px 16px',\r\n                  background: uploadingFile ? '#9ca3af' : '#10b981',\r\n                  color: 'white',\r\n                  borderRadius: '6px',\r\n                  cursor: uploadingFile ? 'not-allowed' : 'pointer',\r\n                  fontSize: '14px',\r\n                  fontWeight: '500'\r\n                }}\r\n              >\r\n                {uploadingFile ? '⏳ Subiendo...' : '➕ Agregar Certificado'}\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // RESTO DEL CÓDIGO (Estilos y return) SIN CAMBIOS...\r\n  const styles = {\r\n    container: {\r\n      width: '100%',\r\n      minHeight: '100vh',\r\n      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n      position: 'relative',\r\n      overflow: 'hidden'\r\n    },\r\n    header: {\r\n      background: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\r\n      color: 'white',\r\n      padding: '16px',\r\n      position: 'relative',\r\n      boxShadow: '0 4px 20px rgba(0,0,0,0.15)'\r\n    },\r\n    headerContent: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      gap: '16px'\r\n    },\r\n    userInfo: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'space-between'\r\n    },\r\n    userName: {\r\n      fontSize: '20px',\r\n      fontWeight: '700',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '8px'\r\n    },\r\n    logoutBtn: {\r\n      padding: '8px 16px',\r\n      background: 'rgba(255,255,255,0.2)',\r\n      backdropFilter: 'blur(10px)',\r\n      color: 'white',\r\n      border: '1px solid rgba(255,255,255,0.3)',\r\n      borderRadius: '8px',\r\n      cursor: 'pointer',\r\n      fontSize: '14px',\r\n      fontWeight: '600',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '6px'\r\n    },\r\n    buttonGrid: {\r\n      display: 'grid',\r\n      gridTemplateColumns: 'repeat(2, 1fr)',\r\n      gap: '12px'\r\n    },\r\n    actionBtn: {\r\n      padding: '16px',\r\n      borderRadius: '12px',\r\n      border: 'none',\r\n      cursor: 'pointer',\r\n      fontSize: '15px',\r\n      fontWeight: '600',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      gap: '8px',\r\n      transition: 'all 0.3s ease',\r\n      boxShadow: '0 4px 15px rgba(0,0,0,0.1)'\r\n    },\r\n    mainContent: {\r\n      padding: '20px',\r\n      paddingTop: '30px'\r\n    },\r\n    dashboardGrid: {\r\n      display: 'grid',\r\n      gridTemplateColumns: isMobile ? '1fr' : 'repeat(auto-fit, minmax(300px, 1fr))',\r\n      gap: '20px',\r\n      marginBottom: '30px'\r\n    },\r\n    dashboardCard: {\r\n      background: 'white',\r\n      borderRadius: '16px',\r\n      padding: '24px',\r\n      boxShadow: '0 10px 40px rgba(0,0,0,0.1)',\r\n      transition: 'all 0.3s ease'\r\n    },\r\n    cardIcon: {\r\n      fontSize: '48px',\r\n      marginBottom: '12px'\r\n    },\r\n    cardTitle: {\r\n      fontSize: '18px',\r\n      fontWeight: '700',\r\n      color: '#1f2937',\r\n      marginBottom: '8px'\r\n    },\r\n    cardValue: {\r\n      fontSize: '32px',\r\n      fontWeight: '800',\r\n      color: '#3b82f6',\r\n      marginBottom: '4px'\r\n    },\r\n    cardSubtext: {\r\n      fontSize: '14px',\r\n      color: '#6b7280'\r\n    },\r\n    zonasSection: {\r\n      background: 'white',\r\n      borderRadius: '16px',\r\n      padding: '24px',\r\n      boxShadow: '0 10px 40px rgba(0,0,0,0.1)'\r\n    },\r\n    sectionTitle: {\r\n      fontSize: '20px',\r\n      fontWeight: '700',\r\n      color: '#1f2937',\r\n      marginBottom: '16px',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '8px'\r\n    },\r\n    zonaCard: {\r\n      background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',\r\n      borderRadius: '12px',\r\n      padding: '16px',\r\n      marginBottom: '12px',\r\n      border: '2px solid #e5e7eb',\r\n      transition: 'all 0.3s ease'\r\n    },\r\n    emptyState: {\r\n      textAlign: 'center',\r\n      padding: '40px',\r\n      color: '#6b7280'\r\n    },\r\n    toast: {\r\n      position: 'fixed',\r\n      top: '20px',\r\n      right: '20px',\r\n      padding: '12px 20px',\r\n      borderRadius: '10px',\r\n      boxShadow: '0 4px 20px rgba(0,0,0,0.15)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '12px',\r\n      zIndex: 2000,\r\n      animation: 'slideInRight 0.3s ease',\r\n      maxWidth: '350px',\r\n      backdropFilter: 'blur(10px)'\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      {/* Header Mejorado para Móvil */}\r\n      <div style={styles.header}>\r\n        <div style={styles.headerContent}>\r\n          <div style={styles.userInfo}>\r\n            <div style={styles.userName}>\r\n              <span>👷‍♂️</span>\r\n              <span>{currentUser.name || 'Trabajador'}</span>\r\n            </div>\r\n            <button onClick={onLogout} style={styles.logoutBtn}>\r\n              <span>🚪</span>\r\n              <span>Salir</span>\r\n            </button>\r\n          </div>\r\n          \r\n          {/* Botones de Acción */}\r\n          <div style={styles.buttonGrid}>\r\n            <button\r\n              onClick={() => setShowDocumentsModal(true)}\r\n              style={{\r\n                ...styles.actionBtn,\r\n                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',\r\n                color: 'white'\r\n              }}\r\n            >\r\n              <span style={{ fontSize: '24px' }}>📄</span>\r\n              <span>Mis Documentos</span>\r\n            </button>\r\n            \r\n            <button\r\n              onClick={() => setShowVehiclePanel(true)}\r\n              style={{\r\n                ...styles.actionBtn,\r\n                background: 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)',\r\n                color: 'white'\r\n              }}\r\n            >\r\n              <span style={{ fontSize: '24px' }}>🚛</span>\r\n              <span>Mi Vehículo</span>\r\n            </button>\r\n            \r\n            <button\r\n              onClick={navigateToDashboard}\r\n              style={{\r\n                ...styles.actionBtn,\r\n                background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\r\n                color: 'white'\r\n              }}\r\n            >\r\n              <span style={{ fontSize: '24px' }}>📊</span>\r\n              <span>Dashboard</span>\r\n            </button>\r\n            \r\n            <button\r\n              onClick={() => showToast('🗺️ Función de mapa próximamente', 'info')}\r\n              style={{\r\n                ...styles.actionBtn,\r\n                background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',\r\n                color: 'white'\r\n              }}\r\n            >\r\n              <span style={{ fontSize: '24px' }}>🗺️</span>\r\n              <span>Mapa GPS</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Contenido Principal */}\r\n      <div style={styles.mainContent}>\r\n        {/* Dashboard Cards */}\r\n        <div style={styles.dashboardGrid}>\r\n          <div style={styles.dashboardCard}>\r\n            <div style={styles.cardIcon}>📍</div>\r\n            <div style={styles.cardTitle}>Estado GPS</div>\r\n            <div style={styles.cardValue}>\r\n              {gpsStatus === 'active' ? 'Activo' : 'Inactivo'}\r\n            </div>\r\n            <div style={styles.cardSubtext}>\r\n              {gpsStatus === 'active' ? '🟢 Transmitiendo ubicación' : '🔴 Sin transmisión'}\r\n            </div>\r\n          </div>\r\n\r\n          <div style={styles.dashboardCard}>\r\n            <div style={styles.cardIcon}>🏗️</div>\r\n            <div style={styles.cardTitle}>Zonas Asignadas</div>\r\n            <div style={styles.cardValue}>{zonasAsignadas.length}</div>\r\n            <div style={styles.cardSubtext}>\r\n              {zonasAsignadas.filter(z => z.estado === 'pendiente').length} pendientes\r\n            </div>\r\n          </div>\r\n\r\n          <div style={styles.dashboardCard}>\r\n            <div style={styles.cardIcon}>✅</div>\r\n            <div style={styles.cardTitle}>Estado Actual</div>\r\n            <div style={styles.cardValue}>Disponible</div>\r\n            <div style={styles.cardSubtext}>Listo para trabajar</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Sección de Zonas */}\r\n        <div style={styles.zonasSection}>\r\n          <h2 style={styles.sectionTitle}>\r\n            <span>🗺️</span>\r\n            <span>Mis Zonas de Trabajo</span>\r\n          </h2>\r\n          \r\n          {zonasAsignadas.length > 0 ? (\r\n            <div>\r\n              {zonasAsignadas.map(zona => (\r\n                <div key={zona.id} style={styles.zonaCard}>\r\n                  <h3 style={{ margin: '0 0 8px 0', fontSize: '16px', fontWeight: '600', color: '#1f2937' }}>\r\n                    📍 {zona.nombre}\r\n                  </h3>\r\n                  <p style={{ margin: '0 0 8px 0', fontSize: '14px', color: '#6b7280' }}>\r\n                    {zona.direccion}\r\n                  </p>\r\n                  <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\r\n                    <span style={{\r\n                      padding: '4px 8px',\r\n                      background: zona.prioridad === 'alta' ? '#dc2626' : \r\n                                zona.prioridad === 'media' ? '#f59e0b' : '#10b981',\r\n                      color: 'white',\r\n                      borderRadius: '6px',\r\n                      fontSize: '12px',\r\n                      fontWeight: '600'\r\n                    }}>\r\n                      Prioridad: {zona.prioridad}\r\n                    </span>\r\n                    <span style={{\r\n                      padding: '4px 8px',\r\n                      background: zona.estado === 'pendiente' ? '#6b7280' :\r\n                                zona.estado === 'en_progreso' ? '#3b82f6' : '#10b981',\r\n                      color: 'white',\r\n                      borderRadius: '6px',\r\n                      fontSize: '12px',\r\n                      fontWeight: '600'\r\n                    }}>\r\n                      {zona.estado === 'pendiente' ? '⏳ Pendiente' :\r\n                       zona.estado === 'en_progreso' ? '🔧 En Progreso' : '✅ Completado'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div style={styles.emptyState}>\r\n              <div style={{ fontSize: '48px', marginBottom: '12px', opacity: 0.5 }}>📭</div>\r\n              <p style={{ fontSize: '16px', fontWeight: '500', marginBottom: '4px' }}>\r\n                No tienes zonas asignadas\r\n              </p>\r\n              <p style={{ fontSize: '14px' }}>\r\n                Cuando te asignen nuevas zonas aparecerán aquí\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Toast Notification */}\r\n      {toastNotification && (\r\n        <div style={{\r\n          ...styles.toast,\r\n          background: toastNotification.type === 'success' ? 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)' :\r\n                     toastNotification.type === 'error' ? 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)' :\r\n                     toastNotification.type === 'warning' ? 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)' :\r\n                     'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',\r\n          color: 'white'\r\n        }}>\r\n          <span style={{ fontSize: '18px' }}>\r\n            {toastNotification.type === 'success' ? '✅' :\r\n             toastNotification.type === 'error' ? '❌' :\r\n             toastNotification.type === 'warning' ? '⚠️' : 'ℹ️'}\r\n          </span>\r\n          <span style={{ flex: 1, fontSize: '14px', fontWeight: '500' }}>\r\n            {toastNotification.message}\r\n          </span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal del panel de vehículo */}\r\n      {showVehiclePanel && (\r\n        <TrabajadorVehiclePanel \r\n          currentUser={currentUser}\r\n          onClose={() => setShowVehiclePanel(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Modal de Documentos */}\r\n      <DocumentosModal />\r\n\r\n      <style>{`\r\n        @keyframes slideInRight {\r\n          from {\r\n            transform: translateX(100%);\r\n            opacity: 0;\r\n          }\r\n          to {\r\n            transform: translateX(0);\r\n            opacity: 1;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SistemaTrabajadoresFirebase;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
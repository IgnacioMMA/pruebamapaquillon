{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Izan\\\\Desktop\\\\AppReact\\\\mapa-quillon\\\\src\\\\components\\\\SistemaTrabajadoresFirebase.js\",\n  _s = $RefreshSig$();\n// src/components/SistemaTrabajadoresFirebase.js\nimport React, { useEffect, useRef, useState } from 'react';\n\n// Zonas de trabajo disponibles (esto podría venir de Firebase)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst zonasDisponibles = [{\n  id: 1,\n  nombre: \"Obra Sector Norte\",\n  lat: -36.741,\n  lng: -72.538,\n  direccion: \"Av. Principal 123\"\n}, {\n  id: 2,\n  nombre: \"Reparación Puente\",\n  lat: -36.728,\n  lng: -72.470,\n  direccion: \"Puente Los Aromos\"\n}, {\n  id: 3,\n  nombre: \"Pavimentación Ruta\",\n  lat: -36.720,\n  lng: -72.480,\n  direccion: \"Ruta Q-45 Km 12\"\n}, {\n  id: 4,\n  nombre: \"Construcción Plaza\",\n  lat: -36.735,\n  lng: -72.465,\n  direccion: \"Plaza Central\"\n}, {\n  id: 5,\n  nombre: \"Mantención Parque\",\n  lat: -36.745,\n  lng: -72.455,\n  direccion: \"Parque Municipal\"\n}];\nconst SistemaTrabajadoresFirebase = () => {\n  _s();\n  // Estados principales\n  const mapRef = useRef(null);\n  const [map, setMap] = useState(null);\n  const [userPosition, setUserPosition] = useState(null);\n  const [selectedZona, setSelectedZona] = useState(null);\n  const [isTracking, setIsTracking] = useState(false);\n  const [isNavigating, setIsNavigating] = useState(false);\n  const [workStatus, setWorkStatus] = useState('idle'); // idle, traveling, working, completed\n  const [workLog, setWorkLog] = useState({\n    startTime: null,\n    arrivalTime: null,\n    endTime: null,\n    zona: null\n  });\n\n  // Referencias para marcadores y servicios\n  const userMarkerRef = useRef(null);\n  const zonaMarkerRef = useRef(null);\n  const directionsServiceRef = useRef(null);\n  const directionsRendererRef = useRef(null);\n  const watchIdRef = useRef(null);\n\n  // Estados de UI\n  const [mapLoaded, setMapLoaded] = useState(false);\n  const [error, setError] = useState(null);\n  const [distance, setDistance] = useState(null);\n  const [duration, setDuration] = useState(null);\n  const [showWorkLog, setShowWorkLog] = useState(false);\n  const API_KEY = 'AIzaSyA7DrdL36n5cx-RNzuXGAQggFeGCheHDbY';\n\n  // Función para cargar Google Maps\n  useEffect(() => {\n    const loadGoogleMaps = () => {\n      return new Promise((resolve, reject) => {\n        if (window.google && window.google.maps) {\n          resolve(window.google.maps);\n          return;\n        }\n        const existingScript = document.querySelector('script[src*=\"maps.googleapis.com\"]');\n        if (existingScript) {\n          existingScript.addEventListener('load', () => {\n            if (window.google && window.google.maps) {\n              resolve(window.google.maps);\n            } else {\n              reject(new Error('Google Maps no disponible'));\n            }\n          });\n          return;\n        }\n        const script = document.createElement('script');\n        script.src = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry&v=weekly`;\n        script.async = true;\n        script.defer = true;\n        script.onload = () => {\n          if (window.google && window.google.maps) {\n            resolve(window.google.maps);\n          } else {\n            reject(new Error('Google Maps no disponible'));\n          }\n        };\n        script.onerror = () => {\n          reject(new Error('Error al cargar Google Maps'));\n        };\n        document.head.appendChild(script);\n      });\n    };\n    const initMap = async () => {\n      try {\n        const maps = await loadGoogleMaps();\n        if (!mapRef.current) return;\n        const mapInstance = new maps.Map(mapRef.current, {\n          center: {\n            lat: -36.7333,\n            lng: -72.4667\n          },\n          zoom: 13,\n          mapTypeId: 'roadmap',\n          zoomControl: true,\n          mapTypeControl: false,\n          scaleControl: false,\n          streetViewControl: false,\n          rotateControl: false,\n          fullscreenControl: true\n        });\n        setMap(mapInstance);\n\n        // Inicializar servicios de direcciones\n        directionsServiceRef.current = new maps.DirectionsService();\n        directionsRendererRef.current = new maps.DirectionsRenderer({\n          map: mapInstance,\n          suppressMarkers: false,\n          polylineOptions: {\n            strokeColor: '#4285F4',\n            strokeWeight: 6,\n            strokeOpacity: 0.8\n          }\n        });\n        setMapLoaded(true);\n      } catch (err) {\n        setError('Error al cargar el mapa: ' + err.message);\n      }\n    };\n    initMap();\n  }, []);\n\n  // Función para activar/desactivar GPS\n  const toggleGPS = () => {\n    if (isTracking) {\n      // Detener tracking\n      if (watchIdRef.current) {\n        navigator.geolocation.clearWatch(watchIdRef.current);\n        watchIdRef.current = null;\n      }\n      setIsTracking(false);\n\n      // Limpiar marcador de usuario\n      if (userMarkerRef.current) {\n        userMarkerRef.current.setMap(null);\n        userMarkerRef.current = null;\n      }\n      setUserPosition(null);\n    } else {\n      // Iniciar tracking\n      if (!navigator.geolocation) {\n        alert('Tu navegador no soporta geolocalización');\n        return;\n      }\n      setIsTracking(true);\n\n      // Obtener posición inicial\n      navigator.geolocation.getCurrentPosition(position => {\n        const pos = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n        updateUserPosition(pos);\n      }, error => {\n        console.error('Error al obtener ubicación:', error);\n        alert('Error al obtener tu ubicación. Verifica los permisos de GPS.');\n        setIsTracking(false);\n      }, {\n        enableHighAccuracy: true,\n        timeout: 5000,\n        maximumAge: 0\n      });\n\n      // Seguimiento continuo\n      watchIdRef.current = navigator.geolocation.watchPosition(position => {\n        const pos = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n        updateUserPosition(pos);\n      }, error => {\n        console.error('Error en tracking:', error);\n      }, {\n        enableHighAccuracy: true,\n        timeout: 5000,\n        maximumAge: 0\n      });\n    }\n  };\n\n  // Actualizar posición del usuario en el mapa\n  const updateUserPosition = position => {\n    setUserPosition(position);\n    if (!map || !window.google) return;\n\n    // Crear o actualizar marcador del usuario\n    if (!userMarkerRef.current) {\n      userMarkerRef.current = new window.google.maps.Marker({\n        position: position,\n        map: map,\n        title: 'Tu ubicación',\n        icon: {\n          path: window.google.maps.SymbolPath.CIRCLE,\n          scale: 10,\n          fillColor: '#4285F4',\n          fillOpacity: 1,\n          strokeColor: '#ffffff',\n          strokeWeight: 3\n        },\n        zIndex: 1000\n      });\n\n      // Centrar mapa en usuario\n      map.setCenter(position);\n      map.setZoom(15);\n    } else {\n      userMarkerRef.current.setPosition(position);\n    }\n\n    // Si está navegando, actualizar distancia\n    if (isNavigating && selectedZona) {\n      const distance = window.google.maps.geometry.spherical.computeDistanceBetween(new window.google.maps.LatLng(position.lat, position.lng), new window.google.maps.LatLng(selectedZona.lat, selectedZona.lng));\n\n      // Si llegó al destino (menos de 50 metros)\n      if (distance < 50 && workStatus === 'traveling') {\n        handleArrival();\n      }\n    }\n  };\n\n  // Seleccionar zona de trabajo\n  const selectZona = zona => {\n    setSelectedZona(zona);\n    if (!map || !window.google) return;\n\n    // Limpiar marcador anterior\n    if (zonaMarkerRef.current) {\n      zonaMarkerRef.current.setMap(null);\n    }\n\n    // Crear marcador de zona\n    zonaMarkerRef.current = new window.google.maps.Marker({\n      position: {\n        lat: zona.lat,\n        lng: zona.lng\n      },\n      map: map,\n      title: zona.nombre,\n      icon: {\n        path: window.google.maps.SymbolPath.BACKWARD_CLOSED_ARROW,\n        scale: 8,\n        fillColor: '#22c55e',\n        fillOpacity: 1,\n        strokeColor: '#ffffff',\n        strokeWeight: 2\n      }\n    });\n\n    // Ajustar vista para mostrar ambos puntos\n    if (userPosition) {\n      const bounds = new window.google.maps.LatLngBounds();\n      bounds.extend(userPosition);\n      bounds.extend({\n        lat: zona.lat,\n        lng: zona.lng\n      });\n      map.fitBounds(bounds, 100);\n    } else {\n      map.setCenter({\n        lat: zona.lat,\n        lng: zona.lng\n      });\n      map.setZoom(15);\n    }\n  };\n\n  // Iniciar navegación\n  const startNavigation = () => {\n    if (!selectedZona || !userPosition) {\n      alert('Debes activar el GPS y seleccionar una zona primero');\n      return;\n    }\n    setIsNavigating(true);\n    setWorkStatus('traveling');\n    setWorkLog({\n      ...workLog,\n      startTime: new Date().toISOString(),\n      zona: selectedZona\n    });\n\n    // Calcular y mostrar ruta\n    const request = {\n      origin: userPosition,\n      destination: {\n        lat: selectedZona.lat,\n        lng: selectedZona.lng\n      },\n      travelMode: window.google.maps.TravelMode.DRIVING\n    };\n    directionsServiceRef.current.route(request, (result, status) => {\n      if (status === 'OK') {\n        directionsRendererRef.current.setDirections(result);\n        const route = result.routes[0];\n        const leg = route.legs[0];\n        setDistance(leg.distance.text);\n        setDuration(leg.duration.text);\n      } else {\n        alert('No se pudo calcular la ruta: ' + status);\n      }\n    });\n  };\n\n  // Manejar llegada a la zona\n  const handleArrival = () => {\n    setWorkStatus('working');\n    setWorkLog({\n      ...workLog,\n      arrivalTime: new Date().toISOString()\n    });\n    alert('¡Has llegado a la zona de trabajo! Puedes iniciar tu tarea.');\n  };\n\n  // Finalizar trabajo\n  const finishWork = () => {\n    const endTime = new Date().toISOString();\n    const finalLog = {\n      ...workLog,\n      endTime: endTime\n    };\n    setWorkLog(finalLog);\n    setWorkStatus('completed');\n    setIsNavigating(false);\n    setShowWorkLog(true);\n\n    // Limpiar ruta\n    if (directionsRendererRef.current) {\n      directionsRendererRef.current.setDirections({\n        routes: []\n      });\n    }\n\n    // Aquí podrías enviar los datos a Firebase\n    console.log('Registro de trabajo:', finalLog);\n  };\n\n  // Resetear para nuevo trabajo\n  const resetWork = () => {\n    setSelectedZona(null);\n    setWorkStatus('idle');\n    setWorkLog({\n      startTime: null,\n      arrivalTime: null,\n      endTime: null,\n      zona: null\n    });\n    setIsNavigating(false);\n    setDistance(null);\n    setDuration(null);\n    setShowWorkLog(false);\n    if (zonaMarkerRef.current) {\n      zonaMarkerRef.current.setMap(null);\n      zonaMarkerRef.current = null;\n    }\n    if (directionsRendererRef.current) {\n      directionsRendererRef.current.setDirections({\n        routes: []\n      });\n    }\n  };\n\n  // Formatear tiempo\n  const formatTime = isoString => {\n    if (!isoString) return '--:--';\n    const date = new Date(isoString);\n    return date.toLocaleTimeString('es-CL', {\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false\n    });\n  };\n\n  // Calcular duración\n  const calculateDuration = (start, end) => {\n    if (!start || !end) return '--';\n    const diff = new Date(end) - new Date(start);\n    const hours = Math.floor(diff / 3600000);\n    const minutes = Math.floor(diff % 3600000 / 60000);\n    return `${hours}h ${minutes}m`;\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: '20px',\n        textAlign: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.reload(),\n        children: \"Reintentar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      height: '100vh',\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        background: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\n        color: 'white',\n        padding: '15px 20px',\n        zIndex: 1000,\n        boxShadow: '0 2px 10px rgba(0,0,0,0.1)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          margin: 0,\n          fontSize: '20px',\n          fontWeight: '600'\n        },\n        children: \"\\uD83D\\uDC77\\u200D\\u2642\\uFE0F Panel del Trabajador\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: '4px 0 0 0',\n          fontSize: '14px',\n          opacity: 0.95\n        },\n        children: \"GPS y Navegaci\\xF3n a Zona de Trabajo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '70px',\n        left: '10px',\n        right: '10px',\n        background: 'white',\n        borderRadius: '12px',\n        padding: '15px',\n        boxShadow: '0 4px 20px rgba(0,0,0,0.1)',\n        zIndex: 1000,\n        maxWidth: '400px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '15px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleGPS,\n          style: {\n            width: '100%',\n            padding: '12px',\n            background: isTracking ? '#ef4444' : '#22c55e',\n            color: 'white',\n            border: 'none',\n            borderRadius: '8px',\n            fontSize: '16px',\n            fontWeight: '500',\n            cursor: 'pointer',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            gap: '8px'\n          },\n          children: isTracking ? '📍 Desactivar GPS' : '📍 Activar GPS'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 11\n        }, this), userPosition && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '8px',\n            fontSize: '12px',\n            color: '#666',\n            textAlign: 'center'\n          },\n          children: [\"\\uD83D\\uDCCD Ubicaci\\xF3n: \", userPosition.lat.toFixed(4), \", \", userPosition.lng.toFixed(4)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 9\n      }, this), isTracking && workStatus === 'idle' && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '15px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            marginBottom: '8px',\n            fontSize: '14px',\n            fontWeight: '500'\n          },\n          children: \"\\uD83C\\uDFD7\\uFE0F Seleccionar Zona de Trabajo:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: (selectedZona === null || selectedZona === void 0 ? void 0 : selectedZona.id) || '',\n          onChange: e => {\n            const zona = zonasDisponibles.find(z => z.id === parseInt(e.target.value));\n            if (zona) selectZona(zona);\n          },\n          style: {\n            width: '100%',\n            padding: '10px',\n            borderRadius: '6px',\n            border: '1px solid #ddd',\n            fontSize: '14px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"-- Seleccionar zona --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 15\n          }, this), zonasDisponibles.map(zona => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: zona.id,\n            children: [zona.nombre, \" - \", zona.direccion]\n          }, zona.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 11\n      }, this), selectedZona && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: '#f0f9ff',\n          padding: '12px',\n          borderRadius: '8px',\n          marginBottom: '15px',\n          border: '1px solid #bae6fd'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            margin: '0 0 8px 0',\n            color: '#0369a1',\n            fontSize: '14px'\n          },\n          children: \"Zona Seleccionada:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '13px',\n            color: '#333'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: selectedZona.nombre\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 53\n          }, this), \"\\uD83D\\uDCCD \", selectedZona.direccion, distance && duration && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '8px',\n              color: '#666'\n            },\n            children: [\"\\uD83D\\uDE97 \", distance, \" \\u2022 \\u23F1\\uFE0F \", duration]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 11\n      }, this), workStatus === 'idle' && selectedZona && userPosition && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startNavigation,\n        style: {\n          width: '100%',\n          padding: '12px',\n          background: '#3b82f6',\n          color: 'white',\n          border: 'none',\n          borderRadius: '8px',\n          fontSize: '16px',\n          fontWeight: '500',\n          cursor: 'pointer'\n        },\n        children: \"\\uD83D\\uDE97 Iniciar Recorrido\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 11\n      }, this), workStatus === 'traveling' && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: '#fef3c7',\n          padding: '12px',\n          borderRadius: '8px',\n          textAlign: 'center',\n          border: '1px solid #fde68a'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '16px',\n            fontWeight: '500',\n            color: '#92400e'\n          },\n          children: \"\\uD83D\\uDE97 En camino...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '12px',\n            marginTop: '4px',\n            color: '#78350f'\n          },\n          children: [\"Hora de salida: \", formatTime(workLog.startTime)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 11\n      }, this), workStatus === 'working' && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: '#dcfce7',\n            padding: '12px',\n            borderRadius: '8px',\n            marginBottom: '12px',\n            border: '1px solid #bbf7d0'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '16px',\n              fontWeight: '500',\n              color: '#14532d'\n            },\n            children: \"\\u2705 En zona de trabajo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              marginTop: '4px',\n              color: '#166534'\n            },\n            children: [\"Llegada: \", formatTime(workLog.arrivalTime)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: finishWork,\n          style: {\n            width: '100%',\n            padding: '12px',\n            background: '#dc2626',\n            color: 'white',\n            border: 'none',\n            borderRadius: '8px',\n            fontSize: '16px',\n            fontWeight: '500',\n            cursor: 'pointer'\n          },\n          children: \"\\uD83C\\uDFC1 Finalizar Trabajo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 11\n      }, this), workStatus === 'completed' && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: '#e0e7ff',\n            padding: '12px',\n            borderRadius: '8px',\n            marginBottom: '12px',\n            border: '1px solid #c7d2fe'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '16px',\n              fontWeight: '500',\n              color: '#312e81'\n            },\n            children: \"\\u2705 Trabajo Completado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowWorkLog(!showWorkLog),\n            style: {\n              marginTop: '8px',\n              padding: '6px 12px',\n              background: '#4f46e5',\n              color: 'white',\n              border: 'none',\n              borderRadius: '6px',\n              fontSize: '12px',\n              cursor: 'pointer'\n            },\n            children: \"\\uD83D\\uDCCB Ver Resumen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 614,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: resetWork,\n          style: {\n            width: '100%',\n            padding: '12px',\n            background: '#22c55e',\n            color: 'white',\n            border: 'none',\n            borderRadius: '8px',\n            fontSize: '16px',\n            fontWeight: '500',\n            cursor: 'pointer'\n          },\n          children: \"\\uD83D\\uDD04 Nuevo Trabajo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 7\n    }, this), showWorkLog && workLog.zona && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        background: 'rgba(0,0,0,0.5)',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        zIndex: 2000,\n        padding: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'white',\n          borderRadius: '12px',\n          padding: '20px',\n          maxWidth: '400px',\n          width: '100%',\n          maxHeight: '80vh',\n          overflow: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: '0 0 20px 0',\n            color: '#1f2937'\n          },\n          children: \"\\uD83D\\uDCCB Resumen del Trabajo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 674,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '14px',\n            lineHeight: '1.8'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '15px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Zona de trabajo:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 680,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 680,\n              columnNumber: 50\n            }, this), workLog.zona.nombre, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 681,\n              columnNumber: 38\n            }, this), \"\\uD83D\\uDCCD \", workLog.zona.direccion]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 679,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              background: '#f8fafc',\n              padding: '12px',\n              borderRadius: '8px',\n              marginBottom: '15px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\uD83D\\uDE97 Hora de salida:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 692,\n                columnNumber: 19\n              }, this), \" \", formatTime(workLog.startTime)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 691,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u2705 Hora de llegada:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 695,\n                columnNumber: 19\n              }, this), \" \", formatTime(workLog.arrivalTime)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 694,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: '8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\uD83C\\uDFC1 Hora de t\\xE9rmino:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 698,\n                columnNumber: 19\n              }, this), \" \", formatTime(workLog.endTime)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 697,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n              style: {\n                margin: '10px 0',\n                border: 'none',\n                borderTop: '1px solid #e5e7eb'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 700,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u23F1\\uFE0F Tiempo de viaje:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 702,\n                columnNumber: 19\n              }, this), \" \", calculateDuration(workLog.startTime, workLog.arrivalTime)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u23F1\\uFE0F Tiempo trabajado:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 705,\n                columnNumber: 19\n              }, this), \" \", calculateDuration(workLog.arrivalTime, workLog.endTime)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 704,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u23F1\\uFE0F Tiempo total:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 708,\n                columnNumber: 19\n              }, this), \" \", calculateDuration(workLog.startTime, workLog.endTime)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 707,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowWorkLog(false),\n            style: {\n              width: '100%',\n              padding: '10px',\n              background: '#6b7280',\n              color: 'white',\n              border: 'none',\n              borderRadius: '6px',\n              fontSize: '14px',\n              cursor: 'pointer'\n            },\n            children: \"Cerrar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 712,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 678,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 665,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 652,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      style: {\n        width: '100%',\n        height: '100%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 733,\n      columnNumber: 7\n    }, this), !mapLoaded && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        textAlign: 'center',\n        zIndex: 1001\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '50px',\n          height: '50px',\n          border: '4px solid #f3f3f3',\n          borderTop: '4px solid #22c55e',\n          borderRadius: '50%',\n          animation: 'spin 1s linear infinite'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginTop: '10px',\n          color: '#666'\n        },\n        children: \"Cargando mapa...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 759,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 743,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 763,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 403,\n    columnNumber: 5\n  }, this);\n};\n_s(SistemaTrabajadoresFirebase, \"G6bZl2YnCwrG/f8ZsmVgAvRqiW8=\");\n_c = SistemaTrabajadoresFirebase;\nexport default SistemaTrabajadoresFirebase;\nvar _c;\n$RefreshReg$(_c, \"SistemaTrabajadoresFirebase\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","zonasDisponibles","id","nombre","lat","lng","direccion","SistemaTrabajadoresFirebase","_s","mapRef","map","setMap","userPosition","setUserPosition","selectedZona","setSelectedZona","isTracking","setIsTracking","isNavigating","setIsNavigating","workStatus","setWorkStatus","workLog","setWorkLog","startTime","arrivalTime","endTime","zona","userMarkerRef","zonaMarkerRef","directionsServiceRef","directionsRendererRef","watchIdRef","mapLoaded","setMapLoaded","error","setError","distance","setDistance","duration","setDuration","showWorkLog","setShowWorkLog","API_KEY","loadGoogleMaps","Promise","resolve","reject","window","google","maps","existingScript","document","querySelector","addEventListener","Error","script","createElement","src","async","defer","onload","onerror","head","appendChild","initMap","current","mapInstance","Map","center","zoom","mapTypeId","zoomControl","mapTypeControl","scaleControl","streetViewControl","rotateControl","fullscreenControl","DirectionsService","DirectionsRenderer","suppressMarkers","polylineOptions","strokeColor","strokeWeight","strokeOpacity","err","message","toggleGPS","navigator","geolocation","clearWatch","alert","getCurrentPosition","position","pos","coords","latitude","longitude","updateUserPosition","console","enableHighAccuracy","timeout","maximumAge","watchPosition","Marker","title","icon","path","SymbolPath","CIRCLE","scale","fillColor","fillOpacity","zIndex","setCenter","setZoom","setPosition","geometry","spherical","computeDistanceBetween","LatLng","handleArrival","selectZona","BACKWARD_CLOSED_ARROW","bounds","LatLngBounds","extend","fitBounds","startNavigation","Date","toISOString","request","origin","destination","travelMode","TravelMode","DRIVING","route","result","status","setDirections","routes","leg","legs","text","finishWork","finalLog","log","resetWork","formatTime","isoString","date","toLocaleTimeString","hour","minute","hour12","calculateDuration","start","end","diff","hours","Math","floor","minutes","style","padding","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","location","reload","width","height","top","left","right","background","color","boxShadow","margin","fontSize","fontWeight","opacity","borderRadius","maxWidth","marginBottom","border","cursor","display","alignItems","justifyContent","gap","marginTop","toFixed","value","onChange","e","find","z","parseInt","target","bottom","maxHeight","overflow","lineHeight","borderTop","ref","transform","animation","jsx","_c","$RefreshReg$"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/SistemaTrabajadoresFirebase.js"],"sourcesContent":["// src/components/SistemaTrabajadoresFirebase.js\r\nimport React, { useEffect, useRef, useState } from 'react';\r\n\r\n// Zonas de trabajo disponibles (esto podría venir de Firebase)\r\nconst zonasDisponibles = [\r\n  { id: 1, nombre: \"Obra Sector Norte\", lat: -36.741, lng: -72.538, direccion: \"Av. Principal 123\" },\r\n  { id: 2, nombre: \"Reparación Puente\", lat: -36.728, lng: -72.470, direccion: \"Puente Los Aromos\" },\r\n  { id: 3, nombre: \"Pavimentación Ruta\", lat: -36.720, lng: -72.480, direccion: \"Ruta Q-45 Km 12\" },\r\n  { id: 4, nombre: \"Construcción Plaza\", lat: -36.735, lng: -72.465, direccion: \"Plaza Central\" },\r\n  { id: 5, nombre: \"Mantención Parque\", lat: -36.745, lng: -72.455, direccion: \"Parque Municipal\" },\r\n];\r\n\r\nconst SistemaTrabajadoresFirebase = () => {\r\n  // Estados principales\r\n  const mapRef = useRef(null);\r\n  const [map, setMap] = useState(null);\r\n  const [userPosition, setUserPosition] = useState(null);\r\n  const [selectedZona, setSelectedZona] = useState(null);\r\n  const [isTracking, setIsTracking] = useState(false);\r\n  const [isNavigating, setIsNavigating] = useState(false);\r\n  const [workStatus, setWorkStatus] = useState('idle'); // idle, traveling, working, completed\r\n  const [workLog, setWorkLog] = useState({\r\n    startTime: null,\r\n    arrivalTime: null,\r\n    endTime: null,\r\n    zona: null\r\n  });\r\n  \r\n  // Referencias para marcadores y servicios\r\n  const userMarkerRef = useRef(null);\r\n  const zonaMarkerRef = useRef(null);\r\n  const directionsServiceRef = useRef(null);\r\n  const directionsRendererRef = useRef(null);\r\n  const watchIdRef = useRef(null);\r\n  \r\n  // Estados de UI\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [distance, setDistance] = useState(null);\r\n  const [duration, setDuration] = useState(null);\r\n  const [showWorkLog, setShowWorkLog] = useState(false);\r\n\r\n  const API_KEY = 'AIzaSyA7DrdL36n5cx-RNzuXGAQggFeGCheHDbY';\r\n\r\n  // Función para cargar Google Maps\r\n  useEffect(() => {\r\n    const loadGoogleMaps = () => {\r\n      return new Promise((resolve, reject) => {\r\n        if (window.google && window.google.maps) {\r\n          resolve(window.google.maps);\r\n          return;\r\n        }\r\n\r\n        const existingScript = document.querySelector('script[src*=\"maps.googleapis.com\"]');\r\n        if (existingScript) {\r\n          existingScript.addEventListener('load', () => {\r\n            if (window.google && window.google.maps) {\r\n              resolve(window.google.maps);\r\n            } else {\r\n              reject(new Error('Google Maps no disponible'));\r\n            }\r\n          });\r\n          return;\r\n        }\r\n\r\n        const script = document.createElement('script');\r\n        script.src = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry&v=weekly`;\r\n        script.async = true;\r\n        script.defer = true;\r\n\r\n        script.onload = () => {\r\n          if (window.google && window.google.maps) {\r\n            resolve(window.google.maps);\r\n          } else {\r\n            reject(new Error('Google Maps no disponible'));\r\n          }\r\n        };\r\n\r\n        script.onerror = () => {\r\n          reject(new Error('Error al cargar Google Maps'));\r\n        };\r\n\r\n        document.head.appendChild(script);\r\n      });\r\n    };\r\n\r\n    const initMap = async () => {\r\n      try {\r\n        const maps = await loadGoogleMaps();\r\n        \r\n        if (!mapRef.current) return;\r\n\r\n        const mapInstance = new maps.Map(mapRef.current, {\r\n          center: { lat: -36.7333, lng: -72.4667 },\r\n          zoom: 13,\r\n          mapTypeId: 'roadmap',\r\n          zoomControl: true,\r\n          mapTypeControl: false,\r\n          scaleControl: false,\r\n          streetViewControl: false,\r\n          rotateControl: false,\r\n          fullscreenControl: true\r\n        });\r\n\r\n        setMap(mapInstance);\r\n        \r\n        // Inicializar servicios de direcciones\r\n        directionsServiceRef.current = new maps.DirectionsService();\r\n        directionsRendererRef.current = new maps.DirectionsRenderer({\r\n          map: mapInstance,\r\n          suppressMarkers: false,\r\n          polylineOptions: {\r\n            strokeColor: '#4285F4',\r\n            strokeWeight: 6,\r\n            strokeOpacity: 0.8\r\n          }\r\n        });\r\n\r\n        setMapLoaded(true);\r\n      } catch (err) {\r\n        setError('Error al cargar el mapa: ' + err.message);\r\n      }\r\n    };\r\n\r\n    initMap();\r\n  }, []);\r\n\r\n  // Función para activar/desactivar GPS\r\n  const toggleGPS = () => {\r\n    if (isTracking) {\r\n      // Detener tracking\r\n      if (watchIdRef.current) {\r\n        navigator.geolocation.clearWatch(watchIdRef.current);\r\n        watchIdRef.current = null;\r\n      }\r\n      setIsTracking(false);\r\n      \r\n      // Limpiar marcador de usuario\r\n      if (userMarkerRef.current) {\r\n        userMarkerRef.current.setMap(null);\r\n        userMarkerRef.current = null;\r\n      }\r\n      setUserPosition(null);\r\n    } else {\r\n      // Iniciar tracking\r\n      if (!navigator.geolocation) {\r\n        alert('Tu navegador no soporta geolocalización');\r\n        return;\r\n      }\r\n\r\n      setIsTracking(true);\r\n      \r\n      // Obtener posición inicial\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          const pos = {\r\n            lat: position.coords.latitude,\r\n            lng: position.coords.longitude\r\n          };\r\n          updateUserPosition(pos);\r\n        },\r\n        (error) => {\r\n          console.error('Error al obtener ubicación:', error);\r\n          alert('Error al obtener tu ubicación. Verifica los permisos de GPS.');\r\n          setIsTracking(false);\r\n        },\r\n        {\r\n          enableHighAccuracy: true,\r\n          timeout: 5000,\r\n          maximumAge: 0\r\n        }\r\n      );\r\n\r\n      // Seguimiento continuo\r\n      watchIdRef.current = navigator.geolocation.watchPosition(\r\n        (position) => {\r\n          const pos = {\r\n            lat: position.coords.latitude,\r\n            lng: position.coords.longitude\r\n          };\r\n          updateUserPosition(pos);\r\n        },\r\n        (error) => {\r\n          console.error('Error en tracking:', error);\r\n        },\r\n        {\r\n          enableHighAccuracy: true,\r\n          timeout: 5000,\r\n          maximumAge: 0\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  // Actualizar posición del usuario en el mapa\r\n  const updateUserPosition = (position) => {\r\n    setUserPosition(position);\r\n    \r\n    if (!map || !window.google) return;\r\n\r\n    // Crear o actualizar marcador del usuario\r\n    if (!userMarkerRef.current) {\r\n      userMarkerRef.current = new window.google.maps.Marker({\r\n        position: position,\r\n        map: map,\r\n        title: 'Tu ubicación',\r\n        icon: {\r\n          path: window.google.maps.SymbolPath.CIRCLE,\r\n          scale: 10,\r\n          fillColor: '#4285F4',\r\n          fillOpacity: 1,\r\n          strokeColor: '#ffffff',\r\n          strokeWeight: 3\r\n        },\r\n        zIndex: 1000\r\n      });\r\n      \r\n      // Centrar mapa en usuario\r\n      map.setCenter(position);\r\n      map.setZoom(15);\r\n    } else {\r\n      userMarkerRef.current.setPosition(position);\r\n    }\r\n\r\n    // Si está navegando, actualizar distancia\r\n    if (isNavigating && selectedZona) {\r\n      const distance = window.google.maps.geometry.spherical.computeDistanceBetween(\r\n        new window.google.maps.LatLng(position.lat, position.lng),\r\n        new window.google.maps.LatLng(selectedZona.lat, selectedZona.lng)\r\n      );\r\n      \r\n      // Si llegó al destino (menos de 50 metros)\r\n      if (distance < 50 && workStatus === 'traveling') {\r\n        handleArrival();\r\n      }\r\n    }\r\n  };\r\n\r\n  // Seleccionar zona de trabajo\r\n  const selectZona = (zona) => {\r\n    setSelectedZona(zona);\r\n    \r\n    if (!map || !window.google) return;\r\n\r\n    // Limpiar marcador anterior\r\n    if (zonaMarkerRef.current) {\r\n      zonaMarkerRef.current.setMap(null);\r\n    }\r\n\r\n    // Crear marcador de zona\r\n    zonaMarkerRef.current = new window.google.maps.Marker({\r\n      position: { lat: zona.lat, lng: zona.lng },\r\n      map: map,\r\n      title: zona.nombre,\r\n      icon: {\r\n        path: window.google.maps.SymbolPath.BACKWARD_CLOSED_ARROW,\r\n        scale: 8,\r\n        fillColor: '#22c55e',\r\n        fillOpacity: 1,\r\n        strokeColor: '#ffffff',\r\n        strokeWeight: 2\r\n      }\r\n    });\r\n\r\n    // Ajustar vista para mostrar ambos puntos\r\n    if (userPosition) {\r\n      const bounds = new window.google.maps.LatLngBounds();\r\n      bounds.extend(userPosition);\r\n      bounds.extend({ lat: zona.lat, lng: zona.lng });\r\n      map.fitBounds(bounds, 100);\r\n    } else {\r\n      map.setCenter({ lat: zona.lat, lng: zona.lng });\r\n      map.setZoom(15);\r\n    }\r\n  };\r\n\r\n  // Iniciar navegación\r\n  const startNavigation = () => {\r\n    if (!selectedZona || !userPosition) {\r\n      alert('Debes activar el GPS y seleccionar una zona primero');\r\n      return;\r\n    }\r\n\r\n    setIsNavigating(true);\r\n    setWorkStatus('traveling');\r\n    setWorkLog({\r\n      ...workLog,\r\n      startTime: new Date().toISOString(),\r\n      zona: selectedZona\r\n    });\r\n\r\n    // Calcular y mostrar ruta\r\n    const request = {\r\n      origin: userPosition,\r\n      destination: { lat: selectedZona.lat, lng: selectedZona.lng },\r\n      travelMode: window.google.maps.TravelMode.DRIVING\r\n    };\r\n\r\n    directionsServiceRef.current.route(request, (result, status) => {\r\n      if (status === 'OK') {\r\n        directionsRendererRef.current.setDirections(result);\r\n        \r\n        const route = result.routes[0];\r\n        const leg = route.legs[0];\r\n        \r\n        setDistance(leg.distance.text);\r\n        setDuration(leg.duration.text);\r\n      } else {\r\n        alert('No se pudo calcular la ruta: ' + status);\r\n      }\r\n    });\r\n  };\r\n\r\n  // Manejar llegada a la zona\r\n  const handleArrival = () => {\r\n    setWorkStatus('working');\r\n    setWorkLog({\r\n      ...workLog,\r\n      arrivalTime: new Date().toISOString()\r\n    });\r\n    \r\n    alert('¡Has llegado a la zona de trabajo! Puedes iniciar tu tarea.');\r\n  };\r\n\r\n  // Finalizar trabajo\r\n  const finishWork = () => {\r\n    const endTime = new Date().toISOString();\r\n    const finalLog = {\r\n      ...workLog,\r\n      endTime: endTime\r\n    };\r\n    \r\n    setWorkLog(finalLog);\r\n    setWorkStatus('completed');\r\n    setIsNavigating(false);\r\n    setShowWorkLog(true);\r\n    \r\n    // Limpiar ruta\r\n    if (directionsRendererRef.current) {\r\n      directionsRendererRef.current.setDirections({ routes: [] });\r\n    }\r\n    \r\n    // Aquí podrías enviar los datos a Firebase\r\n    console.log('Registro de trabajo:', finalLog);\r\n  };\r\n\r\n  // Resetear para nuevo trabajo\r\n  const resetWork = () => {\r\n    setSelectedZona(null);\r\n    setWorkStatus('idle');\r\n    setWorkLog({\r\n      startTime: null,\r\n      arrivalTime: null,\r\n      endTime: null,\r\n      zona: null\r\n    });\r\n    setIsNavigating(false);\r\n    setDistance(null);\r\n    setDuration(null);\r\n    setShowWorkLog(false);\r\n    \r\n    if (zonaMarkerRef.current) {\r\n      zonaMarkerRef.current.setMap(null);\r\n      zonaMarkerRef.current = null;\r\n    }\r\n    \r\n    if (directionsRendererRef.current) {\r\n      directionsRendererRef.current.setDirections({ routes: [] });\r\n    }\r\n  };\r\n\r\n  // Formatear tiempo\r\n  const formatTime = (isoString) => {\r\n    if (!isoString) return '--:--';\r\n    const date = new Date(isoString);\r\n    return date.toLocaleTimeString('es-CL', { \r\n      hour: '2-digit', \r\n      minute: '2-digit',\r\n      hour12: false \r\n    });\r\n  };\r\n\r\n  // Calcular duración\r\n  const calculateDuration = (start, end) => {\r\n    if (!start || !end) return '--';\r\n    const diff = new Date(end) - new Date(start);\r\n    const hours = Math.floor(diff / 3600000);\r\n    const minutes = Math.floor((diff % 3600000) / 60000);\r\n    return `${hours}h ${minutes}m`;\r\n  };\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{ padding: '20px', textAlign: 'center' }}>\r\n        <h2>Error</h2>\r\n        <p>{error}</p>\r\n        <button onClick={() => window.location.reload()}>Reintentar</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ width: '100%', height: '100vh', position: 'relative' }}>\r\n      {/* Encabezado */}\r\n      <div style={{\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        background: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)',\r\n        color: 'white',\r\n        padding: '15px 20px',\r\n        zIndex: 1000,\r\n        boxShadow: '0 2px 10px rgba(0,0,0,0.1)'\r\n      }}>\r\n        <h1 style={{ margin: 0, fontSize: '20px', fontWeight: '600' }}>\r\n          👷‍♂️ Panel del Trabajador\r\n        </h1>\r\n        <p style={{ margin: '4px 0 0 0', fontSize: '14px', opacity: 0.95 }}>\r\n          GPS y Navegación a Zona de Trabajo\r\n        </p>\r\n      </div>\r\n\r\n      {/* Panel de control principal */}\r\n      <div style={{\r\n        position: 'absolute',\r\n        top: '70px',\r\n        left: '10px',\r\n        right: '10px',\r\n        background: 'white',\r\n        borderRadius: '12px',\r\n        padding: '15px',\r\n        boxShadow: '0 4px 20px rgba(0,0,0,0.1)',\r\n        zIndex: 1000,\r\n        maxWidth: '400px'\r\n      }}>\r\n        {/* Activación GPS */}\r\n        <div style={{ marginBottom: '15px' }}>\r\n          <button\r\n            onClick={toggleGPS}\r\n            style={{\r\n              width: '100%',\r\n              padding: '12px',\r\n              background: isTracking ? '#ef4444' : '#22c55e',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              fontSize: '16px',\r\n              fontWeight: '500',\r\n              cursor: 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              gap: '8px'\r\n            }}\r\n          >\r\n            {isTracking ? '📍 Desactivar GPS' : '📍 Activar GPS'}\r\n          </button>\r\n          {userPosition && (\r\n            <div style={{ \r\n              marginTop: '8px', \r\n              fontSize: '12px', \r\n              color: '#666',\r\n              textAlign: 'center'\r\n            }}>\r\n              📍 Ubicación: {userPosition.lat.toFixed(4)}, {userPosition.lng.toFixed(4)}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Selector de zona */}\r\n        {isTracking && workStatus === 'idle' && (\r\n          <div style={{ marginBottom: '15px' }}>\r\n            <label style={{ \r\n              display: 'block', \r\n              marginBottom: '8px', \r\n              fontSize: '14px', \r\n              fontWeight: '500' \r\n            }}>\r\n              🏗️ Seleccionar Zona de Trabajo:\r\n            </label>\r\n            <select\r\n              value={selectedZona?.id || ''}\r\n              onChange={(e) => {\r\n                const zona = zonasDisponibles.find(z => z.id === parseInt(e.target.value));\r\n                if (zona) selectZona(zona);\r\n              }}\r\n              style={{\r\n                width: '100%',\r\n                padding: '10px',\r\n                borderRadius: '6px',\r\n                border: '1px solid #ddd',\r\n                fontSize: '14px'\r\n              }}\r\n            >\r\n              <option value=\"\">-- Seleccionar zona --</option>\r\n              {zonasDisponibles.map(zona => (\r\n                <option key={zona.id} value={zona.id}>\r\n                  {zona.nombre} - {zona.direccion}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        )}\r\n\r\n        {/* Información de zona seleccionada */}\r\n        {selectedZona && (\r\n          <div style={{\r\n            background: '#f0f9ff',\r\n            padding: '12px',\r\n            borderRadius: '8px',\r\n            marginBottom: '15px',\r\n            border: '1px solid #bae6fd'\r\n          }}>\r\n            <h4 style={{ margin: '0 0 8px 0', color: '#0369a1', fontSize: '14px' }}>\r\n              Zona Seleccionada:\r\n            </h4>\r\n            <div style={{ fontSize: '13px', color: '#333' }}>\r\n              <strong>{selectedZona.nombre}</strong><br/>\r\n              📍 {selectedZona.direccion}\r\n              {distance && duration && (\r\n                <div style={{ marginTop: '8px', color: '#666' }}>\r\n                  🚗 {distance} • ⏱️ {duration}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Botones de acción según estado */}\r\n        {workStatus === 'idle' && selectedZona && userPosition && (\r\n          <button\r\n            onClick={startNavigation}\r\n            style={{\r\n              width: '100%',\r\n              padding: '12px',\r\n              background: '#3b82f6',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '8px',\r\n              fontSize: '16px',\r\n              fontWeight: '500',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            🚗 Iniciar Recorrido\r\n          </button>\r\n        )}\r\n\r\n        {workStatus === 'traveling' && (\r\n          <div style={{\r\n            background: '#fef3c7',\r\n            padding: '12px',\r\n            borderRadius: '8px',\r\n            textAlign: 'center',\r\n            border: '1px solid #fde68a'\r\n          }}>\r\n            <div style={{ fontSize: '16px', fontWeight: '500', color: '#92400e' }}>\r\n              🚗 En camino...\r\n            </div>\r\n            <div style={{ fontSize: '12px', marginTop: '4px', color: '#78350f' }}>\r\n              Hora de salida: {formatTime(workLog.startTime)}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {workStatus === 'working' && (\r\n          <div>\r\n            <div style={{\r\n              background: '#dcfce7',\r\n              padding: '12px',\r\n              borderRadius: '8px',\r\n              marginBottom: '12px',\r\n              border: '1px solid #bbf7d0'\r\n            }}>\r\n              <div style={{ fontSize: '16px', fontWeight: '500', color: '#14532d' }}>\r\n                ✅ En zona de trabajo\r\n              </div>\r\n              <div style={{ fontSize: '12px', marginTop: '4px', color: '#166534' }}>\r\n                Llegada: {formatTime(workLog.arrivalTime)}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={finishWork}\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                background: '#dc2626',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '8px',\r\n                fontSize: '16px',\r\n                fontWeight: '500',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              🏁 Finalizar Trabajo\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {workStatus === 'completed' && (\r\n          <div>\r\n            <div style={{\r\n              background: '#e0e7ff',\r\n              padding: '12px',\r\n              borderRadius: '8px',\r\n              marginBottom: '12px',\r\n              border: '1px solid #c7d2fe'\r\n            }}>\r\n              <div style={{ fontSize: '16px', fontWeight: '500', color: '#312e81' }}>\r\n                ✅ Trabajo Completado\r\n              </div>\r\n              <button\r\n                onClick={() => setShowWorkLog(!showWorkLog)}\r\n                style={{\r\n                  marginTop: '8px',\r\n                  padding: '6px 12px',\r\n                  background: '#4f46e5',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  fontSize: '12px',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                📋 Ver Resumen\r\n              </button>\r\n            </div>\r\n            <button\r\n              onClick={resetWork}\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                background: '#22c55e',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '8px',\r\n                fontSize: '16px',\r\n                fontWeight: '500',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              🔄 Nuevo Trabajo\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modal de resumen de trabajo */}\r\n      {showWorkLog && workLog.zona && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          background: 'rgba(0,0,0,0.5)',\r\n          display: 'flex',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          zIndex: 2000,\r\n          padding: '20px'\r\n        }}>\r\n          <div style={{\r\n            background: 'white',\r\n            borderRadius: '12px',\r\n            padding: '20px',\r\n            maxWidth: '400px',\r\n            width: '100%',\r\n            maxHeight: '80vh',\r\n            overflow: 'auto'\r\n          }}>\r\n            <h3 style={{ margin: '0 0 20px 0', color: '#1f2937' }}>\r\n              📋 Resumen del Trabajo\r\n            </h3>\r\n            \r\n            <div style={{ fontSize: '14px', lineHeight: '1.8' }}>\r\n              <div style={{ marginBottom: '15px' }}>\r\n                <strong>Zona de trabajo:</strong><br/>\r\n                {workLog.zona.nombre}<br/>\r\n                📍 {workLog.zona.direccion}\r\n              </div>\r\n              \r\n              <div style={{\r\n                background: '#f8fafc',\r\n                padding: '12px',\r\n                borderRadius: '8px',\r\n                marginBottom: '15px'\r\n              }}>\r\n                <div style={{ marginBottom: '8px' }}>\r\n                  <strong>🚗 Hora de salida:</strong> {formatTime(workLog.startTime)}\r\n                </div>\r\n                <div style={{ marginBottom: '8px' }}>\r\n                  <strong>✅ Hora de llegada:</strong> {formatTime(workLog.arrivalTime)}\r\n                </div>\r\n                <div style={{ marginBottom: '8px' }}>\r\n                  <strong>🏁 Hora de término:</strong> {formatTime(workLog.endTime)}\r\n                </div>\r\n                <hr style={{ margin: '10px 0', border: 'none', borderTop: '1px solid #e5e7eb' }}/>\r\n                <div>\r\n                  <strong>⏱️ Tiempo de viaje:</strong> {calculateDuration(workLog.startTime, workLog.arrivalTime)}\r\n                </div>\r\n                <div>\r\n                  <strong>⏱️ Tiempo trabajado:</strong> {calculateDuration(workLog.arrivalTime, workLog.endTime)}\r\n                </div>\r\n                <div>\r\n                  <strong>⏱️ Tiempo total:</strong> {calculateDuration(workLog.startTime, workLog.endTime)}\r\n                </div>\r\n              </div>\r\n              \r\n              <button\r\n                onClick={() => setShowWorkLog(false)}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '10px',\r\n                  background: '#6b7280',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  fontSize: '14px',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                Cerrar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Mapa */}\r\n      <div \r\n        ref={mapRef}\r\n        style={{ \r\n          width: '100%', \r\n          height: '100%'\r\n        }} \r\n      />\r\n      \r\n      {/* Indicador de carga */}\r\n      {!mapLoaded && (\r\n        <div style={{\r\n          position: 'absolute',\r\n          top: '50%',\r\n          left: '50%',\r\n          transform: 'translate(-50%, -50%)',\r\n          textAlign: 'center',\r\n          zIndex: 1001\r\n        }}>\r\n          <div style={{\r\n            width: '50px',\r\n            height: '50px',\r\n            border: '4px solid #f3f3f3',\r\n            borderTop: '4px solid #22c55e',\r\n            borderRadius: '50%',\r\n            animation: 'spin 1s linear infinite'\r\n          }}></div>\r\n          <p style={{ marginTop: '10px', color: '#666' }}>Cargando mapa...</p>\r\n        </div>\r\n      )}\r\n\r\n      <style jsx>{`\r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SistemaTrabajadoresFirebase;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
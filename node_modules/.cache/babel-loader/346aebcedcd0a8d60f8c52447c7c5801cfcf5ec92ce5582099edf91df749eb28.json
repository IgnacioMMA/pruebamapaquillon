{"ast":null,"code":"// src/components/MapaQuillonFirebase.js\nimport React,{useEffect,useRef,useState}from'react';import{vehiculosService,zonasService,trabajadoresService,reportesService}from'../services/firebaseservices';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MapaQuillonFirebase=_ref=>{let{currentUser,onLogout,onViewChange,currentView='dashboard'}=_ref;// Estados principales\nconst mapRef=useRef(null);const[map,setMap]=useState(null);const[vehiculos,setVehiculos]=useState([]);const[zonas,setZonas]=useState([]);const[trabajadores,setTrabajadores]=useState([]);const[stats,setStats]=useState({vehiculos:{total:0,activos:0,enMantenimiento:0,enUso:0},zonas:{total:0,activas:0,completadas:0,pendientes:0},trabajadores:{total:0,enRuta:0,trabajando:0,disponibles:0}});// Estados UI mejorados para m√≥vil\nconst[selectedItem,setSelectedItem]=useState(null);const[filterType,setFilterType]=useState('all');const[showSidebar,setShowSidebar]=useState(false);// Cambiado a false por defecto en m√≥vil\nconst[showLegend,setShowLegend]=useState(false);// Oculto por defecto en m√≥vil\nconst[mapLoaded,setMapLoaded]=useState(false);const[isMobile,setIsMobile]=useState(false);const[activeTab,setActiveTab]=useState('resumen');// Nuevo: tab activo\nconst[showMobilePanel,setShowMobilePanel]=useState(true);const[centerOnUser,setCenterOnUser]=useState(false);const[showQuickActions,setShowQuickActions]=useState(false);const[selectedCategory,setSelectedCategory]=useState('all');// Para filtros r√°pidos\n// Referencias para marcadores\nconst markersRef=useRef({vehiculos:{},zonas:{},trabajadores:{}});const infoWindowRef=useRef(null);const API_KEY='AIzaSyA7DrdL36n5cx-RNzuXGAQggFeGCheHDbY';// Detectar si es m√≥vil\nuseEffect(()=>{const checkMobile=()=>{const mobile=window.innerWidth<=768;setIsMobile(mobile);if(mobile){setShowSidebar(false);setShowLegend(false);}};checkMobile();window.addEventListener('resize',checkMobile);return()=>window.removeEventListener('resize',checkMobile);},[]);// Cargar Google Maps\nuseEffect(()=>{const loadGoogleMaps=()=>{return new Promise((resolve,reject)=>{if(window.google&&window.google.maps){resolve(window.google.maps);return;}const existingScript=document.querySelector('script[src*=\"maps.googleapis.com\"]');if(existingScript){existingScript.addEventListener('load',()=>{resolve(window.google.maps);});return;}const script=document.createElement('script');script.src=`https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry&v=weekly`;script.async=true;script.defer=true;script.onload=()=>resolve(window.google.maps);script.onerror=reject;document.head.appendChild(script);});};const initMap=async()=>{try{const maps=await loadGoogleMaps();if(!mapRef.current)return;const mapInstance=new maps.Map(mapRef.current,{center:{lat:-36.7333,lng:-72.4667},zoom:13,mapTypeId:'roadmap',zoomControl:!isMobile,mapTypeControl:false,scaleControl:false,streetViewControl:false,rotateControl:false,fullscreenControl:true,gestureHandling:isMobile?'greedy':'auto',styles:isMobile?[{featureType:\"poi\",elementType:\"labels\",stylers:[{visibility:\"off\"}]}]:[]});setMap(mapInstance);// Crear InfoWindow compartida\ninfoWindowRef.current=new maps.InfoWindow();// Agregar bot√≥n de centrar en ubicaci√≥n actual mejorado\nconst locationButton=document.createElement('button');locationButton.innerHTML=`\n          <div style=\"\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            border-radius: 50%;\n            width: 48px;\n            height: 48px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n            cursor: pointer;\n          \">\n            <span style=\"font-size: 24px;\">üìç</span>\n          </div>\n        `;locationButton.style.cssText='border: none; background: none; padding: 0; margin: 12px;';locationButton.title='Mi ubicaci√≥n';mapInstance.controls[maps.ControlPosition.RIGHT_BOTTOM].push(locationButton);locationButton.addEventListener('click',()=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{const pos={lat:position.coords.latitude,lng:position.coords.longitude};mapInstance.setCenter(pos);mapInstance.setZoom(15);// Agregar marcador de ubicaci√≥n actual\nnew maps.Marker({position:pos,map:mapInstance,icon:{path:maps.SymbolPath.CIRCLE,scale:8,fillColor:'#4285F4',fillOpacity:1,strokeColor:'#ffffff',strokeWeight:3},animation:maps.Animation.DROP});},()=>{console.log('Error al obtener ubicaci√≥n');});}});setMapLoaded(true);}catch(err){console.error('Error al cargar el mapa:',err);}};initMap();},[isMobile]);// Cargar datos desde Firebase\nuseEffect(()=>{// Suscribirse a veh√≠culos\nconst unsubVehiculos=vehiculosService.subscribeToVehiculos(data=>{setVehiculos(data);updateMarkers('vehiculos',data);});// Suscribirse a zonas asignadas\nconst unsubZonas=zonasService.subscribeToZonasAsignadas(data=>{setZonas(data);updateMarkers('zonas',data);});// Suscribirse a trabajadores\nconst unsubTrabajadores=trabajadoresService.subscribeToTrabajadores(data=>{setTrabajadores(data);updateMarkers('trabajadores',data);});// Obtener estad√≠sticas en tiempo real\nreportesService.getRealtimeStats(statsData=>{setStats(statsData);});return()=>{unsubVehiculos();unsubZonas();unsubTrabajadores();};},[]);// Actualizar marcadores en el mapa\nconst updateMarkers=(type,data)=>{if(!map||!window.google)return;// Limpiar marcadores anteriores\nObject.values(markersRef.current[type]).forEach(marker=>marker.setMap(null));markersRef.current[type]={};// Filtrar seg√∫n el tipo seleccionado\nif(filterType!=='all'&&filterType!==type)return;data.forEach(item=>{let position,icon,title,content;switch(type){case'vehiculos':if(!item.lat||!item.lng)return;position={lat:item.lat,lng:item.lng};icon={url:item.tipo==='maquinaria'?'https://maps.google.com/mapfiles/kml/shapes/mechanic.png':'https://maps.google.com/mapfiles/kml/shapes/cabs.png',scaledSize:new window.google.maps.Size(32,32)};title=item.nombre;content=`\n            <div style=\"padding: 12px; min-width: 220px;\">\n              <h3 style=\"margin: 0 0 8px 0; font-size: 16px; color: #1f2937;\">\n                ${item.tipo==='maquinaria'?'üèóÔ∏è':'üöó'} ${item.nombre}\n              </h3>\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Estado:</strong> ${item.estado}</p>\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Patente:</strong> ${item.patente||'N/A'}</p>\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Operador:</strong> ${item.operadorAsignado||'Sin asignar'}</p>\n            </div>\n          `;break;case'zonas':if(!item.lat||!item.lng)return;position={lat:item.lat,lng:item.lng};icon={path:window.google.maps.SymbolPath.CIRCLE,scale:14,fillColor:item.estado==='completado'?'#22c55e':item.estado==='en_progreso'?'#3b82f6':'#f59e0b',fillOpacity:0.9,strokeColor:'#ffffff',strokeWeight:3};title=item.nombre;content=`\n            <div style=\"padding: 12px; min-width: 220px;\">\n              <h3 style=\"margin: 0 0 8px 0; font-size: 16px; color: #1f2937;\">\n                üèóÔ∏è ${item.nombre}\n              </h3>\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Estado:</strong> ${item.estado}</p>\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Direcci√≥n:</strong> ${item.direccion}</p>\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Trabajador:</strong> ${item.trabajadorAsignado||'Sin asignar'}</p>\n            </div>\n          `;break;case'trabajadores':if(!item.ubicacion||!item.ubicacion.lat||!item.ubicacion.lng)return;position={lat:item.ubicacion.lat,lng:item.ubicacion.lng};// Solo mostrar trabajadores con GPS activo (√∫ltima actualizaci√≥n < 5 min)\nconst lastUpdate=new Date(item.ubicacion.timestamp);const now=new Date();const diffMinutes=(now-lastUpdate)/60000;if(diffMinutes>5)return;icon={path:window.google.maps.SymbolPath.FORWARD_CLOSED_ARROW,scale:10,fillColor:item.estado==='trabajando'?'#22c55e':item.estado==='en_camino'?'#f59e0b':'#6b7280',fillOpacity:1,strokeColor:'#ffffff',strokeWeight:3,rotation:0};title=item.nombre;content=`\n            <div style=\"padding: 12px; min-width: 220px;\">\n              <h3 style=\"margin: 0 0 8px 0; font-size: 16px; color: #1f2937;\">\n                üë∑ ${item.nombre}\n              </h3>\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Estado:</strong> ${item.estado}</p>\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Zona:</strong> ${item.zonaDestino||'Sin asignar'}</p>\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>√öltima actualizaci√≥n:</strong> ${new Date(item.ubicacion.timestamp).toLocaleTimeString('es-CL')}</p>\n            </div>\n          `;break;default:return;}const marker=new window.google.maps.Marker({position,map,title,icon,animation:window.google.maps.Animation.DROP});marker.addListener('click',()=>{infoWindowRef.current.setContent(content);infoWindowRef.current.open(map,marker);setSelectedItem(item);});markersRef.current[type][item.id]=marker;});};// Centrar mapa en item seleccionado\nconst centerOnItem=(item,type)=>{if(!map||!item)return;let position;switch(type){case'vehiculos':case'zonas':if(item.lat&&item.lng){position={lat:item.lat,lng:item.lng};}break;case'trabajadores':if(item.ubicacion&&item.ubicacion.lat&&item.ubicacion.lng){position={lat:item.ubicacion.lat,lng:item.ubicacion.lng};}break;}if(position){map.panTo(position);map.setZoom(16);// Abrir InfoWindow\nconst marker=markersRef.current[type][item.id];if(marker){window.google.maps.event.trigger(marker,'click');}}};// Cambiar filtro\nconst handleFilterChange=newFilter=>{setFilterType(newFilter);// Limpiar todos los marcadores\n['vehiculos','zonas','trabajadores'].forEach(type=>{Object.values(markersRef.current[type]).forEach(marker=>marker.setMap(null));markersRef.current[type]={};});// Volver a crear marcadores seg√∫n el filtro\nif(newFilter==='all'||newFilter==='vehiculos'){updateMarkers('vehiculos',vehiculos);}if(newFilter==='all'||newFilter==='zonas'){updateMarkers('zonas',zonas);}if(newFilter==='all'||newFilter==='trabajadores'){updateMarkers('trabajadores',trabajadores);}};// Funci√≥n para obtener el color del estado\nconst getStatusColor=estado=>{switch(estado){case'disponible':return'#22c55e';case'en_uso':return'#3b82f6';case'mantenimiento':return'#f59e0b';case'trabajando':return'#22c55e';case'en_camino':return'#f59e0b';case'completado':return'#22c55e';case'en_progreso':return'#3b82f6';case'pendiente':return'#f59e0b';default:return'#6b7280';}};// Estilos mejorados para m√≥vil\nconst styles={container:{width:'100%',height:'100vh',display:'flex',flexDirection:'column',background:'#f8f9fa',position:'relative'},header:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white',padding:isMobile?'12px 16px':'15px 20px',boxShadow:'0 4px 20px rgba(0,0,0,0.15)',zIndex:1000,position:'relative'},headerContent:{display:'flex',justifyContent:'space-between',alignItems:'center',gap:'10px'},headerLeft:{display:'flex',alignItems:'center',gap:'12px'},menuButton:{width:'40px',height:'40px',background:'rgba(255,255,255,0.2)',border:'none',borderRadius:'10px',color:'white',fontSize:'20px',display:'flex',alignItems:'center',justifyContent:'center',cursor:'pointer',transition:'all 0.3s'},title:{margin:0,fontSize:isMobile?'18px':'24px',fontWeight:'600',letterSpacing:'-0.5px'},subtitle:{fontSize:'11px',opacity:0.9,marginTop:'2px'},userInfo:{display:'flex',alignItems:'center',gap:'10px'},userAvatar:{width:'32px',height:'32px',borderRadius:'50%',background:'rgba(255,255,255,0.3)',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'14px'},logoutButton:{padding:isMobile?'8px':'8px 16px',background:'rgba(239, 68, 68, 0.9)',color:'white',border:'none',borderRadius:'8px',fontSize:isMobile?'20px':'14px',cursor:'pointer',display:'flex',alignItems:'center',gap:'6px',transition:'all 0.3s'},mainContent:{flex:1,display:'flex',position:'relative',overflow:'hidden'},mobileBottomSheet:{position:'fixed',bottom:0,left:0,right:0,background:'white',borderTopLeftRadius:'24px',borderTopRightRadius:'24px',boxShadow:'0 -4px 20px rgba(0,0,0,0.1)',zIndex:1001,transition:'transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)',maxHeight:'70vh',transform:showMobilePanel?'translateY(0)':'translateY(calc(100% - 60px))'},bottomSheetHandle:{width:'40px',height:'4px',background:'#cbd5e1',borderRadius:'2px',margin:'12px auto',cursor:'pointer'},bottomSheetHeader:{padding:'0 20px 16px',borderBottom:'1px solid #f1f5f9'},quickStats:{display:'grid',gridTemplateColumns:'repeat(3, 1fr)',gap:'12px',padding:'16px'},statCard:{background:'linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)',borderRadius:'16px',padding:'16px',textAlign:'center',border:'1px solid #e2e8f0',cursor:'pointer',transition:'all 0.3s',position:'relative',overflow:'hidden'},statCardActive:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white',transform:'scale(1.05)',boxShadow:'0 8px 24px rgba(102, 126, 234, 0.3)'},statIcon:{fontSize:'28px',marginBottom:'8px'},statNumber:{fontSize:'24px',fontWeight:'bold',margin:'4px 0'},statLabel:{fontSize:'11px',opacity:0.8,textTransform:'uppercase',letterSpacing:'0.5px'},categoryTabs:{display:'flex',gap:'8px',padding:'0 16px 16px',overflowX:'auto',WebkitOverflowScrolling:'touch',scrollbarWidth:'none',msOverflowStyle:'none'},categoryTab:{padding:'10px 20px',background:'#f1f5f9',border:'none',borderRadius:'12px',fontSize:'14px',fontWeight:'500',color:'#64748b',cursor:'pointer',whiteSpace:'nowrap',transition:'all 0.3s',display:'flex',alignItems:'center',gap:'6px'},categoryTabActive:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white',transform:'scale(1.05)'},listContainer:{padding:'16px',overflowY:'auto',maxHeight:'300px'},listItem:{background:'white',borderRadius:'16px',padding:'16px',marginBottom:'12px',border:'1px solid #e2e8f0',cursor:'pointer',transition:'all 0.3s',display:'flex',alignItems:'center',gap:'12px'},listItemIcon:{width:'48px',height:'48px',borderRadius:'12px',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'24px',flexShrink:0},listItemContent:{flex:1,minWidth:0},listItemTitle:{fontSize:'15px',fontWeight:'600',color:'#1e293b',marginBottom:'4px',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis'},listItemSubtitle:{fontSize:'13px',color:'#64748b',display:'flex',alignItems:'center',gap:'8px'},listItemStatus:{padding:'4px 10px',borderRadius:'8px',fontSize:'11px',fontWeight:'600',textTransform:'uppercase',letterSpacing:'0.5px'},floatingActionButton:{position:'fixed',bottom:isMobile?'80px':'24px',right:'24px',width:'56px',height:'56px',borderRadius:'50%',background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white',border:'none',fontSize:'24px',cursor:'pointer',boxShadow:'0 8px 24px rgba(102, 126, 234, 0.4)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:999,transition:'all 0.3s'},quickActionsMenu:{position:'fixed',bottom:isMobile?'148px':'92px',right:'24px',background:'white',borderRadius:'16px',padding:'8px',boxShadow:'0 8px 32px rgba(0,0,0,0.15)',zIndex:998,minWidth:'200px',transform:showQuickActions?'scale(1) translateY(0)':'scale(0.8) translateY(20px)',opacity:showQuickActions?1:0,transition:'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',pointerEvents:showQuickActions?'auto':'none'},quickActionItem:{padding:'12px 16px',borderRadius:'12px',cursor:'pointer',transition:'all 0.2s',display:'flex',alignItems:'center',gap:'12px',fontSize:'14px',color:'#1e293b'},map:{width:'100%',height:'100%',position:'absolute',top:0,left:0},mapOverlayTop:{position:'absolute',top:'10px',left:'10px',right:'10px',display:'flex',gap:'8px',zIndex:100},filterChip:{padding:'8px 16px',background:'white',border:'none',borderRadius:'20px',fontSize:'13px',fontWeight:'500',cursor:'pointer',boxShadow:'0 2px 8px rgba(0,0,0,0.1)',transition:'all 0.3s',display:'flex',alignItems:'center',gap:'6px'},filterChipActive:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white'}};// Componente de tarjeta de estad√≠stica mejorado\nconst StatCard=_ref2=>{let{icon,number,label,color,active,onClick}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{style:{...styles.statCard,...(active?styles.statCardActive:{}),background:active?`linear-gradient(135deg, ${color}dd 0%, ${color} 100%)`:styles.statCard.background},onClick:onClick,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.statIcon,children:icon}),/*#__PURE__*/_jsx(\"div\",{style:{...styles.statNumber,color:active?'white':'#1e293b'},children:number}),/*#__PURE__*/_jsx(\"div\",{style:{...styles.statLabel,color:active?'white':'#64748b'},children:label})]});};// Componente de item de lista mejorado\nconst ListItem=_ref3=>{let{icon,title,subtitle,status,statusColor,onClick}=_ref3;return/*#__PURE__*/_jsxs(\"div\",{style:styles.listItem,onClick:onClick,children:[/*#__PURE__*/_jsx(\"div\",{style:{...styles.listItemIcon,background:`${statusColor}20`},children:icon}),/*#__PURE__*/_jsxs(\"div\",{style:styles.listItemContent,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.listItemTitle,children:title}),/*#__PURE__*/_jsx(\"div\",{style:styles.listItemSubtitle,children:subtitle})]}),/*#__PURE__*/_jsx(\"div\",{style:{...styles.listItemStatus,background:`${statusColor}20`,color:statusColor},children:status})]});};// Renderizar vista m√≥vil\nif(isMobile&&(currentUser===null||currentUser===void 0?void 0:currentUser.role)==='admin'){return/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.header,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.headerContent,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.headerLeft,children:[/*#__PURE__*/_jsx(\"button\",{style:styles.menuButton,onClick:()=>setShowMobilePanel(!showMobilePanel),children:showMobilePanel?'üìä':'‚ò∞'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:styles.title,children:\"Control GPS\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.subtitle,children:\"Centro de comando\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.userInfo,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.userAvatar,children:\"\\uD83D\\uDC64\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,style:styles.logoutButton,children:\"\\uD83D\\uDEAA\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mainContent,children:[/*#__PURE__*/_jsx(\"div\",{ref:mapRef,style:styles.map}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mapOverlayTop,children:[/*#__PURE__*/_jsx(\"button\",{style:{...styles.filterChip,...(filterType==='all'?styles.filterChipActive:{})},onClick:()=>handleFilterChange('all'),children:\"\\uD83C\\uDF10 Todo\"}),/*#__PURE__*/_jsx(\"button\",{style:{...styles.filterChip,...(filterType==='vehiculos'?styles.filterChipActive:{})},onClick:()=>handleFilterChange('vehiculos'),children:\"\\uD83D\\uDE9B Veh\\xEDculos\"}),/*#__PURE__*/_jsx(\"button\",{style:{...styles.filterChip,...(filterType==='zonas'?styles.filterChipActive:{})},onClick:()=>handleFilterChange('zonas'),children:\"\\uD83C\\uDFD7\\uFE0F Zonas\"}),/*#__PURE__*/_jsx(\"button\",{style:{...styles.filterChip,...(filterType==='trabajadores'?styles.filterChipActive:{})},onClick:()=>handleFilterChange('trabajadores'),children:\"\\uD83D\\uDC77 Personal\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileBottomSheet,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.bottomSheetHandle,onClick:()=>setShowMobilePanel(!showMobilePanel)}),/*#__PURE__*/_jsxs(\"div\",{style:styles.bottomSheetHeader,children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:'18px',fontWeight:'600',color:'#1e293b'},children:\"Centro de Control\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0 0',fontSize:'13px',color:'#64748b'},children:\"Monitoreo en tiempo real\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.quickStats,children:[/*#__PURE__*/_jsx(StatCard,{icon:\"\\uD83D\\uDE9B\",number:stats.vehiculos.activos,label:\"Activos\",color:\"#22c55e\",active:selectedCategory==='vehiculos',onClick:()=>{setSelectedCategory('vehiculos');handleFilterChange('vehiculos');}}),/*#__PURE__*/_jsx(StatCard,{icon:\"\\uD83C\\uDFD7\\uFE0F\",number:stats.zonas.activas,label:\"Zonas\",color:\"#3b82f6\",active:selectedCategory==='zonas',onClick:()=>{setSelectedCategory('zonas');handleFilterChange('zonas');}}),/*#__PURE__*/_jsx(StatCard,{icon:\"\\uD83D\\uDC77\",number:stats.trabajadores.enRuta+stats.trabajadores.trabajando,label:\"En Campo\",color:\"#f59e0b\",active:selectedCategory==='trabajadores',onClick:()=>{setSelectedCategory('trabajadores');handleFilterChange('trabajadores');}})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.categoryTabs,children:[/*#__PURE__*/_jsx(\"button\",{style:{...styles.categoryTab,...(activeTab==='resumen'?styles.categoryTabActive:{})},onClick:()=>setActiveTab('resumen'),children:\"\\uD83D\\uDCCA Resumen\"}),/*#__PURE__*/_jsxs(\"button\",{style:{...styles.categoryTab,...(activeTab==='vehiculos'?styles.categoryTabActive:{})},onClick:()=>{setActiveTab('vehiculos');handleFilterChange('vehiculos');},children:[\"\\uD83D\\uDE9B Veh\\xEDculos (\",vehiculos.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{style:{...styles.categoryTab,...(activeTab==='zonas'?styles.categoryTabActive:{})},onClick:()=>{setActiveTab('zonas');handleFilterChange('zonas');},children:[\"\\uD83C\\uDFD7\\uFE0F Zonas (\",zonas.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{style:{...styles.categoryTab,...(activeTab==='trabajadores'?styles.categoryTabActive:{})},onClick:()=>{setActiveTab('trabajadores');handleFilterChange('trabajadores');},children:[\"\\uD83D\\uDC77 Personal (\",trabajadores.length,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.listContainer,children:[activeTab==='resumen'&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'16px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 12px',fontSize:'14px',color:'#64748b',textTransform:'uppercase'},children:\"Actividad Reciente\"}),[...vehiculos.slice(0,2),...zonas.slice(0,2)].map((item,index)=>/*#__PURE__*/_jsx(ListItem,{icon:item.tipo?'üöõ':'üèóÔ∏è',title:item.nombre,subtitle:item.direccion||item.patente||'Sin informaci√≥n',status:item.estado,statusColor:getStatusColor(item.estado),onClick:()=>centerOnItem(item,item.tipo?'vehiculos':'zonas')},index))]})}),activeTab==='vehiculos'&&vehiculos.map(vehiculo=>/*#__PURE__*/_jsx(ListItem,{icon:vehiculo.tipo==='maquinaria'?'üèóÔ∏è':'üöó',title:vehiculo.nombre,subtitle:`${vehiculo.marca||''} ${vehiculo.modelo||''} ‚Ä¢ ${vehiculo.patente||'Sin patente'}`,status:vehiculo.estado,statusColor:getStatusColor(vehiculo.estado),onClick:()=>centerOnItem(vehiculo,'vehiculos')},vehiculo.id)),activeTab==='zonas'&&zonas.map(zona=>/*#__PURE__*/_jsx(ListItem,{icon:\"\\uD83C\\uDFD7\\uFE0F\",title:zona.nombre,subtitle:zona.direccion,status:zona.estado||'pendiente',statusColor:getStatusColor(zona.estado),onClick:()=>centerOnItem(zona,'zonas')},zona.id)),activeTab==='trabajadores'&&trabajadores.filter(t=>t.ubicacion&&new Date()-new Date(t.ubicacion.timestamp)<300000).map(trabajador=>/*#__PURE__*/_jsx(ListItem,{icon:\"\\uD83D\\uDC77\",title:trabajador.nombre,subtitle:`${trabajador.zonaDestino||'Sin zona'} ‚Ä¢ Actualizado ${new Date(trabajador.ubicacion.timestamp).toLocaleTimeString('es-CL')}`,status:trabajador.estado,statusColor:getStatusColor(trabajador.estado),onClick:()=>centerOnItem(trabajador,'trabajadores')},trabajador.id))]})]}),/*#__PURE__*/_jsx(\"button\",{style:styles.floatingActionButton,onClick:()=>setShowQuickActions(!showQuickActions),children:showQuickActions?'‚úï':'‚ö°'}),/*#__PURE__*/_jsxs(\"div\",{style:styles.quickActionsMenu,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.quickActionItem,onClick:()=>{onViewChange('zones');setShowQuickActions(false);},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'20px'},children:\"\\uD83D\\uDDFA\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Gestionar Zonas\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.quickActionItem,onClick:()=>{onViewChange('fleet');setShowQuickActions(false);},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'20px'},children:\"\\uD83D\\uDE9B\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Panel de Flota\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.quickActionItem,onClick:()=>{const pos={lat:-36.7333,lng:-72.4667};map===null||map===void 0?void 0:map.setCenter(pos);map===null||map===void 0?void 0:map.setZoom(13);setShowQuickActions(false);},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'20px'},children:\"\\uD83C\\uDFAF\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Centrar Mapa\"})]})]}),!mapLoaded&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(255,255,255,0.9)',display:'flex',flexDirection:'column',justifyContent:'center',alignItems:'center',zIndex:9999},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'60px',height:'60px',border:'4px solid #e2e8f0',borderTop:'4px solid #667eea',borderRadius:'50%',animation:'spin 1s linear infinite'}}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'16px',color:'#64748b',fontSize:'14px'},children:\"Cargando mapa...\"})]})]});}// Renderizar vista desktop (mantener el dise√±o original para desktop)\nreturn/*#__PURE__*/_jsxs(\"div\",{style:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.header,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.headerContent,children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',gap:'10px'},children:/*#__PURE__*/_jsx(\"h1\",{style:styles.title,children:\"\\uD83D\\uDCCA Dashboard GPS\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',alignItems:'center'},children:[onViewChange&&/*#__PURE__*/_jsxs(_Fragment,{children:[(currentUser===null||currentUser===void 0?void 0:currentUser.role)==='superadmin'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('admin'),style:{padding:'8px 14px',background:'rgba(255,255,255,0.1)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'6px',cursor:'pointer',fontSize:'14px'},children:\"\\uD83D\\uDD10 Panel Admin\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('zones'),style:{padding:'8px 14px',background:'rgba(255,255,255,0.1)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'6px',cursor:'pointer',fontSize:'14px'},children:\"\\uD83D\\uDDFA\\uFE0F Gesti\\xF3n Zonas\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange('fleet'),style:{padding:'8px 14px',background:'rgba(255,255,255,0.1)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'6px',cursor:'pointer',fontSize:'14px'},children:\"\\uD83D\\uDE9B Panel Flota\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,style:styles.logoutButton,children:\"\\uD83D\\uDEAA Salir\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{style:styles.mainContent,children:/*#__PURE__*/_jsx(\"div\",{ref:mapRef,style:styles.map})}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        \n        @keyframes slideUp {\n          from {\n            transform: translateY(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateY(0);\n            opacity: 1;\n          }\n        }\n        \n        ::-webkit-scrollbar {\n          width: 0px;\n          background: transparent;\n        }\n      `})]});};export default MapaQuillonFirebase;","map":{"version":3,"names":["React","useEffect","useRef","useState","vehiculosService","zonasService","trabajadoresService","reportesService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MapaQuillonFirebase","_ref","currentUser","onLogout","onViewChange","currentView","mapRef","map","setMap","vehiculos","setVehiculos","zonas","setZonas","trabajadores","setTrabajadores","stats","setStats","total","activos","enMantenimiento","enUso","activas","completadas","pendientes","enRuta","trabajando","disponibles","selectedItem","setSelectedItem","filterType","setFilterType","showSidebar","setShowSidebar","showLegend","setShowLegend","mapLoaded","setMapLoaded","isMobile","setIsMobile","activeTab","setActiveTab","showMobilePanel","setShowMobilePanel","centerOnUser","setCenterOnUser","showQuickActions","setShowQuickActions","selectedCategory","setSelectedCategory","markersRef","infoWindowRef","API_KEY","checkMobile","mobile","window","innerWidth","addEventListener","removeEventListener","loadGoogleMaps","Promise","resolve","reject","google","maps","existingScript","document","querySelector","script","createElement","src","async","defer","onload","onerror","head","appendChild","initMap","current","mapInstance","Map","center","lat","lng","zoom","mapTypeId","zoomControl","mapTypeControl","scaleControl","streetViewControl","rotateControl","fullscreenControl","gestureHandling","styles","featureType","elementType","stylers","visibility","InfoWindow","locationButton","innerHTML","style","cssText","title","controls","ControlPosition","RIGHT_BOTTOM","push","navigator","geolocation","getCurrentPosition","position","pos","coords","latitude","longitude","setCenter","setZoom","Marker","icon","path","SymbolPath","CIRCLE","scale","fillColor","fillOpacity","strokeColor","strokeWeight","animation","Animation","DROP","console","log","err","error","unsubVehiculos","subscribeToVehiculos","data","updateMarkers","unsubZonas","subscribeToZonasAsignadas","unsubTrabajadores","subscribeToTrabajadores","getRealtimeStats","statsData","type","Object","values","forEach","marker","item","content","url","tipo","scaledSize","Size","nombre","estado","patente","operadorAsignado","direccion","trabajadorAsignado","ubicacion","lastUpdate","Date","timestamp","now","diffMinutes","FORWARD_CLOSED_ARROW","rotation","zonaDestino","toLocaleTimeString","addListener","setContent","open","id","centerOnItem","panTo","event","trigger","handleFilterChange","newFilter","getStatusColor","container","width","height","display","flexDirection","background","header","color","padding","boxShadow","zIndex","headerContent","justifyContent","alignItems","gap","headerLeft","menuButton","border","borderRadius","fontSize","cursor","transition","margin","fontWeight","letterSpacing","subtitle","opacity","marginTop","userInfo","userAvatar","logoutButton","mainContent","flex","overflow","mobileBottomSheet","bottom","left","right","borderTopLeftRadius","borderTopRightRadius","maxHeight","transform","bottomSheetHandle","bottomSheetHeader","borderBottom","quickStats","gridTemplateColumns","statCard","textAlign","statCardActive","statIcon","marginBottom","statNumber","statLabel","textTransform","categoryTabs","overflowX","WebkitOverflowScrolling","scrollbarWidth","msOverflowStyle","categoryTab","whiteSpace","categoryTabActive","listContainer","overflowY","listItem","listItemIcon","flexShrink","listItemContent","minWidth","listItemTitle","textOverflow","listItemSubtitle","listItemStatus","floatingActionButton","quickActionsMenu","pointerEvents","quickActionItem","top","mapOverlayTop","filterChip","filterChipActive","StatCard","_ref2","number","label","active","onClick","children","ListItem","_ref3","status","statusColor","role","ref","length","slice","index","vehiculo","marca","modelo","zona","filter","t","trabajador","borderTop"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/MapaQuillonFirebase.js"],"sourcesContent":["// src/components/MapaQuillonFirebase.js\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { vehiculosService, zonasService, trabajadoresService, reportesService } from '../services/firebaseservices';\r\n\r\nconst MapaQuillonFirebase = ({ currentUser, onLogout, onViewChange, currentView = 'dashboard' }) => {\r\n  // Estados principales\r\n  const mapRef = useRef(null);\r\n  const [map, setMap] = useState(null);\r\n  const [vehiculos, setVehiculos] = useState([]);\r\n  const [zonas, setZonas] = useState([]);\r\n  const [trabajadores, setTrabajadores] = useState([]);\r\n  const [stats, setStats] = useState({\r\n    vehiculos: { total: 0, activos: 0, enMantenimiento: 0, enUso: 0 },\r\n    zonas: { total: 0, activas: 0, completadas: 0, pendientes: 0 },\r\n    trabajadores: { total: 0, enRuta: 0, trabajando: 0, disponibles: 0 }\r\n  });\r\n  \r\n  // Estados UI mejorados para m√≥vil\r\n  const [selectedItem, setSelectedItem] = useState(null);\r\n  const [filterType, setFilterType] = useState('all');\r\n  const [showSidebar, setShowSidebar] = useState(false); // Cambiado a false por defecto en m√≥vil\r\n  const [showLegend, setShowLegend] = useState(false); // Oculto por defecto en m√≥vil\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [activeTab, setActiveTab] = useState('resumen'); // Nuevo: tab activo\r\n  const [showMobilePanel, setShowMobilePanel] = useState(true);\r\n  const [centerOnUser, setCenterOnUser] = useState(false);\r\n  const [showQuickActions, setShowQuickActions] = useState(false);\r\n  const [selectedCategory, setSelectedCategory] = useState('all'); // Para filtros r√°pidos\r\n  \r\n  // Referencias para marcadores\r\n  const markersRef = useRef({\r\n    vehiculos: {},\r\n    zonas: {},\r\n    trabajadores: {}\r\n  });\r\n  \r\n  const infoWindowRef = useRef(null);\r\n  const API_KEY = 'AIzaSyA7DrdL36n5cx-RNzuXGAQggFeGCheHDbY';\r\n\r\n  // Detectar si es m√≥vil\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      const mobile = window.innerWidth <= 768;\r\n      setIsMobile(mobile);\r\n      if (mobile) {\r\n        setShowSidebar(false);\r\n        setShowLegend(false);\r\n      }\r\n    };\r\n    \r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    \r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  // Cargar Google Maps\r\n  useEffect(() => {\r\n    const loadGoogleMaps = () => {\r\n      return new Promise((resolve, reject) => {\r\n        if (window.google && window.google.maps) {\r\n          resolve(window.google.maps);\r\n          return;\r\n        }\r\n\r\n        const existingScript = document.querySelector('script[src*=\"maps.googleapis.com\"]');\r\n        if (existingScript) {\r\n          existingScript.addEventListener('load', () => {\r\n            resolve(window.google.maps);\r\n          });\r\n          return;\r\n        }\r\n\r\n        const script = document.createElement('script');\r\n        script.src = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry&v=weekly`;\r\n        script.async = true;\r\n        script.defer = true;\r\n        script.onload = () => resolve(window.google.maps);\r\n        script.onerror = reject;\r\n        document.head.appendChild(script);\r\n      });\r\n    };\r\n\r\n    const initMap = async () => {\r\n      try {\r\n        const maps = await loadGoogleMaps();\r\n        \r\n        if (!mapRef.current) return;\r\n\r\n        const mapInstance = new maps.Map(mapRef.current, {\r\n          center: { lat: -36.7333, lng: -72.4667 },\r\n          zoom: 13,\r\n          mapTypeId: 'roadmap',\r\n          zoomControl: !isMobile,\r\n          mapTypeControl: false,\r\n          scaleControl: false,\r\n          streetViewControl: false,\r\n          rotateControl: false,\r\n          fullscreenControl: true,\r\n          gestureHandling: isMobile ? 'greedy' : 'auto',\r\n          styles: isMobile ? [\r\n            {\r\n              featureType: \"poi\",\r\n              elementType: \"labels\",\r\n              stylers: [{ visibility: \"off\" }]\r\n            }\r\n          ] : []\r\n        });\r\n\r\n        setMap(mapInstance);\r\n        \r\n        // Crear InfoWindow compartida\r\n        infoWindowRef.current = new maps.InfoWindow();\r\n        \r\n        // Agregar bot√≥n de centrar en ubicaci√≥n actual mejorado\r\n        const locationButton = document.createElement('button');\r\n        locationButton.innerHTML = `\r\n          <div style=\"\r\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n            border-radius: 50%;\r\n            width: 48px;\r\n            height: 48px;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\r\n            cursor: pointer;\r\n          \">\r\n            <span style=\"font-size: 24px;\">üìç</span>\r\n          </div>\r\n        `;\r\n        locationButton.style.cssText = 'border: none; background: none; padding: 0; margin: 12px;';\r\n        locationButton.title = 'Mi ubicaci√≥n';\r\n        \r\n        mapInstance.controls[maps.ControlPosition.RIGHT_BOTTOM].push(locationButton);\r\n        \r\n        locationButton.addEventListener('click', () => {\r\n          if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition(\r\n              (position) => {\r\n                const pos = {\r\n                  lat: position.coords.latitude,\r\n                  lng: position.coords.longitude\r\n                };\r\n                mapInstance.setCenter(pos);\r\n                mapInstance.setZoom(15);\r\n                \r\n                // Agregar marcador de ubicaci√≥n actual\r\n                new maps.Marker({\r\n                  position: pos,\r\n                  map: mapInstance,\r\n                  icon: {\r\n                    path: maps.SymbolPath.CIRCLE,\r\n                    scale: 8,\r\n                    fillColor: '#4285F4',\r\n                    fillOpacity: 1,\r\n                    strokeColor: '#ffffff',\r\n                    strokeWeight: 3\r\n                  },\r\n                  animation: maps.Animation.DROP\r\n                });\r\n              },\r\n              () => {\r\n                console.log('Error al obtener ubicaci√≥n');\r\n              }\r\n            );\r\n          }\r\n        });\r\n        \r\n        setMapLoaded(true);\r\n      } catch (err) {\r\n        console.error('Error al cargar el mapa:', err);\r\n      }\r\n    };\r\n\r\n    initMap();\r\n  }, [isMobile]);\r\n\r\n  // Cargar datos desde Firebase\r\n  useEffect(() => {\r\n    // Suscribirse a veh√≠culos\r\n    const unsubVehiculos = vehiculosService.subscribeToVehiculos((data) => {\r\n      setVehiculos(data);\r\n      updateMarkers('vehiculos', data);\r\n    });\r\n\r\n    // Suscribirse a zonas asignadas\r\n    const unsubZonas = zonasService.subscribeToZonasAsignadas((data) => {\r\n      setZonas(data);\r\n      updateMarkers('zonas', data);\r\n    });\r\n\r\n    // Suscribirse a trabajadores\r\n    const unsubTrabajadores = trabajadoresService.subscribeToTrabajadores((data) => {\r\n      setTrabajadores(data);\r\n      updateMarkers('trabajadores', data);\r\n    });\r\n\r\n    // Obtener estad√≠sticas en tiempo real\r\n    reportesService.getRealtimeStats((statsData) => {\r\n      setStats(statsData);\r\n    });\r\n\r\n    return () => {\r\n      unsubVehiculos();\r\n      unsubZonas();\r\n      unsubTrabajadores();\r\n    };\r\n  }, []);\r\n\r\n  // Actualizar marcadores en el mapa\r\n  const updateMarkers = (type, data) => {\r\n    if (!map || !window.google) return;\r\n\r\n    // Limpiar marcadores anteriores\r\n    Object.values(markersRef.current[type]).forEach(marker => marker.setMap(null));\r\n    markersRef.current[type] = {};\r\n\r\n    // Filtrar seg√∫n el tipo seleccionado\r\n    if (filterType !== 'all' && filterType !== type) return;\r\n\r\n    data.forEach(item => {\r\n      let position, icon, title, content;\r\n\r\n      switch (type) {\r\n        case 'vehiculos':\r\n          if (!item.lat || !item.lng) return;\r\n          position = { lat: item.lat, lng: item.lng };\r\n          icon = {\r\n            url: item.tipo === 'maquinaria' ? \r\n              'https://maps.google.com/mapfiles/kml/shapes/mechanic.png' :\r\n              'https://maps.google.com/mapfiles/kml/shapes/cabs.png',\r\n            scaledSize: new window.google.maps.Size(32, 32)\r\n          };\r\n          title = item.nombre;\r\n          content = `\r\n            <div style=\"padding: 12px; min-width: 220px;\">\r\n              <h3 style=\"margin: 0 0 8px 0; font-size: 16px; color: #1f2937;\">\r\n                ${item.tipo === 'maquinaria' ? 'üèóÔ∏è' : 'üöó'} ${item.nombre}\r\n              </h3>\r\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Estado:</strong> ${item.estado}</p>\r\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Patente:</strong> ${item.patente || 'N/A'}</p>\r\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Operador:</strong> ${item.operadorAsignado || 'Sin asignar'}</p>\r\n            </div>\r\n          `;\r\n          break;\r\n\r\n        case 'zonas':\r\n          if (!item.lat || !item.lng) return;\r\n          position = { lat: item.lat, lng: item.lng };\r\n          icon = {\r\n            path: window.google.maps.SymbolPath.CIRCLE,\r\n            scale: 14,\r\n            fillColor: item.estado === 'completado' ? '#22c55e' : \r\n                     item.estado === 'en_progreso' ? '#3b82f6' : '#f59e0b',\r\n            fillOpacity: 0.9,\r\n            strokeColor: '#ffffff',\r\n            strokeWeight: 3\r\n          };\r\n          title = item.nombre;\r\n          content = `\r\n            <div style=\"padding: 12px; min-width: 220px;\">\r\n              <h3 style=\"margin: 0 0 8px 0; font-size: 16px; color: #1f2937;\">\r\n                üèóÔ∏è ${item.nombre}\r\n              </h3>\r\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Estado:</strong> ${item.estado}</p>\r\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Direcci√≥n:</strong> ${item.direccion}</p>\r\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Trabajador:</strong> ${item.trabajadorAsignado || 'Sin asignar'}</p>\r\n            </div>\r\n          `;\r\n          break;\r\n\r\n        case 'trabajadores':\r\n          if (!item.ubicacion || !item.ubicacion.lat || !item.ubicacion.lng) return;\r\n          position = { lat: item.ubicacion.lat, lng: item.ubicacion.lng };\r\n          \r\n          // Solo mostrar trabajadores con GPS activo (√∫ltima actualizaci√≥n < 5 min)\r\n          const lastUpdate = new Date(item.ubicacion.timestamp);\r\n          const now = new Date();\r\n          const diffMinutes = (now - lastUpdate) / 60000;\r\n          if (diffMinutes > 5) return;\r\n          \r\n          icon = {\r\n            path: window.google.maps.SymbolPath.FORWARD_CLOSED_ARROW,\r\n            scale: 10,\r\n            fillColor: item.estado === 'trabajando' ? '#22c55e' :\r\n                       item.estado === 'en_camino' ? '#f59e0b' : '#6b7280',\r\n            fillOpacity: 1,\r\n            strokeColor: '#ffffff',\r\n            strokeWeight: 3,\r\n            rotation: 0\r\n          };\r\n          title = item.nombre;\r\n          content = `\r\n            <div style=\"padding: 12px; min-width: 220px;\">\r\n              <h3 style=\"margin: 0 0 8px 0; font-size: 16px; color: #1f2937;\">\r\n                üë∑ ${item.nombre}\r\n              </h3>\r\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Estado:</strong> ${item.estado}</p>\r\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>Zona:</strong> ${item.zonaDestino || 'Sin asignar'}</p>\r\n              <p style=\"margin: 4px 0; font-size: 14px;\"><strong>√öltima actualizaci√≥n:</strong> ${new Date(item.ubicacion.timestamp).toLocaleTimeString('es-CL')}</p>\r\n            </div>\r\n          `;\r\n          break;\r\n\r\n        default:\r\n          return;\r\n      }\r\n\r\n      const marker = new window.google.maps.Marker({\r\n        position,\r\n        map,\r\n        title,\r\n        icon,\r\n        animation: window.google.maps.Animation.DROP\r\n      });\r\n\r\n      marker.addListener('click', () => {\r\n        infoWindowRef.current.setContent(content);\r\n        infoWindowRef.current.open(map, marker);\r\n        setSelectedItem(item);\r\n      });\r\n\r\n      markersRef.current[type][item.id] = marker;\r\n    });\r\n  };\r\n\r\n  // Centrar mapa en item seleccionado\r\n  const centerOnItem = (item, type) => {\r\n    if (!map || !item) return;\r\n\r\n    let position;\r\n    switch (type) {\r\n      case 'vehiculos':\r\n      case 'zonas':\r\n        if (item.lat && item.lng) {\r\n          position = { lat: item.lat, lng: item.lng };\r\n        }\r\n        break;\r\n      case 'trabajadores':\r\n        if (item.ubicacion && item.ubicacion.lat && item.ubicacion.lng) {\r\n          position = { lat: item.ubicacion.lat, lng: item.ubicacion.lng };\r\n        }\r\n        break;\r\n    }\r\n\r\n    if (position) {\r\n      map.panTo(position);\r\n      map.setZoom(16);\r\n      \r\n      // Abrir InfoWindow\r\n      const marker = markersRef.current[type][item.id];\r\n      if (marker) {\r\n        window.google.maps.event.trigger(marker, 'click');\r\n      }\r\n    }\r\n  };\r\n\r\n  // Cambiar filtro\r\n  const handleFilterChange = (newFilter) => {\r\n    setFilterType(newFilter);\r\n    \r\n    // Limpiar todos los marcadores\r\n    ['vehiculos', 'zonas', 'trabajadores'].forEach(type => {\r\n      Object.values(markersRef.current[type]).forEach(marker => marker.setMap(null));\r\n      markersRef.current[type] = {};\r\n    });\r\n\r\n    // Volver a crear marcadores seg√∫n el filtro\r\n    if (newFilter === 'all' || newFilter === 'vehiculos') {\r\n      updateMarkers('vehiculos', vehiculos);\r\n    }\r\n    if (newFilter === 'all' || newFilter === 'zonas') {\r\n      updateMarkers('zonas', zonas);\r\n    }\r\n    if (newFilter === 'all' || newFilter === 'trabajadores') {\r\n      updateMarkers('trabajadores', trabajadores);\r\n    }\r\n  };\r\n\r\n  // Funci√≥n para obtener el color del estado\r\n  const getStatusColor = (estado) => {\r\n    switch (estado) {\r\n      case 'disponible': return '#22c55e';\r\n      case 'en_uso': return '#3b82f6';\r\n      case 'mantenimiento': return '#f59e0b';\r\n      case 'trabajando': return '#22c55e';\r\n      case 'en_camino': return '#f59e0b';\r\n      case 'completado': return '#22c55e';\r\n      case 'en_progreso': return '#3b82f6';\r\n      case 'pendiente': return '#f59e0b';\r\n      default: return '#6b7280';\r\n    }\r\n  };\r\n\r\n  // Estilos mejorados para m√≥vil\r\n  const styles = {\r\n    container: {\r\n      width: '100%',\r\n      height: '100vh',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      background: '#f8f9fa',\r\n      position: 'relative'\r\n    },\r\n    header: {\r\n      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n      color: 'white',\r\n      padding: isMobile ? '12px 16px' : '15px 20px',\r\n      boxShadow: '0 4px 20px rgba(0,0,0,0.15)',\r\n      zIndex: 1000,\r\n      position: 'relative'\r\n    },\r\n    headerContent: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      gap: '10px'\r\n    },\r\n    headerLeft: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '12px'\r\n    },\r\n    menuButton: {\r\n      width: '40px',\r\n      height: '40px',\r\n      background: 'rgba(255,255,255,0.2)',\r\n      border: 'none',\r\n      borderRadius: '10px',\r\n      color: 'white',\r\n      fontSize: '20px',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      cursor: 'pointer',\r\n      transition: 'all 0.3s'\r\n    },\r\n    title: {\r\n      margin: 0,\r\n      fontSize: isMobile ? '18px' : '24px',\r\n      fontWeight: '600',\r\n      letterSpacing: '-0.5px'\r\n    },\r\n    subtitle: {\r\n      fontSize: '11px',\r\n      opacity: 0.9,\r\n      marginTop: '2px'\r\n    },\r\n    userInfo: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '10px'\r\n    },\r\n    userAvatar: {\r\n      width: '32px',\r\n      height: '32px',\r\n      borderRadius: '50%',\r\n      background: 'rgba(255,255,255,0.3)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      fontSize: '14px'\r\n    },\r\n    logoutButton: {\r\n      padding: isMobile ? '8px' : '8px 16px',\r\n      background: 'rgba(239, 68, 68, 0.9)',\r\n      color: 'white',\r\n      border: 'none',\r\n      borderRadius: '8px',\r\n      fontSize: isMobile ? '20px' : '14px',\r\n      cursor: 'pointer',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '6px',\r\n      transition: 'all 0.3s'\r\n    },\r\n    mainContent: {\r\n      flex: 1,\r\n      display: 'flex',\r\n      position: 'relative',\r\n      overflow: 'hidden'\r\n    },\r\n    mobileBottomSheet: {\r\n      position: 'fixed',\r\n      bottom: 0,\r\n      left: 0,\r\n      right: 0,\r\n      background: 'white',\r\n      borderTopLeftRadius: '24px',\r\n      borderTopRightRadius: '24px',\r\n      boxShadow: '0 -4px 20px rgba(0,0,0,0.1)',\r\n      zIndex: 1001,\r\n      transition: 'transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n      maxHeight: '70vh',\r\n      transform: showMobilePanel ? 'translateY(0)' : 'translateY(calc(100% - 60px))'\r\n    },\r\n    bottomSheetHandle: {\r\n      width: '40px',\r\n      height: '4px',\r\n      background: '#cbd5e1',\r\n      borderRadius: '2px',\r\n      margin: '12px auto',\r\n      cursor: 'pointer'\r\n    },\r\n    bottomSheetHeader: {\r\n      padding: '0 20px 16px',\r\n      borderBottom: '1px solid #f1f5f9'\r\n    },\r\n    quickStats: {\r\n      display: 'grid',\r\n      gridTemplateColumns: 'repeat(3, 1fr)',\r\n      gap: '12px',\r\n      padding: '16px'\r\n    },\r\n    statCard: {\r\n      background: 'linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%)',\r\n      borderRadius: '16px',\r\n      padding: '16px',\r\n      textAlign: 'center',\r\n      border: '1px solid #e2e8f0',\r\n      cursor: 'pointer',\r\n      transition: 'all 0.3s',\r\n      position: 'relative',\r\n      overflow: 'hidden'\r\n    },\r\n    statCardActive: {\r\n      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n      color: 'white',\r\n      transform: 'scale(1.05)',\r\n      boxShadow: '0 8px 24px rgba(102, 126, 234, 0.3)'\r\n    },\r\n    statIcon: {\r\n      fontSize: '28px',\r\n      marginBottom: '8px'\r\n    },\r\n    statNumber: {\r\n      fontSize: '24px',\r\n      fontWeight: 'bold',\r\n      margin: '4px 0'\r\n    },\r\n    statLabel: {\r\n      fontSize: '11px',\r\n      opacity: 0.8,\r\n      textTransform: 'uppercase',\r\n      letterSpacing: '0.5px'\r\n    },\r\n    categoryTabs: {\r\n      display: 'flex',\r\n      gap: '8px',\r\n      padding: '0 16px 16px',\r\n      overflowX: 'auto',\r\n      WebkitOverflowScrolling: 'touch',\r\n      scrollbarWidth: 'none',\r\n      msOverflowStyle: 'none'\r\n    },\r\n    categoryTab: {\r\n      padding: '10px 20px',\r\n      background: '#f1f5f9',\r\n      border: 'none',\r\n      borderRadius: '12px',\r\n      fontSize: '14px',\r\n      fontWeight: '500',\r\n      color: '#64748b',\r\n      cursor: 'pointer',\r\n      whiteSpace: 'nowrap',\r\n      transition: 'all 0.3s',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '6px'\r\n    },\r\n    categoryTabActive: {\r\n      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n      color: 'white',\r\n      transform: 'scale(1.05)'\r\n    },\r\n    listContainer: {\r\n      padding: '16px',\r\n      overflowY: 'auto',\r\n      maxHeight: '300px'\r\n    },\r\n    listItem: {\r\n      background: 'white',\r\n      borderRadius: '16px',\r\n      padding: '16px',\r\n      marginBottom: '12px',\r\n      border: '1px solid #e2e8f0',\r\n      cursor: 'pointer',\r\n      transition: 'all 0.3s',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '12px'\r\n    },\r\n    listItemIcon: {\r\n      width: '48px',\r\n      height: '48px',\r\n      borderRadius: '12px',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      fontSize: '24px',\r\n      flexShrink: 0\r\n    },\r\n    listItemContent: {\r\n      flex: 1,\r\n      minWidth: 0\r\n    },\r\n    listItemTitle: {\r\n      fontSize: '15px',\r\n      fontWeight: '600',\r\n      color: '#1e293b',\r\n      marginBottom: '4px',\r\n      whiteSpace: 'nowrap',\r\n      overflow: 'hidden',\r\n      textOverflow: 'ellipsis'\r\n    },\r\n    listItemSubtitle: {\r\n      fontSize: '13px',\r\n      color: '#64748b',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '8px'\r\n    },\r\n    listItemStatus: {\r\n      padding: '4px 10px',\r\n      borderRadius: '8px',\r\n      fontSize: '11px',\r\n      fontWeight: '600',\r\n      textTransform: 'uppercase',\r\n      letterSpacing: '0.5px'\r\n    },\r\n    floatingActionButton: {\r\n      position: 'fixed',\r\n      bottom: isMobile ? '80px' : '24px',\r\n      right: '24px',\r\n      width: '56px',\r\n      height: '56px',\r\n      borderRadius: '50%',\r\n      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n      color: 'white',\r\n      border: 'none',\r\n      fontSize: '24px',\r\n      cursor: 'pointer',\r\n      boxShadow: '0 8px 24px rgba(102, 126, 234, 0.4)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      zIndex: 999,\r\n      transition: 'all 0.3s'\r\n    },\r\n    quickActionsMenu: {\r\n      position: 'fixed',\r\n      bottom: isMobile ? '148px' : '92px',\r\n      right: '24px',\r\n      background: 'white',\r\n      borderRadius: '16px',\r\n      padding: '8px',\r\n      boxShadow: '0 8px 32px rgba(0,0,0,0.15)',\r\n      zIndex: 998,\r\n      minWidth: '200px',\r\n      transform: showQuickActions ? 'scale(1) translateY(0)' : 'scale(0.8) translateY(20px)',\r\n      opacity: showQuickActions ? 1 : 0,\r\n      transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\r\n      pointerEvents: showQuickActions ? 'auto' : 'none'\r\n    },\r\n    quickActionItem: {\r\n      padding: '12px 16px',\r\n      borderRadius: '12px',\r\n      cursor: 'pointer',\r\n      transition: 'all 0.2s',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '12px',\r\n      fontSize: '14px',\r\n      color: '#1e293b'\r\n    },\r\n    map: {\r\n      width: '100%',\r\n      height: '100%',\r\n      position: 'absolute',\r\n      top: 0,\r\n      left: 0\r\n    },\r\n    mapOverlayTop: {\r\n      position: 'absolute',\r\n      top: '10px',\r\n      left: '10px',\r\n      right: '10px',\r\n      display: 'flex',\r\n      gap: '8px',\r\n      zIndex: 100\r\n    },\r\n    filterChip: {\r\n      padding: '8px 16px',\r\n      background: 'white',\r\n      border: 'none',\r\n      borderRadius: '20px',\r\n      fontSize: '13px',\r\n      fontWeight: '500',\r\n      cursor: 'pointer',\r\n      boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n      transition: 'all 0.3s',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '6px'\r\n    },\r\n    filterChipActive: {\r\n      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n      color: 'white'\r\n    }\r\n  };\r\n\r\n  // Componente de tarjeta de estad√≠stica mejorado\r\n  const StatCard = ({ icon, number, label, color, active, onClick }) => (\r\n    <div \r\n      style={{\r\n        ...styles.statCard,\r\n        ...(active ? styles.statCardActive : {}),\r\n        background: active ? `linear-gradient(135deg, ${color}dd 0%, ${color} 100%)` : styles.statCard.background\r\n      }}\r\n      onClick={onClick}\r\n    >\r\n      <div style={styles.statIcon}>{icon}</div>\r\n      <div style={{\r\n        ...styles.statNumber,\r\n        color: active ? 'white' : '#1e293b'\r\n      }}>{number}</div>\r\n      <div style={{\r\n        ...styles.statLabel,\r\n        color: active ? 'white' : '#64748b'\r\n      }}>{label}</div>\r\n    </div>\r\n  );\r\n\r\n  // Componente de item de lista mejorado\r\n  const ListItem = ({ icon, title, subtitle, status, statusColor, onClick }) => (\r\n    <div style={styles.listItem} onClick={onClick}>\r\n      <div style={{\r\n        ...styles.listItemIcon,\r\n        background: `${statusColor}20`\r\n      }}>\r\n        {icon}\r\n      </div>\r\n      <div style={styles.listItemContent}>\r\n        <div style={styles.listItemTitle}>{title}</div>\r\n        <div style={styles.listItemSubtitle}>\r\n          {subtitle}\r\n        </div>\r\n      </div>\r\n      <div style={{\r\n        ...styles.listItemStatus,\r\n        background: `${statusColor}20`,\r\n        color: statusColor\r\n      }}>\r\n        {status}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // Renderizar vista m√≥vil\r\n  if (isMobile && currentUser?.role === 'admin') {\r\n    return (\r\n      <div style={styles.container}>\r\n        {/* Header mejorado */}\r\n        <div style={styles.header}>\r\n          <div style={styles.headerContent}>\r\n            <div style={styles.headerLeft}>\r\n              <button \r\n                style={styles.menuButton}\r\n                onClick={() => setShowMobilePanel(!showMobilePanel)}\r\n              >\r\n                {showMobilePanel ? 'üìä' : '‚ò∞'}\r\n              </button>\r\n              <div>\r\n                <h1 style={styles.title}>Control GPS</h1>\r\n                <div style={styles.subtitle}>Centro de comando</div>\r\n              </div>\r\n            </div>\r\n            <div style={styles.userInfo}>\r\n              <div style={styles.userAvatar}>üë§</div>\r\n              <button onClick={onLogout} style={styles.logoutButton}>\r\n                üö™\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Mapa de fondo */}\r\n        <div style={styles.mainContent}>\r\n          <div ref={mapRef} style={styles.map} />\r\n          \r\n          {/* Filtros flotantes sobre el mapa */}\r\n          <div style={styles.mapOverlayTop}>\r\n            <button\r\n              style={{\r\n                ...styles.filterChip,\r\n                ...(filterType === 'all' ? styles.filterChipActive : {})\r\n              }}\r\n              onClick={() => handleFilterChange('all')}\r\n            >\r\n              üåê Todo\r\n            </button>\r\n            <button\r\n              style={{\r\n                ...styles.filterChip,\r\n                ...(filterType === 'vehiculos' ? styles.filterChipActive : {})\r\n              }}\r\n              onClick={() => handleFilterChange('vehiculos')}\r\n            >\r\n              üöõ Veh√≠culos\r\n            </button>\r\n            <button\r\n              style={{\r\n                ...styles.filterChip,\r\n                ...(filterType === 'zonas' ? styles.filterChipActive : {})\r\n              }}\r\n              onClick={() => handleFilterChange('zonas')}\r\n            >\r\n              üèóÔ∏è Zonas\r\n            </button>\r\n            <button\r\n              style={{\r\n                ...styles.filterChip,\r\n                ...(filterType === 'trabajadores' ? styles.filterChipActive : {})\r\n              }}\r\n              onClick={() => handleFilterChange('trabajadores')}\r\n            >\r\n              üë∑ Personal\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Bottom Sheet mejorado */}\r\n        <div style={styles.mobileBottomSheet}>\r\n          <div \r\n            style={styles.bottomSheetHandle}\r\n            onClick={() => setShowMobilePanel(!showMobilePanel)}\r\n          />\r\n          \r\n          <div style={styles.bottomSheetHeader}>\r\n            <h2 style={{ margin: 0, fontSize: '18px', fontWeight: '600', color: '#1e293b' }}>\r\n              Centro de Control\r\n            </h2>\r\n            <p style={{ margin: '4px 0 0', fontSize: '13px', color: '#64748b' }}>\r\n              Monitoreo en tiempo real\r\n            </p>\r\n          </div>\r\n\r\n          {/* Estad√≠sticas r√°pidas */}\r\n          <div style={styles.quickStats}>\r\n            <StatCard\r\n              icon=\"üöõ\"\r\n              number={stats.vehiculos.activos}\r\n              label=\"Activos\"\r\n              color=\"#22c55e\"\r\n              active={selectedCategory === 'vehiculos'}\r\n              onClick={() => {\r\n                setSelectedCategory('vehiculos');\r\n                handleFilterChange('vehiculos');\r\n              }}\r\n            />\r\n            <StatCard\r\n              icon=\"üèóÔ∏è\"\r\n              number={stats.zonas.activas}\r\n              label=\"Zonas\"\r\n              color=\"#3b82f6\"\r\n              active={selectedCategory === 'zonas'}\r\n              onClick={() => {\r\n                setSelectedCategory('zonas');\r\n                handleFilterChange('zonas');\r\n              }}\r\n            />\r\n            <StatCard\r\n              icon=\"üë∑\"\r\n              number={stats.trabajadores.enRuta + stats.trabajadores.trabajando}\r\n              label=\"En Campo\"\r\n              color=\"#f59e0b\"\r\n              active={selectedCategory === 'trabajadores'}\r\n              onClick={() => {\r\n                setSelectedCategory('trabajadores');\r\n                handleFilterChange('trabajadores');\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          {/* Tabs de categor√≠as */}\r\n          <div style={styles.categoryTabs}>\r\n            <button\r\n              style={{\r\n                ...styles.categoryTab,\r\n                ...(activeTab === 'resumen' ? styles.categoryTabActive : {})\r\n              }}\r\n              onClick={() => setActiveTab('resumen')}\r\n            >\r\n              üìä Resumen\r\n            </button>\r\n            <button\r\n              style={{\r\n                ...styles.categoryTab,\r\n                ...(activeTab === 'vehiculos' ? styles.categoryTabActive : {})\r\n              }}\r\n              onClick={() => {\r\n                setActiveTab('vehiculos');\r\n                handleFilterChange('vehiculos');\r\n              }}\r\n            >\r\n              üöõ Veh√≠culos ({vehiculos.length})\r\n            </button>\r\n            <button\r\n              style={{\r\n                ...styles.categoryTab,\r\n                ...(activeTab === 'zonas' ? styles.categoryTabActive : {})\r\n              }}\r\n              onClick={() => {\r\n                setActiveTab('zonas');\r\n                handleFilterChange('zonas');\r\n              }}\r\n            >\r\n              üèóÔ∏è Zonas ({zonas.length})\r\n            </button>\r\n            <button\r\n              style={{\r\n                ...styles.categoryTab,\r\n                ...(activeTab === 'trabajadores' ? styles.categoryTabActive : {})\r\n              }}\r\n              onClick={() => {\r\n                setActiveTab('trabajadores');\r\n                handleFilterChange('trabajadores');\r\n              }}\r\n            >\r\n              üë∑ Personal ({trabajadores.length})\r\n            </button>\r\n          </div>\r\n\r\n          {/* Lista de items seg√∫n tab activo */}\r\n          <div style={styles.listContainer}>\r\n            {activeTab === 'resumen' && (\r\n              <div>\r\n                <div style={{ marginBottom: '16px' }}>\r\n                  <h3 style={{ margin: '0 0 12px', fontSize: '14px', color: '#64748b', textTransform: 'uppercase' }}>\r\n                    Actividad Reciente\r\n                  </h3>\r\n                  {[...vehiculos.slice(0, 2), ...zonas.slice(0, 2)].map((item, index) => (\r\n                    <ListItem\r\n                      key={index}\r\n                      icon={item.tipo ? 'üöõ' : 'üèóÔ∏è'}\r\n                      title={item.nombre}\r\n                      subtitle={item.direccion || item.patente || 'Sin informaci√≥n'}\r\n                      status={item.estado}\r\n                      statusColor={getStatusColor(item.estado)}\r\n                      onClick={() => centerOnItem(item, item.tipo ? 'vehiculos' : 'zonas')}\r\n                    />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'vehiculos' && vehiculos.map(vehiculo => (\r\n              <ListItem\r\n                key={vehiculo.id}\r\n                icon={vehiculo.tipo === 'maquinaria' ? 'üèóÔ∏è' : 'üöó'}\r\n                title={vehiculo.nombre}\r\n                subtitle={`${vehiculo.marca || ''} ${vehiculo.modelo || ''} ‚Ä¢ ${vehiculo.patente || 'Sin patente'}`}\r\n                status={vehiculo.estado}\r\n                statusColor={getStatusColor(vehiculo.estado)}\r\n                onClick={() => centerOnItem(vehiculo, 'vehiculos')}\r\n              />\r\n            ))}\r\n\r\n            {activeTab === 'zonas' && zonas.map(zona => (\r\n              <ListItem\r\n                key={zona.id}\r\n                icon=\"üèóÔ∏è\"\r\n                title={zona.nombre}\r\n                subtitle={zona.direccion}\r\n                status={zona.estado || 'pendiente'}\r\n                statusColor={getStatusColor(zona.estado)}\r\n                onClick={() => centerOnItem(zona, 'zonas')}\r\n              />\r\n            ))}\r\n\r\n            {activeTab === 'trabajadores' && trabajadores.filter(t => \r\n              t.ubicacion && (new Date() - new Date(t.ubicacion.timestamp)) < 300000\r\n            ).map(trabajador => (\r\n              <ListItem\r\n                key={trabajador.id}\r\n                icon=\"üë∑\"\r\n                title={trabajador.nombre}\r\n                subtitle={`${trabajador.zonaDestino || 'Sin zona'} ‚Ä¢ Actualizado ${new Date(trabajador.ubicacion.timestamp).toLocaleTimeString('es-CL')}`}\r\n                status={trabajador.estado}\r\n                statusColor={getStatusColor(trabajador.estado)}\r\n                onClick={() => centerOnItem(trabajador, 'trabajadores')}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Bot√≥n de acci√≥n flotante con men√∫ */}\r\n        <button\r\n          style={styles.floatingActionButton}\r\n          onClick={() => setShowQuickActions(!showQuickActions)}\r\n        >\r\n          {showQuickActions ? '‚úï' : '‚ö°'}\r\n        </button>\r\n\r\n        {/* Men√∫ de acciones r√°pidas */}\r\n        <div style={styles.quickActionsMenu}>\r\n          <div \r\n            style={styles.quickActionItem}\r\n            onClick={() => {\r\n              onViewChange('zones');\r\n              setShowQuickActions(false);\r\n            }}\r\n          >\r\n            <span style={{ fontSize: '20px' }}>üó∫Ô∏è</span>\r\n            <span>Gestionar Zonas</span>\r\n          </div>\r\n          <div \r\n            style={styles.quickActionItem}\r\n            onClick={() => {\r\n              onViewChange('fleet');\r\n              setShowQuickActions(false);\r\n            }}\r\n          >\r\n            <span style={{ fontSize: '20px' }}>üöõ</span>\r\n            <span>Panel de Flota</span>\r\n          </div>\r\n          <div \r\n            style={styles.quickActionItem}\r\n            onClick={() => {\r\n              const pos = { lat: -36.7333, lng: -72.4667 };\r\n              map?.setCenter(pos);\r\n              map?.setZoom(13);\r\n              setShowQuickActions(false);\r\n            }}\r\n          >\r\n            <span style={{ fontSize: '20px' }}>üéØ</span>\r\n            <span>Centrar Mapa</span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Loading overlay */}\r\n        {!mapLoaded && (\r\n          <div style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            background: 'rgba(255,255,255,0.9)',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n            zIndex: 9999\r\n          }}>\r\n            <div style={{\r\n              width: '60px',\r\n              height: '60px',\r\n              border: '4px solid #e2e8f0',\r\n              borderTop: '4px solid #667eea',\r\n              borderRadius: '50%',\r\n              animation: 'spin 1s linear infinite'\r\n            }}></div>\r\n            <p style={{ marginTop: '16px', color: '#64748b', fontSize: '14px' }}>\r\n              Cargando mapa...\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Renderizar vista desktop (mantener el dise√±o original para desktop)\r\n  return (\r\n    <div style={styles.container}>\r\n      {/* Aqu√≠ va el c√≥digo original de desktop que ya ten√≠as... */}\r\n      {/* Header */}\r\n      <div style={styles.header}>\r\n        <div style={styles.headerContent}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n            <h1 style={styles.title}>\r\n              üìä Dashboard GPS\r\n            </h1>\r\n          </div>\r\n          \r\n          <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>\r\n            {onViewChange && (\r\n              <>\r\n                {currentUser?.role === 'superadmin' && (\r\n                  <button\r\n                    onClick={() => onViewChange('admin')}\r\n                    style={{\r\n                      padding: '8px 14px',\r\n                      background: 'rgba(255,255,255,0.1)',\r\n                      color: 'white',\r\n                      border: '1px solid rgba(255,255,255,0.3)',\r\n                      borderRadius: '6px',\r\n                      cursor: 'pointer',\r\n                      fontSize: '14px'\r\n                    }}\r\n                  >\r\n                    üîê Panel Admin\r\n                  </button>\r\n                )}\r\n                <button\r\n                  onClick={() => onViewChange('zones')}\r\n                  style={{\r\n                    padding: '8px 14px',\r\n                    background: 'rgba(255,255,255,0.1)',\r\n                    color: 'white',\r\n                    border: '1px solid rgba(255,255,255,0.3)',\r\n                    borderRadius: '6px',\r\n                    cursor: 'pointer',\r\n                    fontSize: '14px'\r\n                  }}\r\n                >\r\n                  üó∫Ô∏è Gesti√≥n Zonas\r\n                </button>\r\n                <button\r\n                  onClick={() => onViewChange('fleet')}\r\n                  style={{\r\n                    padding: '8px 14px',\r\n                    background: 'rgba(255,255,255,0.1)',\r\n                    color: 'white',\r\n                    border: '1px solid rgba(255,255,255,0.3)',\r\n                    borderRadius: '6px',\r\n                    cursor: 'pointer',\r\n                    fontSize: '14px'\r\n                  }}\r\n                >\r\n                  üöõ Panel Flota\r\n                </button>\r\n              </>\r\n            )}\r\n            <button onClick={onLogout} style={styles.logoutButton}>\r\n              üö™ Salir\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Resto del contenido desktop... */}\r\n      <div style={styles.mainContent}>\r\n        <div ref={mapRef} style={styles.map} />\r\n      </div>\r\n\r\n      <style jsx>{`\r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n        \r\n        @keyframes slideUp {\r\n          from {\r\n            transform: translateY(100%);\r\n            opacity: 0;\r\n          }\r\n          to {\r\n            transform: translateY(0);\r\n            opacity: 1;\r\n          }\r\n        }\r\n        \r\n        ::-webkit-scrollbar {\r\n          width: 0px;\r\n          background: transparent;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapaQuillonFirebase;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
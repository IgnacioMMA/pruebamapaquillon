{"ast":null,"code":"// src/components/MapaQuillonFirebase.js\nimport React,{useEffect,useRef,useState}from'react';import{vehiculosService,zonasService,trabajadoresService,reportesService}from'../services/firebaseservices';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MapaQuillonFirebase=_ref=>{let{currentUser,onLogout,onViewChange}=_ref;const mapRef=useRef(null);const[map,setMap]=useState(null);const[vehiculos,setVehiculos]=useState([]);const[zonas,setZonas]=useState([]);const[trabajadores,setTrabajadores]=useState([]);const[selectedItemId,setSelectedItemId]=useState(null);const[selectedItemType,setSelectedItemType]=useState(null);const[filtroActivo,setFiltroActivo]=useState('todos');const[mapLoaded,setMapLoaded]=useState(false);const[showStats,setShowStats]=useState(false);// Oculto por defecto en móvil\nconst[showMenu,setShowMenu]=useState(false);// Menú móvil\nconst[isMobile,setIsMobile]=useState(false);const[realtimeStats,setRealtimeStats]=useState({vehiculos:{total:0,activos:0,enMantenimiento:0},zonas:{total:0,activas:0,completadas:0,pendientes:0},trabajadores:{total:0,enRuta:0,trabajando:0,disponibles:0}});const markersRef=useRef({});const infoWindowRef=useRef(null);const unsubscribesRef=useRef([]);const dataRef=useRef({vehiculos:[],zonas:[],trabajadores:[]});const API_KEY='AIzaSyA7DrdL36n5cx-RNzuXGAQggFeGCheHDbY';// Detectar si es móvil\nuseEffect(()=>{const checkMobile=()=>{const mobile=window.innerWidth<=768;setIsMobile(mobile);// En móvil, ocultar stats por defecto\nif(mobile&&showStats){setShowStats(false);}};checkMobile();window.addEventListener('resize',checkMobile);return()=>window.removeEventListener('resize',checkMobile);},[]);// Cargar Google Maps\nuseEffect(()=>{const loadGoogleMaps=()=>{return new Promise((resolve,reject)=>{if(window.google&&window.google.maps){resolve(window.google.maps);return;}const existingScript=document.querySelector('script[src*=\"maps.googleapis.com\"]');if(existingScript){existingScript.addEventListener('load',()=>{if(window.google&&window.google.maps){resolve(window.google.maps);}else{reject(new Error('Google Maps no disponible'));}});return;}const script=document.createElement('script');script.src=`https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry&v=weekly`;script.async=true;script.defer=true;script.onload=()=>{if(window.google&&window.google.maps){resolve(window.google.maps);}};script.onerror=()=>reject(new Error('Error al cargar Google Maps'));document.head.appendChild(script);});};const initMap=async()=>{try{const maps=await loadGoogleMaps();if(!mapRef.current)return;const mapInstance=new maps.Map(mapRef.current,{center:{lat:-36.7333,lng:-72.4667},zoom:13,mapTypeId:'roadmap',styles:[{featureType:'poi.business',stylers:[{visibility:'off'}]}],// Controles optimizados para móvil\nzoomControl:!isMobile,mapTypeControl:false,scaleControl:false,streetViewControl:false,rotateControl:false,fullscreenControl:true,gestureHandling:isMobile?'greedy':'cooperative'});setMap(mapInstance);infoWindowRef.current=new maps.InfoWindow();// Agregar listener para cerrar InfoWindow cuando se hace clic en el mapa\nmapInstance.addListener('click',()=>{if(infoWindowRef.current){infoWindowRef.current.close();setSelectedItemId(null);setSelectedItemType(null);}});setMapLoaded(true);}catch(err){console.error('Error al cargar mapa:',err);}};initMap();},[isMobile]);// Suscribirse a datos de Firebase en tiempo real\nuseEffect(()=>{// Suscribirse a vehículos\nconst unsubVehiculos=vehiculosService.subscribeToVehiculos(vehiculosData=>{dataRef.current.vehiculos=vehiculosData;setVehiculos(vehiculosData);});unsubscribesRef.current.push(unsubVehiculos);// Suscribirse a zonas_asignadas\nconst unsubZonas=zonasService.subscribeToZonasAsignadas?zonasService.subscribeToZonasAsignadas(zonasData=>{dataRef.current.zonas=zonasData;setZonas(zonasData);}):zonasService.subscribeToZonas(zonasData=>{dataRef.current.zonas=zonasData;setZonas(zonasData);});unsubscribesRef.current.push(unsubZonas);// Suscribirse a trabajadores\nconst unsubTrabajadores=trabajadoresService.subscribeToTrabajadores(trabajadoresData=>{dataRef.current.trabajadores=trabajadoresData;setTrabajadores(trabajadoresData);});unsubscribesRef.current.push(unsubTrabajadores);// Suscribirse a estadísticas en tiempo real\nreportesService.getRealtimeStats(stats=>{setRealtimeStats(stats);});// Limpiar suscripciones al desmontar\nreturn()=>{unsubscribesRef.current.forEach(unsub=>unsub&&unsub());};},[]);// Función para actualizar contenido del InfoWindow\nconst updateInfoWindowContent=()=>{if(!infoWindowRef.current||!selectedItemId||!selectedItemType)return;let item=null;let content=null;// Buscar el item actualizado\nif(selectedItemType==='vehiculo'){item=dataRef.current.vehiculos.find(v=>v.id===selectedItemId);if(item)content=createVehiculoInfoWindow(item);}else if(selectedItemType==='zona'){item=dataRef.current.zonas.find(z=>z.id===selectedItemId);if(item)content=createZonaInfoWindow(item,dataRef.current.trabajadores);}else if(selectedItemType==='trabajador'){item=dataRef.current.trabajadores.find(t=>t.id===selectedItemId);if(item)content=createTrabajadorInfoWindow(item);}// Actualizar contenido solo si el InfoWindow está abierto\nif(content&&infoWindowRef.current.getMap()){infoWindowRef.current.setContent(content);}};// Actualizar InfoWindow cuando cambien los datos\nuseEffect(()=>{updateInfoWindowContent();},[vehiculos,zonas,trabajadores]);// Función para crear icono según tipo y estado\nconst getIcon=(tipo,estado)=>{var _iconConfigs$tipo;if(!window.google)return null;const iconConfigs={vehiculo:{activo:{color:'#22c55e'},trabajando:{color:'#3b82f6'},en_ruta:{color:'#f59e0b'},mantenimiento:{color:'#ef4444'},inactivo:{color:'#6b7280'}},zona:{en_progreso:{color:'#3b82f6'},pendiente:{color:'#f59e0b'},completado:{color:'#22c55e'},activa:{color:'#3b82f6'},pausada:{color:'#f59e0b'},completada:{color:'#22c55e'}},trabajador:{en_camino:{color:'#8b5cf6'},trabajando:{color:'#10b981'},disponible:{color:'#06b6d4'},inactivo:{color:'#6b7280'}}};const config=((_iconConfigs$tipo=iconConfigs[tipo])===null||_iconConfigs$tipo===void 0?void 0:_iconConfigs$tipo[estado])||{color:'#6b7280'};if(tipo==='trabajador'){return{path:window.google.maps.SymbolPath.CIRCLE,scale:isMobile?10:8,fillColor:config.color,fillOpacity:1,strokeColor:'#ffffff',strokeWeight:2};}return{path:'M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z',fillColor:config.color,fillOpacity:1,strokeColor:'#ffffff',strokeWeight:2,scale:isMobile?2.2:tipo==='vehiculo'?1.8:2,anchor:new window.google.maps.Point(12,24)};};// Crear/actualizar marcadores - OPTIMIZADO\nuseEffect(()=>{if(!map||!window.google)return;// Función para crear o actualizar un marcador\nconst createOrUpdateMarker=(key,position,icon,title,clickHandler)=>{if(markersRef.current[key]){// Actualizar marcador existente\nconst marker=markersRef.current[key];marker.setPosition(position);marker.setIcon(icon);marker.setTitle(title);}else{// Crear nuevo marcador\nconst marker=new window.google.maps.Marker({position:position,map:map,title:title,icon:icon});marker.addListener('click',clickHandler);markersRef.current[key]=marker;}};// Función para ocultar marcadores no necesarios\nconst hideUnusedMarkers=activeKeys=>{Object.keys(markersRef.current).forEach(key=>{if(!activeKeys.includes(key)){markersRef.current[key].setMap(null);delete markersRef.current[key];}});};const activeKeys=[];// Actualizar marcadores de vehículos\nif(filtroActivo==='todos'||filtroActivo==='vehiculos'){vehiculos.forEach(vehiculo=>{if(vehiculo.lat&&vehiculo.lng){const key=`vehiculo_${vehiculo.id}`;activeKeys.push(key);createOrUpdateMarker(key,{lat:vehiculo.lat,lng:vehiculo.lng},getIcon('vehiculo',vehiculo.estado),vehiculo.nombre,()=>{const content=createVehiculoInfoWindow(vehiculo);infoWindowRef.current.setContent(content);infoWindowRef.current.open(map,markersRef.current[key]);setSelectedItemId(vehiculo.id);setSelectedItemType('vehiculo');});}});}// Actualizar marcadores de zonas\nif(filtroActivo==='todos'||filtroActivo==='zonas'){zonas.forEach(zona=>{if(zona.lat&&zona.lng){const key=`zona_${zona.id}`;activeKeys.push(key);createOrUpdateMarker(key,{lat:zona.lat,lng:zona.lng},getIcon('zona',zona.estado||'pendiente'),zona.nombre,()=>{const content=createZonaInfoWindow(zona,trabajadores);infoWindowRef.current.setContent(content);infoWindowRef.current.open(map,markersRef.current[key]);setSelectedItemId(zona.id);setSelectedItemType('zona');});}});}// Actualizar marcadores de trabajadores\nif(filtroActivo==='todos'||filtroActivo==='trabajadores'){trabajadores.forEach(trabajador=>{if(trabajador.ubicacion&&trabajador.ubicacion.lat&&trabajador.ubicacion.lng){const key=`trabajador_${trabajador.id}`;activeKeys.push(key);createOrUpdateMarker(key,{lat:trabajador.ubicacion.lat,lng:trabajador.ubicacion.lng},getIcon('trabajador',trabajador.estado||'disponible'),trabajador.nombre,()=>{const content=createTrabajadorInfoWindow(trabajador);infoWindowRef.current.setContent(content);infoWindowRef.current.open(map,markersRef.current[key]);setSelectedItemId(trabajador.id);setSelectedItemType('trabajador');});}});}// Ocultar marcadores que ya no están activos\nhideUnusedMarkers(activeKeys);},[map,vehiculos,zonas,trabajadores,filtroActivo,isMobile]);// Funciones para crear contenido de InfoWindow (simplificado para móvil)\nconst createVehiculoInfoWindow=vehiculo=>{const fontSize=isMobile?'13px':'14px';const padding=isMobile?'8px':'10px';const maxWidth=isMobile?'250px':'280px';return`\n      <div style=\"padding: ${padding}; font-family: Arial, sans-serif; max-width: ${maxWidth};\">\n        <h3 style=\"margin: 0 0 8px 0; color: #1f2937; font-size: ${isMobile?'16px':'18px'};\">\n          ${vehiculo.nombre}\n        </h3>\n        <div style=\"background: ${vehiculo.estado==='activo'?'#dcfce7':vehiculo.estado==='trabajando'?'#dbeafe':'#fef3c7'}; \n                    padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 8px; font-size: ${fontSize};\">\n          <strong>Estado:</strong> ${vehiculo.estado}\n        </div>\n        <div style=\"font-size: ${fontSize}; line-height: 1.5;\">\n          ${vehiculo.conductor?`<div><strong>👤 Conductor:</strong> ${vehiculo.conductor}</div>`:''}\n          ${vehiculo.telefono?`<div><strong>📱 Teléfono:</strong> ${vehiculo.telefono}</div>`:''}\n          ${vehiculo.zona?`<div><strong>🏗️ Zona:</strong> ${vehiculo.zona}</div>`:''}\n          <div style=\"margin-top: 6px; color: #6b7280; font-size: 11px;\">\n            Actualizado: ${vehiculo.ultimaActualizacion?new Date(vehiculo.ultimaActualizacion).toLocaleTimeString():'N/A'}\n          </div>\n        </div>\n      </div>\n    `;};const createZonaInfoWindow=(zona,todosLosTrabajadores)=>{const trabajadorAsignado=todosLosTrabajadores.find(t=>t.id===zona.trabajadorAsignado);const fontSize=isMobile?'13px':'14px';const padding=isMobile?'8px':'10px';const maxWidth=isMobile?'250px':'280px';return`\n      <div style=\"padding: ${padding}; font-family: Arial, sans-serif; max-width: ${maxWidth};\">\n        <h3 style=\"margin: 0 0 8px 0; color: #1f2937; font-size: ${isMobile?'16px':'18px'};\">\n          ${zona.nombre}\n        </h3>\n        <div style=\"background: ${zona.estado==='en_progreso'?'#dbeafe':zona.estado==='pendiente'?'#fef3c7':'#dcfce7'}; \n                    padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 8px; font-size: ${fontSize};\">\n          <strong>Estado:</strong> ${zona.estado||'pendiente'}\n        </div>\n        <div style=\"font-size: ${fontSize}; line-height: 1.5;\">\n          ${zona.direccion?`<div><strong>📍 Dirección:</strong> ${zona.direccion}</div>`:''}\n          ${trabajadorAsignado?`<div><strong>👷 Trabajador:</strong> ${trabajadorAsignado.nombre||trabajadorAsignado.email}</div>`:'<div><strong>👷 Trabajador:</strong> Sin asignar</div>'}\n          ${zona.fechaCompletado?`<div style=\"color: #22c55e; margin-top: 6px;\"><strong>✅ Completado:</strong> ${new Date(zona.fechaCompletado).toLocaleString()}</div>`:''}\n        </div>\n      </div>\n    `;};const createTrabajadorInfoWindow=trabajador=>{var _trabajador$ubicacion;const ahora=new Date();const ultimaActualizacion=(_trabajador$ubicacion=trabajador.ubicacion)!==null&&_trabajador$ubicacion!==void 0&&_trabajador$ubicacion.timestamp?new Date(trabajador.ubicacion.timestamp):null;const diferenciaTiempo=ultimaActualizacion?Math.floor((ahora-ultimaActualizacion)/1000):null;let estadoConexion='⚫ Sin conexión';let colorEstado='#6b7280';if(diferenciaTiempo!==null){if(diferenciaTiempo<30){estadoConexion='🟢 En línea';colorEstado='#10b981';}else if(diferenciaTiempo<60){estadoConexion='🟡 Reciente';colorEstado='#f59e0b';}else if(diferenciaTiempo<300){estadoConexion='🟠 '+Math.floor(diferenciaTiempo/60)+' min';colorEstado='#fb923c';}else{estadoConexion='🔴 Desconectado';colorEstado='#ef4444';}}const fontSize=isMobile?'13px':'14px';const padding=isMobile?'8px':'10px';const maxWidth=isMobile?'260px':'300px';return`\n      <div style=\"padding: ${padding}; font-family: Arial, sans-serif; max-width: ${maxWidth};\">\n        <h3 style=\"margin: 0 0 8px 0; color: #1f2937; font-size: ${isMobile?'16px':'18px'};\">\n          👷 ${trabajador.nombre||trabajador.email||'Trabajador'}\n        </h3>\n        \n        <div style=\"display: flex; gap: 8px; margin-bottom: 10px;\">\n          <span style=\"\n            font-size: 11px;\n            padding: 3px 8px;\n            background: ${colorEstado}22;\n            color: ${colorEstado};\n            border-radius: 12px;\n          \">\n            ${estadoConexion}\n          </span>\n          <span style=\"\n            font-size: 11px;\n            padding: 3px 8px;\n            background: ${trabajador.estado==='en_camino'?'#ede9fe':trabajador.estado==='trabajando'?'#dcfce7':'#e0f2fe'}; \n            color: ${trabajador.estado==='en_camino'?'#7c3aed':trabajador.estado==='trabajando'?'#16a34a':'#0891b2'};\n            border-radius: 12px;\n          \">\n            ${trabajador.estado==='en_camino'?'🚗 En camino':trabajador.estado==='trabajando'?'🔧 Trabajando':'✅ Disponible'}\n          </span>\n        </div>\n        \n        <div style=\"font-size: ${fontSize}; line-height: 1.5;\">\n          ${trabajador.email?`<div style=\"margin-bottom: 4px;\"><strong>📧</strong> ${trabajador.email}</div>`:''}\n          ${trabajador.telefono?`<div style=\"margin-bottom: 4px;\"><strong>📱</strong> ${trabajador.telefono}</div>`:''}\n          ${trabajador.zonaDestino?`<div style=\"margin-bottom: 4px;\"><strong>🎯</strong> ${trabajador.zonaDestino}</div>`:''}\n          \n          ${trabajador.ubicacion?`\n            <div style=\"margin-top: 8px; padding-top: 8px; border-top: 1px solid #e5e7eb;\">\n              <div style=\"font-size: 11px; color: #9ca3af;\">\n                ⏱️ ${ultimaActualizacion?ultimaActualizacion.toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit',second:'2-digit'}):'N/A'}\n              </div>\n            </div>\n          `:''}\n        </div>\n      </div>\n    `;};// Estilos responsivos\nconst styles={header:{position:'fixed',top:0,left:0,right:0,background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white',padding:isMobile?'10px 12px':'12px 20px',zIndex:1002,boxShadow:'0 2px 10px rgba(0,0,0,0.2)'},headerContent:{display:'flex',justifyContent:'space-between',alignItems:'center'},logo:{display:'flex',alignItems:'center',gap:isMobile?'8px':'12px'},title:{margin:0,fontSize:isMobile?'16px':'20px',fontWeight:'600',display:'flex',alignItems:'center',gap:'8px'},subtitle:{margin:'2px 0 0 0',fontSize:isMobile?'11px':'13px',opacity:0.95,display:isMobile?'none':'block'},userInfo:{display:'flex',alignItems:'center',gap:isMobile?'6px':'10px',flexWrap:isMobile?'nowrap':'nowrap'},userName:{fontSize:isMobile?'12px':'13px',display:isMobile?'none':'block'},menuButton:{padding:isMobile?'8px':'8px 12px',background:'rgba(255,255,255,0.2)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'6px',cursor:'pointer',fontSize:isMobile?'18px':'14px',display:'flex',alignItems:'center',gap:'6px'},filters:{position:'fixed',top:isMobile?'60px':'70px',left:isMobile?'10px':'20px',right:isMobile?'10px':'auto',background:'white',borderRadius:'8px',padding:isMobile?'8px':'10px',boxShadow:'0 2px 10px rgba(0,0,0,0.1)',zIndex:1001,display:'flex',gap:isMobile?'6px':'8px',overflowX:isMobile?'auto':'visible',WebkitOverflowScrolling:'touch'},filterButton:{padding:isMobile?'8px 12px':'8px 12px',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:isMobile?'12px':'13px',fontWeight:'500',whiteSpace:'nowrap',transition:'all 0.2s',minWidth:isMobile?'auto':'100px'},statsPanel:{position:'fixed',bottom:isMobile?'120px':'20px',left:isMobile?'10px':'20px',right:isMobile?'10px':'auto',background:'white',borderRadius:'12px',padding:isMobile?'12px':'15px',boxShadow:'0 4px 20px rgba(0,0,0,0.15)',zIndex:1001,maxWidth:isMobile?'100%':'380px',maxHeight:isMobile?'40vh':'60vh',overflow:'auto'},floatingButtons:{position:'fixed',bottom:isMobile?'70px':'20px',right:'20px',display:'flex',flexDirection:'column',gap:'10px',zIndex:1000},floatingButton:{width:isMobile?'56px':'48px',height:isMobile?'56px':'48px',borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',boxShadow:'0 4px 12px rgba(0,0,0,0.15)',cursor:'pointer',fontSize:isMobile?'22px':'20px',border:'none'},mobileMenu:{position:'fixed',top:0,left:showMenu?0:'-100%',width:'80%',maxWidth:'300px',height:'100vh',background:'white',zIndex:2000,transition:'left 0.3s ease',boxShadow:'2px 0 20px rgba(0,0,0,0.2)'},menuOverlay:{position:'fixed',top:0,left:0,right:0,bottom:0,background:'rgba(0,0,0,0.5)',zIndex:1999,display:showMenu?'block':'none'}};return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',height:'100vh',position:'relative'},children:[/*#__PURE__*/_jsx(\"div\",{ref:mapRef,style:{width:'100%',height:'100%',position:'absolute',top:0,left:0}}),/*#__PURE__*/_jsx(\"div\",{style:styles.header,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.headerContent,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.logo,children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowMenu(true),style:styles.menuButton,\"aria-label\":\"Men\\xFA\",children:\"\\u2630\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{style:styles.title,children:[\"\\uD83D\\uDDFA\\uFE0F \",isMobile?'MapaQuillón':'Centro de Control']}),/*#__PURE__*/_jsx(\"p\",{style:styles.subtitle,children:\"Monitoreo en tiempo real\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.userInfo,children:[!isMobile&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange&&onViewChange('dashboard'),style:{padding:'6px 12px',background:'rgba(255,255,255,0.3)',color:'white',border:'1px solid rgba(255,255,255,0.4)',borderRadius:'6px',cursor:'pointer',fontSize:'13px',fontWeight:'500',display:'flex',alignItems:'center',gap:'4px'},children:\"\\uD83D\\uDCCA Dashboard GPS\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onViewChange&&onViewChange('zones'),style:{padding:'6px 12px',background:'rgba(255,255,255,0.2)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'6px',cursor:'pointer',fontSize:'13px',fontWeight:'500',display:'flex',alignItems:'center',gap:'4px'},children:\"\\uD83D\\uDDFA\\uFE0F Gesti\\xF3n Zonas\"})]}),/*#__PURE__*/_jsxs(\"span\",{style:styles.userName,children:[\"\\uD83D\\uDC64 \",currentUser.name||currentUser.email]}),!isMobile&&/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,style:{padding:'6px 12px',background:'rgba(255,255,255,0.2)',color:'white',border:'1px solid rgba(255,255,255,0.3)',borderRadius:'6px',cursor:'pointer',fontSize:'13px'},children:\"Salir\"}),/*#__PURE__*/_jsx(\"span\",{style:{background:'rgba(255,255,255,0.2)',padding:'4px 8px',borderRadius:'4px',fontSize:isMobile?'11px':'12px',display:isMobile?'none':'block'},children:new Date().toLocaleTimeString('es-CL',{hour:'2-digit',minute:'2-digit'})})]})]})}),isMobile&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:styles.menuOverlay,onClick:()=>setShowMenu(false)}),/*#__PURE__*/_jsx(\"div\",{style:styles.mobileMenu,children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:'18px'},children:\"Men\\xFA\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowMenu(false),style:{background:'none',border:'none',fontSize:'24px',cursor:'pointer'},children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{borderBottom:'1px solid #e5e7eb',paddingBottom:'15px',marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'10px',color:'#6b7280',fontSize:'13px'},children:\"Usuario actual:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',fontWeight:'500'},children:[\"\\uD83D\\uDC64 \",currentUser.name||currentUser.email]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#6b7280',marginTop:'4px'},children:currentUser.role==='admin'?'👨‍💼 Administrador':currentUser.role==='superadmin'?'🔑 Super Admin':'👨‍💼 Usuario'})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setShowStats(!showStats);setShowMenu(false);},style:{width:'100%',padding:'12px',marginBottom:'10px',background:'#f3f4f6',border:'none',borderRadius:'6px',fontSize:'14px',textAlign:'left',cursor:'pointer'},children:[\"\\uD83D\\uDCCA \",showStats?'Ocultar':'Mostrar',\" Estad\\xEDsticas\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(window.confirm('¿Deseas cerrar sesión?')){onLogout();}},style:{width:'100%',padding:'12px',background:'#ef4444',color:'white',border:'none',borderRadius:'6px',fontSize:'14px',fontWeight:'500',cursor:'pointer'},children:\"\\uD83D\\uDEAA Cerrar Sesi\\xF3n\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{style:styles.filters,children:['todos','vehiculos','zonas','trabajadores'].map(filtro=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFiltroActivo(filtro),style:{...styles.filterButton,background:filtroActivo===filtro?filtro==='vehiculos'?'#22c55e':filtro==='zonas'?'#3b82f6':filtro==='trabajadores'?'#8b5cf6':'#667eea':'#f3f4f6',color:filtroActivo===filtro?'white':'#374151'},children:[filtro==='todos'&&`📍 Todos`,filtro==='vehiculos'&&`🚛 ${isMobile?'':'Vehículos'} (${realtimeStats.vehiculos.total})`,filtro==='zonas'&&`🏗️ ${isMobile?'':'Zonas'} (${realtimeStats.zonas.total})`,filtro==='trabajadores'&&`👷 ${isMobile?'':'Trabajadores'} (${realtimeStats.trabajadores.total})`]},filtro))}),showStats&&/*#__PURE__*/_jsxs(\"div\",{style:styles.statsPanel,children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'12px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,fontSize:isMobile?'14px':'16px',color:'#1f2937'},children:\"\\uD83D\\uDCCA Estado en Tiempo Real\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowStats(false),style:{background:'none',border:'none',color:'#6b7280',cursor:'pointer',fontSize:'20px',padding:'0',width:'24px',height:'24px'},children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:isMobile?'1fr':'1fr 1fr',gap:'12px',fontSize:isMobile?'12px':'13px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',marginBottom:'4px',fontWeight:'500'},children:\"\\uD83D\\uDE9B Veh\\xEDculos\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'2px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Total: \",/*#__PURE__*/_jsx(\"strong\",{children:realtimeStats.vehiculos.total})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Activos: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#22c55e'},children:realtimeStats.vehiculos.activos})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Mantenimiento: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#ef4444'},children:realtimeStats.vehiculos.enMantenimiento})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',marginBottom:'4px',fontWeight:'500'},children:\"\\uD83C\\uDFD7\\uFE0F Zonas\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'2px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Total: \",/*#__PURE__*/_jsx(\"strong\",{children:realtimeStats.zonas.total})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"En progreso: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#3b82f6'},children:realtimeStats.zonas.activas})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Completadas: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#22c55e'},children:realtimeStats.zonas.completadas})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{gridColumn:isMobile?'span 1':'span 2'},children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#6b7280',marginBottom:'4px',fontWeight:'500'},children:\"\\uD83D\\uDC77 Trabajadores\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'4px'},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Total: \",/*#__PURE__*/_jsx(\"strong\",{children:realtimeStats.trabajadores.total})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"En ruta: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#8b5cf6'},children:realtimeStats.trabajadores.enRuta})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Trabajando: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#10b981'},children:realtimeStats.trabajadores.trabajando})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Disponibles: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#06b6d4'},children:realtimeStats.trabajadores.disponibles})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px',paddingTop:'10px',borderTop:'1px solid #e5e7eb',fontSize:'11px',color:'#22c55e',fontWeight:'500',textAlign:'center'},children:\"\\uD83D\\uDFE2 Conectado a Firebase\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.floatingButtons,children:[!showStats&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowStats(true),style:{...styles.floatingButton,background:'white',color:'#667eea',border:'2px solid #667eea'},\"aria-label\":\"Mostrar estad\\xEDsticas\",children:\"\\uD83D\\uDCCA\"}),isMobile&&map&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(navigator.geolocation){navigator.geolocation.getCurrentPosition(position=>{const pos={lat:position.coords.latitude,lng:position.coords.longitude};map.setCenter(pos);map.setZoom(15);},()=>{alert('No se pudo obtener tu ubicación');});}},style:{...styles.floatingButton,background:'#3b82f6',color:'white'},\"aria-label\":\"Mi ubicaci\\xF3n\",children:\"\\uD83D\\uDCCD\"})]}),isMobile&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'fixed',bottom:0,left:0,right:0,background:'white',borderTop:'1px solid #e5e7eb',padding:'8px',zIndex:1001,display:'flex',justifyContent:'space-around',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onViewChange&&onViewChange('dashboard'),style:{flex:1,padding:'10px',background:'#667eea',color:'white',border:'none',borderRadius:'6px',fontSize:'12px',fontWeight:'500',display:'flex',flexDirection:'column',alignItems:'center',gap:'2px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'16px'},children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Dashboard\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onViewChange&&onViewChange('zones'),style:{flex:1,padding:'10px',background:'#f3f4f6',color:'#374151',border:'1px solid #e5e7eb',borderRadius:'6px',fontSize:'12px',fontWeight:'500',display:'flex',flexDirection:'column',alignItems:'center',gap:'2px'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'16px'},children:\"\\uD83D\\uDDFA\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Zonas\"})]})]}),!mapLoaded&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)',textAlign:'center',zIndex:1001},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'50px',height:'50px',border:'4px solid #f3f3f3',borderTop:'4px solid #667eea',borderRadius:'50%',animation:'spin 1s linear infinite'}}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'10px',color:'#666'},children:\"Cargando mapa...\"})]}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        \n        @media (max-width: 768px) {\n          ::-webkit-scrollbar {\n            width: 4px;\n            height: 4px;\n          }\n          \n          ::-webkit-scrollbar-track {\n            background: #f1f1f1;\n          }\n          \n          ::-webkit-scrollbar-thumb {\n            background: #888;\n            border-radius: 4px;\n          }\n        }\n      `})]});};export default MapaQuillonFirebase;","map":{"version":3,"names":["React","useEffect","useRef","useState","vehiculosService","zonasService","trabajadoresService","reportesService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MapaQuillonFirebase","_ref","currentUser","onLogout","onViewChange","mapRef","map","setMap","vehiculos","setVehiculos","zonas","setZonas","trabajadores","setTrabajadores","selectedItemId","setSelectedItemId","selectedItemType","setSelectedItemType","filtroActivo","setFiltroActivo","mapLoaded","setMapLoaded","showStats","setShowStats","showMenu","setShowMenu","isMobile","setIsMobile","realtimeStats","setRealtimeStats","total","activos","enMantenimiento","activas","completadas","pendientes","enRuta","trabajando","disponibles","markersRef","infoWindowRef","unsubscribesRef","dataRef","API_KEY","checkMobile","mobile","window","innerWidth","addEventListener","removeEventListener","loadGoogleMaps","Promise","resolve","reject","google","maps","existingScript","document","querySelector","Error","script","createElement","src","async","defer","onload","onerror","head","appendChild","initMap","current","mapInstance","Map","center","lat","lng","zoom","mapTypeId","styles","featureType","stylers","visibility","zoomControl","mapTypeControl","scaleControl","streetViewControl","rotateControl","fullscreenControl","gestureHandling","InfoWindow","addListener","close","err","console","error","unsubVehiculos","subscribeToVehiculos","vehiculosData","push","unsubZonas","subscribeToZonasAsignadas","zonasData","subscribeToZonas","unsubTrabajadores","subscribeToTrabajadores","trabajadoresData","getRealtimeStats","stats","forEach","unsub","updateInfoWindowContent","item","content","find","v","id","createVehiculoInfoWindow","z","createZonaInfoWindow","t","createTrabajadorInfoWindow","getMap","setContent","getIcon","tipo","estado","_iconConfigs$tipo","iconConfigs","vehiculo","activo","color","en_ruta","mantenimiento","inactivo","zona","en_progreso","pendiente","completado","activa","pausada","completada","trabajador","en_camino","disponible","config","path","SymbolPath","CIRCLE","scale","fillColor","fillOpacity","strokeColor","strokeWeight","anchor","Point","createOrUpdateMarker","key","position","icon","title","clickHandler","marker","setPosition","setIcon","setTitle","Marker","hideUnusedMarkers","activeKeys","Object","keys","includes","nombre","open","ubicacion","fontSize","padding","maxWidth","conductor","telefono","ultimaActualizacion","Date","toLocaleTimeString","todosLosTrabajadores","trabajadorAsignado","direccion","email","fechaCompletado","toLocaleString","_trabajador$ubicacion","ahora","timestamp","diferenciaTiempo","Math","floor","estadoConexion","colorEstado","zonaDestino","hour","minute","second","header","top","left","right","background","zIndex","boxShadow","headerContent","display","justifyContent","alignItems","logo","gap","margin","fontWeight","subtitle","opacity","userInfo","flexWrap","userName","menuButton","border","borderRadius","cursor","filters","overflowX","WebkitOverflowScrolling","filterButton","whiteSpace","transition","minWidth","statsPanel","bottom","maxHeight","overflow","floatingButtons","flexDirection","floatingButton","width","height","mobileMenu","menuOverlay","style","children","ref","onClick","name","marginBottom","borderBottom","paddingBottom","marginTop","role","textAlign","confirm","filtro","gridTemplateColumns","gridColumn","paddingTop","borderTop","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","setCenter","setZoom","alert","flex","transform","animation"],"sources":["C:/Users/Izan/Desktop/AppReact/mapa-quillon/src/components/MapaQuillonFirebase.js"],"sourcesContent":["// src/components/MapaQuillonFirebase.js\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { vehiculosService, zonasService, trabajadoresService, reportesService } from '../services/firebaseservices';\r\n\r\nconst MapaQuillonFirebase = ({ currentUser, onLogout, onViewChange }) => {\r\n  const mapRef = useRef(null);\r\n  const [map, setMap] = useState(null);\r\n  const [vehiculos, setVehiculos] = useState([]);\r\n  const [zonas, setZonas] = useState([]);\r\n  const [trabajadores, setTrabajadores] = useState([]);\r\n  const [selectedItemId, setSelectedItemId] = useState(null);\r\n  const [selectedItemType, setSelectedItemType] = useState(null);\r\n  const [filtroActivo, setFiltroActivo] = useState('todos');\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n  const [showStats, setShowStats] = useState(false); // Oculto por defecto en móvil\r\n  const [showMenu, setShowMenu] = useState(false); // Menú móvil\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [realtimeStats, setRealtimeStats] = useState({\r\n    vehiculos: { total: 0, activos: 0, enMantenimiento: 0 },\r\n    zonas: { total: 0, activas: 0, completadas: 0, pendientes: 0 },\r\n    trabajadores: { total: 0, enRuta: 0, trabajando: 0, disponibles: 0 }\r\n  });\r\n  \r\n  const markersRef = useRef({});\r\n  const infoWindowRef = useRef(null);\r\n  const unsubscribesRef = useRef([]);\r\n  const dataRef = useRef({ vehiculos: [], zonas: [], trabajadores: [] });\r\n  \r\n  const API_KEY = 'AIzaSyA7DrdL36n5cx-RNzuXGAQggFeGCheHDbY';\r\n\r\n  // Detectar si es móvil\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      const mobile = window.innerWidth <= 768;\r\n      setIsMobile(mobile);\r\n      // En móvil, ocultar stats por defecto\r\n      if (mobile && showStats) {\r\n        setShowStats(false);\r\n      }\r\n    };\r\n    \r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    \r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  // Cargar Google Maps\r\n  useEffect(() => {\r\n    const loadGoogleMaps = () => {\r\n      return new Promise((resolve, reject) => {\r\n        if (window.google && window.google.maps) {\r\n          resolve(window.google.maps);\r\n          return;\r\n        }\r\n\r\n        const existingScript = document.querySelector('script[src*=\"maps.googleapis.com\"]');\r\n        if (existingScript) {\r\n          existingScript.addEventListener('load', () => {\r\n            if (window.google && window.google.maps) {\r\n              resolve(window.google.maps);\r\n            } else {\r\n              reject(new Error('Google Maps no disponible'));\r\n            }\r\n          });\r\n          return;\r\n        }\r\n\r\n        const script = document.createElement('script');\r\n        script.src = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}&libraries=places,geometry&v=weekly`;\r\n        script.async = true;\r\n        script.defer = true;\r\n\r\n        script.onload = () => {\r\n          if (window.google && window.google.maps) {\r\n            resolve(window.google.maps);\r\n          }\r\n        };\r\n\r\n        script.onerror = () => reject(new Error('Error al cargar Google Maps'));\r\n        document.head.appendChild(script);\r\n      });\r\n    };\r\n\r\n    const initMap = async () => {\r\n      try {\r\n        const maps = await loadGoogleMaps();\r\n        \r\n        if (!mapRef.current) return;\r\n\r\n        const mapInstance = new maps.Map(mapRef.current, {\r\n          center: { lat: -36.7333, lng: -72.4667 },\r\n          zoom: 13,\r\n          mapTypeId: 'roadmap',\r\n          styles: [\r\n            {\r\n              featureType: 'poi.business',\r\n              stylers: [{ visibility: 'off' }]\r\n            }\r\n          ],\r\n          // Controles optimizados para móvil\r\n          zoomControl: !isMobile,\r\n          mapTypeControl: false,\r\n          scaleControl: false,\r\n          streetViewControl: false,\r\n          rotateControl: false,\r\n          fullscreenControl: true,\r\n          gestureHandling: isMobile ? 'greedy' : 'cooperative'\r\n        });\r\n\r\n        setMap(mapInstance);\r\n        infoWindowRef.current = new maps.InfoWindow();\r\n        \r\n        // Agregar listener para cerrar InfoWindow cuando se hace clic en el mapa\r\n        mapInstance.addListener('click', () => {\r\n          if (infoWindowRef.current) {\r\n            infoWindowRef.current.close();\r\n            setSelectedItemId(null);\r\n            setSelectedItemType(null);\r\n          }\r\n        });\r\n        \r\n        setMapLoaded(true);\r\n      } catch (err) {\r\n        console.error('Error al cargar mapa:', err);\r\n      }\r\n    };\r\n\r\n    initMap();\r\n  }, [isMobile]);\r\n\r\n  // Suscribirse a datos de Firebase en tiempo real\r\n  useEffect(() => {\r\n    // Suscribirse a vehículos\r\n    const unsubVehiculos = vehiculosService.subscribeToVehiculos((vehiculosData) => {\r\n      dataRef.current.vehiculos = vehiculosData;\r\n      setVehiculos(vehiculosData);\r\n    });\r\n    unsubscribesRef.current.push(unsubVehiculos);\r\n\r\n    // Suscribirse a zonas_asignadas\r\n    const unsubZonas = zonasService.subscribeToZonasAsignadas ? \r\n      zonasService.subscribeToZonasAsignadas((zonasData) => {\r\n        dataRef.current.zonas = zonasData;\r\n        setZonas(zonasData);\r\n      }) :\r\n      zonasService.subscribeToZonas((zonasData) => {\r\n        dataRef.current.zonas = zonasData;\r\n        setZonas(zonasData);\r\n      });\r\n    unsubscribesRef.current.push(unsubZonas);\r\n\r\n    // Suscribirse a trabajadores\r\n    const unsubTrabajadores = trabajadoresService.subscribeToTrabajadores((trabajadoresData) => {\r\n      dataRef.current.trabajadores = trabajadoresData;\r\n      setTrabajadores(trabajadoresData);\r\n    });\r\n    unsubscribesRef.current.push(unsubTrabajadores);\r\n\r\n    // Suscribirse a estadísticas en tiempo real\r\n    reportesService.getRealtimeStats((stats) => {\r\n      setRealtimeStats(stats);\r\n    });\r\n\r\n    // Limpiar suscripciones al desmontar\r\n    return () => {\r\n      unsubscribesRef.current.forEach(unsub => unsub && unsub());\r\n    };\r\n  }, []);\r\n\r\n  // Función para actualizar contenido del InfoWindow\r\n  const updateInfoWindowContent = () => {\r\n    if (!infoWindowRef.current || !selectedItemId || !selectedItemType) return;\r\n    \r\n    let item = null;\r\n    let content = null;\r\n    \r\n    // Buscar el item actualizado\r\n    if (selectedItemType === 'vehiculo') {\r\n      item = dataRef.current.vehiculos.find(v => v.id === selectedItemId);\r\n      if (item) content = createVehiculoInfoWindow(item);\r\n    } else if (selectedItemType === 'zona') {\r\n      item = dataRef.current.zonas.find(z => z.id === selectedItemId);\r\n      if (item) content = createZonaInfoWindow(item, dataRef.current.trabajadores);\r\n    } else if (selectedItemType === 'trabajador') {\r\n      item = dataRef.current.trabajadores.find(t => t.id === selectedItemId);\r\n      if (item) content = createTrabajadorInfoWindow(item);\r\n    }\r\n    \r\n    // Actualizar contenido solo si el InfoWindow está abierto\r\n    if (content && infoWindowRef.current.getMap()) {\r\n      infoWindowRef.current.setContent(content);\r\n    }\r\n  };\r\n\r\n  // Actualizar InfoWindow cuando cambien los datos\r\n  useEffect(() => {\r\n    updateInfoWindowContent();\r\n  }, [vehiculos, zonas, trabajadores]);\r\n\r\n  // Función para crear icono según tipo y estado\r\n  const getIcon = (tipo, estado) => {\r\n    if (!window.google) return null;\r\n    \r\n    const iconConfigs = {\r\n      vehiculo: {\r\n        activo: { color: '#22c55e' },\r\n        trabajando: { color: '#3b82f6' },\r\n        en_ruta: { color: '#f59e0b' },\r\n        mantenimiento: { color: '#ef4444' },\r\n        inactivo: { color: '#6b7280' }\r\n      },\r\n      zona: {\r\n        en_progreso: { color: '#3b82f6' },\r\n        pendiente: { color: '#f59e0b' },\r\n        completado: { color: '#22c55e' },\r\n        activa: { color: '#3b82f6' },\r\n        pausada: { color: '#f59e0b' },\r\n        completada: { color: '#22c55e' }\r\n      },\r\n      trabajador: {\r\n        en_camino: { color: '#8b5cf6' },\r\n        trabajando: { color: '#10b981' },\r\n        disponible: { color: '#06b6d4' },\r\n        inactivo: { color: '#6b7280' }\r\n      }\r\n    };\r\n\r\n    const config = iconConfigs[tipo]?.[estado] || { color: '#6b7280' };\r\n    \r\n    if (tipo === 'trabajador') {\r\n      return {\r\n        path: window.google.maps.SymbolPath.CIRCLE,\r\n        scale: isMobile ? 10 : 8,\r\n        fillColor: config.color,\r\n        fillOpacity: 1,\r\n        strokeColor: '#ffffff',\r\n        strokeWeight: 2\r\n      };\r\n    }\r\n\r\n    return {\r\n      path: 'M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z',\r\n      fillColor: config.color,\r\n      fillOpacity: 1,\r\n      strokeColor: '#ffffff',\r\n      strokeWeight: 2,\r\n      scale: isMobile ? 2.2 : (tipo === 'vehiculo' ? 1.8 : 2),\r\n      anchor: new window.google.maps.Point(12, 24)\r\n    };\r\n  };\r\n\r\n  // Crear/actualizar marcadores - OPTIMIZADO\r\n  useEffect(() => {\r\n    if (!map || !window.google) return;\r\n\r\n    // Función para crear o actualizar un marcador\r\n    const createOrUpdateMarker = (key, position, icon, title, clickHandler) => {\r\n      if (markersRef.current[key]) {\r\n        // Actualizar marcador existente\r\n        const marker = markersRef.current[key];\r\n        marker.setPosition(position);\r\n        marker.setIcon(icon);\r\n        marker.setTitle(title);\r\n      } else {\r\n        // Crear nuevo marcador\r\n        const marker = new window.google.maps.Marker({\r\n          position: position,\r\n          map: map,\r\n          title: title,\r\n          icon: icon\r\n        });\r\n\r\n        marker.addListener('click', clickHandler);\r\n        markersRef.current[key] = marker;\r\n      }\r\n    };\r\n\r\n    // Función para ocultar marcadores no necesarios\r\n    const hideUnusedMarkers = (activeKeys) => {\r\n      Object.keys(markersRef.current).forEach(key => {\r\n        if (!activeKeys.includes(key)) {\r\n          markersRef.current[key].setMap(null);\r\n          delete markersRef.current[key];\r\n        }\r\n      });\r\n    };\r\n\r\n    const activeKeys = [];\r\n\r\n    // Actualizar marcadores de vehículos\r\n    if (filtroActivo === 'todos' || filtroActivo === 'vehiculos') {\r\n      vehiculos.forEach(vehiculo => {\r\n        if (vehiculo.lat && vehiculo.lng) {\r\n          const key = `vehiculo_${vehiculo.id}`;\r\n          activeKeys.push(key);\r\n          \r\n          createOrUpdateMarker(\r\n            key,\r\n            { lat: vehiculo.lat, lng: vehiculo.lng },\r\n            getIcon('vehiculo', vehiculo.estado),\r\n            vehiculo.nombre,\r\n            () => {\r\n              const content = createVehiculoInfoWindow(vehiculo);\r\n              infoWindowRef.current.setContent(content);\r\n              infoWindowRef.current.open(map, markersRef.current[key]);\r\n              setSelectedItemId(vehiculo.id);\r\n              setSelectedItemType('vehiculo');\r\n            }\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // Actualizar marcadores de zonas\r\n    if (filtroActivo === 'todos' || filtroActivo === 'zonas') {\r\n      zonas.forEach(zona => {\r\n        if (zona.lat && zona.lng) {\r\n          const key = `zona_${zona.id}`;\r\n          activeKeys.push(key);\r\n          \r\n          createOrUpdateMarker(\r\n            key,\r\n            { lat: zona.lat, lng: zona.lng },\r\n            getIcon('zona', zona.estado || 'pendiente'),\r\n            zona.nombre,\r\n            () => {\r\n              const content = createZonaInfoWindow(zona, trabajadores);\r\n              infoWindowRef.current.setContent(content);\r\n              infoWindowRef.current.open(map, markersRef.current[key]);\r\n              setSelectedItemId(zona.id);\r\n              setSelectedItemType('zona');\r\n            }\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // Actualizar marcadores de trabajadores\r\n    if (filtroActivo === 'todos' || filtroActivo === 'trabajadores') {\r\n      trabajadores.forEach(trabajador => {\r\n        if (trabajador.ubicacion && trabajador.ubicacion.lat && trabajador.ubicacion.lng) {\r\n          const key = `trabajador_${trabajador.id}`;\r\n          activeKeys.push(key);\r\n          \r\n          createOrUpdateMarker(\r\n            key,\r\n            { lat: trabajador.ubicacion.lat, lng: trabajador.ubicacion.lng },\r\n            getIcon('trabajador', trabajador.estado || 'disponible'),\r\n            trabajador.nombre,\r\n            () => {\r\n              const content = createTrabajadorInfoWindow(trabajador);\r\n              infoWindowRef.current.setContent(content);\r\n              infoWindowRef.current.open(map, markersRef.current[key]);\r\n              setSelectedItemId(trabajador.id);\r\n              setSelectedItemType('trabajador');\r\n            }\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // Ocultar marcadores que ya no están activos\r\n    hideUnusedMarkers(activeKeys);\r\n\r\n  }, [map, vehiculos, zonas, trabajadores, filtroActivo, isMobile]);\r\n\r\n  // Funciones para crear contenido de InfoWindow (simplificado para móvil)\r\n  const createVehiculoInfoWindow = (vehiculo) => {\r\n    const fontSize = isMobile ? '13px' : '14px';\r\n    const padding = isMobile ? '8px' : '10px';\r\n    const maxWidth = isMobile ? '250px' : '280px';\r\n    \r\n    return `\r\n      <div style=\"padding: ${padding}; font-family: Arial, sans-serif; max-width: ${maxWidth};\">\r\n        <h3 style=\"margin: 0 0 8px 0; color: #1f2937; font-size: ${isMobile ? '16px' : '18px'};\">\r\n          ${vehiculo.nombre}\r\n        </h3>\r\n        <div style=\"background: ${vehiculo.estado === 'activo' ? '#dcfce7' : vehiculo.estado === 'trabajando' ? '#dbeafe' : '#fef3c7'}; \r\n                    padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 8px; font-size: ${fontSize};\">\r\n          <strong>Estado:</strong> ${vehiculo.estado}\r\n        </div>\r\n        <div style=\"font-size: ${fontSize}; line-height: 1.5;\">\r\n          ${vehiculo.conductor ? `<div><strong>👤 Conductor:</strong> ${vehiculo.conductor}</div>` : ''}\r\n          ${vehiculo.telefono ? `<div><strong>📱 Teléfono:</strong> ${vehiculo.telefono}</div>` : ''}\r\n          ${vehiculo.zona ? `<div><strong>🏗️ Zona:</strong> ${vehiculo.zona}</div>` : ''}\r\n          <div style=\"margin-top: 6px; color: #6b7280; font-size: 11px;\">\r\n            Actualizado: ${vehiculo.ultimaActualizacion ? new Date(vehiculo.ultimaActualizacion).toLocaleTimeString() : 'N/A'}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  };\r\n\r\n  const createZonaInfoWindow = (zona, todosLosTrabajadores) => {\r\n    const trabajadorAsignado = todosLosTrabajadores.find(t => t.id === zona.trabajadorAsignado);\r\n    const fontSize = isMobile ? '13px' : '14px';\r\n    const padding = isMobile ? '8px' : '10px';\r\n    const maxWidth = isMobile ? '250px' : '280px';\r\n    \r\n    return `\r\n      <div style=\"padding: ${padding}; font-family: Arial, sans-serif; max-width: ${maxWidth};\">\r\n        <h3 style=\"margin: 0 0 8px 0; color: #1f2937; font-size: ${isMobile ? '16px' : '18px'};\">\r\n          ${zona.nombre}\r\n        </h3>\r\n        <div style=\"background: ${zona.estado === 'en_progreso' ? '#dbeafe' : zona.estado === 'pendiente' ? '#fef3c7' : '#dcfce7'}; \r\n                    padding: 4px 8px; border-radius: 4px; display: inline-block; margin-bottom: 8px; font-size: ${fontSize};\">\r\n          <strong>Estado:</strong> ${zona.estado || 'pendiente'}\r\n        </div>\r\n        <div style=\"font-size: ${fontSize}; line-height: 1.5;\">\r\n          ${zona.direccion ? `<div><strong>📍 Dirección:</strong> ${zona.direccion}</div>` : ''}\r\n          ${trabajadorAsignado ? `<div><strong>👷 Trabajador:</strong> ${trabajadorAsignado.nombre || trabajadorAsignado.email}</div>` : '<div><strong>👷 Trabajador:</strong> Sin asignar</div>'}\r\n          ${zona.fechaCompletado ? `<div style=\"color: #22c55e; margin-top: 6px;\"><strong>✅ Completado:</strong> ${new Date(zona.fechaCompletado).toLocaleString()}</div>` : ''}\r\n        </div>\r\n      </div>\r\n    `;\r\n  };\r\n\r\n  const createTrabajadorInfoWindow = (trabajador) => {\r\n    const ahora = new Date();\r\n    const ultimaActualizacion = trabajador.ubicacion?.timestamp ? new Date(trabajador.ubicacion.timestamp) : null;\r\n    const diferenciaTiempo = ultimaActualizacion ? Math.floor((ahora - ultimaActualizacion) / 1000) : null;\r\n    \r\n    let estadoConexion = '⚫ Sin conexión';\r\n    let colorEstado = '#6b7280';\r\n    \r\n    if (diferenciaTiempo !== null) {\r\n      if (diferenciaTiempo < 30) {\r\n        estadoConexion = '🟢 En línea';\r\n        colorEstado = '#10b981';\r\n      } else if (diferenciaTiempo < 60) {\r\n        estadoConexion = '🟡 Reciente';\r\n        colorEstado = '#f59e0b';\r\n      } else if (diferenciaTiempo < 300) {\r\n        estadoConexion = '🟠 ' + Math.floor(diferenciaTiempo / 60) + ' min';\r\n        colorEstado = '#fb923c';\r\n      } else {\r\n        estadoConexion = '🔴 Desconectado';\r\n        colorEstado = '#ef4444';\r\n      }\r\n    }\r\n    \r\n    const fontSize = isMobile ? '13px' : '14px';\r\n    const padding = isMobile ? '8px' : '10px';\r\n    const maxWidth = isMobile ? '260px' : '300px';\r\n    \r\n    return `\r\n      <div style=\"padding: ${padding}; font-family: Arial, sans-serif; max-width: ${maxWidth};\">\r\n        <h3 style=\"margin: 0 0 8px 0; color: #1f2937; font-size: ${isMobile ? '16px' : '18px'};\">\r\n          👷 ${trabajador.nombre || trabajador.email || 'Trabajador'}\r\n        </h3>\r\n        \r\n        <div style=\"display: flex; gap: 8px; margin-bottom: 10px;\">\r\n          <span style=\"\r\n            font-size: 11px;\r\n            padding: 3px 8px;\r\n            background: ${colorEstado}22;\r\n            color: ${colorEstado};\r\n            border-radius: 12px;\r\n          \">\r\n            ${estadoConexion}\r\n          </span>\r\n          <span style=\"\r\n            font-size: 11px;\r\n            padding: 3px 8px;\r\n            background: ${trabajador.estado === 'en_camino' ? '#ede9fe' : \r\n                         trabajador.estado === 'trabajando' ? '#dcfce7' : \r\n                         '#e0f2fe'}; \r\n            color: ${trabajador.estado === 'en_camino' ? '#7c3aed' : \r\n                    trabajador.estado === 'trabajando' ? '#16a34a' : \r\n                    '#0891b2'};\r\n            border-radius: 12px;\r\n          \">\r\n            ${trabajador.estado === 'en_camino' ? '🚗 En camino' :\r\n              trabajador.estado === 'trabajando' ? '🔧 Trabajando' :\r\n              '✅ Disponible'}\r\n          </span>\r\n        </div>\r\n        \r\n        <div style=\"font-size: ${fontSize}; line-height: 1.5;\">\r\n          ${trabajador.email ? `<div style=\"margin-bottom: 4px;\"><strong>📧</strong> ${trabajador.email}</div>` : ''}\r\n          ${trabajador.telefono ? `<div style=\"margin-bottom: 4px;\"><strong>📱</strong> ${trabajador.telefono}</div>` : ''}\r\n          ${trabajador.zonaDestino ? `<div style=\"margin-bottom: 4px;\"><strong>🎯</strong> ${trabajador.zonaDestino}</div>` : ''}\r\n          \r\n          ${trabajador.ubicacion ? `\r\n            <div style=\"margin-top: 8px; padding-top: 8px; border-top: 1px solid #e5e7eb;\">\r\n              <div style=\"font-size: 11px; color: #9ca3af;\">\r\n                ⏱️ ${ultimaActualizacion ? ultimaActualizacion.toLocaleTimeString('es-CL', { \r\n                  hour: '2-digit', \r\n                  minute: '2-digit',\r\n                  second: '2-digit'\r\n                }) : 'N/A'}\r\n              </div>\r\n            </div>\r\n          ` : ''}\r\n        </div>\r\n      </div>\r\n    `;\r\n  };\r\n\r\n  // Estilos responsivos\r\n  const styles = {\r\n    header: {\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n      color: 'white',\r\n      padding: isMobile ? '10px 12px' : '12px 20px',\r\n      zIndex: 1002,\r\n      boxShadow: '0 2px 10px rgba(0,0,0,0.2)'\r\n    },\r\n    headerContent: {\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center'\r\n    },\r\n    logo: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: isMobile ? '8px' : '12px'\r\n    },\r\n    title: {\r\n      margin: 0,\r\n      fontSize: isMobile ? '16px' : '20px',\r\n      fontWeight: '600',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '8px'\r\n    },\r\n    subtitle: {\r\n      margin: '2px 0 0 0',\r\n      fontSize: isMobile ? '11px' : '13px',\r\n      opacity: 0.95,\r\n      display: isMobile ? 'none' : 'block'\r\n    },\r\n    userInfo: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: isMobile ? '6px' : '10px',\r\n      flexWrap: isMobile ? 'nowrap' : 'nowrap'\r\n    },\r\n    userName: {\r\n      fontSize: isMobile ? '12px' : '13px',\r\n      display: isMobile ? 'none' : 'block'\r\n    },\r\n    menuButton: {\r\n      padding: isMobile ? '8px' : '8px 12px',\r\n      background: 'rgba(255,255,255,0.2)',\r\n      color: 'white',\r\n      border: '1px solid rgba(255,255,255,0.3)',\r\n      borderRadius: '6px',\r\n      cursor: 'pointer',\r\n      fontSize: isMobile ? '18px' : '14px',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      gap: '6px'\r\n    },\r\n    filters: {\r\n      position: 'fixed',\r\n      top: isMobile ? '60px' : '70px',\r\n      left: isMobile ? '10px' : '20px',\r\n      right: isMobile ? '10px' : 'auto',\r\n      background: 'white',\r\n      borderRadius: '8px',\r\n      padding: isMobile ? '8px' : '10px',\r\n      boxShadow: '0 2px 10px rgba(0,0,0,0.1)',\r\n      zIndex: 1001,\r\n      display: 'flex',\r\n      gap: isMobile ? '6px' : '8px',\r\n      overflowX: isMobile ? 'auto' : 'visible',\r\n      WebkitOverflowScrolling: 'touch'\r\n    },\r\n    filterButton: {\r\n      padding: isMobile ? '8px 12px' : '8px 12px',\r\n      border: 'none',\r\n      borderRadius: '6px',\r\n      cursor: 'pointer',\r\n      fontSize: isMobile ? '12px' : '13px',\r\n      fontWeight: '500',\r\n      whiteSpace: 'nowrap',\r\n      transition: 'all 0.2s',\r\n      minWidth: isMobile ? 'auto' : '100px'\r\n    },\r\n    statsPanel: {\r\n      position: 'fixed',\r\n      bottom: isMobile ? '120px' : '20px',\r\n      left: isMobile ? '10px' : '20px',\r\n      right: isMobile ? '10px' : 'auto',\r\n      background: 'white',\r\n      borderRadius: '12px',\r\n      padding: isMobile ? '12px' : '15px',\r\n      boxShadow: '0 4px 20px rgba(0,0,0,0.15)',\r\n      zIndex: 1001,\r\n      maxWidth: isMobile ? '100%' : '380px',\r\n      maxHeight: isMobile ? '40vh' : '60vh',\r\n      overflow: 'auto'\r\n    },\r\n    floatingButtons: {\r\n      position: 'fixed',\r\n      bottom: isMobile ? '70px' : '20px',\r\n      right: '20px',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      gap: '10px',\r\n      zIndex: 1000\r\n    },\r\n    floatingButton: {\r\n      width: isMobile ? '56px' : '48px',\r\n      height: isMobile ? '56px' : '48px',\r\n      borderRadius: '50%',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\r\n      cursor: 'pointer',\r\n      fontSize: isMobile ? '22px' : '20px',\r\n      border: 'none'\r\n    },\r\n    mobileMenu: {\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: showMenu ? 0 : '-100%',\r\n      width: '80%',\r\n      maxWidth: '300px',\r\n      height: '100vh',\r\n      background: 'white',\r\n      zIndex: 2000,\r\n      transition: 'left 0.3s ease',\r\n      boxShadow: '2px 0 20px rgba(0,0,0,0.2)'\r\n    },\r\n    menuOverlay: {\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      background: 'rgba(0,0,0,0.5)',\r\n      zIndex: 1999,\r\n      display: showMenu ? 'block' : 'none'\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ width: '100%', height: '100vh', position: 'relative' }}>\r\n      {/* Mapa - Primero para que esté en el fondo */}\r\n      <div \r\n        ref={mapRef}\r\n        style={{ \r\n          width: '100%', \r\n          height: '100%',\r\n          position: 'absolute',\r\n          top: 0,\r\n          left: 0\r\n        }} \r\n      />\r\n      \r\n      {/* Header responsivo */}\r\n      <div style={styles.header}>\r\n        <div style={styles.headerContent}>\r\n          <div style={styles.logo}>\r\n            <button\r\n              onClick={() => setShowMenu(true)}\r\n              style={styles.menuButton}\r\n              aria-label=\"Menú\"\r\n            >\r\n              ☰\r\n            </button>\r\n            <div>\r\n              <h1 style={styles.title}>\r\n                🗺️ {isMobile ? 'MapaQuillón' : 'Centro de Control'}\r\n              </h1>\r\n              <p style={styles.subtitle}>\r\n                Monitoreo en tiempo real\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div style={styles.userInfo}>\r\n            {/* Botones de navegación en desktop */}\r\n            {!isMobile && (\r\n              <>\r\n                <button\r\n                  onClick={() => onViewChange && onViewChange('dashboard')}\r\n                  style={{\r\n                    padding: '6px 12px',\r\n                    background: 'rgba(255,255,255,0.3)',\r\n                    color: 'white',\r\n                    border: '1px solid rgba(255,255,255,0.4)',\r\n                    borderRadius: '6px',\r\n                    cursor: 'pointer',\r\n                    fontSize: '13px',\r\n                    fontWeight: '500',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '4px'\r\n                  }}\r\n                >\r\n                  📊 Dashboard GPS\r\n                </button>\r\n                <button\r\n                  onClick={() => onViewChange && onViewChange('zones')}\r\n                  style={{\r\n                    padding: '6px 12px',\r\n                    background: 'rgba(255,255,255,0.2)',\r\n                    color: 'white',\r\n                    border: '1px solid rgba(255,255,255,0.3)',\r\n                    borderRadius: '6px',\r\n                    cursor: 'pointer',\r\n                    fontSize: '13px',\r\n                    fontWeight: '500',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '4px'\r\n                  }}\r\n                >\r\n                  🗺️ Gestión Zonas\r\n                </button>\r\n              </>\r\n            )}\r\n            \r\n            <span style={styles.userName}>\r\n              👤 {currentUser.name || currentUser.email}\r\n            </span>\r\n            {!isMobile && (\r\n              <button\r\n                onClick={onLogout}\r\n                style={{\r\n                  padding: '6px 12px',\r\n                  background: 'rgba(255,255,255,0.2)',\r\n                  color: 'white',\r\n                  border: '1px solid rgba(255,255,255,0.3)',\r\n                  borderRadius: '6px',\r\n                  cursor: 'pointer',\r\n                  fontSize: '13px'\r\n                }}\r\n              >\r\n                Salir\r\n              </button>\r\n            )}\r\n            <span style={{ \r\n              background: 'rgba(255,255,255,0.2)', \r\n              padding: '4px 8px', \r\n              borderRadius: '4px',\r\n              fontSize: isMobile ? '11px' : '12px',\r\n              display: isMobile ? 'none' : 'block'\r\n            }}>\r\n              {new Date().toLocaleTimeString('es-CL', { \r\n                hour: '2-digit', \r\n                minute: '2-digit' \r\n              })}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Menú lateral móvil */}\r\n      {isMobile && (\r\n        <>\r\n          <div style={styles.menuOverlay} onClick={() => setShowMenu(false)} />\r\n          <div style={styles.mobileMenu}>\r\n            <div style={{ padding: '20px' }}>\r\n              <div style={{ \r\n                display: 'flex', \r\n                justifyContent: 'space-between', \r\n                alignItems: 'center',\r\n                marginBottom: '20px'\r\n              }}>\r\n                <h2 style={{ margin: 0, fontSize: '18px' }}>Menú</h2>\r\n                <button\r\n                  onClick={() => setShowMenu(false)}\r\n                  style={{\r\n                    background: 'none',\r\n                    border: 'none',\r\n                    fontSize: '24px',\r\n                    cursor: 'pointer'\r\n                  }}\r\n                >\r\n                  ×\r\n                </button>\r\n              </div>\r\n              \r\n              <div style={{ borderBottom: '1px solid #e5e7eb', paddingBottom: '15px', marginBottom: '15px' }}>\r\n                <div style={{ marginBottom: '10px', color: '#6b7280', fontSize: '13px' }}>\r\n                  Usuario actual:\r\n                </div>\r\n                <div style={{ fontSize: '14px', fontWeight: '500' }}>\r\n                  👤 {currentUser.name || currentUser.email}\r\n                </div>\r\n                <div style={{ fontSize: '12px', color: '#6b7280', marginTop: '4px' }}>\r\n                  {currentUser.role === 'admin' ? '👨‍💼 Administrador' : \r\n                   currentUser.role === 'superadmin' ? '🔑 Super Admin' : '👨‍💼 Usuario'}\r\n                </div>\r\n              </div>\r\n              \r\n              <button\r\n                onClick={() => {\r\n                  setShowStats(!showStats);\r\n                  setShowMenu(false);\r\n                }}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '12px',\r\n                  marginBottom: '10px',\r\n                  background: '#f3f4f6',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  fontSize: '14px',\r\n                  textAlign: 'left',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                📊 {showStats ? 'Ocultar' : 'Mostrar'} Estadísticas\r\n              </button>\r\n              \r\n              <button\r\n                onClick={() => {\r\n                  if (window.confirm('¿Deseas cerrar sesión?')) {\r\n                    onLogout();\r\n                  }\r\n                }}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '12px',\r\n                  background: '#ef4444',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  fontSize: '14px',\r\n                  fontWeight: '500',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                🚪 Cerrar Sesión\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {/* Panel de filtros responsivo */}\r\n      <div style={styles.filters}>\r\n        {['todos', 'vehiculos', 'zonas', 'trabajadores'].map(filtro => (\r\n          <button\r\n            key={filtro}\r\n            onClick={() => setFiltroActivo(filtro)}\r\n            style={{\r\n              ...styles.filterButton,\r\n              background: filtroActivo === filtro ? \r\n                (filtro === 'vehiculos' ? '#22c55e' :\r\n                 filtro === 'zonas' ? '#3b82f6' :\r\n                 filtro === 'trabajadores' ? '#8b5cf6' : '#667eea') : \r\n                '#f3f4f6',\r\n              color: filtroActivo === filtro ? 'white' : '#374151'\r\n            }}\r\n          >\r\n            {filtro === 'todos' && `📍 Todos`}\r\n            {filtro === 'vehiculos' && `🚛 ${isMobile ? '' : 'Vehículos'} (${realtimeStats.vehiculos.total})`}\r\n            {filtro === 'zonas' && `🏗️ ${isMobile ? '' : 'Zonas'} (${realtimeStats.zonas.total})`}\r\n            {filtro === 'trabajadores' && `👷 ${isMobile ? '' : 'Trabajadores'} (${realtimeStats.trabajadores.total})`}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Panel de estadísticas responsivo */}\r\n      {showStats && (\r\n        <div style={styles.statsPanel}>\r\n          <div style={{ \r\n            display: 'flex', \r\n            justifyContent: 'space-between', \r\n            alignItems: 'center',\r\n            marginBottom: '12px'\r\n          }}>\r\n            <h3 style={{ \r\n              margin: 0, \r\n              fontSize: isMobile ? '14px' : '16px', \r\n              color: '#1f2937' \r\n            }}>\r\n              📊 Estado en Tiempo Real\r\n            </h3>\r\n            <button\r\n              onClick={() => setShowStats(false)}\r\n              style={{\r\n                background: 'none',\r\n                border: 'none',\r\n                color: '#6b7280',\r\n                cursor: 'pointer',\r\n                fontSize: '20px',\r\n                padding: '0',\r\n                width: '24px',\r\n                height: '24px'\r\n              }}\r\n            >\r\n              ×\r\n            </button>\r\n          </div>\r\n\r\n          <div style={{ \r\n            display: 'grid', \r\n            gridTemplateColumns: isMobile ? '1fr' : '1fr 1fr', \r\n            gap: '12px', \r\n            fontSize: isMobile ? '12px' : '13px' \r\n          }}>\r\n            <div>\r\n              <div style={{ color: '#6b7280', marginBottom: '4px', fontWeight: '500' }}>\r\n                🚛 Vehículos\r\n              </div>\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '2px' }}>\r\n                <span>Total: <strong>{realtimeStats.vehiculos.total}</strong></span>\r\n                <span>Activos: <strong style={{ color: '#22c55e' }}>{realtimeStats.vehiculos.activos}</strong></span>\r\n                <span>Mantenimiento: <strong style={{ color: '#ef4444' }}>{realtimeStats.vehiculos.enMantenimiento}</strong></span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <div style={{ color: '#6b7280', marginBottom: '4px', fontWeight: '500' }}>\r\n                🏗️ Zonas\r\n              </div>\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '2px' }}>\r\n                <span>Total: <strong>{realtimeStats.zonas.total}</strong></span>\r\n                <span>En progreso: <strong style={{ color: '#3b82f6' }}>{realtimeStats.zonas.activas}</strong></span>\r\n                <span>Completadas: <strong style={{ color: '#22c55e' }}>{realtimeStats.zonas.completadas}</strong></span>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{ gridColumn: isMobile ? 'span 1' : 'span 2' }}>\r\n              <div style={{ color: '#6b7280', marginBottom: '4px', fontWeight: '500' }}>\r\n                👷 Trabajadores\r\n              </div>\r\n              <div style={{ \r\n                display: 'grid', \r\n                gridTemplateColumns: '1fr 1fr',\r\n                gap: '4px'\r\n              }}>\r\n                <span>Total: <strong>{realtimeStats.trabajadores.total}</strong></span>\r\n                <span>En ruta: <strong style={{ color: '#8b5cf6' }}>{realtimeStats.trabajadores.enRuta}</strong></span>\r\n                <span>Trabajando: <strong style={{ color: '#10b981' }}>{realtimeStats.trabajadores.trabajando}</strong></span>\r\n                <span>Disponibles: <strong style={{ color: '#06b6d4' }}>{realtimeStats.trabajadores.disponibles}</strong></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{\r\n            marginTop: '10px',\r\n            paddingTop: '10px',\r\n            borderTop: '1px solid #e5e7eb',\r\n            fontSize: '11px',\r\n            color: '#22c55e',\r\n            fontWeight: '500',\r\n            textAlign: 'center'\r\n          }}>\r\n            🟢 Conectado a Firebase\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Botones flotantes */}\r\n      <div style={styles.floatingButtons}>\r\n        {!showStats && (\r\n          <button\r\n            onClick={() => setShowStats(true)}\r\n            style={{\r\n              ...styles.floatingButton,\r\n              background: 'white',\r\n              color: '#667eea',\r\n              border: '2px solid #667eea'\r\n            }}\r\n            aria-label=\"Mostrar estadísticas\"\r\n          >\r\n            📊\r\n          </button>\r\n        )}\r\n        \r\n        {/* Botón de ubicación actual (móvil) */}\r\n        {isMobile && map && (\r\n          <button\r\n            onClick={() => {\r\n              if (navigator.geolocation) {\r\n                navigator.geolocation.getCurrentPosition(\r\n                  (position) => {\r\n                    const pos = {\r\n                      lat: position.coords.latitude,\r\n                      lng: position.coords.longitude\r\n                    };\r\n                    map.setCenter(pos);\r\n                    map.setZoom(15);\r\n                  },\r\n                  () => {\r\n                    alert('No se pudo obtener tu ubicación');\r\n                  }\r\n                );\r\n              }\r\n            }}\r\n            style={{\r\n              ...styles.floatingButton,\r\n              background: '#3b82f6',\r\n              color: 'white'\r\n            }}\r\n            aria-label=\"Mi ubicación\"\r\n          >\r\n            📍\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Barra de navegación inferior para móvil */}\r\n      {isMobile && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          bottom: 0,\r\n          left: 0,\r\n          right: 0,\r\n          background: 'white',\r\n          borderTop: '1px solid #e5e7eb',\r\n          padding: '8px',\r\n          zIndex: 1001,\r\n          display: 'flex',\r\n          justifyContent: 'space-around',\r\n          gap: '8px'\r\n        }}>\r\n          <button\r\n            onClick={() => onViewChange && onViewChange('dashboard')}\r\n            style={{\r\n              flex: 1,\r\n              padding: '10px',\r\n              background: '#667eea',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '6px',\r\n              fontSize: '12px',\r\n              fontWeight: '500',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'center',\r\n              gap: '2px'\r\n            }}\r\n          >\r\n            <span style={{ fontSize: '16px' }}>📊</span>\r\n            <span>Dashboard</span>\r\n          </button>\r\n          <button\r\n            onClick={() => onViewChange && onViewChange('zones')}\r\n            style={{\r\n              flex: 1,\r\n              padding: '10px',\r\n              background: '#f3f4f6',\r\n              color: '#374151',\r\n              border: '1px solid #e5e7eb',\r\n              borderRadius: '6px',\r\n              fontSize: '12px',\r\n              fontWeight: '500',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'center',\r\n              gap: '2px'\r\n            }}\r\n          >\r\n            <span style={{ fontSize: '16px' }}>🗺️</span>\r\n            <span>Zonas</span>\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Indicador de carga */}\r\n      {!mapLoaded && (\r\n        <div style={{\r\n          position: 'absolute',\r\n          top: '50%',\r\n          left: '50%',\r\n          transform: 'translate(-50%, -50%)',\r\n          textAlign: 'center',\r\n          zIndex: 1001\r\n        }}>\r\n          <div style={{\r\n            width: '50px',\r\n            height: '50px',\r\n            border: '4px solid #f3f3f3',\r\n            borderTop: '4px solid #667eea',\r\n            borderRadius: '50%',\r\n            animation: 'spin 1s linear infinite'\r\n          }}></div>\r\n          <p style={{ marginTop: '10px', color: '#666' }}>\r\n            Cargando mapa...\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      <style jsx>{`\r\n        @keyframes spin {\r\n          0% { transform: rotate(0deg); }\r\n          100% { transform: rotate(360deg); }\r\n        }\r\n        \r\n        @media (max-width: 768px) {\r\n          ::-webkit-scrollbar {\r\n            width: 4px;\r\n            height: 4px;\r\n          }\r\n          \r\n          ::-webkit-scrollbar-track {\r\n            background: #f1f1f1;\r\n          }\r\n          \r\n          ::-webkit-scrollbar-thumb {\r\n            background: #888;\r\n            border-radius: 4px;\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapaQuillonFirebase;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}